"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9207],{54885:(e,t,i)=>{i.d(t,{XE:()=>n,X3:()=>a,d_:()=>l,XD:()=>s});var o=i(51456),r=i(10161);function n(e,t){o.j(e,"app_preset_selection_shown",t),r.default.logEvent("app_preset_selection_shown",t.app_uri,t)}function a(e,t){o.j(e,"onboarding_app_selection",t),r.default.logEvent("onboarding_app_selection",t.preset,t)}function l(e,t){o.j(e,"app_preset_selection",t),r.default.logEvent("app_preset_selection",t.preset_uri,t)}function s(e,t){o.j(e,"app_preset_accepted",t),r.default.logEvent("app_preset_accepted",t.preset_uri,t)}},1927:(e,t,i)=>{i.r(t),i.d(t,{AppInitializationOverlay:()=>A});var o=i(23174),r=i.n(o),n=i(67294),a=i(13991),l=i(480),s=i(81954),d=i(24405),c=i(27848),p=i(95538),u=i(53397),g=i(5366),h=i(21202),v=i(90468),m=i(29369),f=i(82990),w=i(51454),S=i(54885),x=i(51127),y=i(5299),b=i(70442),k=i(12359),C=i(28020),B=i(93959),I=i(54258),_=i(45094),P=i(79315),T=i(82136),W=i(68216),Z=i(42922),V=i(64921),M=i(62896),z=i(28451),D=i(68785),H=i(90530),L=i(75272);function A(e){var t;window.__c={n:"AppInitializationOverlay"};const{collectionViewBlockStore:i}=e,o=(0,l.O7)(),A=(0,d.yK)((e=>({overlay:{position:"absolute",top:0,left:0,overflow:"visible",height:"100vh",width:"100%",zIndex:w.mJ,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:e.sidebarBackground,borderLeft:`1px solid ${e.lightDividerColor}`},welcome:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginLeft:"10%",marginRight:"10%",padding:"64px 16px"},welcomeLogo:{height:48,width:48},welcomeTitle:{marginTop:24,color:e.regularTextColor,fontFamily:f.Z.getHeaderFontFamily({locale:a.SP}),fontWeight:f.Z.fontWeight.bold,fontSize:28,flex:0,display:"flex",flexDirection:"row",alignItems:"center"},welcomeSubtitle:{marginTop:6,fontSize:18,color:e.mediumTextColor,fontWeight:400,flex:0},presets:{marginTop:32,marginBottom:32,gap:12,display:"flex",flexDirection:"column"},presetSelected:{background:"dark"===e.mode?e.popoverBackground:e.buttonBackground,boxShadow:e.outlineBlueInputBoxShadow},presetSelectedCheckmark:{width:24,height:24,color:e.blueButtonBackground,opacity:0,transform:"scale(0.8)",transition:"all 0.2s ease"},presetSelectedCheckmarkShown:{opacity:1,transform:"scale(1)"},preset:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",padding:"16px 14px 16px 16px",background:"dark"===e.mode?e.accentColors.gray[200]:e.buttonBackground,borderRadius:7,boxShadow:e.elevatedButtonBoxShadow,cursor:"pointer",transition:"box-shadow 0.1s ease, background 0.1s ease"},scroller:{overflow:"auto",padding:4},presetHovered:{background:"dark"===e.mode?e.accentColors.gray[200]:e.accentColors.gray[30]},presetTextContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",flex:1},presetIcon:{flexShrink:0,marginTop:2,marginBottom:2,width:20,height:20,marginRight:12},presetTitle:{color:e.regularTextColor,fontWeight:f.Z.fontWeight.medium,fontSize:14,marginBottom:1},presetSubtitle:{color:e.mediumTextColor,fontWeight:f.Z.fontWeight.regular,fontSize:14},previewContainer:{flex:1,overflow:"auto",height:"70%",borderRadius:"8px 0 0 8px",border:e.lightDividerColor,boxShadow:e.largeLightBoxShadow,background:e.popoverBackground},previewImage:{width:"100%",height:"100%"},actionButton:{flex:0,zIndex:w.mJ+1},hamburgerButton:{position:"absolute",zIndex:w.mJ+1,margin:5}})),[]),[E,F]=n.useState(!1),K=(0,s.VK)((()=>P.default.state.currentSpaceViewStore),[]),R=(0,s.VK)((()=>{const e=i.getFormatStore().getKeyStore("app_config_uri").getValue();if(!e)return;return(0,B.ED)(e)}),[i]),[U,j]=n.useState(void 0);n.useEffect((()=>{j(i.getFormatStore().getKeyStore("app_template_preset").getValue())}),[i,j]);const X=(0,s.VK)((()=>{var e;return(null==R||null===(e=R.presets)||void 0===e?void 0:e.filter((e=>"core"===e.type)))??[]}),[null==R?void 0:R.presets]),[O,$]=n.useState(U);n.useEffect((()=>{$(U)}),[U,$]),n.useEffect((()=>{R&&S.XE(o,{app_uri:R.uri})}),[R,o]);const G=n.useMemo((()=>null==R?void 0:R.presets.find((e=>e.uri===U))),[R,U]),N=n.useMemo((()=>{if(R&&G&&R.uri===c.xc)return(0,I.L)(G)}),[R,G]),J=n.useMemo((()=>{if(!R)return;const t={};return R.presets.forEach((i=>{var o;const r=R.uri===c.xc?(0,I.L)(i):null===(o=i.previews)||void 0===o?void 0:o.find((e=>"previewRootId"in e));r&&(t[i.uri]=W.G.createChildStore(e.collectionViewBlockStore,{id:r.previewRootId,table:h.iU,spaceId:r.spaceId}))})),t}),[R,e.collectionViewBlockStore]),Y=(0,s.VK)((()=>{const e=(0,C.ui)(o);return{left:e,right:e,bottom:H.Z.paddingBottom(o),coverHeight:H.Z.defaultPageCoverHeight(o)}}),[o]),q=(0,s.VK)((()=>{var e;const t=null==G||null===(e=G.previews)||void 0===e?void 0:e.find((e=>"url"in e&&!(0,p.xL)(e)));if(t&&"url"in t)return t.url}),[null==G?void 0:G.previews]),Q=(0,s.VK)((()=>o.device.isPhone),[o]),ee=(0,s.VK)((()=>!!o.device.isMobileBrowser||!o.device.isMobileNative&&!(0,_.in)(o)),[o]);return n.useEffect((()=>{"rendered"!==P.default.state.renderPhase&&P.default.setState({...P.default.state,renderPhase:"rendered"})}),[]),R?r()(z.P,{calloutId:"better_template_initialization"},void 0,ee&&r()("div",{style:A.hamburgerButton},void 0,r()(L.Z,{})),r()("div",{style:A.overlay},void 0,r()("div",{style:A.welcome},void 0,r()("div",{style:A.scroller},void 0,r()("div",{style:A.welcomeLogo},void 0,r()("img",{src:R.logo,style:{height:"100%",width:"100%"}})),r()("div",{style:A.welcomeTitle},void 0,R.welcomeTitle??r()(g.FormattedMessage,{id:"apps.AppInitializationOverlay.welcomeTitle.default",defaultMessage:"Welcome to {appName}",values:{appName:R.name}})),r()("div",{style:A.welcomeSubtitle},void 0,R.welcomeSubtitle??""),r()("div",{style:A.presets},void 0,X.map((e=>{var t;const i=null!==(t=e.icon)&&void 0!==t&&t.startsWith("/")?r()("img",{src:e.icon,style:{height:"100%",width:"100%"}}):r()(M.Z,{},void 0,e.icon??"");return r()(V.Z,{style:{height:"auto",...A.preset,...U===e.uri?A.presetSelected:{}},disabled:E,hoveredStyle:A.presetHovered,onClick:()=>{j(e.uri),S.d_(o,{preset_uri:e.uri})},onMouseEnter:o.device.isMobile?void 0:()=>$(e.uri),onMouseLeave:o.device.isMobile?void 0:()=>$(U)},void 0,r()("div",{style:A.presetIcon},void 0,i),r()("div",{style:A.presetTextContainer},void 0,r()("div",{style:A.presetTitle},void 0,e.name),r()("div",{style:A.presetSubtitle},void 0,e.description)),r()("div",{},void 0,u.Z.checkmark({...A.presetSelectedCheckmark,...U===e.uri?A.presetSelectedCheckmarkShown:void 0})))})))),r()("div",{style:{padding:`0 4px ${o.device.isIOS?"32px":0} 4px`,alignSelf:"stretch"}},void 0,r()(Z.Z,{style:{alignSelf:"stretch",height:36,width:"100%"},disabled:E,onClick:async()=>{if(U){if(F(!0),N){const{currentSpaceStore:t,currentSpaceViewStore:i}=P.default.state;t&&i&&await b.Lf({environment:o,item:N,isPrivate:!1,spaceStore:t,spaceViewStore:i,useMinimalTemplates:!1,initializeStore:e.collectionViewBlockStore})}else{const t=e.collectionViewBlockStore.getParentStore();!t||t.table!==v.bx&&t.table!==m.e0&&t.table!==h.iU||k.createAndCommit({userAction:"initializeApp",environment:o,perform:i=>{if(K){const r=x.ZF({environment:o,spaceViewStore:K,appUri:R.uri,presetUri:U,appParentStore:t,temporaryContainerBlockStore:e.collectionViewBlockStore,transaction:i,from:"app_onboarding"});y.G({environment:o,spaceViewStore:K,appParentStore:t,transaction:i,blockStores:r,creationEntryPoint:{type:"preset",presetUri:U}})}}})}S.XD(o,{preset_uri:U})}}},void 0,r()(g.FormattedMessage,{id:"apps.AppInitializationOverlay.startButton",defaultMessage:"Get started"}),E&&r()(D.Z,{style:{marginLeft:5},isWhite:!0})))),!Q&&r()("div",{style:A.previewContainer},void 0,J&&O&&J[O]?r()("div",{style:{width:"108%",minWidth:900,height:"auto",minHeight:"100%",position:"relative",paddingTop:N?0:"10%"}},void 0,r()("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999}}),r()(H.Z,{store:J[O],loadingContainerStore:void 0,context:T.S.InAppTemplatePreview,titleStyle:{fontSize:28},paddingBottom:Y.bottom,paddingLeft:Y.left,paddingRight:Y.right,pageCoverHeight:Y.coverHeight,disabled:!0},null===(t=J[O])||void 0===t?void 0:t.id)):r()("img",{src:q,style:A.previewImage})))):null}},31263:(e,t,i)=>{i.r(t),i.d(t,{AppsSetup:()=>H});var o=i(23174),r=i.n(o),n=i(96486),a=i.n(n),l=i(67294),s=i(13991),d=i(480),c=i(81954),p=i(24405),u=i(66673),g=i(21202),h=i(82990),v=i(5366),m=i(54885),f=i(51127),w=i(6467),S=i(28020),x=i(93959),y=i(54258),b=i(29987),k=i(79315),C=i(12768),B=i(82136),I=i(68216),_=i(42922),P=i(68785),T=i(90530),W=i(53397),Z=i(64921);function V(e){window.__c={n:"AppSelector"};const{appTemplate:t,isSelected:i}=e,[o,n]=(0,l.useState)(!1),a=(0,c.VK)((()=>(0,x.SP)(t.uri)),[t.uri]),s=(0,p.yK)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},appButton:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:62,height:62,backgroundColor:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,borderRadius:12,background:"dark"===e.mode?e.accentColors.gray[200]:e.whiteButtonBackground},selectedWrapper:{boxShadow:e.outlineBlueInputBoxShadow,background:"dark"===e.mode?e.accentColors.gray[200]:e.buttonBackground},logo:{width:32,height:32},logoSelected:{filter:"invert(41%) sepia(77%) saturate(2017%) hue-rotate(191deg) brightness(93%) contrast(89%)"},badge:{width:26,height:26,display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:e.invoiceGreen,borderRadius:50,position:"absolute",top:-9,right:-9,border:`2px solid ${e.sidebarBackground}`,webkitBackdropFilter:"blur(12px)",opacity:1,transform:"scale(1)",transition:"opacity 0.2s ease, transform 0.2s ease, background-color 0.1s linear"},selectBadge:{backgroundColor:e.invoiceGreen},selectedBadge:{backgroundColor:e.blueButtonBackground},deselectBadge:{backgroundColor:e.redBadgeBackground},appName:{marginTop:8,fontSize:14,fontWeight:500,textAlign:"center"},buttonBadgeIcon:{width:16,height:16,fill:"white"}})),[]),d=(0,l.useCallback)((()=>{i?e.onDeSelect(t.uri):e.onSelect(t.uri),n(!1)}),[t.uri,i,e]);return r()("div",{style:s.container,onMouseEnter:()=>{n(!0),e.onHover()},onMouseLeave:()=>{n(!1),e.onUnhover()}},void 0,r()(Z.Z,{style:{...s.appButton,...i?s.selectedWrapper:{}},onClick:d,ignoreLocalHoverState:!0},void 0,r()("img",{style:{...s.logo,...i?s.logoSelected:{}},src:a?a.logo:t.icon})),r()(Z.Z,{style:{...s.badge,...i?o?s.deselectBadge:s.selectedBadge:o?s.selectBadge:{opacity:0,transform:"scale(0.4)"}},onClick:d,ignoreLocalHoverState:!0},void 0,i?o?W.Z.closeSmall({width:16,height:16,fill:"white"}):W.Z.thinCheck({width:15,height:15,fill:"white"}):W.Z.plusThick({width:16,height:16,fill:"white"})),r()("div",{style:s.appName},void 0,a?a.name:t.shortName))}const M=a().compact(x.pP.map((e=>{var t;return null===(t=(0,x.SP)(e))||void 0===t?void 0:t.presets.find((t=>t.uri===e))})));function z(e){window.__c={n:"AppPreview"};const t=(0,d.O7)(),i=(0,c.VK)((()=>{const e=(0,S.ui)(t);return{left:e,right:e,bottom:T.Z.paddingBottom(t),coverHeight:T.Z.defaultPageCoverHeight(t)}}),[t]),o=l.useMemo((()=>{const e={};return M.forEach((i=>{var o;const r=i.uri.startsWith("notion://wiki")?(0,y.L)(i):null===(o=i.previews)||void 0===o?void 0:o.find((e=>"previewRootId"in e));r&&(e[i.uri]=new I.G(t,{id:r.previewRootId,table:g.iU,spaceId:r.spaceId}))})),e}),[t]),n=e.presetUri.startsWith("notion://wiki"),a=o[e.presetUri];return a?r()("div",{style:{minWidth:900,height:"100%",position:"relative",paddingTop:n?0:"10%"}},void 0,r()(T.Z,{store:a,loadingContainerStore:void 0,context:B.S.InAppTemplatePreview,titleStyle:n?{fontSize:28}:void 0,paddingBottom:i.bottom,paddingLeft:i.left,paddingRight:i.right,pageCoverHeight:i.coverHeight,disabled:!0},a.id),r()("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999,cursor:"pointer"}})):null}function D(e){window.__c={n:"Carousel"};const t=(0,l.useCallback)(((e,t)=>(e%t+t)%t),[]),i=(0,u.Kt)(e.forceIndex,200,((e,t)=>e===t)),[o,n]=(0,l.useState)(0);(0,l.useEffect)((()=>{if(void 0===i)return;const r=t(-o,e.items.length),a=t(i-r,e.items.length);n((e=>e-a))}),[o,n,i,t,e.items.length]),(0,l.useEffect)((()=>{const t=setInterval((()=>{void 0===i&&n((e=>e-1))}),e.rotationDelayMs??2500);return()=>{clearInterval(t)}}),[n,i,e.rotationDelayMs]);const s=(0,p.yK)((e=>({item:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"white",borderRadius:"8px 0 0 8px",border:"1px solid rgba(0, 0, 0, 0.05)",boxShadow:"0px 16px 24px rgba(0, 0, 0, 0.06), 0px 2px 6px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04)",overflow:"hidden",transition:"transform 0.5s ease-in-out, opacity 0.5s ease-out"}})),[]),d=e.items.length,c=t(-o,d),g=e.items[t(c-1,d)].node,h=e.items[c].node,v=[...a().times(d,(e=>({key:`before${e}`,node:null}))),...e.items,...a().times(d,(e=>({key:`after${e}`,node:null})))],m=v.map(((i,n)=>{let{key:a}=i;const l=t(n+o,v.length),c=l>=d&&l<2*d,p=`translateX(${(l-d)*(e.offset??12)}px) translateY(${(l-d)*(e.offset??16-1.5*(l-d))}px)`,u=c?1-.15*(l-d):0;return r()("div",{style:{...s.item,zIndex:v.length-l,transform:p,opacity:u}},a,l===d?h:l===d-1?g:void 0)}));return r()("div",{style:{position:"relative",...e.style}},void 0,m)}function H(e){window.__c={n:"AppsSetup"};const[t]=(0,c.AF)(C.default),{currentUserRootStore:i,currentSpaceViewStore:o,currentSpaceStore:n,currentUserSettingsStore:u}=(0,c.VK)((()=>{const{currentUserRootStore:e,currentSpaceViewStore:t,currentSpaceStore:i,currentUserSettingsStore:o}=k.default.state;return{currentUserRootStore:e,currentSpaceViewStore:t,currentSpaceStore:i,currentUserSettingsStore:o}}),[]),g=(0,d.O7)(),[S,x]=(0,l.useState)(!1),[y,B]=(0,l.useState)(void 0),T=(0,p.yK)((e=>({container:{backgroundColor:e.sidebarBackground,width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",borderLeft:`1px solid ${e.lightDividerColor}`},left:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginLeft:"10%",marginRight:"10%",padding:"42px 16px",overflowX:"visible",overflowY:"auto"},right:{flex:1,height:"70%",overflow:"visible"},header:{position:"relative",textAlign:"left",paddingBottom:42},title:{fontWeight:h.Z.fontWeight.semibold,fontSize:28,lineHeight:1.2,color:e.regularTextColor,fontFamily:h.Z.getHeaderFontFamily({locale:s.SP}),marginBottom:16,width:"90%"},subtitle:{fontSize:18,lineHeight:1.45,paddingTop:2,color:e.mediumTextColor,fontWeight:h.Z.fontWeight.regular},apps:{marginBottom:48,display:"inline-flex",flexWrap:"wrap",justifyContent:"space-between"},previewImage:{width:"100%",height:"100%"}})),[]),W=(0,c.VK)((()=>g.device.isPhone),[g]);if(!o||!i||!u)return null;if(!t.isOnboarding||"workspace_setup"!==t.stage)return null;const Z=e=>{const i=a().uniq([...t.selectedPresets,e]),o=a().sortBy(i,(e=>M.findIndex((t=>t.uri===e))));C.default.setState({...t,selectedPresets:o}),m.X3(g,{action:"select",preset:e})},H=e=>{const i=t.selectedPresets.filter((t=>t!==e));C.default.setState({...t,selectedPresets:i}),m.X3(g,{action:"deselect",preset:e})},L=t.selectedPresets.length>0?t.selectedPresets:M.map((e=>e.uri)),A=L.findIndex((e=>(null==y?void 0:y.uri)===e)),E=r()(D,{style:{width:"100%",height:"100%"},items:L.map((e=>({key:e,node:r()(z,{presetUri:e})}))),forceIndex:A>-1?A:void 0});return l.createElement(l.Fragment,null,r()("div",{style:T.container},void 0,r()("div",{style:T.left},void 0,r()("div",{style:{display:"flex",alignItems:"stretch",flexDirection:"column"}},void 0,r()("div",{style:T.header},void 0,r()("div",{style:T.title},void 0,r()(v.FormattedMessage,{id:"apps.workspacesetup.header.title",defaultMessage:"Get started with Notion"})),r()("div",{style:T.subtitle},void 0,r()("div",{},void 0,r()(v.FormattedMessage,{id:"apps.workspacesetup.header.description",defaultMessage:"Add templates to your workspace, and customize them in a few simple steps."})))),r()("div",{style:T.apps},void 0,M.map((e=>r()(V,{appTemplate:e,isSelected:t.selectedPresets.includes(e.uri),onSelect:Z,onDeSelect:H,onHover:()=>B(e),onUnhover:()=>B(void 0)})))),t.selectedPresets.length>0?r()(_.Z,{isLarge:!0,style:{height:40},onClick:async()=>{var e;if(!n||!o)return;x(!0);const i=b.default.mark("continue_with_apps"),r=null===(e=o.getTeamsStores()[0])||void 0===e?void 0:e.id,a=I.zX.createChildStore(n,{table:"team",id:r,spaceId:n.id}),l=o.getCreatedOnboardingTemplates()?[]:await f.Xt({environment:g,presets:t.selectedPresets,spaceStore:n,spaceViewStore:o,teamStore:a});l.length>0&&(t.redirectData={type:"redirect_page",pageId:l[0].id,spaceId:n.id},C.default.setState(t)),await w.lp(g,t),b.default.measure(i,{environment:g,data:{appsSelected:t.selectedPresets}})},disabled:S},void 0,S?r()(P.Z,{isWhite:!0}):r()(v.FormattedMessage,{id:"apps.workspacesetup.button.continueWithChosenApps",defaultMessage:"{num, plural, one {Continue with 1 template} other {Continue with {num} templates}}",values:{num:t.selectedPresets.length}})):r()(_.Z,{isLarge:!0,style:{height:40},onClick:async()=>{x(!0),await w.lp(g,t)},disabled:S},void 0,S?r()(P.Z,{isWhite:!0}):r()(v.FormattedMessage,{id:"apps.workspacesetup.button.continueWithoutChoosingApps",defaultMessage:"I'll add templates later"})))),!W&&r()("div",{style:T.right},void 0,E)))}}}]);