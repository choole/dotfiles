"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4863],{21714:(e,n,t)=>{t.r(n),t.d(n,{default:()=>b});var o=t(23174),i=t.n(o),r=t(67294),a=t(480),l=t(81954),s=t(8848),c=t(7057),u=t(33728),d=t(24211),m=t(77671),f=t(35253),v=t(47307),g=t(92625),h=t(58985),w=t(5978),k=t(95477),p=t(12955),C=t(79315),x=t(73329),y=t(28121),_=t(91754),$=t(65162);function b(){return r.useEffect((()=>{if(k.default.isAdminMode)return f.Bw({bannerStore:x.Z,id:"AdminModeBanner",render:()=>i()(B,{}),type:_.$.Blue,prepend:!0}),()=>{f.qL({bannerStore:x.Z,id:"AdminModeBanner"})}}),[]),null}const A={marginLeft:12,color:s.ZP.white,border:`1px solid ${s.ZP.white}`};function B(){window.__c={n:"AdminModeBannerContent"};const e=(0,a.O7)(),n=(0,l.VK)((()=>C.default.state.currentUserStore),[]),t=(0,l.VK)((()=>null==n?void 0:n.getEmail()),[n]),o="makenotion.com"===(0,u.Gd)(t??""),[s,c]=r.useState("");if(r.useEffect((()=>{!async function(){try{const n=await(0,p.getCookie)(e,"notion_ghost_preferred_role");c((e=>n??""))}catch(n){console.error(n)}}()})),!t)return null;const d="full"===s?"restricted":"full";return i()("div",{},void 0,`You are currently logged in as ${t}`,i()("i",{},void 0,s&&o?` (${y.v[s].text} access)`:""),".",s&&o&&i()(L,{environment:e,currentUserEmail:t,alternateLoginRole:d}),i()($.Z,{style:A,onClick:()=>{w.navigate({environment:e,url:"/__admin"})}},void 0,"Back to Admin Console"),i()($.Z,{style:A,onClick:()=>{m.B(e)}},void 0,"Logout as user"))}function L(e){let{environment:n,currentUserEmail:t,alternateLoginRole:o}=e;const a=r.useCallback((async()=>{const e=await m.N(n,{email:t,intercomLink:"switch role",preferredLoginRole:o});if("failed"===e.type)g.x(),v.showError(e);else{const{userId:i}=e.data,r=`Success! click "Continue" to enter account for "${t}" in ${y.v[o].text} mode.`,a=e.data.expiryTime?`${r} The user has granted access until ${(0,c.Yx)(e.data.expiryTime,"medium_with_time",d.al)}.`:r;g.x(),v.showDialog({message:a,showCancel:!1,keepFocus:!0,items:[{label:"Continue",color:"blue",onAccept:()=>{h.loginAsAdmin({userId:i,environment:n})}}]})}}),[n,t,o]);return i()($.Z,{style:A,onClick:a},void 0,`Switch to ${y.v[o].text} mode`)}}}]);