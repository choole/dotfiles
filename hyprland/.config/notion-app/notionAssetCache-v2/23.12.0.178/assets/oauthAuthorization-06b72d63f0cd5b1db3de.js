"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3370],{63123:(e,t,i)=>{i.d(t,{V:()=>a});i(21703);var o=i(67294);function a(e){const{value:t,validateLoaded:i}=e,a=e.waitTimeInMs||500,[n,r]=(0,o.useState)(!0),s=(0,o.useRef)(),l=void 0!==t&&(!i||n&&i(t));return(0,o.useEffect)((()=>(s.current=window.setTimeout((()=>{r(!1),s.current=void 0}),a),()=>{s.current&&(clearTimeout(s.current),s.current=void 0)})),[a]),(0,o.useEffect)((()=>{l&&s.current&&(r(!1),clearTimeout(s.current),s.current=void 0)}),[l]),void 0!==t&&l?{status:"resolved",value:t}:n?{status:"pending",value:void 0}:{status:"rejected",value:void 0,error:new Error("Reached end of timeout before value became defined.")}}},78948:(e,t,i)=>{i.d(t,{Z:()=>d});var o=i(23174),a=i.n(o),n=(i(67294),i(83355)),r=i(68785),s=i(28992);class l extends n.Z{renderComponent(){return a()(s.Z,{title:a()(r.Z,{})})}}l.displayName="LoadingMenuItem";const d=l},61695:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Be});var o=i(23174),a=i.n(o),n=i(67294),r=i(480),s=i(81954),l=i(24405),d=i(63123),c=i(49085),u=i(15070),p=i(8848),m=i(59054),g=i(56589),h=i(4615),v=i(77420),f=i(9844),b=i(19889),y=i(90965),w=i(9038),S=i(97880),A=i(82990),M=i(64002),k=i(5978),I=i(29974),P=i(21325),x=i(91924),_=i(38755),C=i(21115),N=i(79315),z=i(68216),T=i(62213),V=i(78291),Z=i(3403),F=i(53397),B=i(5366),L=i(82036),W=i(36110),R=i(42922),E=i(63296),O=i(42402);function K(e){window.__c={n:"OauthAuthorizationError"};const{integrationValue:t,oauthParams:i}=e,o=(0,r.O7)(),{oauthErrorType:n,title:s,body:d,primaryAction:c}=function(e){const t=a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.genericError.title",defaultMessage:"Something went wrong"});if("invalidClientId"===e.type)return{oauthErrorType:L._.invalid_request,title:t,body:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidClientId.body",defaultMessage:"Missing or incomplete Client ID. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>a()(O.Z,{href:"https://developers.notion.com/#handling-errors"},void 0,e)}})};if("clientNotFound"===e.type)return{oauthErrorType:L._.invalid_request,title:t,body:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.clientNotFound.body",defaultMessage:"Missing or incomplete Client ID. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>a()(O.Z,{href:"https://developers.notion.com/#handling-errors"},void 0,e)}})};if("invalidResponseType"===e.type)return{oauthErrorType:L._.invalid_request,title:t,body:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidResponseType",defaultMessage:"Missing or invalid response_type. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>a()(O.Z,{href:"https://developers.notion.com/#handling-errors"},void 0,e)}})};if("integrationAlreadyInstalled"===e.type)return{oauthErrorType:L._.access_denied,title:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.title",defaultMessage:"This integration has already been added to {workspaceName}",values:{workspaceName:e.spaceName}}),body:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.body",defaultMessage:"You can review and remove added integrations in Settings."}),primaryAction:{onClick:e.primaryAction,title:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationAlreadyInstalled.openWorkspaceSettingsButton.label",defaultMessage:"Open Settings"})}};if("notAnAdmin"===e.type)return{oauthErrorType:L._.access_denied,title:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.title",defaultMessage:"You're not allowed to add integrations to {workspaceName}",values:{workspaceName:e.spaceName}}),body:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.body",defaultMessage:"Contact an admin to grant you access, or switch to another workspace."}),primaryAction:{onClick:e.primaryAction,title:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.switchWorkspaceButton.label",defaultMessage:"Switch workspace"})}};if("integrationNotApproved"===e.type)return{oauthErrorType:L._.access_denied,title:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationNotApproved.title",defaultMessage:'You are not permitted to add the integration "{integrationName}" to {workspaceName}',values:{integrationName:e.integrationValue.name,workspaceName:e.spaceName}}),body:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.integrationNotApproved.body",defaultMessage:"Contact your system administrator for more information."}),primaryAction:{onClick:e.primaryAction,title:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.notAnAdmin.switchWorkspaceButton.label",defaultMessage:"Switch workspace"})}};if("invalidRedirectUri"===e.type)return{oauthErrorType:L._.invalid_request,title:t,body:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidRedirectUri.body",defaultMessage:"Missing or invalid redirect_uri. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>a()(O.Z,{href:"https://developers.notion.com/#handling-errors"},void 0,e)}})};(0,S.t1)(e.type)}(e),u=function(){const{isMobile:e}=(0,r.Fy)(),t=e?25:48,i=e?18:20;return(0,l.yK)((()=>({container:{textAlign:"center",flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fill:p.ZP.red,width:t,height:t,marginBottom:20,display:"inline-block"},title:{fontSize:i,margin:"0 50px 32px",textAlign:"center",fontWeight:A.Z.fontWeight.medium,marginBottom:12},body:{marginTop:0,marginBottom:24,width:"80%"}})),[t,i])}();return a()("section",{style:u.container},void 0,F.Z.genericError(u.icon),a()("header",{style:u.title},void 0,s),a()("p",{style:u.body},void 0,d),c&&a()("div",{style:u.body},void 0,a()(R.Z,{isLarge:!0,onClick:c.onClick},void 0,c.title)),a()(E.Z,{onClick:()=>{W.V({environment:o,integration:t,errorType:n,params:i})}},void 0,a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.cancelButton.label",defaultMessage:"Cancel"})))}var U=i(10434),D=i.n(U),j=i(15145),G=i(55384),Y=i(26825),$=i(50906),H=i(76463),q=i(77719),J=i(92625),Q=i(41623),X=i(30874),ee=i(31278),te=i(67669),ie=i(47292);function oe(e){window.__c={n:"OauthAuthorizationBotAccessOptionsStep"};const{integrationValue:t,validIntegrationTemplateId:i,botAccessOption:o,setBotAccessOption:r}=e,[{value:s}]=(0,m.r5)((async()=>!!i&&await(0,te.JI)(i)),[i]);n.useEffect((()=>{r(s?"duplicate_template":"pick_pages")}),[s,r]);const d=(0,l.yK)((()=>({container:{display:"grid",gridTemplateRows:"1fr 1fr",gap:8,marginTop:8},icon:{fill:p.ZP.red,width:20,height:20,marginRight:12},errorContainer:{display:"flex",alignItems:"center"}})),[]);return a()("div",{style:d.container},void 0,a()(ae,{disabled:!s,title:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.useTemplate.title",defaultMessage:"Use a template provided by the developer"}),subtitle:s?a()(B.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.useTemplate.subtitle",defaultMessage:"{integrationName} will duplicate this template into the Private pages of your workspace. The integration will then be able to {capabilities} content in this new page.",values:{capabilities:a()(B.FormattedList,{value:(0,ie.O)(t.capabilities),type:"conjunction"}),integrationName:t.name}}):a()("div",{style:d.errorContainer},void 0,a()("div",{},void 0,a()(B.FormattedMessage,{id:"oauthAuthorizationPage.error.invalidTemplate.body",defaultMessage:"The page template is no longer public. <inlinetextlink>Contact the developer</inlinetextlink> for more help.",values:{inlinetextlink:t=>a()(O.Z,{href:`mailto:${e.integrationValue.info.email}`},void 0,t)}}))),icon:F.Z.pageAdd,isSelected:"duplicate_template"===o,selectOption:()=>r("duplicate_template")}),a()(ae,{title:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.pickPages.title",defaultMessage:"Select pages to share with {integrationName}",values:{integrationName:t.name}}),subtitle:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.botAccessOption.pickPages.subtitle",defaultMessage:"Select one or multiple pages to share with {integrationName}",values:{integrationName:t.name}}),icon:F.Z.taskList,isSelected:"pick_pages"===o,selectOption:()=>r("pick_pages")}))}function ae(e){window.__c={n:"BotAccessOptions"};const{title:t,subtitle:i,icon:o,isSelected:n,selectOption:r,disabled:s}=e,d=(0,l.yK)((e=>({button:{height:"none",padding:12,width:"100%",borderWidth:1,borderColor:e.outlineButtonBorder,borderRadius:4,cursor:s?"not-allowed":void 0},buttonSelected:{background:"white",borderWidth:2,borderColor:p.ZP.blue,padding:11,boxShadow:"0px 4px 8px rgba(66, 129, 219, 0.09), 0px 0px 2px rgba(0, 0, 0, 0.06), 0px 0px 1px rgba(0, 0, 0, 0.04)"},option:{width:"100%",whiteSpace:"normal",display:"grid",gridTemplateColumns:"min-content auto min-content",padding:6},text:{overflowWrap:"normal"},title:{fontSize:14,fontWeight:A.Z.fontWeight.medium,color:p.ZP.frontTextMedium,marginBottom:6},subtitle:{fontSize:12,lineHeight:"140%",color:e.mediumTextColor},icon:{width:14,height:14,color:p.ZP.regularIconColor,marginRight:12}})),[s]);return a()(E.Z,{onClick:r,style:d.button,hovered:n,hoveredStyle:d.buttonSelected,pressedStyle:d.buttonSelected,disabled:s},void 0,a()("div",{style:d.option},void 0,o(d.icon),a()("div",{style:d.text},void 0,a()("div",{style:d.title},void 0,t),a()("div",{style:d.subtitle},void 0,i))))}var ne=i(74181),re=i(11106);function se(e){window.__c={n:"OauthAuthorizationPagePickerStep"};const{integrationValue:t,selectedBlockIdsStore:i}=e,o=(0,ne.VM)(t),r=(0,l.yK)((e=>({subtitle:{fontSize:14,textAlign:"center",fontWeight:A.Z.fontWeight.medium,marginBottom:16},linkPreviewSubtitle:{fontSize:14,textAlign:"left",marginBottom:16,color:e.lightTextColor}})),[]);return n.createElement(n.Fragment,null,a()("div",{style:r.subtitle},void 0,a()(B.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.title",defaultMessage:'Allow "{integrationName}" to access these pages',values:{integrationName:t.name}})),a()("div",{style:r.linkPreviewSubtitle},void 0,o&&a()(B.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.linkPreviewSubtitle",defaultMessage:"Your selections here will not impact this integration's ability to unfurl links across your workspace"})),a()(re.Z,{selectedBlockIdsStore:i}))}function le(e){var t,i;window.__c={n:"OauthAuthorizationPermissionStep"};const{integrationValue:o,spaceName:r}=e,s=o.info.website_url,d=(0,Y.FD)(o.capabilities),c=(0,w.uw)(o.id),u=o.capabilities,p=(0,l.yK)((()=>({inlineTextLink:{color:"black",textDecoration:"none"}})),[]);return n.createElement(n.Fragment,null,a()("div",{},void 0,a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.intro",defaultMessage:"<inlinetextlink>{integrationName}</inlinetextlink> will have permission to",values:{integrationName:o.name,inlinetextlink:e=>s?a()(O.Z,{href:s,style:p.inlineTextLink},void 0,e):e}})),(null==u?void 0:u.read_content)&&a()(de,{icon:F.Z.eye,title:a()(B.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithInheritedAccess",defaultMessage:"View pages you have access to"}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithAdminAccess",defaultMessage:"View all pages"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContent",defaultMessage:"View pages you select"})},void 0,a()(B.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to view pages you can view.",values:{integrationName:o.name}}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to view all pages in your workspace",values:{integrationName:o.name}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readContent.description",defaultMessage:"{integrationName} will be able to view pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:o.name}})),(null==u?void 0:u.update_content)&&a()(de,{icon:F.Z.scribble,title:a()(B.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithInheritedAccess",defaultMessage:"Edit pages you have access to"}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithAdminAccess",defaultMessage:"Edit all pages"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContent",defaultMessage:"Edit pages you select"})},void 0,a()(B.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to edit pages you can edit",values:{integrationName:o.name}}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to edit all pages",values:{integrationName:o.name}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.updateContent.description",defaultMessage:"{integrationName} will be able to edit pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:o.name}})),(null==u?void 0:u.insert_content)&&a()(de,{icon:F.Z.pageAdd,title:a()(B.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContentWithInheritedAccess",defaultMessage:"Create new content within pages you have access to"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContent",defaultMessage:"Create new content within pages you select"})},void 0,a()(B.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to add new content or sub-pages wherever you have permission to add new content or sub-pages",values:{integrationName:o.name,workspaceName:r}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertContent.description",defaultMessage:"{integrationName} will be able to add new content or sub-pages to pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:o.name,workspaceName:r}})),(null==u?void 0:u.read_comment)&&a()(de,{icon:F.Z.topbarComment,title:a()(B.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithInheritedAccess",defaultMessage:"View comments within pages you have access to"}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithAdminAccess",defaultMessage:"View all comments"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readComment",defaultMessage:"View comments within pages you select"})},void 0,a()(B.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to view comments within pages you can access",values:{integrationName:o.name}}:c?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readCommentWithAdminAccess.description",defaultMessage:"{integrationName} will be able to view comments within all pages",values:{integrationName:o.name}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.readComment.description",defaultMessage:"{integrationName} will be able to view comments within pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:o.name}})),(null==u?void 0:u.insert_comment)&&a()(de,{icon:F.Z.topbarCommentFilled,title:a()(B.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertCommentWithInheritedAccess",defaultMessage:"Create comments within pages you have access to"}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertComment",defaultMessage:"Create comments within pages you select"})},void 0,a()(B.FormattedMessage,d?{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertCommentWithInheritedAccess.description",defaultMessage:"{integrationName} will be able to create comments within pages you can access",values:{integrationName:o.name}}:{id:"oauthAuthorizationPage.permissionStep.permissionListItem.insertComment.description",defaultMessage:"{integrationName} will be able to create comments within pages you select in the next step. You can also share pages later with {integrationName} in Notion",values:{integrationName:o.name}})),((null==u?void 0:u.read_user_without_email)||(null==u?void 0:u.read_user_with_email))&&a()(de,{icon:F.Z.settingsMembersFilled,title:null!==(t=o.capabilities)&&void 0!==t&&t.read_user_with_email?a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsersAndEmail",defaultMessage:"View workspace users and their emails"}):a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsers",defaultMessage:"View workspace users"})},void 0,null!==(i=o.capabilities)&&void 0!==i&&i.read_user_with_email?a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsersAndEmail.detail",defaultMessage:"{integrationName} will be able to see basic information about all workspace members and guest data, including their names, profile images, and email addresses",values:{integrationName:o.name}}):a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.viewUsers.detail",defaultMessage:"{integrationName} will be able to see basic information about all workspace members and guests, like their names and profile images, but not their email addresses",values:{integrationName:o.name}})),(null==u?void 0:u.webhooks)&&a()(de,{icon:F.Z.notificationUnread,title:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.sendWebhooks",defaultMessage:"Receive updates on workspace activity"})},void 0,a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.permissionListItem.sendWebhooks.description",defaultMessage:"Changes to pages, permissions, or workspace settings will be shared with {integrationName}",values:{integrationName:o.name}})))}function de(e){window.__c={n:"PermissionDetailToggle"};const[t,i]=n.useState(!1),o=(0,l.yK)((e=>({permissionItem:{border:`1px ${p.FN.dark.gray[850]} solid`,borderRadius:4,marginTop:8},permissionItemTitle:{display:"flex",justifyContent:"space-between",padding:"6px 12px",cursor:"pointer",userSelect:"none"},permissionItemHeading:{display:"flex",alignItems:"center"},permissionItemDetails:{paddingLeft:38,paddingRight:24,transition:"all 0.2s ease",color:e.mediumTextColor},rightStyle:{width:22,height:18},sharedIconStyle:{width:24,height:16,textAlign:"center"}})),[]);return a()("div",{style:o.permissionItem},void 0,a()("div",{style:o.permissionItemTitle,onClick:()=>i(!t)},void 0,a()("div",{style:o.permissionItemHeading},void 0,a()("div",{style:o.sharedIconStyle},void 0,e.icon({width:16,height:16,color:p.ZP.regularIconColor})),a()("div",{},void 0,e.title)),e.children&&a()("div",{style:{display:"flex",alignItems:"center"}},void 0,F.Z.chevronDownThin({width:12,height:12,color:p.ZP.lightIconColor,transform:t?"rotate(180deg)":void 0,transition:"transform 0.2s ease"}))),a()("div",{style:{...o.permissionItemDetails,opacity:t?1:0,flex:t?1:0,paddingBottom:t?8:0,transform:t?"translate3d(0,-4px,0)":"translate3d(0,-8px,0)"}},void 0,t&&e.children))}const ce={permissions:{header:!0,warning:!0,footer:!0},bot_access_option:{header:!0,warning:!1,footer:!0},page_picker:{header:!1,warning:!1,footer:!1}},ue=(0,B.defineMessages)({loadingMessage:{id:"oauthAuthorization.loadingMessage",defaultMessage:"Authorizing…"}});function pe(e){const{showApprovalWarning:t}=e,[i,o]=n.useState("permissions"),[r,s]=n.useState("duplicate_template"),[l,d]=n.useState(void 0),c=ce[i].header,u=t&&ce[i].warning,p=ce[i].footer;return n.createElement(n.Fragment,null,c&&n.createElement(ve,e),n.createElement(fe,D()({},e,{currentStep:i,botAccessOption:r,setBotAccessOption:s})),n.createElement(be,D()({},e,{currentStep:i,setCurrentStep:o,acceptedIntegrationCapabilities:l,setAcceptedIntegrationCapabilities:d,botAccessOption:r})),u&&a()("div",{style:{display:"flex",alignItems:"center",marginTop:20}},void 0,a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.integrationApprovalNotice",defaultMessage:"Authorizing this integration will add it to your workspace's approval list. Other workspace members will be able to install this integration."})),p&&n.createElement(ye,e))}function me(){const{isMobile:e}=(0,r.Fy)();return(0,l.yK)((t=>({title:{fontSize:e?18:20,margin:"0 50px 32px",textAlign:"center",fontWeight:A.Z.fontWeight.medium},inlineTextLink:{color:"black",textDecoration:"none"},buttonGroup:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:24},footer:{fontSize:A.Z.fontSize.UISmall.desktop,color:t.mediumTextColor,paddingTop:32,paddingBottom:16},innerFooterContainer:{color:t.regularTextColor,fontWeight:A.Z.fontWeight.semibold,marginBottom:4}})),[e])}const ge={cancel:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.cancelButton.label",defaultMessage:"Cancel"}),back:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.backButton.label",defaultMessage:"Back"})},he={bot_access_option:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.nextButton.label",defaultMessage:"Next"}),page_picker:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.continueButton.label",defaultMessage:"Select pages"}),authorize:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.selectPagesStep.finishButton.label",defaultMessage:"Allow access"})};function ve(e){window.__c={n:"IntegrationHeader"};const{integrationValue:t,spaceName:i}=e,o=t.info.website_url,r=t.info.icon?{pointer:{table:f.K2,id:t.id},icon:t.info.icon}:void 0,s=me();return n.createElement(n.Fragment,null,a()("div",{style:{padding:15}},void 0,a()(ee.Z,{icon:r,disabled:!0,title:t.name,size:54,isEmptyPage:!1,style:{margin:"auto"}})),a()("div",{style:s.title},void 0,a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.title",defaultMessage:"<inlinetextlink>{integrationName}</inlinetextlink> is requesting access to {workspaceName}",values:{integrationName:t.name,workspaceName:i,inlinetextlink:e=>o?a()(O.Z,{style:s.inlineTextLink,href:o},void 0,e):e}})))}function fe(e){const{currentStep:t,integrationValue:i,spaceName:o}=e;return"permissions"===t?a()(le,{integrationValue:i,spaceName:o}):"bot_access_option"===t?n.createElement(oe,D()({},e,{integrationValue:i})):"page_picker"===t?n.createElement(se,D()({},e,{integrationValue:i})):void(0,S.t1)(t)}function be(e){window.__c={n:"OptionButtons"};const{currentStep:t,setCurrentStep:i,acceptedIntegrationCapabilities:o,setAcceptedIntegrationCapabilities:l,integrationValue:d,validIntegrationTemplateId:c,oauthParams:u,botAccessOption:p,spaceId:m,selectedBlockIdsStore:g}=e,h=(0,r.O7)(),[v,b]=n.useState(!1),y=(0,s.VK)((()=>g.state),[g]),A=(0,s.VK)((()=>{const e=X.Z.state;return(0,Q.yh)({integrationId:d.id,externalIntegrationStoreState:e})}),[d]),M=function(e){const{integrationValue:t,validIntegrationTemplateId:i,botAccessOption:o}=e;if((0,Y.FD)(t.capabilities))return["permissions"];if(i){if("duplicate_template"===o)return["permissions","bot_access_option"];if("pick_pages"===o)return["permissions","bot_access_option","page_picker"];if("admin"===o)return["permissions"];(0,S.t1)(o)}return["permissions","page_picker"]}({integrationValue:d,validIntegrationTemplateId:c,botAccessOption:p}),I=M.indexOf(t),P=(0,w.DB)(d.id),x=M[I-1],_=P?void 0:M[I+1],C=x?ge.back:ge.cancel,z=x?()=>{i(x)}:()=>{!function(e){const{environment:t,oauthParams:i,integrationValue:o,createdBotValue:a}=e;a?k.handleRedirectToLastVisitedPage(t):W.V({environment:t,params:i,integration:o,errorType:L._.access_denied})}({environment:h,oauthParams:u,integrationValue:d,createdBotValue:A})},T=_?he[_]:he.authorize,V=_?()=>{"permissions"===t&&l(d.capabilities),i(_)}:()=>{P?q.$$({environment:h,spaceId:m,from:"workspace_connections_redirect",integration:G.kk.fromValue(f.K2,d)}):async function(e){const{environment:t,botAccessOption:i,integrationValue:o,acceptedIntegrationCapabilities:a,setIsLoading:n,oauthParams:r,spaceId:s,selectedBlockIds:l,createdBotValue:d}=e;let c;"duplicate_template"===i&&(c=o.info.template_page_id),n(!0),J.j({message:ue.loadingMessage});const u=c?[]:Object.keys(l).filter((e=>l[e])),{currentSpaceStore:p,currentSpaceViewStore:m}=N.default.state;if(d){const e=await H.k2({environment:t,templatePageId:c,botValue:d,spaceStore:p,spaceViewStore:m,pages:u});e?k.navigateToBlock({environment:t,store:e,pageVisitSource:j.tY.Duplicate}):k.handleRedirectToLastVisitedPage(t)}else await W.V({environment:t,params:r,integration:o,acceptedIntegrationCapabilities:a,spaceId:s,blockIdsForBot:u,templatePageId:c}),$.Dah(t,{selection:i});J.x(),n(!1)}({environment:h,botAccessOption:p,integrationValue:d,setIsLoading:b,oauthParams:u,spaceId:m,selectedBlockIds:y,createdBotValue:A,acceptedIntegrationCapabilities:o})},Z=me();return a()("div",{style:Z.buttonGroup},void 0,a()(E.Z,{isLarge:!0,onClick:z,style:{height:32}},void 0,C),a()(R.Z,{isLarge:!0,onClick:V,disabled:v},void 0,T))}function ye(e){window.__c={n:"Footer"};const{integrationValue:t,oauthParams:i}=e,o=t.info.terms_of_use_url,n=t.info.privacy_policy_url,r=(i.redirectUri||t.redirect_uris[0]||"").replace("http://","").replace("https://","").split(/[/?#]/)[0],s=me(),l=(0,w.DB)(t.id)?a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.body.partnerIntegration",defaultMessage:"The third-party products or services to which this integration connects are non-Notion Applications. By enabling this integration, you agree to Notion's <notiontermslink>Integration Gallery Terms</notiontermslink>.",values:{notiontermslink:e=>a()(O.Z,{href:"https://notion.notion.site/Integration-Gallery-Terms-of-Service-b74cada95062442d98c2abb1fe3efd9b"},void 0,e)}}):a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.body",defaultMessage:'If you continue, you may be sharing sensitive information. Notion does not review third party integrations such as "{integrationName}". Learn how "{integrationName}" handles your data by reviewing their <privacypolicylink>Privacy Policy</privacypolicylink> and <termsofservicelink>Terms of Service</termsofservicelink>.',values:{integrationName:t.name,privacypolicylink:e=>n?a()(O.Z,{href:n},void 0,e):e,termsofservicelink:e=>o?a()(O.Z,{href:o},void 0,e):e}});return a()("footer",{style:s.footer},void 0,a()("div",{style:s.innerFooterContainer},void 0," ",a()(B.FormattedMessage,{id:"oauthAuthorizationPage.permissionStep.warning.title",defaultMessage:"Make sure you trust {integrationName} ({redirectUriDomain})",values:{integrationName:t.name,redirectUriDomain:r}})),a()("div",{},void 0,l))}var we=i(5074),Se=(i(57658),i(93286)),Ae=i(28125),Me=i(45094),ke=i(27177),Ie=i(77062),Pe=i(76453),xe=i(81236),_e=i(17364),Ce=i(72495),Ne=i(1101);class ze extends we.g6{renderAccountHeader(e){const t=_e.Z.getUserEmailAddress(this.environment,e);return t&&a()(Ne.Z,{emailAddress:t,userId:e,disabled:!1,accountActions:[(0,Se.qu)(e)]})}renderFooter(){return a()("div",{style:(0,Pe.Ax)({isMobile:this.environment.device.isMobile,theme:this.theme})},void 0,a()(Ce.Z,{},void 0,Ae.k(this.environment)&&n.createElement(ke.Z,D()({createType:"add-account",disableLoginLink:this.props.disableLoginLink},this.stores))))}getMenuListSections(e){const{device:t}=this.environment;return[{key:"spaces",render:e=>n.createElement(Ce.Z,D()({},e,{disableMobilePadding:!0,topBorder:t.isMobile,style:{borderBottom:`1px solid ${this.theme.regularDividerColor}`}})),items:this.getSpaceMenuListItems(e)}].filter((e=>e.items.length>0))}getSpaceMenuListItems(e){const{singleSpaceToSelect:t}=this.props,{currentUserRootStore:i,currentSpaceStore:o}=N.default.state,a=[],n=_e.Z.getSpaceViewStores(this.environment,e);if(!i||!o)return[];if(n.sort(((e,t)=>{var i,o;const a=Number(Boolean(null===(i=e.getSpaceStore())||void 0===i?void 0:i.canAdmin()));return Number(Boolean(null===(o=t.getSpaceStore())||void 0===o?void 0:o.canAdmin()))-a})),t){const r=n.find((e=>e.getSpaceId()===t));if(r){const t=r.getSpaceStore();t&&a.push(this.getGeneratedSpaceMenuListItem({currentSpaceStore:o,currentUserRootStore:i,spaceStoreForSpaceView:t,spaceViewStore:r,userId:e}))}}else for(const r of n){const t=r.getSpaceStore();t&&a.push(this.getGeneratedSpaceMenuListItem({currentSpaceStore:o,currentUserRootStore:i,spaceStoreForSpaceView:t,spaceViewStore:r,userId:e}))}return a}getUnreadCountForOtherSpaces(){return 0}getGeneratedSpaceMenuListItem(e){const{onSpaceClick:t}=this.props,{spaceStoreForSpaceView:i,currentSpaceStore:o,currentUserRootStore:r,userId:s,spaceViewStore:l}=e,d=s===r.id&&i.id===o.id,c=(0,_.Cx)(i),u=(0,_.rn)(this.environment,i),p=(0,Pe.bM)(this.environment,this.props.intl,i),m=this.getSpaceSubtitle(this.environment,i);return{key:l.id,render:e=>n.createElement(Ie.Z,D()({},e,{id:l.id,icon:(0,_.Wd)(this.environment,i),spaceName:u,title:p,caption:m,isCheck:d,showDragHandle:!1,disabled:c,disableTooltip:!c,tooltipMessage:a()(B.FormattedMessage,{id:"oauthAuthorizationPage.workspaceSwitcher.disabledWorkspace.tooltip",defaultMessage:"This integration can only be added by a member or admin."})})),action:async e=>{let{event:i}=e;T.Z.setState({...T.Z.state,open:!1}),d||await t({event:i,spaceViewStore:l})}}}getSpaceSubtitle(e,t){const i=xe.Z.getPublicSpaceData(e,t.id);if(!i||"none"===i.role)return;const o=this.props.intl.formatNumber(i.memberCount),a="personal"===t.getPlanType()?Me.js.workspaceSubtitleWithoutMembers:Me.js.workspaceSubtitleWithMembers;let n;n=i.productId?(0,Me.em)(i.subscriptionTier):"team"===t.getPlanType()?Me.js.teamTrialPlan:Me.js.personalPlan;const r=this.props.intl.formatMessage(n);return this.props.intl.formatMessage(a,{numberOfWorkspaceMembers:o,planType:r})}}const Te=(0,B.injectIntl)(ze);function Ve(e){window.__c={n:"OauthAuthorizationTopBar"};const{onSpaceSwitch:t,disableAccountSwitcher:i,singleSpaceToSelect:o}=e,n=function(){const{isMobile:e}=(0,r.Fy)();return(0,l.yK)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"space-between",height:60,paddingLeft:20,paddingRight:8,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:p.ZP.contentBorder},notionLogo:{width:e?28:30,height:e?28:30,marginRight:10,flexShrink:0},notionTitle:{fontWeight:A.Z.fontWeight.medium,fontSize:16},switcherButton:{borderRadius:3,marginBottom:0}})),[e])}();return a()("div",{style:n.container},void 0,F.Z.notionLogoStroked(n.notionLogo),a()("div",{style:n.notionTitle},void 0,"Notion"),a()("div",{style:{flexGrow:1,flexShrink:1}}),a()("div",{style:{flexShrink:0}},void 0,a()(Te,{format:we._S.Regular,onSpaceClick:e=>{let{spaceViewStore:i}=e;return t(i)},shouldShowUnexpandButton:!1,disableLoginLink:!0,buttonStyle:{borderRadius:3,marginBottom:0},disabled:i,singleSpaceToSelect:o})))}const Ze={"929cdebb-09e8-4c5c-bfe5-e8c3c3902987":"development","5dbd3ed0-1160-4532-b10a-1a6749748fc4":"staging"},Fe=["makenotion.com","qasource.com"];function Be(e){window.__c={n:"OauthAuthorization"};const t=e.userId,i=e.spaceId,o=(0,r.O7)(),n=(0,s.VK)((()=>N.default.state.currentUserRootStore),[]),d=(0,s.VK)((()=>N.default.state.currentSpaceStore),[]),c=(0,s.VK)((()=>N.default.state.currentSpaceViewStore),[]),u=(0,s.VK)((()=>{var e;return null===(e=N.default.state.currentUserStore)||void 0===e?void 0:e.getEmail()}),[]),m=(0,s.VK)((()=>!!(t&&i&&c)&&(c.getSpaceId()===i&&c.getUserRootParentId()===t)),[t,i,c]),g=function(e){const{WindowSizeStore:t}=e.environment,i=(0,s.VK)((()=>t.state.width>500),[t]),o=(0,s.VK)((()=>t.state.height<900),[t]);return(0,l.yK)((e=>({layoutContainer:{height:"100%",overflow:"auto",backgroundColor:i?p.ZP.frontCreamBackground:p.ZP.white},pageContainer:{display:"flex",justifyContent:"center"},contentBox:{width:"500px",minHeight:"600px",borderRadius:5,backgroundColor:p.ZP.white,boxShadow:i?e.lightBoxShadow:"none",display:"flex",flexDirection:"column",fontSize:A.Z.fontSize.UIRegular.desktop,marginTop:o?16:i?"calc((100vh - 900px) / 2)":0,marginBottom:40,transition:"all 0.2s ease"},contentBody:{paddingLeft:40,paddingRight:40,paddingTop:25,paddingBottom:25,flex:1,display:"flex",flexDirection:"column"}})),[i,o])}({environment:o});return a()("div",{style:g.layoutContainer},void 0,a()("div",{style:g.pageContainer},void 0,a()("div",{style:g.contentBox},void 0,a()(Ve,{disableAccountSwitcher:m,singleSpaceToSelect:i,onSpaceSwitch:async t=>{await I.ce({environment:o,spaceViewStore:t});const i=t.getSpaceId(),a=Fe.find((e=>null==u?void 0:u.endsWith(e)));if(i&&a&&Ze[i]&&e.integrationId&&e.redirectUri){const t=(0,M.LH)({baseUrl:(0,x.k2)(Ze[i]),clientId:e.integrationId,redirectUri:e.redirectUri,state:e.state});k.navigateToExternalURL({environment:o,url:t,targetSelf:!0})}}}),a()("div",{style:g.contentBody},void 0,a()(Le,{oauthParams:e,spaceStore:d,userRootStore:n})))))}function Le(e){const{oauthParams:t,spaceStore:i,userRootStore:o}=e;return i&&o?a()(We,{oauthParams:t,spaceStore:i,userRootStore:o}):a()(Z.Z,{})}function We(e){window.__c={n:"ErrorOrAuthorizationPage"};const{oauthParams:t,spaceStore:i,userRootStore:o}=e,{integrationId:l,responseType:p}=t,A=(0,r.O7)(),M=(0,s.VK)((()=>_.rn(A,i)),[A,i]),[k,I]=n.useState(),x=(0,s.VK)((()=>{if(l){return(0,z.Kv)(o,{id:l,table:f.K2}).getValue()}}),[l,o]),N=(0,d.V)({value:x,waitTimeInMs:1e3}),[{value:F}]=(0,m.r5)((async()=>{await P.bi(A);const{data:e}=V.default.state;return e?C.NM(e):[]}),[A]),B=(0,s.VK)((()=>{if(F&&F.length>0){return F.map((e=>{const t=(0,z.Kv)(o,{table:v.cZ,id:e.botId}).getValue();if(t&&t.alive&&(0,u.hA)(t)&&t.created_by_id===o.id&&t.created_by_table===b.KJ&&t.integration_id===l)return{botValue:t,pageIds:e.pageIds}})).filter(S.$K)[0]}}),[F,o,l]),L=(0,s.VK)((()=>{let e={};return B&&(e=B.pageIds.reduce(((e,t)=>(e[t]=!0,e)),{})),c.default.createValue(e)}),[B]),W=(0,s.VK)((()=>{if(!l)return!1;const e=i.getBotSettingsStore().getValue();if(!e)return!0;if((0,y.CJ)(e)){const t=e.integration_approval_statuses;return!(!t||!t[l])&&Boolean("approved"===t[l].status)}return!0}),[l,i]),R=(0,s.VK)((()=>{const e=N.value;if(e)return e.info.template_page_id}),[N]),E=(0,s.VK)((()=>Boolean(l&&("datadog"===(0,w.oh)(l)||(0,w.uw)(l)))),[l]),O=(0,s.VK)((()=>_.Cx(i)),[i]),U=(0,s.VK)((()=>i.canAdmin()),[i]);n.useEffect((()=>{N.value&&!k&&I(x)}),[k,I,x,N]);const D=N.value??k;return"pending"===N.status?a()(Z.Z,{}):l&&(0,h.e)(l)||E?D?"code"===p||E?O?a()(K,{oauthParams:t,spaceName:M,type:"notAnAdmin",integrationValue:D,primaryAction:()=>{T.Z.setState({...T.Z.state,open:!0})}}):U||W?g._(D,t.redirectUri)||E?a()(pe,{integrationValue:D,validIntegrationTemplateId:R,spaceName:M,spaceId:i.id,oauthParams:t,showApprovalWarning:U&&!W&&!E,selectedBlockIdsStore:L}):a()(K,{oauthParams:t,spaceName:M,type:"invalidRedirectUri",integrationValue:D}):a()(K,{oauthParams:t,spaceName:M,type:"integrationNotApproved",integrationValue:D,primaryAction:()=>{T.Z.setState({...T.Z.state,open:!0})}}):a()(K,{type:"invalidResponseType",oauthParams:t,spaceName:M,integrationValue:D}):a()(K,{type:"clientNotFound",oauthParams:t,spaceName:M}):a()(K,{type:"invalidClientId",oauthParams:t,spaceName:M})}},27386:(e,t,i)=>{i.d(t,{k:()=>c,Z:()=>p});var o=i(23174),a=i.n(o),n=(i(67294),i(83355)),r=i(34859),s=i(91754),l=i(61519),d=i(18647);function c(e){return e?18:60}class u extends n.Z{static renderDivider(){return a()(l.Z,{size:37})}renderComponent(){const{device:e}=this.environment,{children:t,controlRow:i,bannerText:o,controlRowPaddingTopBottom:n=16}=this.props,l=()=>e.isMobile?18:36;return this.props.disableScroller?a()("div",{style:{paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile)}},void 0,a()("div",{style:{paddingTop:l(),paddingBottom:l()}},void 0,t),i&&a()("div",{style:{paddingTop:n,paddingBottom:n,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`}},void 0,i)):a()("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:this.theme.cardContentBackground}},void 0,o&&a()(s.Z,{type:s.$.Blue,isMobile:!1},void 0,o),a()(d.Z,{type:r.Z.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile),paddingTop:o?15:l(),paddingBottom:o?22:l()}},void 0,t),i&&a()("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile),paddingTop:n,paddingBottom:n,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`}},void 0,i))}}u.displayName="SettingBox";const p=u}}]);