"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7789],{7512:(e,t,s)=>{s.d(t,{A:()=>p,t:()=>h});var i=s(5366),n=s(33929),o=s(79315),a=s(84075),r=s(50906),d=s(54642),l=s(47307),u=s(92625),c=s(58985),m=s(9953);const g=(0,i.defineMessages)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",defaultMessage:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",defaultMessage:"No account to delete."}}),p=function(e){const{userStore:t,data:s,transaction:i}=e,n={};"name"in s&&s.name&&(n.name=s.name),"profilePhoto"in s&&(n.profile_photo=s.profilePhoto),0!==Object.keys(n).length&&m.sW({store:t,data:n,transaction:i})};async function h(e){u.j({message:g.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:i}=o.default.state;if(!s||!i||!t)return u.x(),void l.showErrorMessage(n.default.formatMessage(g.noUserError));r.xti(e),await d.deleteUser(e,{}),await a.transactionQueue.clearForUser(t),c.logoutSingleAccount({environment:e,userId:t}),u.x()}},26797:(e,t,s)=>{s.d(t,{JN:()=>M,f$:()=>w,td:()=>k,fX:()=>C,cQ:()=>I,Fv:()=>T,xD:()=>P,QG:()=>Z});s(57658);var i=s(96486),n=s.n(i),o=s(17126),a=s(80951),r=s(40506),d=s(53877),l=s(42875),u=s(6287),c=s(97880),m=s(95802),g=s(15723),p=s(17746),h=s(68216),f=s(49865),v=s(25498),S=s(42239),y=s(19785),b=s(9953);function M(e){const{environment:t,droppedStores:s,collectionStore:i,duplicate:n,calendarBy:c,transaction:m,results:g,collectionContextStore:p}=e,h=o.ou.fromMillis(e.startOfDay);let v=!0;for(const o of s){if(o.getParentTable()===u.v){v=!1;break}y.zw({childStore:o,parentStore:i,transaction:m})||(v=!1)}const b=S.LQ({environment:t,droppedStores:s,duplicate:n,transaction:m,resolveTemplateVariables:!1});for(const o of b){const e=o.getPropertyStore(c),s=a.Gl(e.getValue())||d.Lg((0,l.r)()),n=d.c$(s,(0,l.r)()),u=h.toFormat(d.Iq);let S;if("date"===n.type||"datetime"===n.type)S={...n,start_date:u};else{const e=d.NK(n,(0,l.r)());if(!e.end)return;const t={...n,start_date:u},s=d.NK(t,(0,l.r)()).start.diff(e.start,"days"),i=e.end.plus(s).toFormat(d.Iq);S={...n,start_date:u,end_date:i}}const y=d.c$(S,r.yw(s)||(0,l.r)());f.mp({environment:t,store:o,collectionStore:i,collectionContextStore:p,coerce:!0,groupsPointer:[],results:g,transaction:m,alreadyMovedToCollection:v}),P({environment:t,type:"dateValue",propertyId:c,store:o,transaction:m,dateValue:y})}}function w(e){const{calendarStore:t,direction:s,target:i}=e;t.setState({...t.state,isDragging:!0,target:i,direction:s})}function k(e){const{calendarStore:t,x:s,y:i,calendarBy:u}=e,c=t.state;if(c.isDragging){const e=a.Gl(c.target.getPropertyStore(u).getValue());if(!e)return;const h=d.c$(e,(0,l.r)()),f=c.temporaryValue||e,v=d.c$(f,(0,l.r)()),S=[];c.dayStoreMap.forEach(((e,t)=>{S.push({store:e,timestamp:t})}));const y=S.find((e=>{let{store:t}=e;const n=m.C.getRectFromStore(t);return Boolean(n&&g.uh(n,s,i))}));let b;if(y){const e=o.ou.fromMillis(y.timestamp),t=e.endOf("day"),s=e.toFormat(d.Iq);if(h){const i=d.NK(h,(0,l.r)());if(c.direction===p.t.Left)if(o.Xp.fromDateTimes(e,t).contains(i.start))b=h;else{let e;e="datetimerange"===h.type||"daterange"===h.type?{...h,start_date:s,end_date:h.end_date}:"datetime"===h.type?{type:"datetimerange",start_date:s,start_time:h.start_time,end_date:h.start_date,end_time:h.start_time,time_zone:h.time_zone,reminder:h.reminder}:{type:"daterange",start_date:s,end_date:h.start_date,reminder:h.reminder};const t=d.NK(e,(0,l.r)());b=!i.end&&t.start>i.start||i.end&&t.start>i.end?v:e}else if(i.end?o.Xp.fromDateTimes(e,t).contains(i.end):o.Xp.fromDateTimes(e,t).contains(i.start))b=h;else{let e;e="date"===h.type?{...h,type:"daterange",end_date:s}:"datetime"===h.type?{...h,type:"datetimerange",end_date:s,end_time:"00:00"}:{...h,end_date:s};const t=d.NK(e,(0,l.r)());b=t.end&&t.end<t.start?v:e}}}if(b&&!n().isEqual(v,b)){const e=d.c$(b,r.yw(f)||(0,l.r)());t.setState({...c,temporaryValue:e})}}}function C(e){const{environment:t,calendarStore:s,calendarBy:i,transaction:n}=e,o=s.state;o.isDragging&&o.temporaryValue&&(P({type:"dateValue",environment:t,dateValue:o.temporaryValue,propertyId:i,store:o.target,transaction:n}),s.setState({...s.state,isDragging:!1}))}function I(e){const{calendarStore:t}=e,s=t.state;s.isDragging&&t.setState({...s,isDragging:!1})}function T(e){const{environment:t,store:s,collectionStore:i,collectionContextStore:n,startDayOfWeek:r,results:u,transaction:c}=e,m=n.dateRangeStart.state,g=(0,l.r)(),p=n.normalizedQueryStore.state;if(!p||!p.calendar_by)return;const h=p.calendar_by,v=d.gQ(m,r,g),S=v.startOf("month"),y=v.endOf("month"),M=o.ou.now().startOf("day");let w;return w=o.Xp.fromDateTimes(S,y).contains(M)?d.hT(M.valueOf(),g):d.hT(d.em(m,r,g).valueOf(),g),b.sW({store:s.getPropertiesStore(),data:{[h]:a.d7(w)},transaction:c}),f.mp({environment:t,store:s,collectionStore:i,collectionContextStore:n,coerce:!0,results:u,groupsPointer:[],transaction:c}),s}function P(e){const{environment:t,store:s,propertyId:i,transaction:n}=e;let o;"timestamp"===e.type?o=d.hT(e.timestampMs.valueOf(),(0,l.r)()):"dateValue"===e.type?o=e.dateValue:(0,c.t1)(e);const r=s.getPropertyValue(i),u=a.d7(o);b.sW({store:s.getPropertiesStore(),data:{[i]:u},transaction:n}),v.H({environment:t,store:s,dateProperty:{id:i,oldValue:r,newValue:u}})}function Z(e){const{environment:t,collectionStore:s,calendarBy:i,store:n,insertStores:o,results:a,collectionContextStore:r,transaction:d}=e,l=n.getPropertyStore(i).getValue();for(const u of o)f.mp({environment:t,store:u,collectionStore:s,collectionContextStore:r,coerce:!0,groupsPointer:[],results:a,transaction:d}),b.sO({store:u.getPropertyStore(i),value:l,transaction:d});return o.map((e=>h.G.createChildStore(s,e.pointer)))}},95209:(e,t,s)=>{s.d(t,{zK:()=>C,Mr:()=>I,eH:()=>T,qg:()=>P,kL:()=>Z,PV:()=>F,Vu:()=>_,M5:()=>x,jC:()=>A,XC:()=>E,jL:()=>R});s(21703),s(57658),s(30541);var i=s(96486),n=s.n(i),o=s(33728),a=s(27006),r=s(29477),d=s(21202),l=s(90468),u=s(97880),c=s(76464),m=s(31299),g=s(79817),p=s(75472),h=s(65598),f=s(23537),v=s(79315),S=s(85834),y=s(29677),b=s(50906),M=s(54642),w=s(57688),k=s(1865);const C=async e=>{const{environment:t,store:s,sudoModeStore:i,permissionsInviteStore:n,onInviteStart:r,contextualInviteStore:m,inviteOrigin:g}=e,{tokenQuery:f}=n.state;if((0,o.oH)(f.trim())&&(n.state.isInviteTargetsEmpty||!(0,y.ow)(n.state))){const e={type:"newUser",value:{email:f.trim()},source:"email"};p.Nd({target:e,permissionsInviteStore:n})||n.setState({...n.state,inviteTargets:[...n.state.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:""})}if(!n.state.isInviteTargetsEmpty&&n.state.inviteTargets.length>0){null==r||r();const e=n.state;if((0,y.ow)(e)){if(e.table===d.iU){if(!(0,h.NZ)(s))throw new Error("Table mismatch.");const{inviteTargets:o,flowId:a,emailMessage:r}=e;n.reset();return(await c.n_({environment:t,store:s,sudoModeStore:i,inviteTargets:o,inviteRole:void 0,isOnboarding:!1,invite:{inviteFlowId:a,inviteMessage:r,inviteOrigin:g}})).success}if(e.table===l.bx){if(!(0,h.Mm)(s))throw new Error("Table mismatch.");const{inviteTargets:o,inviteRole:a,flowId:r}=e;n.reset();return(await c.n_({environment:t,store:s,sudoModeStore:i,inviteTargets:o,inviteRole:a,isOnboarding:!1,invite:{inviteFlowId:r,inviteOrigin:g}})).success}(0,u.t1)(e)}else{const{inviteRole:o,flowId:r,emailMessage:d}=e;n.reset();const l=function(e,t){const s=new Set;var i;(0,h.Y)(e)?null===(i=e.getPermissionItems())||void 0===i||i.forEach((e=>{(0,a.jg)(e)&&s.add(e.user_id)})):e.getPermissionItems().forEach((e=>{(0,a.jg)(e)&&s.add(e.user_id)}));return t.filter((e=>"existingUser"!==e.type||!s.has(e.value.id)))}(s,e.inviteTargets);if((0,a.iC)(o)){const e=await c.n_({environment:t,store:s,sudoModeStore:i,inviteTargets:l,inviteRole:o,isOnboarding:!1,invite:{inviteFlowId:r,inviteMessage:d,inviteOrigin:g}});return e.success&&(null==m||m.setState({...null==m?void 0:m.state,invitedEmailToUserIdMap:e.invitedUsers})),e.success}if((0,h.Y)(s)&&(0,y.Db)(e))return await c.GQ({environment:t,store:s,inviteTargets:e.inviteTargets,inviteRole:o,createNewTeamFlowId:r})}}return!0};const I=e=>{e.permissionsInviteStore.setState({...e.permissionsInviteStore.state,modalOpen:!1,flowId:void 0})},T=e=>{const{permissionsInviteStore:t,contextualInviteStore:s}=e;if(!s)return;const i=[];t.state.inviteTargets.forEach((e=>{if("newUser"===e.type)i.push({email:e.value.email,isGuest:!0});else if("existingUser"===e.type){const t={...e.value,email:e.value.email,isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};i.push(t)}})),s.setState({...s.state,invitedUsers:i})},P=async e=>{const{environment:t,store:s,sudoModeStore:i,permissionsInviteStore:n,contextualInviteStore:o,onInviteClick:a,onInviteComplete:r,inviteOrigin:d,intl:l}=e,{currentSpaceStore:u}=v.default.state;if((0,f.$)(t)&&(null==o?void 0:o.state.selection)===S.uq.workspace_member&&u){if(!(await w.HD({environment:t,flowId:n.state.flowId||"",trackCreateTeamComplete:!1})))return;T({permissionsInviteStore:n,contextualInviteStore:o}),await(0,g.j_)({environment:t,spaceStore:u,contextualInviteStore:o,from:"share_menu",intl:l})}else T({permissionsInviteStore:n,contextualInviteStore:o});let c=!1;try{c=await C({environment:t,store:s,sudoModeStore:i,permissionsInviteStore:n,contextualInviteStore:o,onInviteStart:()=>{null==a||a()},inviteOrigin:d})}catch(m){}finally{null==r||r(c)}},Z=async e=>{const{environment:t,permissionsInviteStore:s,from:i}=e;await p.Aw({environment:t,permissionsInviteStoreState:s.state,from:i})||s.reset()},F=e=>{const{permissionsInviteStore:t,targetToRemove:s,defaultRoleForNonBot:i}=e;if(!t.state.isInviteTargetsEmpty)if((0,y.ow)(t.state))if((0,y.ow)(t.state)){const e=t.state.inviteTargets.filter((e=>e!==s));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:i,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}else(0,u.t1)(t.state);else{const e=t.state.inviteTargets.filter((e=>e!==s));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:i,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}},_=e=>{const{environment:t,onUpgradeButtonClick:s,upgradeButtonName:i}=e;k.y(t,{from:i,for:"plus"}),null==s||s()};async function x(e,t){const s=new Set(t),i=Array.from(s).map((async t=>{const s=await M.findUser(e,{email:t});if("success"===s.type){const e=s.data;if(e.value){return{type:"existingUser",value:e.value.value}}}return{type:"newUser",value:{email:t},source:"email"}}));return await Promise.all(i)}const A=async e=>{const t="invitee",{environment:s,permissionsInviteStore:i,event:n}=e;if(!i.state.isInviteTargetsEmpty&&(0,y.ow)(i.state)){const e=n.target.value;i.setState({...i.state,inputFocus:t,tokenQuery:e})}else{const e=n.target.value,{extractedEmails:a,newInputValue:r}=(0,o.zI)(e),d=(await x(s,a)).filter((e=>!p.Nd({target:e,permissionsInviteStore:i}))),l=[...i.state.inviteTargets,...d];l.length>0?i.setState({...i.state,inviteTargets:l,isInviteTargetsEmpty:!1,inputFocus:t,tokenQuery:r}):i.setState({...i.state,inviteTargets:[],isInviteTargetsEmpty:!0,inputFocus:t,tokenQuery:r})}},E=e=>{const{environment:t,newRole:s,permissionsInviteStore:i}=e,{state:n}=i;b.TCs(t,{...p.a_(t,n),invite_updated_role:s}),!n.isInviteTargetsEmpty&&(0,y.ow)(n)||i.setState({...n,inviteRole:s})},R=async e=>{const{query:t,environment:s,sectionLimit:i,intl:o,membersOnly:a}=e,{currentSpaceStore:d}=v.default.state;if(!d)return{inviteUsers:[],inviteBots:[],inviteGroups:[]};const{userLimit:l,botLimit:u,groupLimit:c,importContactLimit:g}=i,[p,h,f,{user:S,email:y},b]=await Promise.all([l>0?m.Yu({environment:s,query:t,membersOnly:a}):[],u>0?m.RF({environment:s,query:t}):[],c>0?m.$w({query:t,intl:o}):[],m.yy(s,t),g>0?Promise.race([M.searchContacts(s,{spaceId:d.id,limit:g,query:t}),(0,r.Xb)(1500,void 0)]):void 0]),w=p.slice(0,l).map((e=>({type:"existingUser",value:e}))),k=h.slice(0,u).map((e=>({type:"bot",value:e}))),C=f.slice(0,c).map((e=>({type:"group",value:e})));S&&w.unshift({type:"existingUser",value:S}),y&&w.unshift({type:"newUser",value:{email:y},source:"email"});let I=[];return b&&"success"===b.type&&(I=b.data.contacts.map((e=>({type:"newUser",value:{email:e.email,name:e.name,avatar_url:e.profile_photo},source:e.type})))),{inviteUsers:n().uniqBy(w,(e=>e.value.email)),inviteBots:k,inviteGroups:C,importedContacts:I}}},97832:(e,t,s)=>{s.d(t,{Z:()=>I});var i=s(23174),n=s.n(i),o=s(96486),a=s.n(o),r=(s(67294),s(480)),d=s(24405),l=s(8848),u=s(53397),c=s(90965),m=s(82990),g=s(5366),p=s(7512),h=s(50906),f=s(86080),v=s(38755),S=s(5971),y=s(79315),b=s(92083),M=s(11066),w=s(63296),k=s(93007),C=s(55422);const I=function(e){var t;window.__c={n:"AccountDeletion"};const s=(0,r.O7)(),{device:i}=s,o=(0,d.yK)((e=>({icon:{width:20,height:20,fill:e.lightIconColor}})),[]),I=Boolean(null===(t=e.userEmailDomainSettings)||void 0===t?void 0:t.isDomainVerified),T=(0,S.E)("enable_delete_managed_users"),P=I&&T,Z=P?n()(g.FormattedMessage,{defaultMessage:"Your organization has disabled account deletion.",id:"profileSettings.accountDeleteButton.disabledForManagedUser.tooltip"}):null,F=async()=>{const{currentUserStore:e,currentUserRootStore:t}=y.default.state;if(!e||!t)return;if(!e.isDefined())return;const i=a().compact(t.getSpaceViewStores().map((e=>e.getSpaceStore()))).filter((t=>!(0,c.XO)(e.id,t.getModel(),t.getRole()))),o=a().compact(i.map((e=>({id:e.id,name:(0,v.rn)(s,e)}))));h.qPY(s);await f.b({width:420,message:n()("div",{},void 0,n()("div",{},void 0,n()(g.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.warning",defaultMessage:"This action cannot be undone. This will permanently delete your entire account. All private workspaces will be deleted, and you will be removed from all shared workspaces."}),o.length>0&&n()("ul",{style:{padding:0}},void 0,o.map((e=>{let{id:t,name:s}=e;return n()("li",{style:{marginTop:6,color:l.ZP.red,fontWeight:m.Z.fontWeight.medium,listStyle:"none"}},t,s)})))," ",n()(g.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})),n()(k.Z,{style:{marginTop:16},translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente su cuenta completa. Se eliminarán todas las áreas de trabajo privadas y se eliminará de todas las áreas de trabajo compartidas. Por favor, escriba su correo electrónico para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит всю вашу учетную запись. Все частные рабочие области будут удалены, и вы будете удалены из всех общих рабочих областей. Пожалуйста, введите ваш адрес электронной почты для подтверждения.",zh:"此操作无法撤消。 这将永久删除您的整个帐户。 将删除所有私有工作空间，您将从所有共享工作空间中删除。 请输入您的电子邮箱进行确认。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird Ihr gesamtes Konto dauerhaft gelöscht. Alle privaten Arbeitsbereiche werden gelöscht und Sie werden aus allen freigegebenen Arbeitsbereichen entfernt. Bitte geben Sie Ihre E-Mail-Adresse zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte en entier. Tous les espaces de travail privés seront supprimés et vous serez supprimé de tous les espaces de travail partagés. Veuillez taper votre email pour confirmer.",ja:"この操作を元に戻すことはできません。 これによりアカウント全体が完全に削除されます。 すべてのプライベートワークスペースが削除され、あなたはすべての共有ワークスペースから削除されます。 確認のためにメールアドレスを入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'intero account. Tutti gli spazi di lavoro privati verranno eliminati e verranno rimossi da tutti gli spazi di lavoro condivisi. Inserisci la tua email per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente sua conta inteira. Todos os espaços de trabalho privados serão excluídos e você será removido de todos os espaços de trabalho compartilhados. Por favor, digite o seu email para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt uw gehele account permanent verwijderd. Alle privéwerkruimten worden verwijderd en u wordt verwijderd uit alle gedeelde werkruimten. Voer je e-mailadres in om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie całego konta. Wszystkie prywatne obszary robocze zostaną usunięte, a użytkownik zostanie usunięty ze wszystkich współużytkowanych obszarów roboczych. Wpisz swój e-mail, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort hela ditt konto permanent. Alla privata arbetsytor kommer att raderas, och du kommer att tas bort från alla delade arbetsytor. Vänligen skriv in din email för att bekräfta.",uk:"Цю дію не можна скасувати. Таким чином буде видалено весь обліковий запис назавжди. Всі приватні робочі області будуть видалені, і ви будете видалені з усіх спільних робочих областей. Будь ласка, введіть електронний лист для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette hele kontoen din. Alle private arbeidsområder blir slettet, og du vil bli fjernet fra alle delte arbeidsområder. Vennligst skriv inn din epost for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu işlem hesabınızın tamamını kalıcı olarak siler. Tüm özel çalışma alanları silinecek ve paylaşılan tüm çalışma alanlarından kaldırılacaksınız. Lütfen onaylamak için e-postanızı yazın.",cs:"Tuto akci nelze vrátit zpět. Tím bude trvale smazán celý váš účet. Všechny soukromé pracovní prostory budou smazány a budete ze všech sdílených pracovních prostor odstraněni. Pro potvrzení zadejte svůj e-mail.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn toàn bộ tài khoản của bạn. Tất cả các không gian làm việc riêng tư sẽ bị xóa và bạn sẽ bị xóa khỏi tất cả các không gian làm việc chung. Vui lòng nhập email của bạn để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette hele din konto. Alle private arbejdsområder slettes, og du vil blive fjernet fra alle delte arbejdsområder. Indtast venligst din email for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a teljes fiókot. Minden privát munkaterület törlődik, és eltávolításra kerül minden megosztott munkaterületről. Kérjük, írja be e-mail címét, hogy megerősítse.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي الإجراء إلى حذف حسابك بالكامل. سيتم أيضا حذف جميع مساحات العمل الخاصة ، وستتم إزالتك من جميع مساحات العمل المشتركة. يرجى كتابة البريد الإلكتروني الخاص بك للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบบัญชีทั้งหมดของคุณอย่างถาวร พื้นที่ทำงานส่วนตัวทั้งหมดจะถูกลบและคุณจะถูกลบออกจากพื้นที่ทำงานที่ใช้ร่วมกันทั้งหมด กรุณาพิมพ์อีเมลของคุณเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את כל החשבון שלך. כל סביבות העבודה הפרטיות יימחקו, ותוסר מכל סביבות העבודה המשותפות. הקלד את האימייל שלך כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa koko tilin pysyvästi. Kaikki yksityiset työtilat poistetaan ja poistetaan kaikista jaetuista työtiloista. Vahvistaaksesi kirjoita sähköpostiosoitteesi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus seluruh akun Anda. Semua ruang kerja pribadi akan dihapus, dan Anda akan dihapus dari semua ruang kerja bersama. Ketikkan email Anda untuk mengonfirmasi."}})),acceptLabel:0===o.length?n()(g.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",defaultMessage:"Permanently delete account"}):s.device.isMobile?n()(g.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",defaultMessage:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:o.length}}):n()(g.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",defaultMessage:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:o.length}}),requiredInputValue:e.getEmail()})&&(h.psf(s),b.Z.reset(),p.t(s))};return n()(C.Z,{type:"custom",useFlexboxStyle:!0,isMobile:i.isMobile,title:n()(g.FormattedMessage,{id:"profileSettings.accountDeletionSetting.title",defaultMessage:"Delete my account"}),caption:n()(g.FormattedMessage,{id:"manageActiveSessions.accountDeletionSetting.label",defaultMessage:"Permanently delete the account and remove access from all workspaces."}),isCritical:!0,customButton:i.isMobile?n()("div",{style:{marginTop:12}},void 0,n()(w.Z,{isLarge:!0,isRed:!0,onClick:F,disabled:P,disabledFeedback:P},void 0,n()(g.FormattedMessage,{id:"profileSettings.deleteMyAccount.button.label",defaultMessage:"Delete my account"}))):n()(M.Z,{style:{borderRadius:"0.25em"},onClick:F,disabled:P,disabledFeedback:P},void 0,u.Z.chevronRightRoundedThin(o.icon)),disabled:P,tooltipLabel:Z})}},86125:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(23174),n=s.n(i),o=s(67294),a=s(5366),r=s(74136);function d(e){return o.createElement(r.Z,e,"membership_admin"===e.role?n()(a.FormattedMessage,{id:"spacePermissionsSettings.user.membershipAdmin",defaultMessage:"Membership admin"}):n()(a.FormattedMessage,{id:"spacePermissionsSettings.user.workspaceOwner",defaultMessage:"Workspace owner"}))}},79092:(e,t,s)=>{s.d(t,{Z:()=>c});var i=s(23174),n=s.n(i),o=(s(67294),s(83355)),a=s(5366),r=s(37181),d=s(79315),l=s(55422);class u extends o.Z{constructor(){super(...arguments),this.handleStartOfWeekToggle=()=>{1===this.getStartDayOfWeek()?r.rx(this.environment):r.Zf(this.environment)}}renderComponent(){const{device:e}=this.environment;return n()(l.Z,{isMobile:e.isMobile,title:n()(a.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"}),caption:n()(a.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===this.getStartDayOfWeek(),onToggle:this.handleStartOfWeekToggle})}getStartDayOfWeek(){const{currentUserSettingsStore:e}=d.default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}}u.displayName="CalendarSettings";const c=u},21752:(e,t,s)=>{s.d(t,{K:()=>v,Z:()=>S});var i=s(23174),n=s.n(i),o=(s(67294),s(81954)),a=s(54368),r=s(77420),d=s(19889),l=s(97880),u=s(5366),c=s(86125),m=s(88198),g=s(70301),p=s(64369),h=s(45653);function f(e){const{actorStore:t,avatar:s,isLarge:i}=e,o=i?32:28;return t?t.table===r.cZ?n()(g.Z,{botStore:t,size:o}):t.table===d.KJ?n()(h.Z,{userStore:t,size:o}):t.table===a.y?n()(h.Z,{userStore:void 0,size:o}):void(0,l.t1)(t):n()(h.Z,s?{avatar:s,size:o}:{userStore:void 0,size:o})}function v(e){return"membership_admin"===e?"membership_admin":"editor"===e||"admin"===e?"admin":"none"===e||"guest"===e?"guest":"team_level_guest"===e?"team_level_guest":void("member"!==e&&"read_and_write"!==e&&"no_access"!==e&&"not_in_space"!==e&&e&&(0,l.t1)(e))}const S=function(e){window.__c={n:"CellMemberAvatar"};const t=(0,u.useIntl)(),{actorStore:s,avatar:i,containerStyle:a,id:r,spaceRole:d,avatarBadge:l,caption:g,isLarge:h}=e,v="admin"===d||"membership_admin"===d,S="guest"===d||"team_level_guest"===d,y=(0,o.VK)((()=>s?s.getDisplayName(t):null==i?void 0:i.name),[s,i,t]),b=(0,o.VK)((()=>Boolean(g)?g:s?s.getDetail():null==i?void 0:i.email),[g,s,i]);return n()("div",{style:{display:"flex",alignItems:"center",maxWidth:h?"unset":300,marginLeft:h?2:0,...a}},void 0,n()("div",{style:{position:"relative",...!h&&{height:28,width:28}}},void 0,n()(f,{actorStore:s,avatar:i,isLarge:h}),l),n()("div",{style:{minWidth:0,marginLeft:h?10:6,marginRight:h?10:6}},void 0,n()("div",{id:r,style:{display:"flex",gap:4}},void 0,n()(p.Z,{className:"notranslate"},void 0,y),v&&n()(c.Z,{role:d}),S&&n()(m.b,{labelType:d})),n()(p.Z,{isSmall:!0,style:{display:"flex"}},void 0,n()(p.Z,{isSmall:!0},void 0,b))))}},66836:(e,t,s)=>{s.d(t,{h:()=>S,Z:()=>b});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=s(67294),d=s(480),l=s(24405),u=s(86658),c=s(53397),m=s(5366),g=s(92108),p=s(12955),h=s(10182),f=s(89728),v=s(55422);function S(e){return(0,p.canSetCookie)(e)&&(0,p.canShowCookieUi)(e)}function y(){window.__c={n:"CookieSettingsButton"};const e=(0,l.Fg)();return a()(h.Z,{hasDismissButton:!1,renderOrigin:t=>r.createElement(f.Z,n()({style:{paddingLeft:8,paddingRight:8,height:32}},t),a()(m.FormattedMessage,{id:"cookieSelector.label.customize",defaultMessage:"Customize"}),c.Z.chevronDown({width:10,marginLeft:4,fill:e.lightIconColor}))})}const b=function(e){let{isMobile:t}=e;return window.__c={n:"CookieSettings"},S((0,d.O7)())?a()(v.Z,{isMobile:t,title:r.createElement(m.FormattedMessage,u.ze.cookieSettingsLabel),caption:(0,u.Fd)(g.Tz,"settings"),type:"custom",customButton:a()(y,{})}):null}},79603:(e,t,s)=>{s.d(t,{mS:()=>V,Ub:()=>N,Pp:()=>q});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=s(96486),d=s.n(r),l=s(67294),u=s(480),c=s(81954),m=s(24405),g=s(8848),p=s(33728),h=s(12174),f=s(53397),v=s(82990),S=s(5366),y=s(57400),b=(s(95477),s(87279)),M=s(79315),w=s(10161),k=s(7339),C=s(52275),I=s(31945),T=s(36488),P=s(74194),Z=s(68785),F=s(78140),_=s(32163),x=s(63296),A=s(74136),E=s(89728),R=s(72495),B=s(64369),D=s(27386),O=s(23189),G=s(40235);const U="janus";function V(){var e;const t=null===(e=M.default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return"makenotion.com"===(0,p.Gd)(t??"")||"on"===w.default.getGroup(U)}function L(e){return[...w.default.getExperiments(),...e?d().uniq(h.l4).map((e=>({experimentId:e,experimentVersion:1,group:w.default.getEligibleGroup({experimentId:e,defaultGroup:h.nb,disableExposureLogging:!0}),groups:[...(0,h._n)(e),"control",h.nb],fromStatsig:!0,statsigOption:"EXPERIMENT"}))):[],...e?d().uniq(h.b2).map((e=>({experimentId:e,experimentVersion:1,group:w.default.checkGate(e,!0).toString(),groups:["true","false"],fromStatsig:!0,statsigOption:"FEATUREGATE"}))):[]]}function N(e){window.__c={n:"ExperimentSettings"};const t=(0,u.O7)(),[s,i]=(0,l.useState)(""),[o,r]=(0,l.useState)(void 0),p=w.default.isStatsigEnabled(),M=(0,c.VK)((()=>o?[]:L(p).filter((e=>e.experimentId!==U&&(!s||0===s.length||e.experimentId.includes(s)))).sort(((e,t)=>e.experimentId>t.experimentId?1:-1))),[s,p,o]),{device:T}=t,D=T.isMobile,V=(0,m.yK)((e=>({containerStyle:{width:"100%"},headerContainerStyle:{display:"flex",alignItems:"flex-start",cursor:"pointer",width:"100%",flexWrap:"wrap"},headerLabelStyle:{marginTop:2,marginBottom:12,padding:2,flex:1},filterContainerStyle:{paddingBottom:"12px"},resetButtonContainerStyle:{paddingBottom:"12px"},tableExperimentIDHeaderStyle:{width:"auto"},tableExperimentGroupHeaderStyle:{width:"auto",textAlign:"right"},experimentInfo:{display:"flex",flexDirection:D?"column":"row"},experimentId:{marginRight:5,maxWidth:D?215:300,...v.Z.textOverflowStyle},experimentGroupContainerStyle:{width:"100%",display:"flex",justifyContent:"flex-end"},experimentGroupButtonStyle:{overflowX:"hidden",justifyContent:"left"},experimentGroup:{maxWidth:D?90:300,...v.Z.textOverflowStyle},experimentGroupButtonChevronStyle:{width:10,marginLeft:4,fill:e.lightIconColor},experimentGroupButtonCheckContainerStyle:{width:D?16:14}})),[D]);return a()("div",{style:V.containerStyle},void 0,a()(O.Z,{large:!0,style:{fontSize:16,fontWeight:500}},void 0,"Experiments"),a()("div",{style:V.headerContainerStyle},void 0,a()(B.Z,{isSmall:!0,isMultiline:!0,style:V.headerLabelStyle},void 0,"Toggle experiments for yourself. This only works for experiments that are based on userId or deviceId. For debugging statsig experiments in production, or statsig experiments on the server-side, you should go to console.statsig.com."),a()("div",{style:V.resetButtonContainerStyle},void 0,a()(x.Z,{isSmall:!0,onClick:()=>{r({reset:!0}),k.C.removeAllLocalOverrides(),y.Of(t).then((()=>{r(void 0)}))}},void 0,null!=o&&o.reset?a()(Z.Z,{}):"Reset to defaults"))),a()("div",{style:V.filterContainerStyle},void 0,a()(P.Z,{placeholder:"Filter by experiment ID or Feature Gate Name...",value:s,showClearButton:!0,autoCapitalize:"off",autoComplete:"off",onChange:e=>{i(e.target.value)}})),a()(G.Z,{columns:[{key:"name",header:"Experiment ID or Feature Gate Name",style:V.tableExperimentIDHeaderStyle},{key:"group",header:"Group",style:V.tableExperimentGroupHeaderStyle}],rows:M.map((e=>{const s=e.group,i=p&&"fromStatsig"in e&&e.fromStatsig,u=i&&"FEATUREGATE"===e.statsigOption,c=i&&"EXPERIMENT"===e.statsigOption;return{key:i?`statsig:${e.experimentId}`:e.experimentId,columns:[a()("div",{style:V.experimentInfo},void 0,a()("span",{style:V.experimentId},void 0,e.experimentId),i&&a()(A.Z,{},void 0,`Statsig ${e.statsigOption}`)),a()("div",{style:V.experimentGroupContainerStyle},void 0,a()(I.ZP,{popupType:T.isMobile?I.Z4.SlideUp:I.Z4.Popup,renderOrigin:t=>l.createElement(E.Z,n()({},t,{key:e.experimentId,style:V.experimentGroupButtonStyle}),a()("span",{style:V.experimentGroup},void 0,s??"unknown"),f.Z.chevronDown(V.experimentGroupButtonChevronStyle)),render:m=>{let p;p=T.isMobile?{menuType:b.og.Modal,title:e.experimentId,right:a()(S.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:m.close}:{menuType:b.og.Popup,width:250};const v=e.groups.map((p=>({key:p,action:s=>{let i;i=c?new Promise((t=>{k.C.updateLocalOverrideConfig(e.experimentId,p),t(p)})):u?new Promise((t=>{k.C.updateLocalOverrideGate(e.experimentId,p),t(p)})):y.BX(t,e.experimentId,p),r({experimentId:e.experimentId,group:p}),i.then((()=>{r(void 0),d().delay((()=>{m.close()}),1e3)}))},render:(t,r)=>{const d=i&&p===h.nb;return l.createElement(C.Z,n()({},t,{title:p,right:o&&o.experimentId===e.experimentId&&o.group===p?a()("div",{style:V.experimentGroupButtonCheckContainerStyle},void 0,a()(Z.Z,{})):p!==s||o?void 0:a()("div",{style:V.experimentGroupButtonCheckContainerStyle},void 0,f.Z.check()),disabled:d,style:{...d&&{color:g.ZP.mediumTextColor}}}))}})));return l.createElement(F.Z,p,a()(_.Z,{type:_.i.Vertical,initialFocus:void 0,sections:[{key:e.experimentId,render:e=>l.createElement(R.Z,e),items:v}]}))}}))]}}))}))}function q(e){window.__c={n:"ExperimentSettingsSection"};const t=(0,m.yK)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},PlainButtonStyle:{marginTop:12,marginBottom:4}})),[]);return a()("div",{},void 0,a()(O.Z,{},void 0,"Experiments"),a()(B.Z,{isSmall:!0,isMultiline:!0,style:t.headerLabelStyle},void 0,"Locally toggle experiments."),a()(I.ZP,{popupType:I.Z4.SlideUp,renderOrigin:e=>l.createElement(x.Z,n()({},e,{isLarge:!0,style:t.PlainButtonStyle}),"View Experiments"),render:e=>{const t={menuType:b.og.Modal,whiteBackground:!0,title:"Experiments",right:a()(S.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close};return a()(T.Z,{capture:!0,allowEsc:!0,render:()=>l.createElement(F.Z,t,a()(D.Z,{disableScroller:!0},void 0,a()(N,{})))})}}))}},85215:(e,t,s)=>{s.d(t,{l:()=>h});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=s(67294),d=s(81954),l=s(5366),u=s(16639),c=s(79315),m=s(52275),g=s(12793),p=s(31278);function h(e){window.__c={n:"GroupMenuItem"};const{group:t,menuListItemProps:s}=e,i=(0,d.VK)((()=>{const e=c.default.state.currentSpaceStore;if(e&&t.icon)return{pointer:{table:e.table,id:e.id},icon:t.icon}}),[t]),o=(0,l.useIntl)(),h=(0,u.kF)({intl:o,group:t});return r.createElement(m.Z,n()({},s,{icon:i?a()(p.Z,{disabled:!0,size:22,icon:i,isEmptyPage:!1,title:h}):a()(g.Z,{size:22}),title:h}))}},64131:(e,t,s)=>{s.d(t,{Z:()=>B});var i=s(23174),n=s.n(i),o=s(10434),a=s.n(o),r=s(67294),d=s(480),l=s(81954),u=s(24405),c=s(8848),m=s(53397),g=s(70203),p=s(82990),h=s(5366),f=s(50906),v=s(98724),S=s(87279),y=s(98742),b=s(89086),M=s(52689),w=s(63334),k=s(24666),C=s(41216),I=s(64921),T=s(31945),P=s(56940),Z=s(58261),F=s(78140),_=s(32163),x=s(40721),A=s(72495),E=s(58032);const R=r.Fragment;const B=function(e){window.__c={n:"HighlightSelectionButton"};const{disabled:t,style:s}=e,i=(0,l.qz)(e.ignoreSelectionAreaStore,w.Z),o=(0,d.O7)(),B=(0,h.useIntl)(),D=(0,u.Fg)(),O=(0,r.useCallback)((()=>{v.aS({environment:o,annotation:["h",M.Z.state.color]}),f.mt_(o,{action:"h",color:M.Z.state.color})}),[o]),G=(0,r.useCallback)((e=>{f.mt_(o,{action:"h"})}),[o]),U=(0,r.useCallback)((()=>{k.default.emit()}),[]),V=(0,r.useCallback)((e=>{v.mX({environment:o,annotationType:"h"}),M.Z.setHighlightColor(e),O()}),[o,O]),L=(0,r.useCallback)(((e,t,s,i)=>({key:t||e,action:()=>{s(),V(e),i.close()},render:s=>r.createElement(C.Z,a()({},s,{color:e,overrideDisplayName:t}))})),[V]),N=(0,l.VK)((()=>{const e=(0,b.Ld)("h");return e?g.zI(e):"default"}),[]),q=(0,u.yK)((e=>({colorIcon:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:18,textAlign:"center",fontSize:15,borderRadius:2,...!o.device.isMobile&&{width:18,fontWeight:p.Z.fontWeight.medium,marginBottom:2},...(0,c.A_)(N,e)}})),[o.device.isMobile,N]);return n()(T.ZP,{popupType:o.device.isMobile?T.Z4.SlideUp:T.Z4.Popup,originGap:4,onClose:U,onClick:G,renderOrigin:e=>n()(E.Z,{renderTooltip:()=>n()(R,{},void 0,n()("div",{},void 0,n()(h.FormattedMessage,{defaultMessage:"Text color",id:"highlightSelectionButton.textColor.tooltip"})),n()("div",{},void 0,n()(Z.Z,{style:{color:D.mediumInvertedTextColor},name:"toggleHighlight"}))),render:i=>r.createElement(I.Z,a()({style:{display:"flex",alignItems:"center",paddingLeft:7,paddingRight:6,whiteSpace:"nowrap",...s},disabled:t,disabledFeedback:t},(0,y.Z)(e,i)),n()("div",{style:q.colorIcon},void 0,o.device.isMobile?n()(h.FormattedMessage,{defaultMessage:"Color",id:"highlightSelectionButton.mobileColorIcon.label"}):"A"),m.Z.chevronDown({width:10,marginLeft:o.device.isMobile?4:3,fill:"dark"===D.mode?c.ZP.white:D.lightIconColor}))}),render:e=>{let t;return t=o.device.isMobile?{menuType:S.og.Modal,title:n()(h.FormattedMessage,{defaultMessage:"Text color",id:"highlightSelectionButton.mobileTextColor.label"}),right:n()(x.CancelMenuText,{}),onClickRight:()=>{e.close()}}:{menuType:S.og.Popup},r.createElement(F.Z,t,n()(P.Z,{capture:o.device.isMobile,store:i,ignoreBlockSelection:!1,restoreSelection:!0,focusOffscreenInput:!1,render:t=>{const s=c.CY.map((s=>L(s,void 0,t,e))),i=[L("default",B.formatMessage({defaultMessage:"Default background",id:"highlightSelectionButton.defaultBackground.label"}),t,e),...c._K.map((s=>L(s,void 0,t,e)))],o=M.Z.state.color;return n()(_.Z,{type:_.i.Vertical,sections:[{key:0,items:[{key:0,action:()=>{t(),V(o),e.close()},render:e=>r.createElement(C.Z,a()({},e,{color:o,shortcuts:["toggleHighlight"]}))}],render:e=>r.createElement(A.Z,a()({},e,{title:n()(h.FormattedMessage,{defaultMessage:"Last used",id:"highlightSelectionButton.lastUsedSection.label"}),isTitleUppercase:!0}))},{key:1,items:s,render:e=>r.createElement(A.Z,a()({},e,{title:n()(h.FormattedMessage,{defaultMessage:"Color",id:"highlightSelectionButton.colorSection.label"}),isTitleUppercase:!0}))},{key:2,items:i,render:e=>r.createElement(A.Z,a()({},e,{title:n()(h.FormattedMessage,{defaultMessage:"Background",id:"highlightSelectionButton.backgroundSection.label"}),isTitleUppercase:!0}))}],initialFocus:void 0})}}))}})}},82945:(e,t,s)=>{s.d(t,{Z:()=>y});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=s(67294),d=s(480),l=s(24405),u=s(53397),c=s(5366),m=s(50906),g=s(7476),p=s(77505),h=s(24666),f=s(64921),v=s(58261),S=s(58032);function y(e){window.__c={n:"InlineCommentButton"};const t=(0,d.O7)(),s=t.device.isMobile,i=(0,l.yK)((e=>({keyboardShorcut:{color:e.mediumInvertedTextColor}})),[]),o=()=>{let s;const i=h.default.state;"empty"!==i.mode&&(s=p.UQ(),g.WD({environment:t,blockStore:e.blockStore,multiSelection:i.multiSelection})),m.mt_(t,{action:"comment",from:s?"simple_table_cell":void 0})};return a()(S.Z,{renderTooltip:()=>a()(r.Fragment,{},void 0,a()("div",{},void 0,a()(c.FormattedMessage,{defaultMessage:"Comment on selected text",id:"inlineCommentButton.tooltip"})),a()("div",{},void 0,a()(v.Z,{style:i.keyboardShorcut,name:"comment"}))),render:t=>r.createElement(f.Z,n()({style:{display:"flex",alignItems:"center",padding:"0 10px",whiteSpace:"nowrap",...e.style},disabled:e.disabled,disabledFeedback:e.disabled,onClick:o},t),u.Z.speechBubbleThin({width:s?18:16,height:s?18:16,marginTop:s?0:1,marginRight:4}),!s&&a()(c.FormattedMessage,{defaultMessage:"Comment",id:"inlineCommentButton.commentLabel"}))})}},93007:(e,t,s)=>{s.d(t,{Z:()=>l});var i=s(23174),n=s.n(i),o=(s(67294),s(83355));function a(){return(navigator.languages?navigator.languages.map((e=>e.toLowerCase())):navigator.language?[navigator.language.toLowerCase()]:navigator.userLanguage?[navigator.userLanguage.toLowerCase()]:[]).map((e=>e.split("-")[0]))}const r=["ar","az","he","fa","ur"];class d extends o.Z{renderComponent(){return this.renderTranslatedText()}renderTranslatedText(){const{translations:e}=this.props,t=a();for(const s of t){const t=e[s];if(t)return n()("div",{style:this.getTextStyle(s)},void 0,t)}}getTextStyle(e){return r.includes(e)?{direction:"rtl",...this.props.style}:{...this.props.style}}}d.displayName="LocaleText";const l=d},905:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(23174),n=s.n(i),o=(s(67294),s(5366)),a=s(97880);function r(e){let{target:t,isProductNotifEmailImprovementsEnabled:s}=e;switch(t){case"notify_mobile":return n()(o.FormattedMessage,{id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app"});case"notify_desktop":return n()(o.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately on your desktop app"});case"notify_email":return n()(o.FormattedMessage,s?{id:"notificationSettings.emailNotificationSettings.improvedDescription",defaultMessage:"Receive emails when you get comments, mentions, page invites, reminders, access requests, and property changes"}:{id:"notificationSettings.emailNotificationSettings.description2",defaultMessage:"Receive email updates, including mentions and comment replies"});case"notify_email_always":return n()(o.FormattedMessage,s?{id:"notificationSettings.emailAlwaysNotificationSettings.improvedDescription",defaultMessage:"Receive emails about activity in your workspace, even when you're active on the app"}:{id:"notificationSettings.emailAlwaysNotificationSettings.description",defaultMessage:"Receive updates by email, even when you're active on the app"});case"notify_slack":return n()(o.FormattedMessage,{id:"notificationSettings.slackNotificationsSettings.default.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a page, database property, or comment"});case"notify_email_digest":return n()(o.FormattedMessage,{id:"notificationSettings.emailDigestNotificationsSettings.default.description",defaultMessage:"Receive email digests every 8 hours for changes to pages you’re subscribed to"});case"marketing_emails":return n()(o.FormattedMessage,{id:"notificationSettings.marketingEmails.description",defaultMessage:"Receive occasional emails about product launches and new features from Notion"});default:(0,a.t1)(t)}}},79080:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(23174),n=s.n(i),o=(s(67294),s(5366)),a=s(97880);function r(e){let{target:t,isProductNotifEmailImprovementsEnabled:s}=e;switch(t){case"notify_mobile":return n()(o.FormattedMessage,{defaultMessage:"Mobile push notifications",id:"notificationSettings.mobilePushNotificationSettings.title"});case"notify_desktop":return n()(o.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.title",defaultMessage:"Desktop push notifications"});case"notify_email":return n()(o.FormattedMessage,s?{id:"notificationSettings.productNotifEmails.title",defaultMessage:"Activity in your workspace"}:{id:"notificationSettings.emailNotificationSettings.title",defaultMessage:"Email notifications"});case"notify_email_always":return n()(o.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"});case"notify_slack":return n()(o.FormattedMessage,{id:"notificationSettings.slackNotificationSettings.title",defaultMessage:"Slack notifications"});case"notify_email_digest":return n()(o.FormattedMessage,{id:"notificationSettings.emailDigestNotificationSettings.title",defaultMessage:"Email digests"});case"marketing_emails":return n()(o.FormattedMessage,{id:"notificationSettings.marketingEmails.title",defaultMessage:"Announcements and update emails"});default:(0,a.t1)(t)}}},15311:(e,t,s)=>{s.d(t,{Z:()=>Z});var i=s(23174),n=s.n(i),o=s(67294),a=s(480),r=s(81954),d=s(5366),l=s(97880),u=s(98104),c=s(3924),m=s(17652),g=s(33665),p=s(28187),h=s(79315),f=s(88632),v=s(66836),S=s(61519),y=s(64369),b=s(74523),M=s(79331),w=s(21291),k=s(27386),C=s(23189),I=s(51124),T=s(73490),P=s(16347);const Z=(0,c.M)((function(e){let{isMobile:t,passwordRequestStore:s,userEmailDomainSettings:i}=e;window.__c={n:"NotificationsAndPersonalSettings"};const{isElectron:c,isPhone:Z,isIOS:F}=(0,a.Fy)(),_=(0,a.O7)(),x=(0,r.VK)((()=>f.Z.state.online),[]),A=(0,r.VK)((()=>{var e;const s=(null===(e=h.default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1,i=(0,p.kC)(),o=(0,m.rB)();return function(e){const{isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:i,showSlackNotificationSetting:o,emailImprovementsExperimentEnabled:a}=e;return[{key:"notify_mobile",renderSettingsItem:()=>n()(w.A,{target:"notify_mobile"})},!t&&s?{key:"notify_desktop",renderSettingsItem:()=>n()(w.A,{target:"notify_desktop"})}:void 0,{key:"notify_email",renderSettingsItem:()=>n()(w.A,{target:"notify_email"})},i?{key:"notify_email_always",renderSettingsItem:()=>n()(w.A,{target:"notify_email_always"})}:void 0,a?{key:"notify_email_digest",renderSettingsItem:()=>n()(w.A,{target:"notify_email_digest"})}:void 0,o?{key:"notify_slack",renderSettingsItem:()=>n()(T.O,{target:"notify_slack"})}:void 0,a?{key:"marketing_emails",renderSettingsItem:()=>n()(w.A,{target:"marketing_emails"})}:void 0].filter(l.$K)}({isMobile:t,isElectron:c,showNotifyEmailAlwaysSetting:s,showSlackNotificationSetting:i,emailImprovementsExperimentEnabled:o})}),[t,c]),E=(0,r.VK)((()=>t?(0,M.E)({isPhone:Z,isIOS:F,passwordRequestStore:s,userEmailDomainSettings:i}):(0,M.Z)({environment:_})),[_,t,Z,F,s,i]),R=(0,r.VK)((()=>[(0,v.h)(_)?{key:"cookies",renderSettingsItem:()=>n()(v.Z,{isMobile:t})}:void 0,{key:"view-history",renderSettingsItem:()=>n()(P.H,{isMobile:t})}].filter(l.$K)),[_,t]),{paddingBottomCSS:B}=(0,r.VK)((()=>_.WindowSizeStore.state),[_]);return(0,o.useEffect)((()=>{u.ZH(_)}),[_]),x?n()(k.Z,{disableScroller:t},void 0,n()(C.Z,{large:!t,divider:"full"},void 0,n()(d.FormattedMessage,{id:"notificationAndPersonalSettings.notificationSection.title",defaultMessage:"My notifications"})),n()(I.O,{items:A}),n()(S.Z,{size:48,isHidden:!0}),n()(C.Z,{large:!t,divider:"full"},void 0,n()(d.FormattedMessage,{id:"notificationAndPersonalSettings.settingsSection.title",defaultMessage:"My settings"})),n()(I.O,{items:E}),n()(S.Z,{size:48,isHidden:!0}),n()(C.Z,{large:!t,divider:"full"},void 0,n()(d.FormattedMessage,{id:"notificationAndPersonalSettings.privacySection.title",defaultMessage:"Privacy"})),n()(I.O,{items:R}),n()(S.Z,{size:48,isHidden:!1}),n()("div",{style:{marginTop:4,marginBottom:t?B:void 0}},void 0,n()(b.Z,{title:n()(d.FormattedMessage,{id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about notifications & settings"}),href:(0,g.UY)("guides.notificationSettings"),analyticsFrom:"notifications_settings"}))):n()(k.Z,{},void 0,n()(y.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,n()(d.FormattedMessage,{defaultMessage:"Please go online to manage settings.",id:"notificationSettingsButton.goOnline.prompt"})))}))},1548:(e,t,s)=>{s.d(t,{Z:()=>F});var i=s(23174),n=s.n(i),o=s(67294),a=s(83355),r=s(8848),d=s(53397),l=s(96068),u=s(82990),c=s(5366),m=s(50906),g=s(54642),p=s(43250),h=s(33954),f=s(69503),v=s(61519),S=s(36488),y=s(74194),b=s(53953),M=s(64369),w=s(88175),k=s(75752),C=s(99657),I=s(24173),T=s(13490),P=s(55422);class Z extends a.Z{constructor(){super(...arguments),this.settingsStateMachine=void 0,this.handleChangePasswordClick=()=>{const{mfaStatus:e}=this.props;"on"===e?f.Z.setState({open:!0,verifyIdentity:!0,onCancel:()=>{var e;return null===(e=this.settingsStateMachine)||void 0===e?void 0:e.exit()}}):(m.Wbl(this.environment),f.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}))},this.handleOldPasswordChange=e=>{(f.Z.isSetNewPasswordModal()||f.Z.isRemovePasswordModal())&&f.Z.setState({...f.Z.state,oldPassword:e.target.value,alert:void 0})},this.handleClearOldPassword=()=>{(f.Z.isSetNewPasswordModal()||f.Z.isRemovePasswordModal())&&f.Z.setState({...f.Z.state,oldPassword:"",alert:void 0})},this.handlePasswordChange=e=>{f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,password:e.target.value,alert:void 0})},this.handleClosePasswordModal=()=>{const{onCancel:e}=f.Z.state;f.Z.reset(),e&&e()},this.handleClearPassword=()=>{f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,password:"",repeatPassword:"",alert:void 0})},this.handleRepeatPasswordChange=e=>{f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,repeatPassword:e.target.value,alert:void 0})},this.handleClearRepeatPassword=()=>{f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,repeatPassword:"",alert:void 0})},this.handlePasswordBlur=()=>{if(f.Z.isSetNewPasswordModal()){const{password:e,repeatPassword:t}=f.Z.state;e&&t&&e!==t&&f.Z.setState({...f.Z.state,alert:this.props.intl.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}},this.handleSubmit=async()=>{if(!f.Z.isSetNewPasswordModal())return;const{oldPassword:e,password:t,repeatPassword:s}=f.Z.state,{hasPassword:i}=this.props,{intl:n}=this.props;let o;if(i&&!e)o=n.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(t){const e=(0,l.I)(t);e.success?s?t!==s&&(o=n.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):o=n.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):o=this.getPasswordErrorMessage(e.reason)}else o=n.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(o)return void f.Z.setState({...f.Z.state,alert:o});const a=await g.setPassword(this.environment,{oldPassword:e,newPassword:t});if("success"===a.type)this.props.onReloadSettings(),f.Z.setState({...f.Z.state,isSet:!0});else{const e=(0,h.wf)(this.props.intl,a);f.Z.setState({...f.Z.state,alert:e})}},this.handleShowRemovePasswordModalClick=()=>{f.Z.setState({open:!0,removePassword:!0,isSuccess:!1,oldPassword:""})},this.handleRemovePasswordClick=async()=>{if(!f.Z.isRemovePasswordModal())return;const{oldPassword:e}=f.Z.state;if(m.wrY(this.environment),!e)return void f.Z.setState({...f.Z.state,alert:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password."})});const t=await g.setPassword(this.environment,{oldPassword:e,clearPassword:!0});if("success"===t.type)this.props.onReloadSettings(),this.removePasswordSuccess();else{const e=(0,h.wf)(this.props.intl,t);f.Z.setState({...f.Z.state,alert:e||this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}},this.defaultErrorMessage=this.props.intl.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}willMountOrUpdate(e){if(super.willMountOrUpdate(e),"on"===e.mfaStatus&&void 0===this.settingsStateMachine){const e=new k.r(this.environment),t=new I.c;this.settingsStateMachine=new I.W(t,e)}}renderComponent(){const{device:e}=this.environment;return o.createElement(o.Fragment,null,n()(P.Z,{type:"toggleToButton",isMobile:e.isMobile,title:n()(c.FormattedMessage,{id:"profileSettings.accountSecuritySection.passwordSetting.label",defaultMessage:"Password"}),caption:this.renderPasswordDetails(),isOn:this.props.hasPassword,buttonLabel:n()(c.FormattedMessage,{id:"passwordSetting.changePasswordButton.label",defaultMessage:"Change password"}),onClick:this.handleChangePasswordClick}),this.renderPasswordModal())}renderPasswordDetails(){return this.props.isError?n()(c.FormattedMessage,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}):this.props.samlEnforced?n()(c.FormattedMessage,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML Single Sign-on Provider."}):this.props.isEducationPlan?this.renderEducationPlanInfo():n()(c.FormattedMessage,{id:"passwordSettings.setPassword.message",defaultMessage:"Set a permanent password to login to your account."})}renderPasswordModal(){const{open:e}=f.Z.state;return n()(b.Z,{open:e,onDismiss:this.handleClosePasswordModal,className:p.BKn,preventHideChildrenWhileOpening:!0,render:()=>n()(S.Z,{capture:!0,allowEsc:!0,render:()=>n()(o.Fragment,{},void 0,this.renderPasswordEdit(),this.renderPasswordUpdateComplete(),this.renderRemovePassword(),this.renderVerifyIdentity(),this.renderPasswordRemoved())})})}renderVerifyIdentity(){if(f.Z.isVerifyIdentityWithMfaModal()&&void 0!==this.settingsStateMachine)return this.settingsStateMachine.settingsConfirmIdentityForPasswordSetting(),n()(C.Z,{settingsStateMachine:this.settingsStateMachine,onDismiss:this.handleClosePasswordModal,onStartSMS:()=>{},onStartTOTP:()=>{},onStartBackupCodes:()=>{}})}renderPasswordEdit(){const{isEducationPlan:e}=this.props;if(!f.Z.isSetNewPasswordModal())return;const{password:t,repeatPassword:s,oldPassword:i,alert:a}=f.Z.state,{hasPassword:r,email:l}=this.props,u=n()(c.FormattedMessage,r?{id:"profileSettings.changePasswordModal.title",defaultMessage:"Change password"}:{id:"profileSettings.setPasswordModal.title",defaultMessage:"Set a password"}),m=o.createElement(o.Fragment,null,n()(c.FormattedMessage,{id:"passwordSettings.passwordModal.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."}),e&&o.createElement(o.Fragment,null," ",this.renderEducationPlanInfo())),g=o.createElement(o.Fragment,null,n()(T.Z,{},void 0,n()(c.FormattedMessage,{id:"passwordSettings.passwordModal.newPasswordInput.label",defaultMessage:"Enter a new password"})),n()(y.Z,{type:"password",value:t,onChange:this.handlePasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.passwordModal.newPasswordInput.placeholder",defaultMessage:"New password"}),focusInitial:!r,onBlur:this.handlePasswordBlur,autoComplete:"new-password"}),n()(v.Z,{size:10,isHidden:!0}),n()(T.Z,{},void 0,n()(c.FormattedMessage,{id:"passwordSettings.changePasswordModal.confirmPasswordInput.label",defaultMessage:"Confirm your new password"})),n()(y.Z,{type:"password",value:s,onChange:this.handleRepeatPasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearRepeatPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.passwordModal.confirmPasswordInput.placeholder",defaultMessage:"Confirm password"}),onBlur:this.handlePasswordBlur,autoComplete:"new-password"})),p=o.createElement(o.Fragment,null,n()(y.Z,{style:{display:"none"},type:"text",value:l,autoComplete:"username",disabled:!0}),n()(T.Z,{},void 0,n()(c.FormattedMessage,{id:"passwordSettings.passwordModal.currentPasswordInput.label",defaultMessage:"Enter your current password"})),n()(y.Z,{type:"password",value:i,onChange:this.handleOldPasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.passwordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),n()(v.Z,{size:10,isHidden:!0}),g),h={text:n()(c.FormattedMessage,r?{id:"passwordSettings.passwordModal.changePasswordButton.label",defaultMessage:"Change password"}:{id:"passwordSettings.passwordModal.setPasswordButton.label",defaultMessage:"Set a password"}),onClick:this.handleSubmit},S=[{text:n()(c.FormattedMessage,{id:"passwordSettings.passwordModal.removePasswordButton.label",defaultMessage:"Remove password"}),onClick:this.handleShowRemovePasswordModalClick,type:"button",view:"plain"}];return n()(w.Z,{title:u,header:m,icon:d.Z.setPassword(this.getIconStyle()),onDismiss:this.handleClosePasswordModal,primaryAction:h,secondaryActions:this.canRemovePassword()?S:void 0,containerStyles:{width:350,padding:24}},void 0,r?p:g,n()(M.Z,{isMultiline:!0,style:this.getAlertStyle(a)},void 0,a))}renderPasswordUpdateComplete(){if(!f.Z.isPasswordSetModal())return;const{isEducationPlan:e}=this.props,{oldPassword:t}=f.Z.state,s=n()(c.FormattedMessage,void 0===t?{id:"passwordSettings.passwordUpdatedModal.passwordSetSuccessModal.title",defaultMessage:"Your password has been set"}:{id:"passwordSettings.passwordUpdatedModal.passwordUpdatedModal.title",defaultMessage:"Your password has been saved"}),i=n()(c.FormattedMessage,e?{id:"passwordSettings.passwordUpdateSuccessModal.educationPlan.header",defaultMessage:"You'll be able to log in, even if you lose access to your school email address."}:{id:"passwordSettings.passwordUpdateSuccessModal.header",defaultMessage:"We'll ask for this password when you log in to your account."});return n()(w.Z,{title:s,header:i,icon:d.Z.thinCheck(this.getIconStyle()),onDismiss:this.handleClosePasswordModal})}renderRemovePassword(){const{isEducationPlan:e,mfaStatus:t}=this.props;if(!f.Z.isRemovePasswordModal())return;const{oldPassword:s,alert:i}=f.Z.state,a=n()(c.FormattedMessage,{id:"passwordSettings.removePasswordModal.title",defaultMessage:"Remove password for temporary login codes?"}),r=o.createElement(o.Fragment,null,n()(c.FormattedMessage,{id:"passwordSettings.removePasswordModal.header",defaultMessage:"You'll receive a link and login code via email when you try to login."}),e&&o.createElement(o.Fragment,null," ",n()(c.FormattedMessage,{id:"passwordSettings.removePasswordModal.educationPlanWarning.message",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion."})),"on"===t&&o.createElement(o.Fragment,null," ",n()(c.FormattedMessage,{id:"passwordSettings.removePasswordModal.removeMfaWarning.message",defaultMessage:"<boldtext>2-step verification will also be removed if you continue.</boldtext>",values:{boldtext:e=>n()("span",{style:{fontWeight:u.Z.fontWeight.semibold}},void 0,e)}}))),l={text:n()(c.FormattedMessage,{id:"passwordSettings.removePasswordModal.continueButton.label",defaultMessage:"Continue"}),onClick:this.handleRemovePasswordClick,isRed:!0},m=[{text:n()(c.FormattedMessage,{id:"passwordSettings.removePasswordModal.keepUsingPasswordButton.label",defaultMessage:"Keep using password"}),onClick:this.handleClosePasswordModal,type:"button",view:"plain"}];return n()(w.Z,{title:a,header:r,icon:d.Z.paperAirplane(this.getIconStyle()),onDismiss:this.handleClosePasswordModal,primaryAction:l,secondaryActions:m,containerStyles:{width:350,padding:24}},void 0,n()(T.Z,{hasMarginTop:!0},void 0,n()(c.FormattedMessage,{id:"passwordSettings.removePasswordModal.passwordInput.label",defaultMessage:"Enter your current password"})),n()(y.Z,{type:"password",value:s,onChange:this.handleOldPasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),n()(M.Z,{isMultiline:!0,style:this.getAlertStyle(i)},void 0,i))}renderPasswordRemoved(){if(!f.Z.isRemovePasswordSuccessModal())return;const e=n()(c.FormattedMessage,{id:"passwordSettings.removePasswordSuccessModal.title",defaultMessage:"Password removed"}),t=n()(c.FormattedMessage,{id:"passwordSettings.removePasswordSuccessModal.header",defaultMessage:"To log into your account, we’ll send you a temporary login code to your email."});return n()(w.Z,{title:e,header:t,icon:d.Z.thinCheck(this.getIconStyle()),onDismiss:this.handleClosePasswordModal})}renderEducationPlanInfo(){return n()(c.FormattedMessage,{id:"passwordSettings.passwordModal.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}getIconStyle(){return{width:27,height:27,fill:this.theme.regularIconColor}}getAlertStyle(e){return{display:e?"inherit":"none",marginTop:10,textAlign:"center",color:r.ZP.red,fontSize:u.Z.fontSize.UISmall.desktop}}removePasswordSuccess(){f.Z.isRemovePasswordModal()&&f.Z.setState({...f.Z.state,isSuccess:!0,oldPassword:"",alert:void 0})}getPasswordErrorMessage(e){const t=h.Ql[e.type];return t?this.props.intl.formatMessage(t):this.defaultErrorMessage}canRemovePassword(){const{isEducationPlan:e}=this.props,{hasPassword:t}=this.props;return!e&&t}}Z.displayName="PasswordSettings";const F=(0,c.injectIntl)(Z)},24145:(e,t,s)=>{s.d(t,{Z:()=>S});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=s(67294),d=s(480),l=s(81954),u=s(5366),c=s(75472),m=s(65598),g=s(26781),p=s(25464),h=s(58032),f=s(91487),v=s(47082);const S=function(e){window.__c={n:"PermissionsInviteInput"};const{origin:t,permissionsInviteStore:s,store:i,handleClickRemoveToken:o,handleInputChange:S,handleInputSubmit:y,defaultRoleForNonBot:b,isTeamsEnabled:M,right:w,focus:k,handleFocus:C}=e,I="share_menu"===t||"add_members"===t,T="add_members"===t,[P,Z]=(0,l.AF)(s),F=(0,d.O7)(),{device:_}=F,x=(0,u.useIntl)(),{tokenQuery:A}=P,E=(0,g.i)(i),R=P.inviteTargets.map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`,s=(0,c.OA)(e),i="newUser"===e.type||"existingUser"===e.type?e.value.email:void 0,d=s?E:void 0,l={key:t,target:e,onClickRemove:o,role:P.inviteRole,shouldWrap:I,showInfoIcon:Boolean(d)};return I&&i?a()(h.Z,{placement:p.u.Top,disableTooltip:T,renderTooltip:()=>s?d||a()(u.FormattedMessage,{defaultMessage:"{email} will be invited as a guest",id:"ContextualInvite.permissions_invites.guest.tooltip",values:{email:i}}):i,render:s=>r.createElement("span",n()({},s,{key:t}),r.createElement(f.Z,n()({},l,{backgroundColor:(0,c.gQ)(e)})))}):r.createElement(f.Z,l)}));return r.createElement(v.Z,n()({focus:_.isMobile?void 0:k,focusInitial:_.isMobile,focusAfterAnimation:!0,onClick:()=>{_.isMobile||null==C||C()},format:v.Z.Format.Share,value:A,onChange:S,type:"email",tokens:R,disabled:!1,autoComplete:"off",placeholder:I?M?x.formatMessage({defaultMessage:"Add people, groups, or emails…",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithTeams"}):x.formatMessage({defaultMessage:"Add emails or people",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithoutBots"}):(0,m.Mm)(i)?x.formatMessage({id:"inviteUserModal.searchInput.placeholder",defaultMessage:"Search name or emails"}):x.formatMessage({id:"permissionsInvite.searchInput.placeholder",defaultMessage:"Search emails, names, or groups"}),onRemoveLastToken:()=>{const e={...P};e.inviteTargets=e.inviteTargets.slice(0,-1),0===e.inviteTargets.length&&(e.isInviteTargetsEmpty=!0,e.inviteRole=b),Z(P)},right:w,inputAndTokenWrapRightStyle:{paddingTop:F.device.isMobile?0:P.isInviteTargetsEmpty?5:6,paddingBottom:F.device.isMobile||I?0:4},onEmptySubmit:()=>y(),dontShowBorderBottom:_.isAndroid,showBorder:I},I&&{style:{borderRadius:3,paddingTop:P.isInviteTargetsEmpty?3:0,paddingBottom:0,...k&&{background:"none"}}}))}},43579:(e,t,s)=>{s.d(t,{Z:()=>D});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=(s(57658),s(67294)),d=s(480),l=s(81954),u=s(24405),c=s(66897),m=s(33728),g=s(53397),p=s(5366),h=s(82990),f=s(7928),v=s(50906),S=s(95209),y=s(4708),b=s(75472),M=s(65598),w=s(21115),k=s(29677),C=s(78291),I=s(52275),T=s(32163),P=s(43765),Z=s(77137),F=s(72495),_=s(58032),x=s(85215),A=s(69507),E=s(97680);const R=(0,p.defineMessages)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",defaultMessage:"{userNameAndEmail} is invited to this page already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",defaultMessage:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",defaultMessage:"{userNameAndEmail} is invited to this team already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",defaultMessage:"Click to invite {userNameAndEmail}"}});function B(e,t){return e.filter(((e,s)=>s<t))}const D=function(e){window.__c={n:"PermissionsInviteSearchRequest"};const{store:t,shouldShowBots:s,shouldShowGroups:i,sectionRenderLimit:o,membersOnly:D,hideUserTypeToken:O,disableInvitedUsers:G}=e,[U,V,L]=(0,l.AF)(e.permissionsInviteStore),N=(0,d.O7)(),{device:q}=N,W=(0,p.useIntl)(),{tokenQuery:K}=U,z=(0,r.useMemo)((()=>b.ZK({environment:{device:q}})),[q]),H=(0,u.yK)((e=>({roleBadge:{...z},invitedBadge:{...z,backgroundColor:e.defaultBadgeBackground}})),[z]),j=(0,l.VK)((()=>(0,y._6)(N)?"invitee-popup-closed":"invitee"),[N]),Q={request:K,performRequest:e=>S.jL({query:e,sectionLimit:{userLimit:10,botLimit:s?10:0,groupLimit:i?10:0,importContactLimit:0},membersOnly:D,environment:N,intl:W}),render:(e,s,d)=>{if(e)return a()(A.l,{loading:!d},void 0,a()(P.Z,{title:a()(p.FormattedMessage,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})}));const l=s&&{...s,importedContacts:(0,b.Bu)(s.inviteUsers,s.importedContacts)},u=l&&(null==K?void 0:K.length)>0,{inviteUsers:S,inviteGroups:y,importedContacts:Z=[]}=u?l:(0,b.NN)({currentInviteActors:l,permissionsInviteStore:L,targetStore:t}),D=[...B(S,o),...B(Z,10)].map(((e,s)=>{const i="newUser"===e.type?e.value.email:e.value.id,o=function(e){if("existingUser"!==e.type)return;const{data:t}=C.default.state,s=(t?w.CM(t):[]).find((t=>t.userId===e.value.id));return s?s.role:"not_in_space"}(e),d=Boolean(u&&(0,b.cm)({permissionsInviteStore:L,userTarget:e,targetStore:t}));return{key:i,render:s=>{const{tooltip:i,userTypeToken:l}=function(e){const{userTarget:t,targetStore:s,isInvited:i,userSpaceRole:n,styles:o,intl:r}=e,d="newUser"!==t.type&&t.value.name?`${t.value.name} (${t.value.email})`:t.value.email,l=n&&"not_in_space"!==n;if(i)return{tooltip:(0,M.Mm)(s)?r.formatMessage(R.invited_space,{userNameAndEmail:d}):(0,M.NZ)(s)?r.formatMessage(R.invited_page,{userNameAndEmail:d}):r.formatMessage(R.invited_team,{userNameAndEmail:d}),userTypeToken:a()("div",{style:{...o.invitedBadge}},void 0,a()(p.FormattedMessage,{id:"inviteUserModal.userRole.invitedBadge.label",defaultMessage:"Invited"}))};if(l){const e=b.Ji({role:n,intl:r,nameOrEmail:d});return{tooltip:e.tooltip,userTypeToken:a()("div",{style:{...o.roleBadge}},void 0,e.userRoleBadge)}}return{tooltip:r.formatMessage(R.not_in_space,{userNameAndEmail:d}),userTypeToken:void 0}}({userTarget:e,targetStore:t,userSpaceRole:o,isInvited:d,styles:H,intl:W});return"existingUser"===e.type?r.createElement(E.Z,n()({},s,{actor:(0,c.dp)(e.value),right:O?void 0:l,tooltip:i,tooltipPlacement:_.Z.Placement.Left,disabled:G&&d})):a()(_.Z,{placement:_.Z.Placement.Left,alignment:_.Z.Alignment.Start,textWrap:!0,render:t=>r.createElement(I.Z,n()({},s,t,{icon:g.Z.mailRound({width:24,height:24}),right:l,title:e.value.email.trim(),disabled:G&&d})),disableTooltip:!i,renderTooltip:()=>i})},action:()=>{if(d)return;if(!U.isInviteTargetsEmpty&&(0,k.ow)(U))return;const t={...e,..."existingUser"===e.type&&{spaceRole:o}};v.hEo(N,{...b.a_(N,U),invite_token_query:K,selected_user_token:e,selected_user_token_rank:s}),L.setState({...U,inviteTargets:[...U.inviteTargets,t],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:j})}}})),V=B(y,o).map((e=>{const{value:t}=e;return{key:t.id,render:e=>a()(x.l,{group:t,menuListItemProps:e}),action:()=>{!U.isInviteTargetsEmpty&&(0,k.ow)(U)||L.setState({...U,inviteTargets:[...U.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:j})}}})),q=[],z=U.isInviteTargetsEmpty||!(0,k.ow)(U);if(D.length>0&&z&&q.push({key:"user results",render:e=>r.createElement(A.l,n()({},e,{loading:!d})),items:D}),i&&V.length>0&&z&&q.push({key:"group results",render:e=>r.createElement(F.Z,n()({},e,{title:a()(p.FormattedMessage,{id:"inviteUserModal.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!d})),items:V}),0===q.length&&z){const e=(0,m.H3)(U.tokenQuery);if((0,m.oH)(e)){const i={type:"newUser",value:{email:e},source:"email"},n=(0,b.Nd)({target:i,permissionsInviteStore:L});if(!n)return;if(n)return a()(A.l,{loading:!d},void 0,a()(P.Z,{title:a()(p.FormattedMessage,{id:"inviteUserModal.userAlreadyInvitedMessage",defaultMessage:"Already inviting {user}.",values:{user:a()("span",{style:{fontWeight:h.Z.fontWeight.bold}},void 0,(0,b.DF)({intl:W,target:n}))}})}));const o=(s&&s.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value.email===e));if(o&&"existingUser"===o.type&&(0,b.Zp)({store:t,target:o}))return a()(A.l,{loading:!d},void 0,a()(P.Z,{title:a()(p.FormattedMessage,{id:"inviteUserModal.userAlreadyHasPermissionMessage",defaultMessage:"{user} already has permission.",values:{user:a()("span",{style:{fontWeight:h.Z.fontWeight.bold}},void 0,(0,f.Nz)(W,o.value))}})}))}else{if(!U.tokenQuery)return a()(A.l,{loading:!d},void 0,a()(P.Z,{title:a()(p.FormattedMessage,{id:"inviteUserModal.searchPersonDropdown.noSearchResultsMessage",defaultMessage:"Type or paste in emails above, separated by commas."})}));q.push({key:"user results",render:e=>r.createElement(A.l,n()({},e,{loading:!d,title:a()(p.FormattedMessage,{id:"inviteUserModal.searchDropdown.addPeople",defaultMessage:"Keep typing to invite email"})})),items:[{key:U.tokenQuery,render:e=>r.createElement(I.Z,n()({icon:g.Z.mailRound({width:24,height:24}),title:U.tokenQuery},e)),action:()=>{}}]})}}return a()(T.Z,{type:T.i.Vertical,initialFocus:K.length>0?0:void 0,sections:q})}};return r.createElement(Z.Z,Q)}},91487:(e,t,s)=>{s.d(t,{Z:()=>v});var i=s(23174),n=s.n(i),o=s(67294),a=s(83355),r=s(15070),d=s(84619),l=s(53397),u=s(97880),c=s(7928),m=s(5366),g=s(16639),p=s(58032),h=s(85567);class f extends a.Z{constructor(){super(...arguments),this.handleClickRemove=e=>{e.stopPropagation(),this.props.onClickRemove(this.props.target)}}renderComponent(){const{device:e}=this.environment;return n()(h.Z,{showRemoveButton:!0,isSingle:!1,isStrikedThrough:this.props.isStrikedThrough,backgroundColor:this.props.backgroundColor,format:e.isMobile?d.l.Large:d.l.Medium,onClickRemove:this.handleClickRemove,disabled:this.props.disabled,disabledFeedback:!0,value:this.getTokenContent(),style:this.props.style,shouldWrap:this.props.shouldWrap})}withInfoIcon(e){return n()("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},void 0,l.Z.info({marginRight:4,width:14,height:14}),e)}getTokenContent(){const{target:e,intl:t,role:s}=this.props;if("group"===e.type&&"owner"===s)return n()(p.Z,{renderTooltip:()=>n()(m.FormattedMessage,{id:"permissionInviteToken.groupRole.ownerAlert.tooltip",defaultMessage:"Groups cannot be added as teamspace owners."}),render:t=>o.createElement("div",t,this.withInfoIcon((0,g.kF)({intl:this.props.intl,group:e.value})))});let i;switch(e.type){case"newUser":i=e.value.email.trim();break;case"existingUser":i=(0,c.Nz)(t,e.value);break;case"bot":i=(0,r.Mh)(e.value);break;case"group":i=(0,g.kF)({intl:this.props.intl,group:e.value});break;default:(0,u.t1)(e)}return this.props.showInfoIcon?this.withInfoIcon(i):i}}f.displayName="PermissionsInviteToken";const v=(0,m.injectIntl)(f)},79331:(e,t,s)=>{s.d(t,{E:()=>L,Z:()=>N});var i=s(23174),n=s.n(i),o=(s(57658),s(67294)),a=s(480),r=s(81954),d=s(5366),l=s(89101),u=s(97880),c=s(50906),m=s(84908),g=s(9953),p=s(5978),h=s(42171),f=s(12359),v=s(37181),S=s(21969),y=s(38755),b=s(21115),M=s(23537),w=s(5162),k=s(79315),C=s(24042),I=s(10161),T=s(42389),P=s(68216),Z=s(92083),F=s(78291),_=s(97832),x=s(79092),A=s(42922),E=s(16354),R=s(68785),B=s(79603),D=s(42402),O=s(1548),G=s(55422),U=s(74452),V=s(30045);function L(e){let{isPhone:t,isIOS:s,passwordRequestStore:i,userEmailDomainSettings:o}=e;const{data:a}=F.default.state,r=s&&b.wY(a),d=(0,B.mS)();return[{key:"password",renderSettingsItem:()=>n()(q,{passwordRequestStore:i})},{key:"appearance",renderSettingsItem:()=>n()(W,{isMobile:!0})},!(t&&(0,w.Y)("supportsNativeHome"))?{key:"page-on-app-start",renderSettingsItem:()=>n()(z,{isMobile:!0})}:void 0,I.default.checkGate("block_attribution")?{key:"block-attribution",renderSettingsItem:()=>n()(K,{isMobile:!0})}:void 0,r?{key:"subscription",renderSettingsItem:()=>n()(U.Z,{})}:void 0,{key:"user-consent",renderSettingsItem:()=>n()(V.Z,{emailDomainSettings:o.settings})},{key:"calendar",renderSettingsItem:()=>n()(x.Z,{})},d?{key:"experiments",renderSettingsItem:()=>n()(B.Pp,{})}:void 0,{key:"deleteAccount",renderSettingsItem:()=>n()(_.Z,{userEmailDomainSettings:o})}].filter(u.$K)}function N(e){const{environment:t}=e,s=I.default.checkGate("block_attribution");return[{key:"appearance",renderSettingsItem:()=>n()(W,{isMobile:!1})},{key:"page-on-app-start",renderSettingsItem:()=>n()(z,{isMobile:!1})},t.device.isDesktop&&(t.device.isMac||t.device.isWindows||!1)?{key:"open-in-desktop-app",renderSettingsItem:()=>n()(j,{})}:void 0,t.device.isDesktop&&t.device.isMac?{key:"close-browser-tabs",renderSettingsItem:()=>n()(H,{})}:void 0,s?{key:"block-attribution",renderSettingsItem:()=>n()(K,{isMobile:!1})}:void 0].filter(u.$K)}function q(e){let{passwordRequestStore:t}=e;window.__c={n:"LoadingPasswordSettings"};const s=(0,r.VK)((()=>{const{data:e}=F.default.state;return b.wl(e)}),[]),i=(0,r.VK)((()=>{var e;return(null===(e=k.default.state.currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),{hasPassword:o,canConfigurePassword:a,isSamlEnforced:d,mfaStatus:l,error:u,ready:c}=(0,r.VK)((()=>({...t.state.result,error:t.state.error,ready:t.state.result})),[t]);return u?n()(O.Z,{hasPassword:!1,hasPasswordActions:!1,samlEnforced:!1,mfaStatus:"loading",email:i,onReloadSettings:()=>t.refresh(),isError:!0}):c?n()(O.Z,{hasPassword:o,hasPasswordActions:a,samlEnforced:d,mfaStatus:l,isEducationPlan:s,email:i,onReloadSettings:()=>t.refresh(),isError:!1}):n()(R.Z,{})}function W(e){let{isMobile:t}=e;window.__c={n:"AppearanceSetting"};const s=(0,a.O7)(),i=(0,r.VK)((()=>h.MH(s)),[s]);return n()(G.Z,{isMobile:t,title:n()(d.FormattedMessage,{id:"appearanceSettings.title",defaultMessage:"Appearance"}),caption:n()(d.FormattedMessage,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."}),type:"dropdown",currentOption:i,options:[{key:"system",label:n()(d.FormattedMessage,{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"})},{key:"light",label:n()(d.FormattedMessage,{id:"appearanceSetting.light.label",defaultMessage:"Light"})},{key:"dark",label:n()(d.FormattedMessage,{id:"appearanceSetting.dark.label",defaultMessage:"Dark"})}],onSelectOption:e=>{h.rz(e)}})}function K(e){let{isMobile:t}=e;window.__c={n:"AttributionSetting"};const s=(0,a.O7)(),{currentUserSettingsStore:i}=(0,r.VK)((()=>k.default.state),[]),l=(0,r.VK)((()=>{var e;return(null==i||null===(e=i.getSettings())||void 0===e?void 0:e.show_block_attribution)??!0}),[i]),u=(0,o.useCallback)((()=>{i&&f.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,perform:e=>{v.d2({userSettingsStore:i,data:{show_block_attribution:!l},transaction:e})}})}),[i,l,s]);return n()(G.Z,{isMobile:t,title:n()(d.FormattedMessage,{id:"attributionSetting.title",defaultMessage:"Block attribution"}),caption:n()(d.FormattedMessage,{id:"attributionSetting.description.message",defaultMessage:"See your teammates’ initials to the left of blocks they created or edited."}),type:"toggle",isOn:l,onToggle:u})}function z(e){let{isMobile:t}=e;window.__c={n:"PageOnAppStartSetting"};const s=(0,a.O7)(),i=(0,r.VK)((()=>k.default.state.currentSpaceViewStore),[]),o=(0,r.VK)((()=>M.QI()),[]),l=(0,r.VK)((()=>y.g4(s,i)),[s,i]),u=[{key:"last_visited_page",label:n()(d.FormattedMessage,{id:"pageOnAppStoreSetting.lastVisitedPage.label",defaultMessage:"Last visited page"})},{key:"first_page",label:n()(d.FormattedMessage,{id:"pageOnAppStoreSetting.firstPage.label",defaultMessage:"Top page in sidebar"})}];return o&&u.push({key:"personal_home",label:n()(d.FormattedMessage,{id:"pageOnAppStoreSetting.home.label",defaultMessage:"Home"})}),n()(G.Z,{isMobile:t,title:n()(d.FormattedMessage,{id:"pageOnAppStoreSetting.title",defaultMessage:"Open on start"}),caption:n()(d.FormattedMessage,{id:"pageOnAppStoreSetting.description.message",defaultMessage:"Choose what to show when Notion starts or when you switch workspaces."}),type:"dropdown",currentOption:l,options:u,onSelectOption:e=>{if(i){const t=(0,P._J)(i,i.pointer,["settings"]);f.createAndCommit({userAction:"NotificationsAndPersonalSettings.PageOnAppStartSetting",environment:s,perform:s=>{g.sW({store:t,data:{on_app_start:e},transaction:s})}})}}})}function H(){window.__c={n:"CloseBrowserTabsSetting"};const{isElectron:e,isMac:t}=(0,a.Fy)(),s=(0,r.VK)((()=>{var e;return null===(e=C.Z.state.preferences)||void 0===e?void 0:e.isClosingBrowserTabs}),[]),i=(0,o.useCallback)((()=>{const e=!s;m.electronAppFeatures.setPreference("isClosingBrowserTabs",e)}),[s]);if(!e||!t||void 0===s)return null;const l=n()(d.FormattedMessage,{id:"openInDesktopAppSettings.closeBrowserTabs.title",defaultMessage:"Close redirecting browser tabs"}),u=n()(d.FormattedMessage,{id:"openInDesktopAppSettings.closeBrowserTabs.caption",defaultMessage:'When opening links in the desktop app, close "Redirecting to your Notion app..." browser tabs.'});return n()(G.Z,{isMobile:!1,title:l,caption:u,type:"toggle",isOn:s,onToggle:i})}function j(){window.__c={n:"OpenInDesktopAppSetting"};const e=(0,a.O7)(),{isElectron:t}=(0,a.Fy)(),s=(0,r.VK)((()=>T.Z.state),[]),i=n()(d.FormattedMessage,{id:"openInDesktopAppSetting.title",defaultMessage:"Open links in desktop app"}),o=(0,r.VK)((()=>Z.Z.state.highlightedSetting===Z.R.OpenInDesktopApp),[]);if(t)return n()(G.Z,{isMobile:!1,title:i,caption:n()(d.FormattedMessage,{id:"openInDesktopAppSetting.desktopConfigureCaption",defaultMessage:"You can configure browser links to open in this app."}),type:"custom",customButton:n()(E.Z,{href:(0,S.H)(window.location.href),external:!0,onClick:()=>{c.rZ2(e)}},void 0,n()(A.Z,{},void 0,n()(d.FormattedMessage,{id:"openInDesktopAppSetting.desktopConfigureButton",defaultMessage:"Configure"})))});return n()(G.Z,{isMobile:!1,title:i,caption:n()(d.FormattedMessage,{id:"openInDesktopAppSetting.description.messageWindows",defaultMessage:"You must have the <desktopapplink>Mac or Windows app</desktopapplink> installed",values:{desktopapplink:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n()(D.Z,{external:!0,href:l.AR.desktop,onClick:e=>{e.stopPropagation()}},void 0,t)}}}),type:"toggle",isOn:"always"===s,onToggle:()=>{const t="always"===s?"never":"always";T.Z.setState(t),"always"===t&&p.openInNativeApp({url:(0,S.W)(window.location.href),environment:e}),c.wz6(e,{toggled_to:"always"===t?"on":"off"})},shouldHighlight:o})}},21291:(e,t,s)=>{s.d(t,{A:()=>I});var i=s(23174),n=s.n(i),o=s(67294),a=s(480),r=s(81954),d=s(33728),l=s(53397),u=s(5366),c=s(97880),m=s(50906),g=s(54642),p=s(9953),h=s(5978),f=s(97627),v=s(12359),S=s(17652),y=s(26374),b=s(79315),M=s(63296),w=s(905),k=s(79080),C=s(55422);function I(e){let{target:t}=e;window.__c={n:"PushAndEmailNotificationSetting"};const s=(0,a.O7)(),i=(0,r.VK)((()=>b.default.state.currentSpaceViewStore),[]),I=(0,r.VK)((()=>(0,S.rB)()),[]),T=(0,r.VK)((()=>{var e,s;switch(t){case"notify_mobile":case"notify_desktop":case"notify_email":case"notify_email_always":return(null==i||null===(e=i.getKeyStore(t))||void 0===e?void 0:e.getValue())||!1;case"notify_email_digest":return(null==i||null===(s=i.getSettingsStore())||void 0===s||null===(s=s.getKeyStore(t))||void 0===s?void 0:s.getValue())||!1;case"marketing_emails":case"notify_slack":return!1;default:(0,c.t1)(t)}}),[i,t]),P=(0,o.useCallback)((()=>{if(i){const e=!T;"notify_email_digest"===t?f.MA(s,e):v.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,perform:s=>{p.sW({store:i,data:{[t]:e},transaction:s})}}),"notify_slack"!==t&&"marketing_emails"!==t&&m.Zh2(s,{is_on:e,target:t})}}),[s,i,T,t]),Z=async()=>{const e=await g.getAuthorizedEmailPreferenceCenterLink(s,{});if(e&&"success"===e.type&&e.data.preferenceCenterLink)return m.MdY(s),h.navigateToExternalURL({environment:s,url:e.data.preferenceCenterLink});{const e=await(0,y.iF)(s),t=(0,d.t_)(e);return m.MdY(s),h.navigateToExternalURL({environment:s,url:t})}};return n()(C.Z,"marketing_emails"===t?{type:"custom",isMobile:!0,title:n()(k.Z,{target:t,isProductNotifEmailImprovementsEnabled:I}),caption:n()(w.Z,{target:t,isProductNotifEmailImprovementsEnabled:I}),customButton:n()(M.Z,{isLarge:!0,onClick:Z,icon:l.Z.alias},void 0,n()(u.FormattedMessage,{id:"notificationSettings.marketingEmails.manageSettingsButton",defaultMessage:"Manage settings"})),disableSettingsItemClick:!0}:{isMobile:!0,title:n()(k.Z,{target:t,isProductNotifEmailImprovementsEnabled:I}),caption:n()(w.Z,{target:t,isProductNotifEmailImprovementsEnabled:I}),type:"toggle",isOn:T,onToggle:P})}},40464:(e,t,s)=>{s.d(t,{Z:()=>S});var i=s(23174),n=s.n(i),o=s(10434),a=s.n(o),r=s(67294),d=s(480),l=s(81954),u=s(24405),c=s(8848),m=s(50906),g=s(98724),p=s(89086),h=s(24666),f=s(64921),v=s(58032);const S=function(e){window.__c={n:"SelectionAnnotationButton"};const{disabled:t,type:s,tooltipLabel:i,children:o,style:S,onClick:y}=e,b=(0,d.O7)(),M=(0,r.useCallback)((e=>{g.aS({environment:b,annotation:[s]}),y&&y(),m.mt_(b,{action:s})}),[b,s,y]),w=(0,l.VK)((()=>t||"editing"!==h.default.state.mode),[t]),k=(0,l.VK)((()=>Boolean((0,p.Ld)(s))),[s]),C=(0,u.yK)((e=>({button:{display:"flex",alignItems:"center",padding:"0 8px",color:k?c.ZP.blue:e.regularTextColor,...S}})),[k,S]);return n()(v.Z,{renderTooltip:()=>i,render:e=>r.createElement(f.Z,a()({style:C.button,disabled:w,disabledFeedback:w,onClick:M},e),o)})}},32404:(e,t,s)=>{s.d(t,{Z:()=>y});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=s(67294),d=s(83355),l=s(70203),u=s(5366),c=s(36280),m=s(89086),g=s(66949),p=s(24666),h=s(64921),f=s(58261),v=s(58032);class S extends d.Z{constructor(){super(...arguments),this.renderMenuTooltip=()=>{const e=this.getThemeColors();return a()(r.Fragment,{},void 0,a()("div",{},void 0,a()(u.FormattedMessage,{id:"richTextMenu.equationButton.tooltip",defaultMessage:"Create equation"})),a()("div",{},void 0,a()(f.Z,{style:e.keyboardShortcut,name:"openEquationMenu"})))},this.handleButtonPopupClick=e=>{const{onClick:t}=this.props;c.qn({environment:this.environment,analyticsFrom:"rich_text_menu"}),t&&t(e)},this.isSelected=()=>(0,m.Ld)(l.GK.Equation),this.isDisabled=()=>{const{disabled:e}=this.props;if(e)return!0;if("editing"!==p.default.state.mode&&!g.Z.isOpen())return!0;const t={[l.GK.User]:l.GK.User,[l.GK.Page]:l.GK.Page,[l.GK.Comment]:l.GK.Comment,[l.GK.Bot]:l.GK.Bot,[l.GK.Date]:l.GK.Date,[l.GK.ExternalObjectInstance]:l.GK.ExternalObjectInstance,[l.GK.TemporaryPage]:l.GK.TemporaryPage,[l.GK.TemplateVariable]:l.GK.TemplateVariable,[l.GK.FormulaPageProperty]:l.GK.FormulaPageProperty,[l.GK.FormulaContextValue]:l.GK.FormulaContextValue,[l.GK.Group]:l.GK.Group};for(const s of Object.values(t))if((0,m.J6)(s))return!0;return!1},this.styles={equationButton:{display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8}}}renderComponent(){const{style:e,children:t}=this.props,s=this.getThemeColors(),i=this.isDisabled();return a()(v.Z,{renderTooltip:this.renderMenuTooltip,render:o=>r.createElement(h.Z,n()({style:{...this.styles.equationButton,...s.equationButton,...e},disabled:i,disabledFeedback:i,onClick:this.handleButtonPopupClick},o),t)})}getThemeColors(){return{equationButton:{color:this.isSelected()?this.theme.blueColor:this.theme.regularTextColor},keyboardShortcut:{color:this.theme.mediumInvertedTextColor}}}}S.displayName="SelectionEquationButton";const y=(0,u.injectIntl)(S)},73383:(e,t,s)=>{s.d(t,{Z:()=>b});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=s(67294),d=s(83355),l=s(70203),u=s(5366),c=s(50906),m=s(45990),g=s(89086),p=s(23178),h=s(24666),f=s(64921),v=s(58261),S=s(58032);class y extends d.Z{constructor(){super(...arguments),this.handleButtonPopupClick=()=>{m.dz({type:"focusOnly",focus:!0}),c.mt_(this.environment,{action:l.GK.Link})}}renderComponent(){const e=(0,g.Ld)(l.GK.Link),t=this.isDisabled();return a()(S.Z,{renderTooltip:()=>a()(r.Fragment,{},void 0,a()("div",{},void 0,a()(u.FormattedMessage,{defaultMessage:"Add link",id:"selectionLinkButton.addLink.tooltip"})),a()("div",{},void 0,a()(v.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"openLinkMenu"}))),render:s=>r.createElement(f.Z,n()({style:{display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8,...e&&{color:this.theme.blueColor},whiteSpace:"nowrap",...this.props.style},disabled:t,disabledFeedback:t},s,{onClick:this.handleButtonPopupClick}),this.props.children)})}isDisabled(){return!!this.props.disabled||("editing"!==h.default.state.mode&&!p.Z.state.open||!!((0,g.J6)(l.GK.User)||(0,g.J6)(l.GK.Bot)||(0,g.J6)(l.GK.Date)||(0,g.J6)(l.GK.Page)))}}y.displayName="SelectionLinkButton";const b=(0,u.injectIntl)(y)},51124:(e,t,s)=>{s.d(t,{O:()=>u});var i=s(23174),n=s.n(i),o=s(67294),a=s(480),r=s(76725),d=s(23570),l=s(61519);function u(e){window.__c={n:"SettingsItems"};const{items:t}=e,{isMobile:s}=(0,a.Fy)();return o.createElement(o.Fragment,null,(0,r.Z)(t.map((e=>{let{key:t,renderSettingsItem:s}=e;return n()(o.Fragment,{},t,s())})),(e=>n()(l.Z,{size:(0,d.f)(s),isHidden:!s},e))))}},73490:(e,t,s)=>{s.d(t,{O:()=>U});var i=s(23174),n=s.n(i),o=s(67294),a=s(480),r=s(81954),d=s(24405),l=s(5366),u=s(32161),c=s(82990),m=s(17652),g=s(18441),p=s(79315),h=s(30874),f=s(68216),v=s(905),S=s(79080),y=s(10434),b=s.n(y),M=s(53397),w=s(68626),k=s(5500),C=s(50906),I=s(77719),T=s(9953),P=s(12359),Z=s(87279),F=s(64921),_=s(52275),x=s(31945),A=s(78140),E=s(32163),R=s(72495);function B(e){window.__c={n:"PersonalSlackNotificationsAccountDropdownButton"};const{currentExternalAuthentication:t,externalAuthentications:s,spaceId:i,spaceViewStore:u}=e,c=(0,a.O7)(),m=(0,a.Fy)(),p=(0,r.VK)((()=>h.Z.integrations.state.find((e=>e.id===k.nO))),[]),f=(0,d.yK)((e=>({popupContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginTop:12},dropdownButtonContainer:{display:"flex",alignItems:"center",minWidth:0,padding:"0px 8px",borderRadius:3,marginLeft:8},currentValueLabel:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},icon:{marginLeft:8,width:12,height:12,color:e.lightTextColor}})),[]);let v;v=m.isPhone?{menuType:Z.og.ActionSheet}:{menuType:Z.og.Popup,width:280,maxHeight:"50vh"};const S=o.useCallback((e=>Object.entries((0,g.YJ)(s)).map(((s,i)=>{let[n,a]=s;return{key:n,items:a.map((s=>{let{externalAuthentication:i,workspaceName:n}=s;return{key:i.id,action:()=>{e.close(),D({environment:c,spaceViewStore:u,currentExternalBotId:null==t?void 0:t.parent_id,selectedExternalBotId:i.parent_id})},render:e=>o.createElement(_.Z,b()({},e,{title:n,right:i.id===(null==t?void 0:t.id)&&M.Z.check({width:12,height:12})}))}})),render:e=>o.createElement(R.Z,b()({},e,{title:n,topBorder:0!==i}))}}))),[null==t?void 0:t.id,null==t?void 0:t.parent_id,c,s,u]),y=o.useCallback((e=>p?[{key:"disable-notification",items:[{key:"disable-slack-notification",action:()=>{e.close(),function(e){const{environment:t,spaceViewStore:s}=e;P.createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,perform:e=>{T.sW({store:s.getSettingsStore(),data:{notify_slack:null},transaction:e})}}),C.xim(t,{type:"personal",source:"notifications_and_settings"})}({environment:c,spaceViewStore:u})},render:e=>o.createElement(_.Z,b()({},e,{title:n()(l.FormattedMessage,{id:"personalSlackNotificationsAccountDropdownButton.disableNotification.label",defaultMessage:"Off"}),right:void 0===t&&M.Z.check({width:12,height:12})}))}],render:e=>o.createElement(R.Z,b()({},e,{topBorder:S.length>0}))},{key:"create-new-auth",items:[{key:"connect",render:e=>o.createElement(_.Z,b()({},e,{icon:M.Z.plus({width:12,height:12}),title:n()(l.FormattedMessage,{id:"database.viewSettings.notificationsTab.slack.addNewAccount.label",defaultMessage:"Add new account"})})),action:async()=>{var e;const t=await I.hM({environment:c,integration:p,spaceId:i,from:"notifications_and_settings"});if(w.x.isFail(t))return;const s=null===(e=t.value.externalAuthentication)||void 0===e?void 0:e.parent_id;s&&D({environment:c,spaceViewStore:u,currentExternalBotId:void 0,selectedExternalBotId:s})}}],render:e=>o.createElement(R.Z,b()({},e,{topBorder:!0}))}]:[]),[t,c,S.length,i,u,p]);return n()("div",{style:f.popupContainer},void 0,n()(x.ZP,{popupType:x.Z4.Popup,alignmentToOrigin:x.vR.End,render:e=>o.createElement(A.Z,v,n()(E.Z,{type:E.i.Vertical,initialFocus:0,sections:[...S(e),...y(e)]})),renderOrigin:t=>o.createElement(F.Z,b()({},t,{style:f.dropdownButtonContainer}),n()("div",{style:f.currentValueLabel},void 0,o.createElement(O,e)),M.Z.chevronDown(f.icon))}))}function D(e){const{environment:t,spaceViewStore:s,selectedExternalBotId:i,currentExternalBotId:n}=e;n!==i&&(P.createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,perform:e=>{T.sW({store:s.getSettingsStore(),data:{notify_slack:{external_bot_id:i}},transaction:e})}}),void 0===n?C.XCt(t,{type:"personal",source:"notifications_and_settings"}):C.OSl(t,{type:"personal",source:"notifications_and_settings"}))}function O(e){const{currentExternalAuthentication:t}=e;if(!t)return n()(l.FormattedMessage,{id:"SlackNotificationsPersonalSettingsAccountPicker.accountDropdown.selectPlaceholder",defaultMessage:"Off"});const s=(0,g.jg)(t).organizationName;return o.createElement(o.Fragment,null,s)}var G=s(55422);function U(e){window.__c={n:"SlackNotificationsSetting"};const{target:t}=e,{isMobile:s}=(0,a.Fy)(),i=(0,r.VK)((()=>p.default.state.currentSpaceViewStore),[]),y=(0,r.VK)((()=>(0,m.rB)()),[]),b=(0,r.VK)((()=>p.default.state.currentSpaceStore),[]),M=(0,r.VK)((()=>h.Z.completeSlackAuthentications.state),[]),w=(0,r.VK)((()=>{var e;const s=null==i||null===(e=i.getSettings())||void 0===e||null===(e=e[t])||void 0===e?void 0:e.external_bot_id;if(!s)return;const n=M.find((e=>e.parent_id===s));if(n)return n;if(!i)return;return(0,f.Kv)(i,{id:s,table:u.P}).getValue()}),[i,M,t]),k=(0,d.yK)((e=>({notifySlackSelectedWorkspaceName:{fontWeight:c.Z.fontWeight.bold,color:e.darkTextColor},titleWithBadgeContainer:{display:"flex",alignItems:"center"},betaBadgeContainer:{marginTop:-3},betaBadge:{display:"inline",marginLeft:6}})),[]);return i&&b?n()(G.Z,{type:"custom",isMobile:s,title:n()(S.Z,{target:t,isProductNotifEmailImprovementsEnabled:y}),caption:o.createElement(o.Fragment,null,w?n()(l.FormattedMessage,{id:"notificationSettings.slackNotificationsSettings.workspaceSelected.description",defaultMessage:"Receive notifications in {slackWorkspaceName} when you're mentioned in a page, database property, or comment.",values:{slackWorkspaceName:n()("span",{style:k.notifySlackSelectedWorkspaceName},void 0,(0,g.jg)(w).organizationName)}}):n()(v.Z,{target:t,isProductNotifEmailImprovementsEnabled:y})),customButton:n()(B,{currentExternalAuthentication:w,externalAuthentications:M,spaceId:b.id,spaceViewStore:i})}):null}},40141:(e,t,s)=>{s.d(t,{Z:()=>Fs});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=(s(57658),s(96486)),d=s.n(r),l=s(67294),u=s(83355),c=s(49085),m=s(8848),g=s(58573),p=s(53397),h=s(27006),f=s(90468),v=s(19889),S=s(2438),y=s(97880),b=s(82990),M=s(7928),w=s(5366),k=s(48298),C=s(50906),I=s(54642),T=s(43132),P=s(47307),Z=s(92625),F=s(76464),_=s(29974),x=(s(21703),s(15010)),A=s(64964),E=s(21325),R=s(12359);const B=(0,w.defineMessages)({removingGuest:{id:"convertGuestToMember.removeGuest.updatingMessage",defaultMessage:"Updating…"},convertingGuest:{id:"convertGuestToMember.convertingGuest.updatingMessage",defaultMessage:"Updating…"}});async function D(e){const{environment:t,store:s,role:i,guestUserStore:n}=e,o=n.id,r=n.getEmail();try{Z.j({message:B.convertingGuest});const e=[{type:"user_permission",role:i,user_id:o}],{serverCommitResult:n}=R.createAndCommit({userAction:"spacePerimssionGuestActions.convertGuestToMember",environment:t,perform:i=>{F.ep({environment:t,store:s,permissionItems:e,transaction:i,from:"convert_to_member"})}});await n,C.Rbv(t,{member_user_id:o}),C.jBu(t,{role:i,is_space:!0,invite_targets:[{type:"existingUser",value:{id:o,version:0,email:""},spaceRole:"none"}],is_onboarding:!1,invite_origin:"convert_to_member",permission_items:e,invite_message_length:0,domainType:(0,x.JF)()})}catch(d){A.oV({label:a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.snackbar.failure",defaultMessage:"Failed to convert {email} to workspace member",values:{email:r}})})}finally{await E.bi(t),Z.x()}}async function O(e){const{environment:t,store:s,guestUserStore:i}=e,n=i.id,o=i.getEmail();try{Z.j({message:B.removingGuest});if("success"!==(await I.removeUsersFromSpace(t,{userIds:[n],spaceId:s.id,removePagePermissions:!0,revokeUserTokens:!1})).type)throw new Error("Failed to remove guest");C.bwR(t)}catch(r){A.oV({label:a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.snackbar.failure",defaultMessage:"Failed to remove {email} from workspace",values:{email:o}})})}finally{await E.bi(t),Z.x()}}var G=s(79315),U=s(37181);var V=s(4708),L=s(87279),N=s(67669),q=s(33665),W=s(38755),K=s(53877);var z=s(62216),H=s(21115),j=s(8323),Q=s(23537),Y=s(77907),$=s(88632),J=s(68216),X=s(72087),ee=s(64404),te=s(92083),se=s(78291),ie=s(98905),ne=s(21752),oe=s(42922),ae=s(64921),re=s(52275),de=s(31945),le=s(61519),ue=s(73063),ce=s(74194),me=s(68785),ge=s(78140),pe=s(32163),he=s(63296),fe=s(77137),ve=s(72495),Se=s(62385),ye=s(24006),be=s(58032),Me=s(64369),we=s(24405),ke=s(16639),Ce=s(31278),Ie=s(53695);function Te(e){let{spaceStore:t,groups:s,onGroupClick:i}=e;window.__c={n:"GroupsDowndownForMember"};const o=(0,w.useIntl)(),r=s.length,d=(0,we.yK)((e=>({title:{marginRight:8,color:0===r?e.lightTextColor:void 0},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},untitled:{color:e.lightTextColor}})),[r]),u=s.map((e=>({key:e.id,render:s=>{var i;const r=ke.kF({intl:o,group:e});return l.createElement(re.Z,n()({icon:a()(Ce.Z,{disabled:!0,icon:e.icon&&t?{pointer:t.pointer,icon:e.icon}:void 0,size:18,isEmptyPage:!1,title:r,defaultIcon:p.Z.typesPerson(d.defaultGroupIconPill)}),title:a()(Me.Z,{style:e.name?void 0:d.untitled},void 0,r),caption:a()(w.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"groupsDropdownForMember.numMembers",values:{numMembers:(null===(i=e.user_ids)||void 0===i?void 0:i.length)||0}}),inline:!0},s))},action:i})));return a()(Ie.N,{title:a()(Me.Z,{style:d.title},void 0,a()(w.FormattedMessage,0===r?{id:"groupsDropdownForMember.groupsCountNone.label",defaultMessage:"None"}:{id:"groupsDropdownForMember.groupsCount.label",defaultMessage:"{numberOfGroups, plural, one {{numberOfGroups} group} other {{numberOfGroups} groups}}",values:{numberOfGroups:r}})),items:u,disabled:0===r})}var Pe=s(15145),Ze=s(21202),Fe=s(5978),_e=s(84210),xe=s(61766),Ae=s(28992),Ee=s(43765),Re=s(89728),Be=s(11470);class De extends u.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:xe.Z},this.renderPopup=()=>{const{device:e}=this.environment,{store:t,guest:s,hideActionButtons:i}=this.props,o=t.canEditMembership(),r=s.guestPageIds.map((e=>{const s=J.G.createChildStore(t,{table:Ze.iU,id:e});return{key:e,render:e=>l.createElement(Be.Z,n()({},e,{store:s,placeholder:a()(w.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})})),action:()=>{const s=J.G.createChildStore(t,{table:Ze.iU,id:e}),i=(0,_e.ZP)({store:s,fullyQualified:!1,pageVisitSource:Pe.tY.LinkInPage});Fe.navigate({environment:this.environment,url:i,openInNew:"tab"})}}}));let d,u;d=e.isMobile?{menuType:L.og.ActionSheet}:{menuType:L.og.Popup,width:300},(0,H.qF)(this.environment)&&(u=a()(be.Z,{renderTooltip:()=>this.isSubscribed()?a()(w.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):a()(w.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>l.createElement(he.Z,n()({isLarge:!0,onClick:this.handleConvertToMemberClick},e),this.isSubscribed()?a()(w.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):a()(w.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"}))}));const c=!i&&o;return l.createElement(ge.Z,d,c&&a()(Ae.Z,{title:a()("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"}},void 0,u,a()(be.Z,{renderTooltip:()=>a()(w.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>l.createElement(he.Z,n()({isLarge:!0,isRed:!0,style:{marginLeft:u?8:0},onClick:this.handleRemoveClick},e),a()(w.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"}))}))}),c&&a()(Ee.Z,{title:a()(w.FormattedMessage,{id:"guestPagesPopup.guestAccessiblePagesCaption",defaultMessage:"This guest can access these pages"})}),a()(pe.Z,{type:pe.i.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>l.createElement(ve.Z,e),items:r}]}))},this.handleRemoveClick=()=>{P.showDialog({showCancel:!0,keepFocus:!1,message:a()(w.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:a()(w.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{const{store:e,guestStore:t}=this.props;this.stores.buttonPopupStore.setState({...this.stores.buttonPopupStore.state,open:!1}),await O({environment:this.environment,guestUserStore:t,store:e})}}]})},this.handleConvertToMemberClick=async()=>{const{store:e,guestStore:t,isSubscribed:s}=this.props,i=s?"read_and_write":"editor";this.stores.buttonPopupStore.setState({...this.stores.buttonPopupStore.state,open:!1}),await D({environment:this.environment,guestUserStore:t,role:i,store:e})}}renderComponent(){const{device:e}=this.environment,{buttonPopupStore:t}=this.stores,{store:s,guest:i}=this.props;return i.guestPageIds.map((e=>{J.G.createChildStore(s,{table:Ze.iU,id:e}).load()})),0===i.guestPageIds.length?a()(Re.Z,{disabled:!0},void 0,a()(w.FormattedMessage,{id:"guestPagesPopup.permissionsForUserGuest.label",defaultMessage:"Guest"})):a()(de.ZP,{popupType:e.isMobile?de.Z4.SlideUp:de.Z4.Popup,renderOrigin:e=>l.createElement(Re.Z,e,a()(w.FormattedMessage,{id:"guestPagesButton.label",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:i.guestPageIds.length}}),p.Z.chevronDown({width:10,marginLeft:4,fill:this.theme.lightIconColor})),buttonPopupStore:t,render:this.renderPopup})}isSubscribed(){const{data:e}=se.default.state;return Boolean(e&&(0,H.YK)(e))}}De.displayName="GuestPagesPopup";const Oe=(0,w.injectIntl)(De);var Ge=s(74523),Ue=s(42402),Ve=s(7567),Le=s(480),Ne=s(81954),qe=s(5851),We=s(53680),Ke=s(93963),ze=s(40235),He=s(7057),je=s(42875),Qe=s(29302),Ye=s(45653);function $e(e){window.__c={n:"SpaceSettingsRequestRow"};const{store:t,request:s}=e,{forActor:i,accessRequestStore:n}=s,o=(0,Le.O7)(),[r,d]=(0,l.useState)(!1),u=(0,we.yK)((e=>({actionButtons:{display:"flex",alignItems:"center",gap:12},email:{display:"flex",gap:4},requestMetadata:{minWidth:0,marginLeft:6,marginRight:6},tooltip:{marginBottom:2},tooltipHeader:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em",marginBottom:2},viewReasonsButton:{marginLeft:28,marginTop:2,border:"none"},tooltipUserRow:{display:"flex",justifyContent:"space-between",marginBottom:4},tooltipUserRowEmail:{marginLeft:5}})),[]),c=(0,w.useIntl)(),m=(0,Ne.VK)((()=>{var e;const t=[],i=new Set;return null===(e=s.createdByActorsWithReason)||void 0===e||e.forEach((e=>{i.has(e.actor.id)||t.push(e.actor),i.add(e.actor.id)})),t}),[s.createdByActorsWithReason]);if(!s||!s.forActor||!s.createdByActorsWithReason.length)return null;const g=K.CQ(s.latestRequestTime,(0,je.r)()),p=(0,He.ZV)({value:g,date_format:"relative",userTimeZone:(0,je.r)(),intl:c,allowRelativeDates:!0}),h={environment:o,store:t,accessRequestStore:n,forActor:i},f=m.filter((e=>e.email!==s.forActor.email)),v=f.length!==m.length,S=()=>1===m.length?a()(w.FormattedMessage,v?{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}:{defaultMessage:"From {actorName}",id:"spaceSettingsRequests.requestRowAction.requestedBySingular",values:{actorName:m[0].name}}):a()(w.FormattedMessage,v?{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and from {secondActorName}} other {Guest self request and from {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest",values:{secondActorName:f[0].name,numberOfOtherActors:f.length}}:{defaultMessage:"{numberOfOtherActors, plural, one {From {firstActorName} and {secondActorName}} other {From {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural",values:{firstActorName:m[0].name,secondActorName:m[1].name,numberOfOtherActors:m.length-1}});return a()("div",{style:{width:"100%"}},void 0,a()("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},void 0,a()("div",{},void 0,a()("div",{style:{display:"flex",alignItems:"center"}},void 0,a()(Ye.Z,{userValue:s.forActor,size:28,borderStyle:"dashed"}),a()("div",{style:u.requestMetadata},void 0,a()("div",{style:u.email},void 0,a()(Me.Z,{className:"notranslate"},void 0,s.forActor.email)),a()(Me.Z,{isSmall:!0},void 0,a()(be.Z,{renderTooltip:()=>a()("div",{style:u.tooltip},void 0,a()(Me.Z,{style:u.tooltipHeader},void 0,a()(w.FormattedMessage,{defaultMessage:"Requested by",id:"spaceSettingsRequests.requestRowAction.requestedByMoreThanTwo.tooltip"})),m.map((e=>a()("div",{style:u.tooltipUserRow},e.id,a()(Qe.Z,{avatarSize:18,userValue:e}),a()("div",{style:u.tooltipUserRowEmail},void 0,e.email))))),render:e=>l.createElement("span",e,a()(S,{}))})," · ",p)))),a()("div",{style:u.actionButtons},void 0,a()(Re.Z,{isGray:!0,onClick:async()=>{await k.kn({...h,status:"rejected",from:"requests_center"})}},void 0,a()(w.FormattedMessage,{defaultMessage:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButton.label"})),a()(he.Z,{isBlue:!0,onClick:async()=>{await k.kn({...h,status:"approved",from:"requests_center"})}},void 0,a()(w.FormattedMessage,{defaultMessage:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButton.label"})))),s.createdByActorsWithReason.some((e=>{let{reason:t}=e;return Boolean(t)}))&&a()(he.Z,{isSmall:!0,isBlue:!0,style:u.viewReasonsButton,onClick:()=>d(!r)},void 0,a()(w.FormattedMessage,r?{id:"spaceSettingsRequests.requestRowAction.closeReasonsButton.label",defaultMessage:"Close reasons"}:{id:"spaceSettingsRequests.requestRowAction.viewReasonsButton.label",defaultMessage:"View reasons"})),r&&a()("div",{style:{marginLeft:34,marginTop:2,fontSize:b.Z.fontSize.UIRegular.desktop}},void 0,s.createdByActorsWithReason.filter((e=>{let{reason:t}=e;return Boolean(t)})).map(((e,t)=>a()("div",{},t,e.actor.name," · ",e.reason)))))}function Je(e){window.__c={n:"SpaceSettingsRequestsTable"};const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:i}=e,n=(0,Ne.VK)((()=>s.filter((e=>"pending"===e.accessRequestStore.getKeyStore("status").getValue())).sort(((e,t)=>t.latestRequestTime-e.latestRequestTime))),[s]),o=(0,we.yK)((e=>({requestColumn:{width:"100%"},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor,borderStyle:"solid",borderColor:e.regularDividerColor,borderWidth:1,borderRadius:3},mailIcon:{height:12,width:17,color:e.mediumIconColor,marginRight:6}})),[]),r={key:"request",header:void 0,style:o.requestColumn};return 0===n.length?a()("div",{style:o.zeroStateContainer},void 0,p.Z.mailRound(o.mailIcon),a()(w.FormattedMessage,{id:"spaceSettingsRequests.emptyRequests.message",defaultMessage:"No invite requests yet"})):a()(ze.Z,{hideHeader:!0,columns:[r],rows:n.map(((e,s)=>({key:`request${s.toString()}`,columns:[a()("div",{style:{display:"flex",alignItems:"center"}},e.accessRequest.id,i<e.accessRequest.created_time&&a()("div",{style:{marginLeft:-18,marginRight:10}},void 0,a()(Ke.z,{size:8})),a()($e,{store:t,request:e}))]})))})}function Xe(e){window.__c={n:"SpaceSettingsRequests"};const{spaceStore:t,accessRequestsStore:s}=e,i=(0,Le.O7)(),[n,o]=(0,l.useState)(Date.now()),[,,r]=(0,Ne.AF)(void 0,We.Z),d=(0,Ne.VK)((()=>r.getValueForSpace(t)),[t,r]),u=Boolean(null==d?void 0:d.disableMembershipRequests),c=Boolean(null==d?void 0:d.disableGuestMembershipRequests),m=(0,Ne.VK)((()=>t.getKeyStore("settings").getKeyStore("seen_guest_membership_requests").getValue()&&(0,V.Ye)(i)),[i,t]),[g,,]=(0,Ne.AF)(s),p=(0,we.yK)((e=>({errorContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor}})),[]);(0,l.useEffect)((()=>{const{currentSpaceViewStore:e}=G.default.state;if(!e)return;const t=e.getKeyStore("settings").getKeyStore("last_opened_request_center").getValue();t&&o(t),R.createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:i,perform:t=>{R.applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);return h=g.error,f=g.result,g.ready?h||!f?a()("div",{style:p.errorContainer},void 0,a()(w.FormattedMessage,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})):l.createElement(l.Fragment,null,a()(et,{spaceStore:t,securitySettingsStoreState:d,disabled:u}),m&&a()(tt,{spaceStore:t,securitySettingsStoreState:d,disabled:c}),a()(Je,{spaceStore:t,accessRequestRenderValues:f,lastOpenedRequestCenterTime:n})):a()("div",{style:p.errorContainer},void 0,a()(me.Z,{}));var h,f}function et(e){window.__c={n:"AllowMembershipRequestsToggle"};const t=(0,Le.O7)(),{spaceStore:s,securitySettingsStoreState:i,disabled:n}=e,o=(0,we.yK)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:14},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[]);return a()("div",{style:o.toggleContainer,onClick:function(){i&&qe.n(t,{securitySettingsState:{...i,disableMembershipRequests:!i.disableMembershipRequests},spaceStore:s})}},void 0,a()("div",{style:o.titleDescription},void 0,a()(w.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",defaultMessage:"Allow members to request adding other members"}),a()(Me.Z,{isSmall:!0,isMultiline:!0,style:o.description},void 0,a()(w.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",defaultMessage:"Members can submit requests to admins to add more members"}))),a()(ye.Z,{on:!n}))}function tt(e){window.__c={n:"AllowGuestMembershipRequestsToggle"};const t=(0,Le.O7)(),{spaceStore:s,securitySettingsStoreState:i,disabled:n}=e,o=(0,we.yK)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:14},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[]);return a()("div",{style:o.toggleContainer,onClick:function(){i&&qe.n(t,{securitySettingsState:{...i,disableGuestMembershipRequests:!i.disableGuestMembershipRequests},spaceStore:s})}},void 0,a()("div",{style:o.titleDescription},void 0,a()(w.FormattedMessage,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.title",defaultMessage:"Allow page guests to request to be added as members to the workspace"}),a()(Me.Z,{isSmall:!0,isMultiline:!0,style:o.description},void 0,a()(w.FormattedMessage,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.description",defaultMessage:"Guests of the workspace can submit requests to admins to be added as members"}))),a()(ye.Z,{on:!n}))}var st=s(95209),it=s(79817),nt=s(75472),ot=s(52878),at=s(1743),rt=s(9019),dt=s(44532),lt=s(24145),ut=s(43579);const ct=(0,w.defineMessages)({reason_placeholder:{id:"RequestMembersModal.reason.placeholder",defaultMessage:"Add a reason (optional)"}});const mt=function(e){window.__c={n:"RequestMembersModal"};const t=(0,Le.O7)(),{store:s,origin:i,analyticsFrom:o}=e,[r,d]=(0,l.useState)(!1),[u,c]=(0,l.useState)("none"),g=(0,Ne.qz)(void 0,ot.Z),p=(0,w.useIntl)(),h=(0,we.yK)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:420},container:{padding:20},title:{fontWeight:b.Z.fontWeight.medium,marginBottom:10},reasonTitle:{color:m.ZP.mediumTextColor,marginTop:10,marginBottom:5},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20}})),[]),f=e=>{e.currentTarget===e.target&&c("none")},v=async()=>{C.cir(t,{...it.Oh(t,g.state.contextualInviteStore),from:o}),st.eH({permissionsInviteStore:g.state.permissionsInviteStore,contextualInviteStore:g.state.contextualInviteStore}),g.state.contextualInviteStore.startRequestMembership();const e=g.state.contextualInviteStore.state.invitedUsers;d(!1);const i=await it.fC({environment:t,spaceStore:s,originId:void 0,originType:o,reasonMessage:g.state.permissionsInviteStore.state.emailMessage,contextualInviteStore:g.state.contextualInviteStore,intl:p});S({success:i,intl:p,users:e}),g.reset()},S=e=>{const{success:t,intl:s,users:i}=e;0!==i.length&&(t?A.oV({label:s.formatMessage({id:"requestMembersModal.requestSuccess.toast",defaultMessage:"Successfully requested membership for {users} to your workspace admins."},{users:it.uJ(i,s)})}):A.oV({label:s.formatMessage({id:"requestMembersModal.requestFail.toast",defaultMessage:"Failed to invite {users} to the workspace."},{users:it.uJ(i,s)})}))};return a()(rt.Z,{modalStyle:h.modalStyle,open:r,onDismiss:async()=>{await(0,nt.Aw)({environment:t,permissionsInviteStoreState:g.state.permissionsInviteStore.state,from:"space_settings_add_members"})||(d(!1),g.reset()),c("none")},renderContent:()=>a()("div",{style:h.container,onClick:f},void 0,a()("div",{style:h.title,onClick:f},void 0,a()(w.FormattedMessage,{id:"requestMembersModal.title",defaultMessage:"Request to invite members"})),a()(dt.ZP,{popupType:dt.kQ.Popup,alignmentToOrigin:dt.ZP.Alignment.Start,placementToOrigin:dt.ZP.Placement.Bottom,open:"invites"===u,sameWidthAsOrigin:!0,originGap:10,disableMouseCapture:!0,origin:a()(lt.Z,{permissionsInviteStore:g.state.permissionsInviteStore,store:s,handleClickRemoveToken:e=>{st.PV({targetToRemove:e,permissionsInviteStore:g.state.permissionsInviteStore,defaultRoleForNonBot:"read_and_write"})},handleInputChange:async e=>{c("invites"),await st.jC({environment:t,event:e,permissionsInviteStore:g.state.permissionsInviteStore})},handleInputSubmit:async()=>{},origin:"add_members",defaultRoleForNonBot:"read_and_write",isTeamsEnabled:!1,right:a()("div",{}),focus:"invites"===u,handleFocus:()=>c("invites")}),onDismiss:()=>c("none"),render:()=>{const e=a()(ut.Z,{permissionsInviteStore:g.state.permissionsInviteStore,store:s,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!1,sectionRenderLimit:10,membersOnly:!1}),t={menuType:L.og.Popup,disableScroller:!1};return a()("div",{},void 0,l.createElement(ge.Z,n()({},t,{width:380}),e))},style:{width:"100%"}}),a()("div",{style:h.reasonTitle,onClick:f},void 0,a()(w.FormattedMessage,{id:"requestMembersModal.reasonForRequest.title",defaultMessage:"Reason for request"})),a()(at.Z,{capture:!0,allowEsc:!0},void 0,a()(ce.Z,{textarea:!0,style:{padding:8},value:g.state.permissionsInviteStore.state.emailMessage,focus:"reason"===u,onFocus:()=>c("reason"),onChange:e=>{g.state.permissionsInviteStore.setState({...g.state.permissionsInviteStore.state,emailMessage:e.target.value})},placeholder:p.formatMessage(ct.reason_placeholder)})),a()("div",{style:h.footer,onClick:f},void 0,a()(Me.Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0},void 0,a()(w.FormattedMessage,{id:"RequestMembersModal.caption",defaultMessage:"Your admins will approve or decline your request."})),a()(oe.Z,{isLarge:!0,style:h.requestInvitesButton,onClick:v},void 0,a()(w.FormattedMessage,{id:"requestMembersModal.requestInvitesButton.label",defaultMessage:"Request invites"})))),origin:a()("div",{onClick:()=>{C.HmE(t,{...it.Oh(t,g.state.contextualInviteStore)}),d(!0)}},void 0,i)})};var gt=s(83890),pt=s(98707),ht=s(27386),ft=s(23189),vt=s(40394),St=s(57688),yt=s(33929),bt=s(33846),Mt=s(31194),wt=s(48690),kt=s(30397),Ct=s(48019),It=s(68894),Tt=s(93686);const Pt=(0,w.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder"}});function Zt(e){window.__c={n:"TeamsPopup"};const t=(0,Le.O7)(),s=(0,we.yK)((()=>({teamMenuItem:{fontWeight:400}})),[]),[i,o]=(0,Ne.AF)(void 0,bt.Z),r=(0,l.useCallback)((e=>St.RF({environment:t,teamId:e,tab:wt.a.Members,from:"teams_dropdown_for_group"})),[t]),d=(0,Ne.VK)((()=>[{key:"teams for group",render:e=>l.createElement(ve.Z,e),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>l.createElement(re.Z,n()({icon:a()(Tt.p,{disabled:!0,store:e}),title:a()(Me.Z,{style:s.teamMenuItem},void 0,e.getName()),right:a()(w.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsInGroupMenu.filterForTeams.numMembers",values:{numMembers:e.getUserIdsInTeam().length}})},t)),action:()=>{r(e.id)},closeParentMenu:!0})))}]),[s,e.teamStores,r]),u=i.inputValue,c=a()(Ct.Z,{filter:u,context:{blocks:[],environment:t,publicEditMode:void 0},sections:d,initialFocus:0}),m=a()(ve.Z,{isInput:!0},void 0,a()(It.ZP,{value:u,onChange:(0,l.useCallback)((e=>{o({inputValue:e.target.value,focus:!1})}),[o]),focus:!0,focusAfterAnimation:!0,placeholder:yt.default.formatMessage(Pt.filterTeams)})),g={menuType:L.og.Popup,width:280,maxHeight:"50vh",header:e.teamStores.length>5?m:void 0};return l.createElement(ge.Z,g,c)}const Ft=function(e){window.__c={n:"TeamsDropdownForGroup"};const t=(0,Ne.qz)(void 0,xe.Z),[s]=(0,Ne.AF)(kt.Z),i=(0,we.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),o=(0,Ne.VK)((()=>s.teams.filter((t=>t.getMembers().some((t=>"group"===t.entity_type&&t.group_id===e.group.id))))),[s,e.group]);return a()(de.ZP,{popupType:de.Z4.Popup,renderOrigin:e=>l.createElement(Re.Z,n()({disabled:0===o.length,style:0===o.length?i.noTeams:i.button},e),0===o.length?a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",defaultMessage:"None"}):a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:o.length}}),o.length>0&&p.Z.chevronDown(i.chevron)),buttonPopupStore:t,placementToOrigin:Mt.Iw.Bottom,render:e=>a()(Zt,{parent:e,teamStores:o}),onClose:(0,l.useCallback)((()=>{t.reset()}),[t])})};var _t=s(19522),xt=s(93405);function At(e){window.__c={n:"GroupActionMenu"};const{group:t,spaceStore:s,settingsStore:i}=e,o=(0,Ne.qz)(void 0,xe.Z);return a()(de.ZP,{popupType:dt.kQ.Popup,render:()=>a()(Et,{group:t,spaceStore:s,popupStore:o,settingsStore:i}),buttonPopupStore:o,renderOrigin:e=>l.createElement(ue.Z,n()({icon:p.Z.dots},e))})}function Et(e){window.__c={n:"ActionMenu"};const{group:t,spaceStore:s,popupStore:i,settingsStore:o}=e,r=(0,Q.Gc)(),u=(0,Ne.VK)((()=>s.canAdmin()),[s]),c=(0,Le.O7)(),m=(0,we.yK)((e=>({deleteButton:{color:e.redBadgeBackground}})),[]),g=(0,l.useCallback)((async()=>{i.setState({open:!1});await P.confirmUserAction({message:a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group? Any pages that are private to this group will be transferred to you."}),acceptLabel:a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})})&&(await R.createAndCommitAsync({environment:c,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async e=>{await _.Xv({environment:c,spaceStore:s,group:t,transaction:e})}}),C.dan(c))}),[t,c,s,i]),p=(0,l.useCallback)((()=>{o.setState({...o.state,editingNameGroupId:t.id,groupNameInputValue:t.name||""}),i.setState({open:!1}),C.XbW(c)}),[t,c,i,o]),h=(0,l.useCallback)((()=>{_t.Z.setState({..._t.Z.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),St.lo("group_settings")}),[t]),f={key:"action_menu",render:e=>l.createElement(ve.Z,e),items:d().compact([{key:"rename",render:e=>l.createElement(xt.Z,n()({},e,{title:a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})})),action:p},r?{key:"create_team_from_group",render:e=>l.createElement(xt.Z,n()({},e,{title:a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",defaultMessage:"Create teamspace from group"})})),action:h}:void 0,u&&{key:"delete",render:e=>l.createElement(xt.Z,n()({},e,{title:a()("div",{style:m.deleteButton},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"}))})),action:g}])};return a()(ge.Z,{menuType:L.og.Popup},void 0,a()(pe.Z,{type:pe.i.Vertical,initialFocus:0,sections:[f],onAccept:()=>{i.setState({open:!1})}}))}class Rt extends c.default{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const Bt=Rt;var Dt=s(86125),Ot=s(66897),Gt=s(33728),Ut=s(31299),Vt=s(92864),Lt=s(47082),Nt=s(97680);function qt(e){window.__c={n:"GroupAddMembersButton"};const{group:t,spaceStore:s,groupStore:i}=e,o=(0,Ne.qz)(void 0,xe.Z),r=(0,we.yK)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return a()(de.ZP,{popupType:dt.kQ.Popup,render:()=>a()(Wt,{spaceStore:s,group:t,popupStore:o,groupStore:i}),buttonPopupStore:o,onClose:()=>i.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),style:r.popup,renderOrigin:e=>a()("div",{},void 0,l.createElement(Re.Z,n()({isGray:!0,icon:p.Z.plus,style:r.button},e),a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})))})}function Wt(e){window.__c={n:"AddMemberMenu"};const t=(0,Le.O7)(),s=(0,w.useIntl)(),{group:i,spaceStore:n,popupStore:o,groupStore:r}=e,u=(0,Ne.VK)((()=>r.state.temporaryUserIds.map((e=>{const t=n.getRecordValue({table:v.KJ,id:e});return a()(Vt.vw,{userValue:t,format:Vt.vw.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=r.state.temporaryUserIds.filter((t=>t!==e));r.setState({...r.state,temporaryUserIds:t})},shouldShrink:!0,isSingle:!1},e)}))),[n,r]),c=(0,Ne.VK)((()=>()=>{const{temporaryUserIds:e}=r.state,s=i.user_ids||[],a=d().union(s,e),l={...i,user_ids:a,last_edited_time:Date.now()};R.createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",environment:t,perform:e=>{_.jF({spaceStore:n,group:l,transaction:e})}}),r.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),o.setState({open:!1}),C.Kf$(t,{add_member_count:e.length})}),[i,t,r,o,n]),m=(0,l.useCallback)((()=>{const{temporaryUserIds:e}=r.state,t=e.slice(0,e.length-1);r.setState({...r.state,temporaryUserIds:t})}),[r]),g=(0,l.useCallback)((e=>{const t=e.target.value,{extractedEmails:s,newInputValue:i}=(0,Gt.zI)(t),{currentSpaceStore:n}=G.default.state,{data:o}=se.default.state;if(!o||!n)return;const a=(0,H.CM)(o).map((e=>e.userId)),l=d().compact(a.map((e=>J.U6.createChildStore(n,{table:v.KJ,id:e}).getValue()))).filter((e=>s.includes(e.email)&&!r.state.temporaryUserIds.includes(e.id)));r.setState({...r.state,temporaryUserIds:[...r.state.temporaryUserIds,...l.map((e=>e.id))],userInputValue:i})}),[r]),p=(0,Ne.VK)((()=>r.state.userInputValue),[r]),h=(0,Ne.VK)((()=>r.state.temporaryUserIds),[r]);return a()(ge.Z,{menuType:L.og.Popup,tokenInputHeader:!0,header:a()(Lt.Z,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:Lt.Z.Format.Group,tokens:u,placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:m,value:p,onChange:g,inputAndTokenWrapRightStyle:{paddingTop:t.device.isMobile?0:6,paddingBottom:t.device.isMobile?0:6},right:a()(oe.Z,{isLarge:!0,onClick:c},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"}))})},void 0,a()(fe.Z,{request:{query:p,temporaryUserIds:h},performRequest:async s=>{let{query:i,temporaryUserIds:n}=s;const o=e.group.user_ids||[];return(await Ut.Yu({environment:t,query:i,membersOnly:!0})).filter((e=>o.indexOf(e.id)<0&&n.indexOf(e.id)<0)).slice(0,20)},render:(e,t)=>a()(Kt,{results:t,spaceStore:n,groupStore:r})}))}function Kt(e){window.__c={n:"AddMemberResults"};const{spaceStore:t,groupStore:s}=e,[i,o]=(0,Ne.AF)(s,Bt),r=(e.results||[]).map((e=>{let{id:t}=e;return t})),d=(0,Ne.VK)((()=>r.map((e=>{const s=J.U6.createChildStore(t,{table:v.KJ,id:e}).getValue();return{key:e,render:e=>l.createElement(Nt.Z,n()({},e,{actor:(0,Ot.m3)(s),useEmailAsTooltip:!0})),action:()=>{const t=[...i.temporaryUserIds,e];o({...i,temporaryUserIds:t,userInputValue:""})}}}))),[t,o,i,r]);if(0===r.length)return a()(ve.Z,{},void 0,a()(Ee.Z,{title:a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})}));{const e={key:"user_menu",render:e=>l.createElement(ve.Z,e),items:d};return a()(pe.Z,{type:pe.i.Vertical,initialFocus:0,sections:[e]})}}function zt(e){window.__c={n:"GroupMembers"};const{group:t,canEdit:s,spaceStore:i,settingsStore:o}=e,r=(0,w.useIntl)(),d=(0,Ne.qz)(void 0,Bt),{groupMembers:u,remainingMembers:c}=(0,Ne.VK)((()=>{const{countRemainingUsers:e,totalNumberMembers:s,limitedUserStores:n}=(0,ke.rm)({group:t,spaceStore:i,limit:d.state.limitUsers&&!o.state.groupsFilter?10:void 0});return{groupMembers:(0,ke.N5)({userStores:n,spaceStore:i,intl:r}),remainingMembers:e,totalMembers:s}}),[t,i,o,d,r]);return a()("div",{style:{padding:"4px 42px 8px"}},void 0,u.map((t=>l.createElement(Ht,n()({key:t.id,userStore:t},e)))),c>0&&a()(Re.Z,{isGray:!0,style:{marginTop:4},onClick:()=>{d.setState({...d.state,limitUsers:!1})}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:c}})),s?a()(qt,{group:t,spaceStore:i,groupStore:d}):u.length<1&&a()(Re.Z,{disabled:!0,isGray:!0},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",defaultMessage:"No members inside"})))}function Ht(e){window.__c={n:"GroupMember"};const{spaceStore:t,userStore:s,group:i,canEdit:n}=e,o=(0,Le.O7)(),r=(0,Ne.VK)((()=>t.isDefined()?(0,N.su)(t.getPermissionItems(),s.id):"none"),[t,s]);return a()("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},s.id,a()("div",{style:{display:"flex"}},void 0,a()(Qe.Z,{userStore:s,style:{fontSize:14,fontWeight:400,lineHeight:"17px",paddingRight:6,minHeight:34,width:"100%"},avatarSize:22}),(0,h.Bc)(r)&&a()(Dt.Z,{role:"membership_admin"===r?"membership_admin":"admin"})),n&&a()(Re.Z,{isGray:!0,hoveredStyle:{color:m.ZP.red},onClick:async()=>{if(await P.confirmUserAction({message:a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})})){const e=(i.user_ids||[]).filter((e=>e!==s.id)),n={...i,user_ids:e,last_edited_time:Date.now()};R.createAndCommit({userAction:"SpacePermissionGroup.renderUser",environment:o,perform:e=>{_.jF({spaceStore:t,group:n,transaction:e})}}),C.xtf(o)}}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})))}var jt=s(13991),Qt=s(22808),Yt=s(49312),$t=s(12793),Jt=s(3386),Xt=s(5210);function es(e){window.__c={n:"GroupNameToggle"};const{row:t,canEdit:s,open:i,toggleOpenState:o,spaceStore:r,settingsStore:d}=e,u=t.group,c=(0,w.useIntl)(),m=(0,we.Fg)(),g=(0,Le.O7)(),h=ke.kF({intl:c,group:u}),f=(0,we.yK)((e=>({container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"},toggle:{flexShrink:0,marginRight:2},chevron:{width:12,height:12,transition:"transform 200ms ease-out",transform:`rotateZ(${i?0:-90}deg)`,fill:"inherit",opacity:.5,marginRight:4},name:{fontFamily:b.Z.getCompositeFontFamily(jt.SP).sans,fontSize:14,lineHeight:"17px",marginRight:4},input:{fontWeight:b.Z.fontWeight.medium,padding:"4px 6px",background:e.contentBackgroundTransparent},icon:{marginRight:9}})),[i]),v=(0,l.useCallback)((e=>{const t={...u,icon:e,last_edited_time:Date.now()};R.createAndCommit({userAction:"SpacePermissionGroup.handleIconChange",environment:g,perform:e=>{_.jF({spaceStore:r,group:t,transaction:e})}}),C.zUE(g,{is_emoji:(0,Qt.Z)(e)})}),[u,r,g]),S=(0,l.useCallback)((()=>{d.setState({...d.state,editingNameGroupId:void 0,groupNameInputValue:""})}),[d]),y=(0,l.useCallback)((e=>{d.setState({...d.state,groupNameInputValue:e.target.value})}),[d]),M=(0,l.useCallback)((()=>{const{editingNameGroupId:e,groupNameInputValue:t}=d.state,s=t.trim();if(e===u.id){if(s!==u.name){const e={...u,name:s,last_edited_time:Date.now()};R.createAndCommit({userAction:"SpacePermissionGroup.handleNameAccept",environment:g,perform:t=>{_.jF({spaceStore:r,group:e,transaction:t})}})}d.setState({...d.state,editingNameGroupId:void 0,groupNameInputValue:""})}}),[u,g,r,d]),k=(0,Ne.VK)((()=>d.state.editingNameGroupId===u.id),[u,d]),I=(0,Ne.VK)((()=>d.state.groupNameInputValue),[d]);function T(e){const t={width:e-4,height:e-4,fill:m.mediumIconColor},s={width:12,height:12,fill:m.mediumIconColor};return a()("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},void 0,p.Z.random(t),p.Z.plusThick(s))}return a()("div",{style:f.container},void 0,a()(Xt.Z,{isSidebar:!1,fill:!0,icon:"chevron",open:i,color:m.mediumIconColor,onClick:()=>o(u.id),style:f.toggle}),a()($t.Z,{size:28,style:f.icon}),k?a()(Jt.Z,{capture:!0,onEsc:S},void 0,a()(ce.Z,{disabled:!s,type:Yt.Z.Type.Inline,style:f.input,placeholder:c.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:I,onChange:y,onBlur:M,onSubmit:M})):a()(Me.Z,{style:f.name,showTooltipWhenTruncated:!0},void 0,h),(P=t.isRowHovered,u.icon?a()(Ce.Z,s?{disabled:!1,bucket:"public",icon:u.icon?{pointer:r.pointer,icon:u.icon}:void 0,size:18,isEmptyPage:!1,title:h,onChange:v,style:f.icon}:{disabled:!0,bucket:"public",icon:u.icon?{pointer:r.pointer,icon:u.icon}:void 0,size:18,isEmptyPage:!1,title:h,style:f.icon}):P&&s?a()(be.Z,{renderTooltip:()=>a()(w.FormattedMessage,{defaultMessage:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip"}),render:e=>l.createElement(Ce.Z,n()({disabled:!1,bucket:"public",icon:u.icon?{pointer:r.pointer,icon:u.icon}:void 0,size:18,isEmptyPage:!1,title:h,onChange:v,style:{...f.icon,width:30},defaultIcon:T(18)},e))}):void 0));var P}function ts(e){let{groups:t,canEdit:s,spaceStore:i,permissionsSettingsStore:n}=e;window.__c={n:"SpaceGroupsTable"};const[o,r]=(0,l.useState)([]),d=(0,we.Fg)(),u=(0,Q.Gc)(),c=(0,Ne.VK)((()=>(0,g.ZP)(n.state.groupsFilter,t,(e=>e.name||""))),[n,t]),m=(0,l.useCallback)((e=>{r((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat(e)))}),[r]),p=(0,l.useMemo)((()=>function(e){return e.map((e=>({id:e.id,group:e,isClickable:!1})))}(c)),[c]),h=(0,l.useMemo)((()=>function(e){let{openRowIds:t,toggleOpenRowId:s,canEdit:i,spaceStore:n,settingsStore:o,isTeamEnabled:r}=e;const d={id:"title",headerTitle:a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",defaultMessage:"Group"}),renderCell:e=>a()(es,{row:e,open:t.includes(e.id),toggleOpenState:s,canEdit:i,spaceStore:n,settingsStore:o}),widthData:{width:120},hasClickableContents:!1,sortable:!1},l={id:"teams",headerTitle:a()("div",{style:{paddingLeft:8}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",defaultMessage:"Teamspaces"})),renderCell:e=>a()("div",{style:b.Z.textOverflowStyle},void 0,a()(Ft,{group:e.group})),widthData:{width:40},hasClickableContents:!1,sortable:!1},u={id:"members",headerTitle:a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",defaultMessage:"Members"}),renderCell:e=>{var t;return a()("div",{style:b.Z.textOverflowStyle},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:(null===(t=e.group.user_ids)||void 0===t?void 0:t.length)||0}}))},widthData:{width:40},hasClickableContents:!1,sortable:!1},c={id:"menu",headerTitle:null,renderCell:e=>a()(At,{group:e.group,spaceStore:n,settingsStore:o}),widthData:{width:20},hasClickableContents:!0,sortable:!1};return[d,...r?[l]:[],u,...i?[c]:[]]}({openRowIds:o,toggleOpenRowId:m,canEdit:s,spaceStore:i,settingsStore:n,isTeamEnabled:u})),[o,m,s,i,n,u]),f=(0,vt.b)({columnRenderInfo:h,theme:d});return a()(vt.D,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:h,rows:p,styles:f,renderNoRowsComponent:()=>a()(Me.Z,{isSmall:!0,style:{marginLeft:5,marginTop:10,marginBottom:20}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",defaultMessage:"No groups found."})),renderRowChild:e=>o.includes(e.id)?a()(zt,{group:e.group,canEdit:s,spaceStore:i,settingsStore:n}):void 0})}var ss=s(43768);function is(e){window.__c={n:"ButtonStack"};const{items:t,clickHandlerContext:s}=e,i=ns(),n=function(){const e=ns();return(0,l.useMemo)((()=>({destructive:{default:e.destructiveButtonDefault,hovered:e.destructiveButtonHovered,pressed:e.destructiveButtonPressed},primary:{default:e.primaryButtonDefault,hovered:e.primaryButtonHovered,pressed:e.primaryButtonPressed},secondary:{default:e.secondaryButtonDefault}})),[e.destructiveButtonDefault,e.destructiveButtonHovered,e.destructiveButtonPressed,e.primaryButtonDefault,e.primaryButtonHovered,e.primaryButtonPressed,e.secondaryButtonDefault])}();return a()("div",{style:i.wrapper},void 0,t.map((e=>{const t=e.combinedStyles??n[e.buttonType];return a()(ae.Z,{style:null==t?void 0:t.default,hoveredStyle:null==t?void 0:t.hovered,pressedStyle:null==t?void 0:t.pressed,onClick:()=>e.onClick(e,s)},e.key,e.label)})))}function ns(){return(0,we.yK)((e=>{const t={alignItems:"center",borderRadius:3,boxShadow:void 0,display:"inline-flex",flexShrink:0,fontSize:14,fontWeight:b.Z.fontWeight.medium,height:28,justifyContent:"center",lineHeight:1.2,paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",width:"100%"};return{destructiveButtonDefault:{...t,background:e.redBadgeBackground,color:m.ZP.white,fill:m.ZP.lightTextColor},destructiveButtonHovered:{background:m.ZP.redWithAlpha(.8)},destructiveButtonPressed:{background:m.ZP.red},primaryButtonDefault:{...t,background:m.ZP.blue,color:m.ZP.white,fill:m.ZP.lightTextColor,height:32},primaryButtonHovered:{background:e.blueButtonHoveredBackground},primaryButtonPressed:{background:e.blueButtonPressedBackground},secondaryButtonDefault:{...t,background:e.whiteButtonBackground,color:e.mediumTextColor,fill:m.ZP.lightTextColor},wrapper:{display:"flex",flexDirection:"column",gap:4}}}),[])}function os(e){window.__c={n:"BillingModalStackLayout"};const t=(0,we.yK)((()=>({wrapper:{display:"flex",flexDirection:"column",gap:24,marginTop:20}})),[]);return a()("div",{style:{...t.wrapper,...e.styles}},void 0,e.children)}function as(e){window.__c={n:"SmallModalHeader"};const{icon:t,title:s,description:i,customIcon:n}=e,o=(0,we.yK)((e=>({description:{color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:-.154,textAlign:"center"},icon:{display:"inline",height:34,fill:"#8E8B87"},title:{color:e.text.primary,textAlign:"center",fontSize:16,lineHeight:"1.3",fontWeight:b.Z.fontWeight.medium,letterSpacing:-.32,textWrap:"balance"},wrapper:{display:"flex",flexDirection:"column",gap:8}})),[]);return a()("div",{style:o.wrapper},void 0,t?t(o.icon):n||null,a()("div",{style:o.title},void 0,s),i?a()("div",{style:o.description},void 0,i):null)}function rs(e){window.__c={n:"ContractionConfirmation"};const{onFinished:t,userId:s,userContractionMessages:i}=e,n=(0,we.yK)((e=>({highlights:{color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:-.154,textAlign:"left",marginTop:-28,marginBottom:-20,marginLeft:-16},customIcon:{alignSelf:"center"},wrapper:{marginTop:4}})),[]),o=(0,w.useIntl)(),r=(0,l.useCallback)((e=>{"submit"!==e.key?t(!1):t(!0)}),[t]),d=(0,Ne.VK)((()=>G.default.state.currentSpaceStore),[]),u=(0,Ne.VK)((()=>{if(!d)return;const e=J.U6.createChildStore(d,{id:s,table:v.KJ});return e.isDefined()&&!e.getIsDeleted()?e:void 0}),[d,s]),c=(0,Ne.VK)((()=>null==u?void 0:u.getDisplayName(o)),[u,o]);return a()(os,{styles:n.wrapper},void 0,a()(as,{customIcon:a()(Ye.Z,{userStore:u,size:34,style:n.customIcon}),title:cs(c),description:ls(i)}),a()("div",{style:n.highlights},void 0,a()("ul",{},void 0,i.map(((e,t)=>a()("li",{},`contraction_highlight_${t}`,e))))),a()(is,{items:[{key:"submit",buttonType:"destructive",label:us(c),onClick:r},{key:"cancel",buttonType:"secondary",label:a()(w.FormattedMessage,{id:"contractionConfirmation.cancel",defaultMessage:"Cancel"}),onClick:r}]}))}function ds(e){return a()(w.FormattedMessage,e>2e3?{id:"contractionConfirmation.amount.2000",defaultMessage:"2000+"}:e>1500?{id:"contractionConfirmation.amount.1500",defaultMessage:"1500+"}:e>1e3?{id:"contractionConfirmation.amount.1000",defaultMessage:"1000+"}:e>500?{id:"contractionConfirmation.amount.500",defaultMessage:"500+"}:e>250?{id:"contractionConfirmation.amount.250",defaultMessage:"250+"}:e>100?{id:"contractionConfirmation.amount.100",defaultMessage:"100+"}:e>75?{id:"contractionConfirmation.amount.75",defaultMessage:"75+"}:e>50?{id:"contractionConfirmation.amount.50",defaultMessage:"50+"}:e>25?{id:"contractionConfirmation.amount.25",defaultMessage:"25+"}:e>10?{id:"contractionConfirmation.amount.10",defaultMessage:"10+"}:e>5?{id:"contractionConfirmation.amount.5",defaultMessage:"5+"}:{id:"contractionConfirmation.amount.2",defaultMessage:"2+"})}function ls(e){return e.length>0?a()(w.FormattedMessage,{id:"contractionConfirmation.description.withName",defaultMessage:"They have been an active Notion member. Removing them may cause permanent loss of their private pages."}):a()(w.FormattedMessage,{id:"contractionConfirmation.description",defaultMessage:"They will immediately lose access to this workspace and no one will be able to access their private pages."})}function us(e){return e&&e.length<16?a()(w.FormattedMessage,{id:"contractionConfirmation.remove.withName",defaultMessage:"Remove {name}",values:{name:e}}):a()(w.FormattedMessage,{id:"contractionConfirmation.remove",defaultMessage:"Remove member"})}function cs(e){return a()(w.FormattedMessage,e?{id:"contractionConfirmation.title.withName",defaultMessage:"Are you sure you want to remove {name}?",values:{name:e}}:{id:"contractionConfirmation.title",defaultMessage:"Are you sure you want to remove this member?"})}async function ms(e,t,s){let i=[],n={};if(s){const o=await I.getUserContractionData(e,{userId:t,spaceId:s,clientVersion:e.device.version});"success"===o.type&&(n=o.data,i=function(e){const t=[];if(!("l28_active"in e))return t;const s=Number(e.l28_active);s>1&&t.push(a()(w.FormattedMessage,{id:"contractionConfirmation.activity",defaultMessage:"Visited <bold>{activeDays} days</bold> in the past month",values:{activeDays:ds(s),bold:e=>a()("b",{},void 0,e)}}));const i=Number(e.num_comments);i>1&&t.push(a()(w.FormattedMessage,{id:"contractionConfirmation.numberOfComments",defaultMessage:"Made <bold>{numberOfComments} comments</bold> in their lifetime",values:{numberOfComments:ds(i),bold:e=>a()("b",{},void 0,e)}}));const n=Number(e.num_pages_created);return n>1&&t.push(a()(w.FormattedMessage,{id:"contractionConfirmation.numberOfPages",defaultMessage:"Created <bold>{numberOfPages} pages</bold> in their lifetime",values:{numberOfPages:ds(n),bold:e=>a()("b",{},void 0,e)}})),t}(n))}return C.b9E({environment:e,userContractionData:n}),await ss.Z.showModal((s=>{const o=t=>{t?C.oIe({environment:e,userContractionData:n}):C.vwI({environment:e,userContractionData:n}),s(t)};return{dismissUsing:"onlyEscape",onDismiss:()=>o(!1),content:a()(rs,{onFinished:o,userId:t,userContractionMessages:i})}}))}var gs=s(4615),ps=s(12508);const hs="other";function fs(e){window.__c={n:"BillingSurvey"};const{buttons:t,description:s,icon:i,options:n,otherOptionPlaceholder:o,randomizeOrder:r,title:d}=e,u=function(e,t){return(0,l.useMemo)((()=>{if(!t)return e;const s=e.find((e=>e.optionName===hs)),i=e.filter((e=>e!==s)).sort((()=>Math.random()-.5));return s&&i.push(s),i}),[t,JSON.stringify(e)])}(n,r),[c,m]=function(){const[e,t]=(0,l.useState)(new Set),s=(0,l.useCallback)((e=>{t((t=>{const s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s}))}),[t]);return[e,s]}(),[g,p]=(0,l.useState)({}),h=(0,l.useMemo)((()=>({selectedOptionNames:Array.from(c),selectedOptionIndexes:u.map(((e,t)=>({option:e,index:t}))).filter((e=>{let{option:t}=e;return c.has(t.optionName)})).map((e=>{let{index:t}=e;return t})),customTextByOptionName:g})),[c,JSON.stringify(g)]);return a()(os,{},void 0,a()(as,{icon:i,title:d,description:s}),a()("div",{},void 0,u.map((e=>{const{type:t,optionName:s}=e,i=c.has(s);switch(t){case"checkbox":return a()(Ss,{isChecked:i,option:e,toggleValue:m},s);case"checkboxAndInput":return a()(ys,{inputText:g[s]??"",isChecked:i,option:e,placeholderText:o,setInputText:e=>{p((t=>({...t,[s]:e})))},toggleValue:m},s);default:(0,y.t1)(t)}}))),a()(is,{items:t,clickHandlerContext:h}))}function vs(){return(0,we.yK)((()=>({checkbox:{marginTop:4},inlineInput:{margin:"0 12px 12px 12px",width:"calc(100% - 24px)"},row:{alignItems:"flex-start",cursor:"pointer",display:"flex",fontSize:14,gap:11,padding:"4px 20px 4px 12px"}})),[])}function Ss(e){window.__c={n:"BillingSurveyCheckbox"};const{option:t,isChecked:s,toggleValue:i}=e,n=vs();return a()("div",{style:n.row,onClick:()=>i(t.optionName)},void 0,a()("div",{style:n.checkbox},void 0,a()(ps.Z,{checked:s,size:14})),a()("div",{},void 0,t.label))}function ys(e){window.__c={n:"BillingSurveyCheckboxAndInput"};const{inputText:t,isChecked:s,option:i,placeholderText:n,setInputText:o,toggleValue:r}=e,d=vs();return l.createElement(l.Fragment,null,a()(Ss,{option:i,isChecked:s,toggleValue:r}),s?a()(ce.Z,{style:d.inlineInput,autoFocus:!0,value:t,placeholder:n,onChange:e=>o(e.target.value)}):null)}function bs(e){window.__c={n:"ContractionSurvey"};const{contractionSurveyId:t,onFinished:s}=e,i=(0,l.useCallback)(((e,i)=>{s(i?{contractionSurveyId:t,reasons:i.selectedOptionNames,reasonIndexes:i.selectedOptionIndexes,reasonOther:i.customTextByOptionName.other}:void 0)}),[t,s]),n=(0,l.useMemo)((()=>[{optionName:"not_using_enough",type:"checkbox",label:a()(w.FormattedMessage,{id:"contractionSurvey.options.notUsingEnough",defaultMessage:"Not using it enough"})},{optionName:"switching",type:"checkbox",label:a()(w.FormattedMessage,{id:"contractionSurvey.options.switching",defaultMessage:"Switching to another tool"})},{optionName:"no_longer_work_together",type:"checkbox",label:a()(w.FormattedMessage,{id:"contractionSurvey.options.noLongerWorksHere",defaultMessage:"No longer works here"})},{optionName:"no_longer_need_access",type:"checkbox",label:a()(w.FormattedMessage,{id:"contractionSurvey.options.noLongerNeedAccess",defaultMessage:"No longer need access to Notion"})},{optionName:"too_expensive",type:"checkbox",label:a()(w.FormattedMessage,{id:"contractionSurvey.options.tooExpensive",defaultMessage:"Too expensive"})},{optionName:"switching_to_another_workspace",type:"checkbox",label:a()(w.FormattedMessage,{id:"contractionSurvey.options.switchingToAnotherWorkspace",defaultMessage:"Switching to another Notion workspace"})},{optionName:hs,type:"checkboxAndInput",label:a()(w.FormattedMessage,{id:"contractionSurvey.options.other",defaultMessage:"Other"})}]),[]);return a()(fs,{icon:p.Z.pencil,title:a()(w.FormattedMessage,{id:"contractionSurvey.title",defaultMessage:"Why are you removing this member from your workspace?"}),description:a()(w.FormattedMessage,{id:"contractionSurvey.description",defaultMessage:"We'd love your input to make Notion better"}),options:n,randomizeOrder:!0,buttons:[{key:"submit",buttonType:"primary",label:a()(w.FormattedMessage,{id:"contractionSurvey.continue",defaultMessage:"Continue"}),onClick:i},{key:"cancel",buttonType:"secondary",label:a()(w.FormattedMessage,{id:"contractionSurvey.cancel",defaultMessage:"Cancel"}),onClick:i}]})}var Ms=s(66957);const ws=(0,w.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function ks(e){window.__c={n:"TeamGuestPageContent"};const{teamGuest:t}=e,s=(0,Le.O7)(),i=(0,Ne.VK)((()=>G.default.state.currentSpaceStore),[]);if(!i)return null;if(0===t.guestPageIds.length)return null;const o=[{key:"pages",render:e=>l.createElement(ve.Z,e),items:t.guestPageIds.map((e=>{const t=J.G.createChildStore(i,{table:Ze.iU,id:e});return{key:e,render:e=>l.createElement(Be.Z,n()({},e,{store:t,placeholder:a()(w.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})})),action:()=>{const t=J.G.createChildStore(i,{table:Ze.iU,id:e}),n=(0,_e.ZP)({store:t,fullyQualified:!1,pageVisitSource:Pe.tY.LinkInPage});Fe.navigate({environment:s,url:n,openInNew:"tab"})}}}))}],r={menuType:L.og.Popup,minWidth:300,maxWidth:350,maxHeight:300,header:t.guestPageIds.length>0&&a()(Me.Z,{isSmall:!0,style:{color:m.ZP.regularTextColor,marginLeft:15,marginRight:15,paddingTop:6}},void 0,a()(w.FormattedMessage,{id:"guestpagesforteamguest.header",defaultMessage:"Pages"}))};return l.createElement(ge.Z,r,a()(pe.Z,{type:pe.i.Vertical,initialFocus:void 0,sections:o}))}function Cs(e){window.__c={n:"TeamGuestTeamContent"};const t=(0,Le.O7)(),s=(0,Ne.qz)(void 0,bt.Z),i=(0,Ne.VK)((()=>s.state.inputValue),[s]),o=(0,l.useCallback)((e=>St.RF({environment:t,teamId:e,tab:wt.a.Members,from:"teams_dropdown_for_team_guest"})),[t]),r=(0,we.yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),d=(0,Ne.VK)((()=>[{key:"teams for team guest",render:e=>l.createElement(ve.Z,e),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>l.createElement(re.Z,n()({icon:a()(Tt.p,{disabled:!0,store:e}),title:a()(Me.Z,{style:r.teamMenuItem},void 0,e.getName()),caption:a()(w.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:e.getUserIdsInTeam().length}}),inline:!0},t)),action:()=>{o(e.id)},closeParentMenu:!1})))}]),[e.teamStores,r.teamMenuItem,o]),u=a()(ve.Z,{isInput:!0},void 0,a()(It.ZP,{value:i,onChange:(0,l.useCallback)((e=>{s.setState({inputValue:e.target.value,focus:!1})}),[s]),focus:!0,focusAfterAnimation:!0,placeholder:yt.default.formatMessage(ws.filterTeams)})),c={menuType:L.og.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?u:void 0};return l.createElement(ge.Z,c,a()(Ct.Z,{filter:i,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:d}))}const Is=function(e){window.__c={n:"TeamsAndPagesDropdownForTeamGuest"};const{teamGuest:t}=e,s=(0,Ne.VK)((()=>kt.Z.state.teams),[]),i=(0,Ne.VK)((()=>s.filter((e=>e.getMembers().some((e=>"user"===e.entity_type&&e.user_id===t.userId))))),[s,t]),o=(0,we.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),r=i.length??0;return a()(de.ZP,{popupType:de.Z4.Popup,renderOrigin:e=>l.createElement(Re.Z,n()({disabled:0===r,style:0===r?o.noTeams:o.button},e),0===r?a()(w.FormattedMessage,{id:"teamsDropdownForTeamGuest.teamsCountNone.label",defaultMessage:"No access"}):l.createElement(l.Fragment,null,a()(w.FormattedMessage,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:r}}),p.Z.chevronDown(o.chevron))),render:()=>l.createElement(l.Fragment,null,a()(Cs,{teamGuest:t,teamStores:i}),a()(le.Z,{size:"100%"}),a()(ks,{teamGuest:t}))})};var Ts=s(88775),Ps=s(69435);class Zs extends u.Z{constructor(){super(...arguments),this.storeTypes={spacePermissionsSettingsStore:ee.Z,getRecoverableSpaceUserContentRequestStore:X.Z,accessRequestsStore:X.Z,isPageGuestsOpen:c.default.createClass(!0),isTeamGuestsOpen:c.default.createClass(!0)},this.userIdsWithContentBeingReprovisioned=c.default.createValue([]),this.isTeamGuestsEnabled=this.createComputedStore((()=>(0,V.F$)())),this.renderReprovisioningData=(e,t,s)=>t?a()(ze.Z,{columns:[{key:"user",header:a()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"50%"}},{key:"count",header:a()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",defaultMessage:"Private pages"}),style:{width:"25%"}},{key:"action",header:a()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.actionLevelColumn.header",defaultMessage:"Action"}),style:{width:"25%"}}],rows:this.getSpaceRecoverRows(t.recentSpaceRecoverPages)}):!s&&a()(me.Z,{}),this.handleUpdateClick=()=>{const e=(0,w.defineMessages)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});Z.j({message:e.updatingPermissions})},this.handleUpdateComplete=()=>{Z.x()},this.handleTabClick=(e,t)=>{const s=this.getCurrentTabs(t)[e];switch(s){case ee.Q.Members:C.qTS(this.environment,{tab:"members"});break;case ee.Q.Groups:C.qTS(this.environment,{tab:"groups"});break;case ee.Q.Guests:C.qTS(this.environment,{tab:"guests"});break;case ee.Q.Reprovisioning:C.qTS(this.environment,{tab:"reprovisioning"});break;case ee.Q.Requests:C.qTS(this.environment,{tab:"requests"});break;default:(0,y.t1)(s)}this.stores.spacePermissionsSettingsStore.state.currentTab===ee.Q.Requests&&s!==ee.Q.Requests&&ie.Z.reset(),this.navigateToTab(s)},this.navigateToTab=e=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,currentTab:e})},this.handleCreateGroupClick=()=>{R.createAndCommit({userAction:"SpacePermissionsSettings.handleCreateGroupClick",environment:this.environment,perform:e=>{const t=_.mo({environment:this.environment,spaceStore:this.props.store,transaction:e});t&&this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,editingNameGroupId:t.id,groupNameInputValue:""})}}),C.O8v(this.environment)},this.handleFilterChange=e=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,groupsFilter:e.target.value})},this.handleMembersShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitMembers:!1})},this.handleGuestsShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitGuests:!1})},this.handleTeamGuestsShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitTeamGuests:!1})},this.handleInviteLinkClick=()=>{const e=!this.getInviteLinkEnabled();C.eoz(this.environment,{enabled:e}),R.createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:this.environment,perform:t=>{_.ys({transaction:t,spaceStore:this.props.store,inviteLinkEnabled:Boolean(e)})}})},this.handleSortClick=(e,t)=>{const s=this.stores.spacePermissionsSettingsStore.state.sorts[e];let i;i=!(!s||s.by!==t)&&s.asc,this.stores.spacePermissionsSettingsStore.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!i}}})))},this.handleMemberPermissionRoleChange=async(e,t,s)=>{const{store:i}=this.props,n=this.environment.currentUser.id;if(e.userId!==n||"none"!==t)this.handleUpdateClick(),"none"===t?(await I.removeUsersFromSpace(this.environment,{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!0}),await E.bi(this.environment)):R.createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:this.environment,perform:s=>F.ep({environment:this.environment,store:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),this.handleUpdateComplete();else{await _.bf({environment:this.environment,spaceId:i.id,userSettingsStore:s})&&te.Z.setState({...te.Z.state,open:!1})}},this.handleReprovisionToUserChange=async(e,t)=>{if(!(await P.confirmUserAction({message:a()("span",{},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Are you sure you want to transfer their private pages? This action cannot be undone."})),acceptLabel:a()(w.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})})))return;this.userIdsWithContentBeingReprovisioned.setState([...this.userIdsWithContentBeingReprovisioned.state,e]);const s=await I.transferSpaceUserContent(this.environment,{spaceId:this.props.store.id,fromUserId:e,toUserId:t});"failed"===s.type&&P.showError(s),await this.stores.getRecoverableSpaceUserContentRequestStore.refresh(),this.userIdsWithContentBeingReprovisioned.setState(this.userIdsWithContentBeingReprovisioned.state.filter((t=>t!==e)))}}willMount(){this.setInitialSubtabOnMount()}renderComponent(){const{store:e,isMobile:t}=this.props;if(!$.Z.state.online)return this.renderOfflineMessage();const{data:s}=se.default.state;if(!s)return this.renderLoadingSpinner();const i=H.CM(s);if(!d().every(i.map((t=>J.U6.createChildStore(e,{table:v.KJ,id:t.userId}).isReady()))))return this.renderLoadingSpinner();const n=i.filter(S.CF),o=i.filter(S.du),r=this.isTeamGuestsEnabled.state?o.length:o.filter((e=>!e.isTeamGuest&&e.isPageGuest)).length,{currentTab:u}=this.stores.spacePermissionsSettingsStore.state;if(t)return a()(l.Fragment,{},void 0,this.canEditMembership()&&a()(ve.Z,{shouldShowBottomDivider:!0},void 0,this.renderMobileInviteButton(),a()("div",{style:this.mobileMenuItemStyle()},void 0,this.renderInviteLink())),a()(ve.Z,{},void 0,this.renderSpaceMembers(n)));const c={[ee.Q.Members]:l.createElement(l.Fragment,null,a()(w.FormattedMessage,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"}),a()("span",{},void 0," "),a()("span",{style:{color:this.theme.lightTextColor}},void 0,n.length)),[ee.Q.Groups]:a()(w.FormattedMessage,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),[ee.Q.Guests]:l.createElement(l.Fragment,null,this.isTeamGuestsEnabled.state?a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.title",defaultMessage:"External"}):a()(w.FormattedMessage,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),a()("span",{},void 0," "),a()("span",{style:{color:this.theme.lightTextColor}},void 0,r)),[ee.Q.Reprovisioning]:a()(w.FormattedMessage,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"}),[ee.Q.Requests]:l.createElement(l.Fragment,null,a()(w.FormattedMessage,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),a()("span",{},void 0," "),a()("span",{style:{color:this.theme.lightTextColor}},void 0,this.renderNumberOfRequests()),this.renderUnreadRequestDot())},m=this.getCurrentTabs(o),g=m.map((e=>c[e]));return a()(ht.Z,{},void 0,this.isTeamGuestsEnabled.state&&a()("div",{style:{display:"flex",flexDirection:"column",gap:8,marginBottom:20}},void 0,a()("div",{style:{display:"flex",alignItems:"center",gap:7}},void 0,a()(Me.Z,{style:{fontWeight:b.Z.fontWeight.medium,fontSize:17}},void 0,a()(w.FormattedMessage,{id:"spaceBasicSettings.people.title",defaultMessage:"People"})),a()(Ge.Z,{href:(0,q.UY)("guides.members"),analyticsFrom:"members_settings"})),a()(Me.Z,{isSecondaryColor:!0,style:{fontSize:15}},void 0,a()(w.FormattedMessage,{id:"spaceBasicSettings.people.subtitle",defaultMessage:"Manage members, external guests, groups and permissions."}))),a()(Ms.Z,{tabs:g,selectedIndex:m.indexOf(u),onChange:e=>this.handleTabClick(e,o),style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),this.renderTab(u,n,o))}renderLoadingSpinner(){return a()(me.Z,{style:{margin:"calc(50% - 1em) auto"}})}renderOfflineMessage(){return a()(ht.Z,{},void 0,a()(Me.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})))}renderHelp(){return a()("div",{style:{marginTop:24,marginBottom:24}},void 0,a()(Ge.Z,{title:a()(w.FormattedMessage,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:(0,q.UY)("guides.members"),analyticsFrom:"members_settings"}))}renderTab(e,t,s){return e===ee.Q.Members?a()(l.Fragment,{},void 0,this.renderSpaceMembers(t)):e===ee.Q.Guests?l.createElement(l.Fragment,null,this.isTeamGuestsEnabled.state?this.renderExternalTab(s):this.renderSpaceGuests(s)):e===ee.Q.Groups?this.renderGroupsTab():e===ee.Q.Reprovisioning?this.renderReprovisioning():e===ee.Q.Requests?this.renderRequestsTab():void(0,y.t1)(e)}renderExternalTab(e){const{store:t}=this.props,s=!Boolean(t.getSettingsStore().getKeyStore("disable_team_guests").getValue());return a()("div",{style:{display:"flex",flexDirection:"column",gap:8}},void 0,s&&l.createElement(l.Fragment,null,a()("div",{style:{display:"flex"}},void 0,a()(Xt.Z,{open:this.stores.isTeamGuestsOpen.state,onClick:()=>this.stores.isTeamGuestsOpen.setState(!this.stores.isTeamGuestsOpen.state),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),a()("div",{style:{marginLeft:3}},void 0,a()("div",{style:{display:"flex",alignItems:"center",height:24}},void 0,a()(Me.Z,{style:{fontSize:15}},void 0,a()(w.FormattedMessage,{id:"spacePermissionSettings.teamGuests.title",defaultMessage:"Teamspace guests"})),a()("span",{},void 0," "),a()(Me.Z,{isSecondaryColor:!0,style:{fontSize:15}},void 0,e.filter((e=>e.isTeamGuest)).length)),a()(Me.Z,{isSecondaryColor:!0,style:{fontSize:15}},void 0,a()(w.FormattedMessage,{id:"spacePermissionSettings.teamGuests.subtitle",defaultMessage:"Teamspace guests are billed as members and can access all pages in teamspaces they've been invited to."})))),this.stores.isTeamGuestsOpen.state&&this.renderTeamGuests(e)),a()("div",{style:{display:"flex"}},void 0,a()(Xt.Z,{open:this.stores.isPageGuestsOpen.state,onClick:()=>this.stores.isPageGuestsOpen.setState(!this.stores.isPageGuestsOpen.state),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),a()("div",{style:{marginLeft:3}},void 0,a()("div",{style:{display:"flex",alignItems:"center",height:24}},void 0,a()(Me.Z,{style:{fontSize:15}},void 0,a()(w.FormattedMessage,{id:"spacePermissionSettings.pageGuests.title",defaultMessage:"Page guests"})),a()("span",{},void 0," "),a()(Me.Z,{isSecondaryColor:!0,style:{fontSize:15}},void 0,e.filter((e=>e.isPageGuest&&!e.isTeamGuest)).length)),a()(Me.Z,{isSecondaryColor:!0,style:{fontSize:15}},void 0,a()(w.FormattedMessage,{id:"spacePermissionSettings.pageGuests.subtitle",defaultMessage:"Page guests are free but can only access pages they've been invited to."})))),this.stores.isPageGuestsOpen.state&&this.renderSpaceGuests(e))}renderUnreadRequestDot(){if(this.props.unreadAccessRequests&&this.props.unreadAccessRequests>0)return a()(Ke.z,{color:this.theme.redBadgeBackground,style:{marginLeft:6}})}renderGroupsTab(){const{store:e}=this.props,{groupsFilter:t}=this.stores.spacePermissionsSettingsStore.state,s=this.canUseGroups(),i=this.canEditMembership(),o=a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."});if(e.isDefined()){const r=e.getPermissionGroups();return a()("div",{},void 0,s?a()(Me.Z,{isMultiline:!0,style:{width:"80%"}},void 0,(0,Q.bq)()?a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})):a()(Ps.Z,{for:"plus",from:"permission_groups",icon:p.Z.group,title:a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),a()(le.Z,{size:24,isHidden:!0}),a()("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},void 0,s&&a()(be.Z,{renderTooltip:()=>!i&&o,render:e=>l.createElement(oe.Z,n()({isLarge:!0,onClick:this.handleCreateGroupClick,disabled:!i},i?void 0:e),a()(w.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"}))}),r.length>0&&a()(ce.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",defaultMessage:"Filter by group name…"}),left:p.Z.search(this.getSearchIconStyle()),showClearButton:!0,format:ce.Z.Format.Small,value:t,style:{...Zs.filterStyle,marginRight:0},onChange:this.handleFilterChange})),r.length>0&&a()(ts,{spaceStore:e,permissionsSettingsStore:this.stores.spacePermissionsSettingsStore,groups:r,canEdit:this.canEditGroups()}))}}renderSpaceMembers(e){return this.props.isMobile?this.renderMobileMemberList(e):a()("div",{},void 0,this.renderHelp(),this.renderInviteLink(),this.renderDesktopMemberList(e))}renderInviteLink(){if(!this.canUseInviteLink())return;const e=this.getInviteLink(),t=this.getInviteLinkEnabled();if(!e)return;const{spacePermissionsSettingsStore:s}=this.stores;return a()("div",{},void 0,a()("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"}},void 0,a()("div",{style:{marginRight:8,flexGrow:1}},void 0,a()(ft.Z,{},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})),a()(Me.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"}},void 0,a()(w.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only users who can invite members can see this."})," ",!this.props.isMobile&&this.renderInviteLinkReset())),a()("div",{style:{marginTop:5}},void 0,a()(ye.Z,{on:t,onClick:this.handleInviteLinkClick}))),s&&t&&e&&this.renderInviteLinkUrl(e),a()(le.Z,{size:40}))}renderInviteLinkReset(){const{store:e}=this.props;if(e.isDefined())return a()(w.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:t=>a()(Ue.Z,{onClick:()=>{P.showDialog({message:a()(w.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:P.dismissDialog,items:[{label:a()(w.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await I.refreshInviteLink(this.environment,{spaceId:e.id}),E.bi(this.environment)}}]})}},void 0,t)}})}renderInviteLinkUrl(e){const{mobileNative:t}=this.environment,s=a()(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),i=()=>{T.RD({environment:this.environment,stringValue:e,copiedMessage:T.tq.copiedLinkToClipboard}),C.nlj(this.environment)},n=()=>{t&&t.share(e),C.nlj(this.environment)};return this.props.isMobile?a()("div",{},void 0,a()(ce.Z,{type:"text",format:ce.B.Default,value:e,disabled:!0}),t?a()(he.Z,{onClick:n,style:{marginTop:10,width:"100%"}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})):a()(he.Z,{onClick:i,style:{marginTop:10,width:"100%"}},void 0,s)):a()("div",{},void 0,a()("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12}},void 0,a()(ce.Z,{type:"text",format:ce.B.Default,value:e,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),a()(oe.Z,{onClick:i,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},isLarge:!0},void 0,s)))}renderMobileMemberList(e){const{store:t}=this.props;return a()(l.Fragment,{},void 0,e.map((e=>{const s=J.U6.createChildStore(t,{table:v.KJ,id:e.userId});return a()("div",{style:{display:"flex",alignItems:"center",padding:10,borderBottom:`1px solid ${this.theme.lightDividerColor}`,background:this.theme.cardContentBackground}},e.userId,this.renderMember(s),a()("div",{style:{textAlign:"center",marginLeft:"auto"}},void 0,this.renderUserPermission("members",e,s)))})))}renderDesktopMemberList(e){const{spacePermissionsSettingsStore:t}=this.stores,{membersFilter:s,limitMembers:i}=t.state,n=this.getFilteredMembers(e,s),o=this.sortUsers("members",n),r=i?o.slice(0,Zs.defaultLimit):o;return a()(l.Fragment,{},void 0,a()("div",{style:{marginRight:8,flexGrow:1}},void 0,a()(ft.Z,{},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"}))),this.renderInviteViaDomainCaption(),a()(le.Z,{size:16,isHidden:!0}),a()("div",{},void 0,a()("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},void 0,this.renderInviteButton(),a()(ce.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:p.Z.search(this.getSearchIconStyle()),showClearButton:!0,format:ce.Z.Format.Small,value:s,style:Zs.filterStyle,onChange:e=>{t.setState({...t.state,membersFilter:e.target.value,limitMembers:!0})}})),this.renderUserTable("members",r),o.length>Zs.defaultLimit&&i&&a()(Se.Z,{style:Zs.showMoreButtonStyle,onClick:this.handleMembersShowMoreClick},void 0,a()(w.FormattedMessage,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:o.length-Zs.defaultLimit}}))))}renderTeamGuests(e){const{spacePermissionsSettingsStore:t}=this.stores,{teamGuestsFilter:s,limitTeamGuests:i}=t.state,n=e.filter((e=>e.isTeamGuest)),o=this.getFilteredMembers(n,s),r=this.sortUsers("team_guests",o),d=i?r.slice(0,5):r;return a()("div",{style:{marginBottom:5}},void 0,a()("div",{},void 0,a()("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},void 0,a()(ce.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterTeamGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:p.Z.search(this.getSearchIconStyle()),showClearButton:!0,format:ce.Z.Format.Small,value:s,style:Zs.filterStyle,onChange:e=>{t.setState({...t.state,teamGuestsFilter:e.target.value,limitTeamGuests:!0})}})),this.renderUserTable("team_guests",d),r.length>5&&i&&a()(Se.Z,{style:Zs.showMoreButtonStyle,onClick:this.handleTeamGuestsShowMoreClick},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:r.length-5}}))))}renderSpaceGuests(e){const{spacePermissionsSettingsStore:t}=this.stores,{guestsFilter:s,limitGuests:i}=t.state,n=e.filter((e=>!e.isTeamGuest&&e.isPageGuest)),o=this.getFilteredMembers(n,s),r=this.sortUsers("guests",o),d=this.isTeamGuestsEnabled.state?5:Zs.defaultLimit,l=i?r.slice(0,d):r;return a()("div",{},void 0,a()("div",{},void 0,a()("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},void 0,a()(ce.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:p.Z.search(this.getSearchIconStyle()),showClearButton:!0,format:ce.Z.Format.Small,value:s,style:Zs.filterStyle,onChange:e=>{t.setState({...t.state,guestsFilter:e.target.value,limitGuests:!0})}})),this.renderUserTable("guests",l),r.length>d&&i&&a()(Se.Z,{style:Zs.showMoreButtonStyle,onClick:this.handleGuestsShowMoreClick},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:r.length-d}}))))}renderMobileInviteButton(){return a()(l.Fragment,{},void 0,a()("div",{style:this.mobileMenuItemStyle()},void 0,this.renderInviteButton({flex:1})),a()("div",{style:{borderBottom:`1px solid ${this.theme.regularDividerColor}`}}))}renderInviteButton(e){const{store:t}=this.props;return t.canEditMembership()||t.getDisableMembershipRequests()||!(0,V.p1)()?a()(Y.LazyPermissionsInviteWithModal,{disabled:!this.canEditMembership(),store:t,onInviteClick:this.handleUpdateClick,onInviteComplete:this.handleUpdateComplete,isSubscribed:this.isSubscribed(),membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e}):a()(mt,{store:t,analyticsFrom:"space_settings_add_members",origin:a()(oe.Z,{isLarge:!0},void 0,a()(w.FormattedMessage,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"}))})}renderInviteViaDomainCaption(){const{store:e}=this.props;return _.LV(e)?a()(Me.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,a()(w.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})):a()("div",{},void 0,a()(Me.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:6}},void 0,a()(w.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:e=>a()(Ue.Z,{onClick:()=>{te.Z.setState({...te.Z.state,currentTab:"settings",defaultSubtab:void 0})}},void 0,e)}})),a()(Me.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,a()(w.FormattedMessage,{id:"spaceBasicSettings.membersTab.payPerMemberCaption",defaultMessage:"You will be charged for each member added. Visit <billingguidelink>our guide</billingguidelink> for more information on how we bill.",values:{billingguidelink:e=>a()(Ue.Z,{href:(0,q.UY)("guides.billingGuide")},void 0,e)}})))}getFilteredMembers(e,t){const{store:s,intl:i}=this.props;return t&&t.length>0?(0,g.ZP)(t,e,(e=>{const t=J.U6.createChildStore(s,{table:v.KJ,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}sortUsers(e,t){const s=this.stores.spacePermissionsSettingsStore.state.sorts[e];if(!s)return t;const{store:i}=this.props;switch(s.by){case"role":return t.sort(((e,t)=>(h.xm[t.role]-h.xm[e.role])*(s.asc?-1:1)));case"name":return t.map((e=>({user:e,store:J.U6.createChildStore(i,{table:v.KJ,id:e.userId})}))).sort(((e,t)=>{const i=e.store.getValue(),n=t.store.getValue(),o=(0,M.Nz)(this.props.intl,i),a=(0,M.Nz)(this.props.intl,n);return o.localeCompare(a)*(s.asc?1:-1)})).map((e=>e.user))}}renderSmallArrow(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?p.Z.arrowDownSmall({...s,transform:"rotate(180deg)"}):p.Z.arrowDownSmall(s)}renderUserTable(e,t){const{store:s}=this.props,i=this.stores.spacePermissionsSettingsStore.state.sorts[e],n=s.getPermissionGroups().reduce(((e,t)=>{const s=t.user_ids||[];for(const i of s)e[i]=e[i]?e[i].concat(t):[t];return e}),{}),o={key:"user",header:a()(ae.Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{this.handleSortClick(e,"name")},style:{display:"flex",alignItems:"center"}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),i&&"name"===i.by&&this.renderSmallArrow({up:i.asc})),style:{width:"45%"}},r={key:"groups",header:a()(ae.Z,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})),style:{width:"15%"}},d={key:"teams",header:a()("div",{style:{display:"flex",alignItems:"center",paddingLeft:8}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})),style:{width:"20%",textAlign:"center"}},u={key:"access_level",header:a()(ae.Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{this.handleSortClick(e,"role")},style:{display:"flex",alignItems:"center",paddingLeft:8}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),i&&"role"===i.by&&this.renderSmallArrow({up:i.asc})),style:{width:"20%",textAlign:"center"}},c={key:"pages",header:a()("div",{style:{display:"flex",alignItems:"center",paddingLeft:8}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})),style:{width:"20%",textAlign:"center"}},m={key:"three_dot",header:a()(ae.Z,{disabled:!0,ignoreLocalHoverState:!0})},g=this.canUseGroups()&&"team_guests"!==e&&"guests"!==e,p=("team_guests"===e||"guests"===e)&&this.isTeamGuestsEnabled.state&&this.canEditMembership();let h="members"===e&&(0,Q.bq)()?[o,d,u]:p?[o,c,m]:[o,c];return g&&(h=[...h.slice(0,1),r,...h.slice(1)]),a()(ze.Z,{columns:h,rows:t.map((e=>({member:e,store:J.U6.createChildStore(s,{table:v.KJ,id:e.userId})}))).filter((e=>void 0!==e.store.getValue())).map((t=>{const{member:s,store:i}=t,o=n[s.userId]?n[s.userId]:[],a=[this.renderMember(i)];return g&&a.push(l.createElement(l.Fragment,null,this.renderGroups(o))),"members"===e&&(0,Q.bq)()&&a.push(l.createElement(l.Fragment,null,this.renderTeams(s))),a.push(l.createElement(l.Fragment,null,this.renderUserPermission(e,s,i))),p&&a.push(l.createElement(l.Fragment,null,this.renderPageGuestOrTeamGuestThreeDotMenu(e,s,i))),{key:s.userId,columns:a}}))})}renderMember(e){return a()(ne.Z,{actorStore:e})}renderGroups(e){return a()(Te,{spaceStore:this.props.store,groups:e,onGroupClick:()=>{this.navigateToTab(ee.Q.Groups)}})}renderTeams(e){if("none"!==e.role)return a()(Ts.Z,{member:e})}renderUserPermission(e,t,s){return"none"===t.role?this.isTeamGuestsEnabled.state&&"team_guests"===e?a()(Is,{teamGuest:t}):a()(Oe,{store:this.props.store,guest:t,guestStore:s,isSubscribed:this.isSubscribed(),hideActionButtons:this.isTeamGuestsEnabled.state}):this.renderMemberRoleSelect(t)}renderPageGuestOrTeamGuestThreeDotMenu(e,t,s){return a()(de.ZP,{popupType:de.Z4.Popup,renderOrigin:e=>l.createElement(ue.Z,n()({},e,{icon:p.Z.dots,iconStyle:{height:14,width:14}})),render:i=>{const o=[{key:"team section",render:e=>l.createElement(ve.Z,e),items:[{key:"convertToMember",render:t=>l.createElement(re.Z,n()({},t,{icon:p.Z.settingsUpgrade({height:17,width:17}),title:a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===e&&a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})})),action:()=>this.handleConvertGuestToMember({user:t,userStore:s,parent:i})},{key:"removeFromWorkspace",render:e=>l.createElement(re.Z,n()({},e,{icon:p.Z.handWave({height:17,width:17,color:m.ZP.red}),title:a()("span",{style:{color:m.ZP.red}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"}))})),action:()=>this.handleRemoveGuestFromWorkspace({user:t,userStore:s,parent:i})}]}];return a()(ge.Z,{menuType:L.og.Popup},void 0,a()(pe.Z,{type:pe.i.Vertical,sections:o,initialFocus:void 0,style:{minWidth:265}}))}})}renderMemberRoleSelect(e){const t=this.environment.currentUser.id,{currentUserSettingsStore:s,currentSpaceStore:i}=G.default.state;if(!s)return;const n=this.getAvailableRoleItems();let o=!0;return(this.canAdmin()||this.canEditMembership()&&(h.RN(e.role)||e.userId===t))&&(o=!1),a()(Ve.ZP,{role:e.role,table:f.bx,type:"user_permission",disabled:o,isUserPermission:e.userId===t,upgradeButtonName:"space_permission_item",availableRoleItems:n,onChange:async t=>{await this.handleMemberPermissionRoleChange(e,t,s)},onRemoveMemberClick:async()=>{const t=async()=>(0,z.Mk)()?await ms(this.environment,e.userId,null==i?void 0:i.id):await(0,Ve.jV)({message:(0,Ve.QH)(!0)}),n=async t=>{await this.handleMemberPermissionRoleChange(e,"none",s),C.SwX(this.environment,{member_user_id:e.userId,member_role:e.role,contraction_survey_id:t})};if(z.YE()){let e;if(function(){const e=G.default.state.currentUserSettingsStore;if(!e)return!1;const t=e.getSettings();return!!t&&(!t.seen_contraction_survey_at||Date.now()>(0,K.Xz)({date:t.seen_contraction_survey_at,daysToAdd:1}))}()&&(e=await async function(e){const t=(0,gs.ZP)();return C.wjW({environment:e,contractionSurveyId:t}),await ss.Z.showModal((s=>{const i=i=>{i?C.OK8({environment:e,contractionSurveyId:t,reasons:i.reasons,reasonIndexes:i.reasonIndexes,reasonOther:i.reasonOther}):C.Wr9({environment:e,contractionSurveyId:t}),s(i)};return{dismissUsing:"closeButtonOrEscape",onDismiss:()=>i(void 0),content:a()(bs,{contractionSurveyId:t,onFinished:i})}}))}(this.environment),!e))return;var o;if(await t())await n(null===(o=e)||void 0===o?void 0:o.contractionSurveyId),e&&function(e){const t=G.default.state.currentUserSettingsStore;t&&R.createAndCommit({userAction:"saveContractionSurveySeenDate",environment:e,perform:e=>{U.d2({userSettingsStore:t,transaction:e,data:{seen_contraction_survey_at:(new Date).getTime()}})}})}(this.environment)}else{await t()&&await n()}}})}renderReprovisioning(){return l.createElement(l.Fragment,null,a()(Me.Z,{isMultiline:!0,style:{width:"80%"}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this."})),a()(Me.Z,{isMultiline:!0,style:{width:"80%"}},void 0,a()(w.FormattedMessage,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption.disclaimer",defaultMessage:"Only users who had private pages will appear here."})),a()(le.Z,{size:24,isHidden:!0}),a()(fe.Z,{requestStore:this.stores.getRecoverableSpaceUserContentRequestStore,request:{spaceId:this.props.store.id},performRequest:async e=>{const t=await I.getRecoverableSpaceUserContent(this.environment,{spaceId:e.spaceId});if("failed"===t.type)throw P.showError(t),t;return t.data},render:this.renderReprovisioningData}))}renderRequestsTab(){return a()(Xe,{spaceStore:this.props.store,accessRequestsStore:this.stores.accessRequestsStore})}renderNumberOfRequests(){return a()(fe.Z,{throttle:1e3,request:{parentTable:"space",parentId:this.props.store.id,size:100,status:"pending"},requestStore:this.stores.accessRequestsStore,performRequest:async e=>{const t=await I.getAccessRequests(this.environment,e);if("failed"===t.type)throw t.error;const s=t.data.accessRequestIds;return k.Tr(this.props.store,s)},render:(e,t,s)=>e||!t?a()("span",{}):t?a()("span",{},void 0,t.filter((e=>"pending"===e.accessRequestStore.getKeyStore("status").getValue())).length):void 0})}handleConvertGuestToMember(e){const{userStore:t,parent:s}=e,{store:i}=this.props,n=this.isSubscribed()?"read_and_write":"editor";P.showDialog({message:a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{P.dismissDialog(),s.close()},items:[{label:a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{s.close(),await D({environment:this.environment,guestUserStore:t,role:n,store:i})}}]})}handleRemoveGuestFromWorkspace(e){const{userStore:t,parent:s}=e;P.showDialog({message:a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{P.dismissDialog(),s.close()},items:[{label:a()(w.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{s.close(),await O({environment:this.environment,guestUserStore:t,store:this.props.store})}}]})}getSpaceRecoverRows(e){const t=[];for(const{userId:s,privatePagesCount:i}of e){if(i<1)continue;const e=J.U6.createChildStore(this.props.store,{table:v.KJ,id:s});t.push({key:s,columns:[this.renderMember(e),i,this.userIdsWithContentBeingReprovisioned.state.includes(s)?a()(me.Z,{}):a()("div",{style:{marginLeft:-4}},void 0,a()(gt.Z,{mode:pt.z.Button,focused:!1,title:a()(w.FormattedMessage,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:this.props.store,userIds:this.userIdsWithContentBeingReprovisioned.state,onChange:e=>{let[t]=e;this.handleReprovisionToUserChange(s,t)}}))]})}return t}setInitialSubtabOnMount(){te.Z.state.open&&"members"===te.Z.state.currentTab&&te.Z.state.defaultSubtab&&(this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,currentTab:te.Z.state.defaultSubtab}),te.Z.setState({...te.Z.state,defaultSubtab:void 0}))}getAvailableRoleItems(){const e=this.props.intl.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),t=(0,N.U7)();return d().compact(h.an.map((s=>{if(t||"membership_admin"!==s)return{role:s,disabledInfo:!this.canAdmin()&&h.Bc(s)?{isDisabled:!0,disabledMessage:e}:void 0}})))}getCurrentTabs(e){return[ee.Q.Members,ee.Q.Groups,...e.length>0?[ee.Q.Guests]:[],...this.canReprovisionContent()?[ee.Q.Reprovisioning]:[],...this.shouldShowRequestsTab()?[ee.Q.Requests]:[]]}isSubscribed(){const{data:e}=se.default.state;return Boolean(e&&H.YK(e))}canAdmin(){return this.props.store.canAdmin()}canEditMembership(){return this.props.store.canEditMembership()}canUseGroups(){return H.qF(this.environment)&&this.isSubscribed()}canEditGroups(){return this.canUseGroups()&&this.canEditMembership()}canUseInviteLink(){return this.canEditMembership()&&H.qF(this.environment)}canReprovisionContent(){return this.canAdmin()&&j.wP()}shouldShowRequestsTab(){return this.canEditMembership()&&(0,V.p1)()}getInviteLinkEnabled(){return Boolean(this.props.store.getKeyStore("invite_link_enabled").getValue())}getInviteLink(){if(!this.canEditMembership())return;const e=se.default.state.data,t=this.props.store.id,s=e&&("subscribed_admin"===e.type||"unsubscribed_admin"===e.type||"subscribed_membership_admin"===e.type)&&e.inviteLinkCode;return s?(0,W.cJ)(this.environment,t,s):void 0}getSearchIconStyle(){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:this.theme.mediumIconColor}}mobileMenuItemStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:e.getSafePaddingRightCSS(14),background:this.theme.cardContentBackground}}}Zs.displayName="SpacePermissionsSettings",Zs.defaultLimit=50,Zs.filterStyle={maxWidth:275,borderRadius:30},Zs.showMoreButtonStyle={marginTop:8};const Fs=(0,w.injectIntl)(Zs)},74452:(e,t,s)=>{s.d(t,{Z:()=>m});var i=s(23174),n=s.n(i),o=(s(67294),s(83355)),a=s(5366),r=s(16354),d=s(63296),l=s(64369),u=s(23189);class c extends o.Z{renderComponent(){return n()("div",{},void 0,this.renderHeader(),n()("div",{style:this.getSettingsOptionStyle()},void 0,n()(l.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,this.renderMessage()),this.renderManageSubscriptionButton()))}renderHeader(){const{device:e}=this.environment;return n()(u.Z,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full"},void 0,n()(a.FormattedMessage,{id:"subscriptionSettings.title",defaultMessage:"Subscription"}))}renderMessage(){const{device:e}=this.environment;return e.isMobile?n()(a.FormattedMessage,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your Personal Pro subscription though the App Store."}):n()(a.FormattedMessage,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings."})}renderManageSubscriptionButton(){return n()(r.Z,{href:"https://apps.apple.com/account/subscriptions"},void 0,n()(d.Z,{isLarge:!0,style:{marginTop:12,marginBottom:4}},void 0,n()(a.FormattedMessage,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"})))}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}c.displayName="SubscriptionSettings";const m=c},88775:(e,t,s)=>{s.d(t,{Z:()=>_});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=s(67294),d=s(480),l=s(81954),u=s(24405),c=s(53397),m=s(5366),g=s(57688),p=s(33929),h=s(87279),f=s(33846),v=s(48690),S=s(30397),y=s(48019),b=s(52275),M=s(31945),w=s(68894),k=s(78140),C=s(89728),I=s(72495),T=s(64369),P=s(93686);const Z=(0,m.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function F(e){window.__c={n:"MemberTeamContent"};const t=(0,d.O7)(),s=(0,u.yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),[i,o]=(0,l.AF)(void 0,f.Z),c=(0,r.useCallback)((e=>g.RF({environment:t,teamId:e,tab:v.a.Members,from:"teams_dropdown_for_team_member"})),[t]),S=(0,l.VK)((()=>[{key:"teams for member",render:e=>r.createElement(I.Z,e),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>r.createElement(b.Z,n()({icon:a()(P.p,{disabled:!0,store:e}),title:a()(T.Z,{style:s.teamMenuItem},void 0,e.getName()),caption:a()(m.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:e.getUserIdsInTeam().length}}),inline:!0},t)),action:()=>{c(e.id)},closeParentMenu:!1})))}]),[e.teamStores,s.teamMenuItem,c]),M=i.inputValue,C=a()(I.Z,{isInput:!0},void 0,a()(w.ZP,{value:M,onChange:(0,r.useCallback)((e=>{o({inputValue:e.target.value,focus:!1})}),[o]),focus:!0,focusAfterAnimation:!0,placeholder:p.default.formatMessage(Z.filterTeams)})),F={menuType:h.og.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?C:void 0};return r.createElement(k.Z,F,a()(y.Z,{filter:M,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:S}))}const _=function(e){window.__c={n:"TeamsDropdownForMember"};const[t]=(0,l.AF)(S.Z),s=(0,u.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),i=(0,l.VK)((()=>t.teams.filter((t=>t.getMembers().some((t=>"user"===t.entity_type&&t.user_id===e.member.userId))))),[t,e.member]),o=i.length;return a()(M.ZP,{popupType:M.Z4.Popup,renderOrigin:e=>r.createElement(C.Z,n()({disabled:0===o,style:0===o?s.noTeams:s.button},e),0===o?a()(m.FormattedMessage,{id:"teamsDropdownForMember.teamsCountNone.label",defaultMessage:"No access"}):r.createElement(r.Fragment,null,a()(m.FormattedMessage,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:o}}),c.Z.chevronDown(s.chevron))),render:()=>a()(F,{member:e.member,teamStores:i})})}},69435:(e,t,s)=>{s.d(t,{Z:()=>h});var i=s(23174),n=s.n(i),o=(s(67294),s(83355)),a=s(82990),r=s(5366),d=s(50906),l=s(5978),u=s(1865),c=s(33665),m=s(42922),g=s(63296);class p extends o.Z{constructor(){super(...arguments),this.handleUpgradeClick=e=>{const{from:t,for:s,onUpgradeClick:i}=this.props;u.y(this.environment,{from:t,for:s}),i&&i(e)},this.handleLearnMoreClick=()=>{const{from:e,learnMoreRoute:t}=this.props;l.navigateToExternalURL({environment:this.environment,url:(0,c.UY)(t)}),d.Fsx(this.environment,{from:e})}}renderComponent(){return n()("section",{style:this.getWrapStyle()},void 0,this.renderIcon(),this.renderTitle(),this.renderCaption(),this.renderActions())}renderIcon(){const{icon:e}=this.props;if(e)return e(this.getIconStyle())}renderTitle(){const{title:e}=this.props;return n()("header",{style:this.getTitleStyle()},void 0,e)}renderCaption(){const{caption:e}=this.props;return n()("p",{style:this.getCaptionStyle()},void 0,e)}renderActions(){return n()("footer",{style:this.getFooterStyle()},void 0,this.renderUpgradeButton(),this.renderLearnMoreButton())}renderUpgradeButton(){const{upgradeMessage:e}=this.props;return n()(m.Z,{onClick:this.handleUpgradeClick,isLarge:!0},void 0,e||n()(r.FormattedMessage,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"}))}renderLearnMoreButton(){return n()(g.Z,{onClick:this.handleLearnMoreClick},void 0,n()(r.FormattedMessage,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"}))}getWrapStyle(){const{device:e}=this.environment;return{...this.props.style,fontSize:14,...!e.isMobile&&{maxWidth:340}}}getIconStyle(){return{width:32,height:"auto",fill:this.theme.mediumIconColor,marginBottom:8}}getTitleStyle(){return{fontWeight:a.Z.fontWeight.semibold}}getCaptionStyle(){return{color:this.theme.mediumTextColor,marginTop:4,marginBottom:16}}getFooterStyle(){return{display:"flex",flexWrap:"wrap",gap:"8px 12px"}}}p.displayName="UpsellCallout";const h=p},30045:(e,t,s)=>{s.d(t,{Z:()=>y});var i=s(23174),n=s.n(i),o=s(67294),a=s(83355),r=s(13991),d=s(7057),l=s(50501),u=s(5366),c=s(54642),m=s(79315),g=s(72087),p=s(59649),h=s(77137),f=s(58032),v=s(55422);class S extends a.Z{constructor(){super(...arguments),this.storeTypes={requestStore:g.Z},this.renderResult=(e,t,s)=>n()(p.Z,{loaded:s,spinnerSize:16,showSpinnerTimeout:600},void 0,e||!t?n()("div",{},void 0,this.props.intl.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})):this.renderOutput(t)),this.renderOutput=e=>{const t=Boolean(e.expiryTime&&Number(e.expiryTime)>Date.now()),s=t?this.revokeDataAccess:this.grantDataAccess;return this.renderUserDataConsentSettingsWithTooltip({accessGranted:t,onClick:s,output:e})},this.fetchUserDataConsentSettings=async e=>{const t=await c.getDataAccessConsent(this.environment,{});if("failed"===t.type)throw t.error;return t.data},this.grantDataAccess=async()=>{this.isDisabledByEmailDomainSettings()||await this.setDataAccessExpiryTime({expiryTime:Date.now()+l.g})},this.revokeDataAccess=async()=>{this.isDisabledByEmailDomainSettings()||await this.setDataAccessExpiryTime({})},this.setDataAccessExpiryTime=async e=>{const t=await c.setDataAccessConsent(this.environment,e);if("success"===t.type&&t.data){const e=this.stores.requestStore.state;this.stores.requestStore.setState({...e,result:t.data})}}}renderComponent(){const{currentUserStore:e}=m.default.state;return e&&n()(h.Z,{requestStore:this.stores.requestStore,request:{userId:e.id,expiryTime:Date.now()+l.g},performRequest:this.fetchUserDataConsentSettings,render:this.renderResult})}renderUserDataConsentSettingsWithTooltip(e){var t;const{accessGranted:s,onClick:i,output:a}=e,r=null===(t=m.default.state.currentUserStore)||void 0===t?void 0:t.getEmail();return n()(f.Z,{disableTooltip:!this.isDisabledByEmailDomainSettings(),renderTooltip:()=>n()(u.FormattedMessage,{id:"userDataConsentSetting.disabledByOrganization",defaultMessage:"Granting support access has been disabled by your organization, {emailDomain}",values:{emailDomain:r}}),placement:f.Z.Placement.Bottom,alignment:f.Z.Alignment.Center,render:e=>o.createElement("div",e,this.renderUserDataConsentSettings({accessGranted:s,onClick:i,output:a}))})}renderUserDataConsentSettings(e){const{accessGranted:t,onClick:s,output:i}=e,{device:o}=this.environment;return n()(v.Z,{disabled:this.isDisabledByEmailDomainSettings(),isMobile:o.isMobile,title:n()(u.FormattedMessage,{id:"personalSettings.supportSection.userDataConsentSettings.label",defaultMessage:"Support access"}),caption:t&&i.expiryTime?n()(u.FormattedMessage,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:(0,d.Yx)(i.expiryTime,"medium_with_time",r.SP)}}):n()(u.FormattedMessage,{id:"personalSettings.supportSection.userDataConsentSettings.message",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."}),type:"toggle",isOn:t,onToggle:s})}isDisabledByEmailDomainSettings(){return Boolean(this.props.emailDomainSettings.prevent_granting_support_access)}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}S.displayName="UserDataConsentSettings";const y=(0,u.injectIntl)(S)},16347:(e,t,s)=>{s.d(t,{H:()=>h});var i=s(23174),n=s.n(i),o=(s(67294),s(480)),a=s(81954),r=s(5366),d=s(12359),l=s(37181),u=s(51456),c=s(33665),m=s(79315),g=s(42402),p=s(55422);function h(e){let{isMobile:t}=e;window.__c={n:"ViewHistorySettings"};const s=(0,o.O7)(),i=(0,a.VK)((()=>m.default.state.currentUserSettingsStore),[]),h=(0,a.VK)((()=>{var e;return!0===(null==i||null===(e=i.getSettings())||void 0===e?void 0:e.disable_page_analytics)?"do_not_record":"record"}),[i]);return n()(p.Z,{isMobile:t,title:n()(r.FormattedMessage,{id:"viewHistorySettings.title",defaultMessage:"Show my view history"}),caption:n()(r.FormattedMessage,{id:"viewHistorySettings.description.message",defaultMessage:"People with edit or full access will be able to see when you’ve viewed a page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>n()(g.Z,{external:!0,href:(0,c.UY)("guides.pageAnalytics")},void 0,e)}}),type:"dropdown",currentOption:h,options:[{key:"record",label:n()(r.FormattedMessage,{id:"viewHistorySettings.record.label",defaultMessage:"Record"})},{key:"do_not_record",label:n()(r.FormattedMessage,{id:"viewHistorySettings.do_not_record.label",defaultMessage:"Don't record"})}],onSelectOption:e=>{const t="do_not_record"===e;d.createAndCommit({userAction:"ViewHistorySettings.onSelectOption",environment:s,perform:e=>{i&&l.d2({userSettingsStore:i,data:{disable_page_analytics:t},transaction:e})}}),u.j(s,t?"page_analytics_account_opt_out":"page_analytics_account_opt_in")}})}},12793:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(23174),n=s.n(i),o=(s(67294),s(24405)),a=s(53397);function r(e){window.__c={n:"GroupIcon"};const t=function(e){const{size:t,style:s}=e;return(0,o.yK)((e=>({icon:{width:.6*t,height:.6*t,fill:e.mediumTextColor},iconContainer:{width:t,height:t,borderRadius:"100%",background:e.regularDividerColor,display:"flex",alignItems:"center",justifyContent:"center",...s}})),[t,s])}(e),s=a.Z.membersFilled(t.icon);return n()("div",{style:t.iconContainer},void 0,s)}},88198:(e,t,s)=>{s.d(t,{b:()=>g});var i=s(23174),n=s.n(i),o=s(67294),a=s(81954),r=s(24405),d=s(53397),l=s(26825),u=s(5366),c=s(4708),m=s(74136);function g(e){window.__c={n:"GuestPill"};const{style:t,labelType:s}=e,{label:i,icon:g}=(0,a.VK)((()=>(0,c.F$)()?"team_level_guest"===s?{label:l.mq.teamGuestLabel,icon:d.Z.openTeam}:{label:l.mq.pageGuestLabel,icon:d.Z.pageEmpty}:{label:l.mq.guestLabel,icon:d.Z.globe2}),[s]),p=(0,r.yK)((()=>({container:{display:"flex",alignItems:"center",color:"#CF8807",background:"rgba(246, 192, 80, 0.26)"}})),[]);return n()(m.Z,{innerStyle:{...p.container,...t}},void 0,g({width:9,fill:"#CF8807",display:"inline",verticalAlign:"middle",marginRight:2}),o.createElement(u.FormattedMessage,i))}},9019:(e,t,s)=>{s.d(t,{Z:()=>u});var i=s(23174),n=s.n(i),o=(s(67294),s(83355)),a=s(80503),r=s(53953),d=s(44532);class l extends o.Z{renderComponent(){const{device:e}=this.environment;return e.isMobile?n()(d.ZP,{popupType:d.ZP.PopupType.SlideUp,open:this.props.open,render:this.props.renderContent,preventSlideUpTransition:this.props.disableAnimation,onDismiss:this.props.onDismiss,origin:this.props.origin}):n()(r.Z,{open:this.props.open,preventHideChildrenWhileOpening:!0,style:{alignItems:"flex-start"},innerStyle:this.getModalStyle(),onDismiss:this.props.onDismiss,render:this.props.renderContent,origin:this.props.origin,disableAnimation:this.props.disableAnimation})}getModalStyle(){const{modalStyle:e}=this.props;return{top:2*a.R6(this.environment.device.isElectronMac),borderRadius:6,overflow:"hidden",boxShadow:this.theme.largeBoxShadow,background:this.theme.contentBackground,...e}}}l.displayName="ModalPrompt";const u=l},58047:(e,t,s)=>{s.d(t,{N:()=>c});var i=s(23174),n=s.n(i),o=(s(67294),s(24405)),a=s(53397),r=s(82990),d=s(42922),l=s(89728),u=s(64369);function c(e){let{title:t,description:s,onDismiss:i,icon:c,primaryAction:m,secondaryAction:g}=e;window.__c={n:"Prompt"};const p=(0,o.yK)((e=>({container:{position:"relative",width:"100%",padding:16},multiIconsRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:12},singleIconRow:{position:"absolute",top:10,right:16},dismissButton:{marginTop:-7,marginRight:-7},title:{fontWeight:r.Z.fontWeight.medium,fontSize:r.Z.fontSize.UIRegular.desktop,lineHeight:1.2,color:e.darkTextColor,marginBottom:8},description:{fontWeight:r.Z.fontWeight.regular,fontSize:r.Z.fontSize.UISmall.desktop,color:e.lightTextColor},primaryActionButton:{width:"100%",margin:"12px auto 0"},secondaryActionButton:{width:"100%",margin:"8px auto 0",justifyContent:"center",fontWeight:r.Z.fontWeight.regular,fontSize:r.Z.fontSize.UISmall.desktop,color:e.lightTextColor},secondaryActionIcon:{width:12,height:12,marginRight:4},icon:{width:14,height:14,color:e.regularIconColor}})),[]);return n()("div",{style:p.container},void 0,c?n()("div",{style:p.multiIconsRow},void 0,n()("div",{},void 0,c),n()(l.Z,{isSmall:!0,style:p.dismissButton,onClick:i},void 0,a.Z.closeSmall(p.icon))):n()("div",{style:p.singleIconRow},void 0,n()(l.Z,{isSmall:!0,style:p.dismissButton,onClick:i},void 0,a.Z.closeSmall(p.icon))),n()(u.Z,{style:p.title,isMultiline:!0},void 0,t),n()(u.Z,{style:p.description,isMultiline:!0,isSmall:!0},void 0,s),m?n()(d.Z,{isLarge:!0,style:p.primaryActionButton,onClick:e=>m.onClick(e)},void 0,m.text):null,g?n()(l.Z,{style:p.secondaryActionButton,onClick:e=>g.onClick(e)},void 0,g.icon?g.icon(p.secondaryActionIcon):null,g.text):null)}},75752:(e,t,s)=>{s.d(t,{r:()=>o});var i=s(63143),n=s(54642);class o{constructor(e){this.environment=void 0,this.environment=e}async confirmIdentity(){const{settings:e,sessionVerificationExpirationInSeconds:t}=await this.loadSettings();return t&&t>2*i.hw?{status:"ready"}:e.length>0?{status:"mfa",settings:e}:{status:"password"}}async loadSettings(){const e=await n.authGetLoginConfiguration(this.environment,{});if("success"===e.type){const{data:t}=e;return"required"===t.samlSignIn?{settings:[],sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}:{settings:t.mfaOptions,sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}}throw e}async sendTemporaryPassword(e){const{email:t}=e,s=await n.sendTemporaryPassword(this.environment,{passwordReset:!0,email:t});if("success"===s.type)return{status:"ok"};throw s}async verifyBackupCode(e){var t;const{code:s}=e,i=s.split("-").join(""),o=await n.authVerifyBackupCodesLogin(this.environment,{code:i});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithPassword(e){var t;const{password:s}=e,i=await n.authVerifyPassword(this.environment,{password:s});if("success"===i.type)return{status:"match"};if("incorrect_password"===(null===(t=i.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw i}async disableMFA(){const e=await n.authUpdateMfa(this.environment,{action:"disable_all"});if("success"===e.type)return{status:"ok"};throw e}async verifyIdentityWithTOTP(e){var t;const{mfaSettingId:s,code:i}=e,o=await n.authVerifyTotpLogin(this.environment,{mfaSettingId:s,code:i});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithSMS(e){var t;const{mfaSettingId:s,code:i}=e,o=await n.authVerifySmsLogin(this.environment,{mfaSettingId:s,code:i});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async renameSettings(e){var t,s,i;const{mfaSettingId:o,friendlyName:a}=e,r=await n.authUpdateMfa(this.environment,{action:"rename",mfaSettingId:o,friendlyName:a});if("success"===r.type)return{status:"saved",settings:r.data.mfaOptions};if("mfa_duplicate_friendly_name"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"duplicate"};if("mfa_empty_friendly_name"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"empty"};if("mfa_bad_friendly_name"===(null===(i=r.body)||void 0===i||null===(i=i.clientData)||void 0===i?void 0:i.type))return{status:"bad_friendly_name"};throw r}async deleteSettings(e){const t=await n.authUpdateMfa(this.environment,{action:"delete",mfaSettingId:e});if("success"===t.type)return{settings:t.data.mfaOptions};throw t}async createTOTP(){const e=await n.authCreateTotp(this.environment,{});if("success"===e.type)return{mfaSettingId:e.data.mfaSettingId,secret:e.data.authCode,qrCode:e.data.qrCode};throw e}async verifyTOTP(e){var t;const{mfaSettingId:s,code:i}=e,o=await n.authVerifyTotpEnroll(this.environment,{mfaSettingId:s,code:i});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async createSMS(e,t){var s,i,o;const a=await n.authCreateSms(this.environment,{countryCode:e,phoneNumber:t});if("success"===a.type)return{status:"created",mfaSettingId:a.data.mfaSettingId};if("already_verified_phone_number"===(null===(s=a.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"already_verified_phone_number"};if("invalid_country_code"===(null===(i=a.body)||void 0===i||null===(i=i.clientData)||void 0===i?void 0:i.type))return{status:"invalid_country_code"};if("invalid_phone_number"===(null===(o=a.body)||void 0===o||null===(o=o.clientData)||void 0===o?void 0:o.type))return{status:"invalid_phone_number"};throw a}async verifySMS(e){var t;const{mfaSettingId:s,code:i}=e,o=await n.authVerifySmsEnroll(this.environment,{mfaSettingId:s,code:i});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async sendSMS(e){const{mfaSettingId:t}=e,s=await n.authSendSms(this.environment,{mfaSettingId:t});if("success"===s.type)return{status:"ok"};throw s}async createBackupCodes(e){if(!e){const{settings:e}=await this.loadSettings();if(e.find((e=>"backup_code"===e.mfaMethod)))return{status:"already-exists"}}const t=await n.authCreateBackupCodes(this.environment,{});if("success"===t.type)return{status:"new",mfaSettingId:t.data.mfaSettingId,backupCodes:t.data.codes};throw t}}},99657:(e,t,s)=>{s.d(t,{Z:()=>ce});var i=s(23174),n=s.n(i),o=s(67294),a=s(480),r=s(81954),d=s(97880),l=s(28020),u=s(24405),c=s(53397),m=s(5366),g=s(82990),p=s(5474),h=s(88175);function f(e){window.__c={n:"MFAPromptAddMethod"};const{errorMessage:t,onStartTOTP:s,onStartSMS:i,onDismiss:a}=e,r=(0,u.yK)(v,[]),d=n()(m.FormattedMessage,{id:"mfa.turnOnSettings.title",defaultMessage:"Turn on 2-step verification"}),l=n()(m.FormattedMessage,{id:"mfa.turnOnSettings.message",defaultMessage:"Confirm it's you after using a password with a verification code from an authenticator app or text message."}),g=(0,o.useMemo)((()=>o.createElement(o.Fragment,null,n()(p.Z,{type:"totp",title:n()(m.FormattedMessage,{id:"mfa.turnOnSettings.setupAuthenticator.button.title",defaultMessage:"Code from authenticator"}),caption:n()(m.FormattedMessage,{id:"mfa.turnOnSettings.setupAuthenticator.button.message",defaultMessage:"Generate a one-time code in your authenticator app"}),onClick:s,style:r.button}),n()(p.Z,{type:"sms",title:n()(m.FormattedMessage,{id:"mfa.turnOnSettings.setupSMS.button.title",defaultMessage:"Text me a code"}),caption:n()(m.FormattedMessage,{id:"mfa.turnOnSettings.setupSMS.button.message",defaultMessage:"Add and verify your phone number"}),onClick:i,style:r.button}))),[r,i,s]);return n()(h.Z,{title:d,header:l,children:g,icon:c.Z.lockShield(r.icon),errorMessage:t,onDismiss:a})}function v(e){return(0,u.EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:g.Z.fontWeight.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var S=s(68785);function y(e){window.__c={n:"MFAPromptDeleteMethodConfirmation"};const{isLoading:t,mfaSetting:s,errorMessage:i,onDismiss:o,onCancel:a,onDeleteMethod:r}=e,l=(0,u.yK)(b,[]),g={text:t?n()(S.Z,{}):n()(m.FormattedMessage,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>r(s),isRed:!0},p=[{text:n()(m.FormattedMessage,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:a,type:"button",view:"outline"}];return n()(h.Z,{title:(()=>{const e=s.mfaMethod;switch(e){case"sms":return n()(m.FormattedMessage,{id:"mfa.deleteSetting.sms.title",defaultMessage:"Delete {phoneHint}",values:{phoneHint:s.phoneNumber}});case"totp":return n()(m.FormattedMessage,{id:"mfa.deleteSetting.totp.title",defaultMessage:"Delete {friendlyName}",values:{friendlyName:s.friendlyName}});default:return(0,d.t1)(e)}})(),header:(()=>{const e=s.mfaMethod;switch(e){case"sms":return n()(m.FormattedMessage,{id:"mfa.deleteSetting.sms.header",defaultMessage:"Once deleted, you will no longer receive codes sent to {phoneHint}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{phoneHint:s.phoneNumber,boldtext:e=>n()("span",{style:l.boldText},void 0,e)}});case"totp":return n()(m.FormattedMessage,{id:"mfa.deleteSetting.totp.header",defaultMessage:"Once deleted, you will no longer be able to use codes generated from {friendlyName}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:s.friendlyName,boldtext:e=>n()("span",{style:l.boldText},void 0,e)}});default:return(0,d.t1)(e)}})(),icon:c.Z.trash(l.crossIcon),primaryAction:g,secondaryActions:p,errorMessage:i,onDismiss:o})}function b(e){return(0,u.EM)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:g.Z.fontWeight.semibold}})}var M=s(71119),w=s(33665),k=s(45653);function C(e){window.__c={n:"MFAUserAvatarIcon"};const{userStore:t}=e,s=(0,u.yK)(I,[]);return n()("div",{style:s.iconContainer},void 0,n()(k.Z,{userStore:t,size:36,avatarShouldShowShadow:!0,style:s.userIcon}),n()("span",{},void 0,c.Z.lockedFilledRedOutlinedWhite(s.lockIcon)))}function I(){return(0,u.EM)({iconContainer:{position:"relative"},userIcon:{position:"relative"},lockIcon:{position:"absolute",width:9,height:20,right:0,left:26,top:21}})}function T(e){window.__c={n:"MFAPromptMethodChooser"};const{mfaSettings:t,isSMSLoading:s,chosenMfaSettingId:i,userStore:a,errorMessage:r,onClick:l,onDismiss:c}=e,g=(0,u.yK)(P,[]),f=n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.title",defaultMessage:"To continue, we need to verify your identity"}),v=n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.header",defaultMessage:"Select a method to verify your identity."}),S=[{text:n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.needHelp.button",defaultMessage:"Need help?"}),href:(0,w.UY)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],y=(0,o.useMemo)((()=>(0,M.UG)(t).map((e=>{const t=e.mfaMethod;switch(t){case"totp":return n()(p.Z,{type:t,title:e.friendlyName,caption:n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useAuthenticator.button.message",defaultMessage:"Use code from authenticator"}),onClick:()=>l(e),style:g.actionButton,isActive:!0,disabled:s});case"sms":return n()(p.Z,{type:t,title:e.phoneNumber,caption:n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useSMS.button.message",defaultMessage:"Text me a code"}),onClick:()=>l(e),style:g.actionButton,isActive:!0,isLoading:s&&i===e.mfaSettingId,disabled:s&&i!==e.mfaSettingId});case"backup_code":return n()(p.Z,{type:t,title:n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.title",defaultMessage:"Use a backup code"}),caption:n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.message",defaultMessage:"Use a one-time backup code"}),onClick:()=>l(e),style:g.actionButton,isActive:!0,disabled:s});default:return(0,d.t1)(t)}}))),[t,l,s,i,g.actionButton]);return n()(h.Z,{title:f,header:v,errorMessage:r,icon:n()(C,{userStore:a}),secondaryActions:S,onDismiss:c},void 0,y)}function P(e){return(0,u.EM)({resendLink:{fontWeight:g.Z.fontWeight.medium,color:e.blueColor},actionButton:{marginBottom:5}})}function Z(e){window.__c={n:"MFAPromptTurnOffMFAComplete"};const t=(0,u.yK)(F,[]),{errorMessage:s,onDismiss:i}=e,o=n()(m.FormattedMessage,{id:"mfa.turnOffMFAComplete.title",defaultMessage:"2-step verification is turned off"}),a=n()(m.FormattedMessage,{id:"mfa.turnOffMFAComplete.header",defaultMessage:"2-step verification has been removed from your account. Notion will only ask for your password during log in."}),r=[{text:n()(m.FormattedMessage,{id:"mfa.turnOffMFAComplete.button.message",defaultMessage:"Complete"}),onClick:i,type:"button",view:"outline"}];return n()(h.Z,{title:o,header:a,errorMessage:s,icon:c.Z.circleCheck(t.confirmationIcon),secondaryActions:r,onDismiss:i})}function F(e){return(0,u.EM)({confirmationIcon:{width:30,fill:"green"}})}function _(e){window.__c={n:"MFAPromptTurnOffMFAConfirmation"};const{isLoading:t,lastMFASetting:s,errorMessage:i,onDismiss:o,onTurnOffMFA:a,onCancel:r}=e,d=(0,u.yK)(x,[]),l=n()(m.FormattedMessage,{id:"mfa.turnOffMFA.title",defaultMessage:"Turn off 2-step verification"}),p={text:t?n()(S.Z,{}):n()(m.FormattedMessage,{id:"mfa.turnOffMFA.disableMFA.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:a,isRed:!0},f=[{text:n()(m.FormattedMessage,{id:"mfa.turnOffMFA.cancel.button.message",defaultMessage:"Cancel"}),onClick:r,type:"button",view:"outline"}];return n()(h.Z,{title:l,header:n()(m.FormattedMessage,s?{id:"mfa.turnOffMFA.lastMFASettingDeleted.header",defaultMessage:"Deleting {mfaSettingName} will turn off 2-step verification and remove the additional layer of security on your account. Notion will only ask for your password during log in.",values:{mfaSettingName:"sms"===s.mfaMethod?`${s.phoneNumber}`:s.friendlyName,boldtext:e=>n()("span",{style:{fontWeight:g.Z.fontWeight.semibold}},void 0,e)}}:{id:"mfa.turnOffMFA.header",defaultMessage:"Turning off 2-step verification will remove the additional layer of security on your account. Notion will only ask for your password during log in. "}),icon:c.Z.circleCross(d.crossIcon),primaryAction:p,secondaryActions:f,errorMessage:i,onDismiss:o})}function x(e){return(0,u.EM)({crossIcon:{width:30,fill:"red"}})}var A=s(10434),E=s.n(A),R=s(13991),B=s(7057),D=s(61519),O=s(64369),G=s(64921),U=s(52275),V=s(31945),L=s(74194);function N(e){window.__c={n:"MFAActiveActionInputTitle"};const{setting:t,setIsEditing:s,isEditing:i,onUpdateMethod:a}=e,r=(0,u.yK)(q,[]),[d,l]=(0,o.useState)(""),c=t.friendlyName,m=""===d?c:d,g=(0,o.useCallback)((e=>""!==e&&e!==c),[c]),p=(0,o.useCallback)((()=>{g(m)?(a({mfaMethod:t.mfaMethod,mfaSettingId:t.mfaSettingId,action:"rename",friendlyName:m}),l(d)):l(c),s(!i)}),[m,i,s,a,d,c,g,t.mfaMethod,t.mfaSettingId]),h=(0,o.useCallback)((e=>{"Enter"!==e.key&&"Escape"!==e.key||p()}),[p]),f=(0,o.useCallback)((e=>{g(e.target.value)&&l(e.target.value)}),[g]);return i?n()(L.Z,{value:m,maxlength:30,onChange:f,onKeyDown:h,onBlur:p,focus:i,style:r.inputField,inputStyle:r.input}):n()(O.Z,{},void 0,m)}function q(){return(0,u.EM)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...g.Z.textOverflowStyle}})}var W=s(87279),K=s(78140),z=s(32163),H=s(72495);function j(e){const{activeMenuActions:t}=e;return n()(K.Z,{menuType:W.og.Popup},void 0,n()(z.Z,{type:z.i.Vertical,sections:[{key:"mfaMethodActions",render:e=>o.createElement(H.Z,e),items:t}],initialFocus:void 0}))}function Q(e){window.__c={n:"MFAActiveAction"};const{type:t,title:s,caption:i,setting:a,onDeleteMethod:r,onUpdateMethod:l}=e,g=(0,u.yK)(Y,[]),p={totp:c.Z.authenticatorCode(g.icon),sms:c.Z.textMessage(g.icon)},[h,f]=(0,o.useState)(!1),v=e=>({key:"deleteMFAMethod",render:e=>o.createElement(U.Z,E()({},e,{title:n()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:c.Z.trash(g.menuItemIcon)})),action:()=>{r(a),e.close()}}),S=e=>({key:"editMFAMethod",render:e=>o.createElement(U.Z,E()({},e,{title:n()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Edit title"}),icon:c.Z.pencil(g.menuItemIcon)})),action:()=>{f(!0),e.close()}});return n()("div",{style:g.activeMethodContainer},void 0,n()("div",{style:g.activeMethodLeftContainer},void 0,n()("div",{style:g.icon},void 0,p[t]),n()("div",{style:g.activeMethodText},void 0,(()=>{switch(t){case"sms":return n()(O.Z,{},void 0,s);case"totp":return n()(N,{setting:a,setIsEditing:f,isEditing:h,onUpdateMethod:l});default:return(0,d.t1)(t)}})(),n()("span",{style:g.activeMethodCaption},void 0,i))),n()(V.ZP,{render:e=>{switch(t){case"sms":return n()(j,{activeMenuActions:[v(e)]});case"totp":return n()(j,{activeMenuActions:[S(e),v(e)]});default:(0,d.t1)(t)}},alignmentToOrigin:V.vR.Start,renderOrigin:e=>o.createElement(G.Z,E()({style:g.menuButton,disabled:h},e),c.Z.dots(g.menuIcon)),popupType:V.Z4.Popup}))}function Y(e){return(0,u.EM)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:g.Z.fontSize.UISmall.desktop,lineHeight:g.Z.lineHeight.UISmall.desktop,color:e.mediumTextColor,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.lightIconColor,width:15,height:15},menuButton:{borderRadius:3,padding:3},menuItemIcon:{width:17,height:17},inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14}})}function $(e){window.__c={n:"MFAPromptUpdateMethod"};const{mfaSettings:t,errorMessage:s,onStartTOTP:i,onStartSMS:a,onTurnOffMFA:r,onStartBackupCodes:l,onDismiss:g,onDeleteMethod:f,onUpdateMethod:v}=e,S=(0,u.yK)(J,[]),y=n()(m.FormattedMessage,{id:"mfa.updateSettings.title",defaultMessage:"2-step verification"}),b=n()(m.FormattedMessage,{id:"mfa.settingModal.message",defaultMessage:"Confirm it's you after using a password by providing a verification code."}),w=(0,o.useMemo)((()=>(0,M.UG)(t).map((e=>{const{mfaMethod:t}=e,s=(0,B.tv)(e.createdAt,R.SP);switch(t){case"totp":return n()(Q,{type:t,title:e.friendlyName,caption:n()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:f,onUpdateMethod:v});case"sms":return n()(Q,{type:t,title:`${e.phoneNumber}`,caption:n()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.useSMS.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:f,onUpdateMethod:v});case"backup_code":return;default:(0,d.t1)(t)}}))),[t,f,v]),k=t.filter((e=>"totp"===e.mfaMethod)).length,C=t.filter((e=>"sms"===e.mfaMethod)).length,I=(0,o.useMemo)((()=>[{type:"totp",title:n()(m.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.title",defaultMessage:"Add authenticator"}),caption:n()(m.FormattedMessage,k>=2?{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.disabled.button.message",defaultMessage:"2 of 2 authenticators added"}:{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.message",defaultMessage:"{numOfTotpSettings} of 2 authenticators added",values:{numOfTotpSettings:k}}),onClick:i,style:S.button,disabled:k>=2},{type:"sms",title:n()(m.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.title",defaultMessage:"Add phone number"}),caption:n()(m.FormattedMessage,C>=2?{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.disabled.button.message",defaultMessage:"2 of 2 phones added"}:{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.message",defaultMessage:"{numOfSmsSettings} of 2 phones added",values:{numOfSmsSettings:C}}),onClick:a,style:S.button,disabled:C>=2},{type:"backup_code",title:n()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.title",defaultMessage:"Regenerate backup codes"}),caption:n()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.message",defaultMessage:"Use for account recovery when other methods don't work"}),onClick:l,style:S.button,disabled:!1}].sort(((e,t)=>(e.disabled?1:0)-(t.disabled?1:0)))),[i,a,l,k,C,S]),T=(0,o.useMemo)((()=>I.map(((e,t)=>o.createElement(p.Z,E()({},e,{key:t}))))),[I]),P=o.createElement(o.Fragment,null,n()(O.Z,{style:S.settingsTitle,isSmall:!0},void 0,n()(m.FormattedMessage,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})),w,n()(D.Z,{size:15,isHidden:!0}),n()(O.Z,{style:S.settingsTitle,isSmall:!0},void 0,n()(m.FormattedMessage,{id:"mfa.updateSettings.addMoreMethodsSection.title",defaultMessage:"Add more methods"})),T),Z=[{text:n()(m.FormattedMessage,{id:"mfa.updateSettings.turnOffVerification.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:r,type:"button",view:"plain",isRed:!0}];return n()(h.Z,{title:y,header:b,errorMessage:s,icon:c.Z.lockShield(S.icon),onDismiss:g,secondaryActions:Z},void 0,P)}function J(e){return(0,u.EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:g.Z.fontWeight.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var X=s(8848),ee=s(1799);function te(e){window.__c={n:"MFAPromptVerifyWithBackupCode"};const{isLoading:t,userStore:s,errorMessage:i,onDismiss:a,onVerifyBackupCode:r,onTryAnotherMethod:d}=e,l=(0,u.yK)(se,[]),[c,g]=(0,o.useState)(""),p=n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.title",defaultMessage:"To continue, we need to verify your identity"}),f=n()(m.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withBackupCode.header",defaultMessage:"Enter an unused one-time backup code."}),v={text:t?n()(S.Z,{}):n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.button.message",defaultMessage:"Continue"}),onClick:()=>r(c.replace(/[^0-9a-zA-Z]/g,"")),disabled:t||""===c},y=[{text:n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>d(),disabled:t}];return n()(h.Z,{title:p,header:f,icon:n()(C,{userStore:s}),primaryAction:v,secondaryActions:y,errorMessage:i,onDismiss:a},void 0,n()(L.Z,{type:"text",value:c,onChange:e=>{g((0,ee.K)(e.target.value))},placeholder:"0000-0000",style:l.backupCodeInput,disabled:t,autoFocus:!0}))}function se(e){return(0,u.EM)({backupCodeInput:{width:"100%",background:"light"===e.mode?X.ZP.transparent:e.inputBackground}})}function ie(e){window.__c={n:"MFAPromptVerifyWithPassword"};const{isLoading:t,isForgotPasswordLoading:s,userStore:i,errorMessage:a,alertMessage:d,onDismiss:l,onVerifyPassword:c,onForgotPassword:g}=e,p=(0,u.yK)(ne,[]),[f,v]=(0,o.useState)(""),y=(0,r.VK)((()=>null==i?void 0:i.getEmail()),[i]),b=n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.title",defaultMessage:"To continue, we need to verify your identity"}),M={text:t?n()(S.Z,{}):n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.button.message",defaultMessage:"Continue"}),onClick:()=>c(f),disabled:t||""===f},w=[{text:n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.secondaryButton.message",defaultMessage:"Forgot password?"}),view:"plain",type:"button",disabled:s,onClick:()=>g(y)}];return n()(h.Z,{title:b,header:y,icon:n()(C,{userStore:i}),primaryAction:M,secondaryActions:w,errorMessage:a,alertMessage:d,onDismiss:l},void 0,n()(L.Z,{type:"password",value:f,onChange:e=>v(e.target.value),placeholder:"Your password",style:p.passwordInput,disabled:t,autoComplete:"current-password",autoFocus:!0}))}function ne(){return(0,u.EM)({passwordInput:{width:"100%"}})}var oe=s(96486),ae=s(73602),re=s(11898);function de(e){window.__c={n:"MFAPromptVerifyWithSMS"};const{mfaSetting:t,isLoading:s,userStore:i,errorMessage:a,resentStatus:r,resentAt:d,onDismiss:l,onVerifySMS:u,onResendLink:c,onTryAnotherMethod:g}=e,[p,f]=(0,o.useState)([]),v=n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.title",defaultMessage:"To continue, we need to verify your identity"}),y=o.createElement(o.Fragment,null,n()(m.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withSMS.header",defaultMessage:"Enter the code sent to {phoneHint}.",values:{phoneHint:`${t.phoneNumber}`}})," ",o.createElement(ae.y,{resentAt:d,resentStatus:r,onResendLink:c})),b={text:s?n()(S.Z,{}):n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.button.message",defaultMessage:"Continue"}),onClick:()=>u(t.mfaSettingId,p.join("")),disabled:s||"resending"===r||6!==(0,oe.compact)(p).length},M=[{text:n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>g(),disabled:s}];return n()(h.Z,{title:v,header:y,icon:n()(C,{userStore:i}),primaryAction:b,secondaryActions:M,errorMessage:a,onDismiss:l},void 0,n()("div",{},void 0,n()(re.ZP,{numInputs:6,value:p,format:"settings",disabled:!1,onChange:f,autoFocus:!0,isValidKey:re.rN})))}function le(e){window.__c={n:"MFAPromptVerifyWithTOTP"};const{mfaSetting:t,isLoading:s,userStore:i,errorMessage:a,onDismiss:r,onVerifyTOTP:d,onTryAnotherMethod:l}=e,c=(0,u.yK)(ue,[]),[g,p]=(0,o.useState)([]),f=n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.title",defaultMessage:"To continue, we need to verify your identity"}),v=n()(m.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withTOTP.header",defaultMessage:"Enter code from authenticator <boldtext>{friendlyName}</boldtext>.",values:{friendlyName:t.friendlyName,boldtext:e=>n()("span",{style:c.boldText},void 0,e)}}),y={text:s?n()(S.Z,{}):n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.button.message",defaultMessage:"Continue"}),onClick:()=>d({mfaSettingId:t.mfaSettingId,code:g.join("")}),disabled:s||6!==(0,oe.compact)(g).length},b=[{text:n()(m.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>l(),disabled:s}];return n()(h.Z,{title:f,header:v,icon:n()(C,{userStore:i}),primaryAction:y,secondaryActions:b,errorMessage:a,onDismiss:r},void 0,n()("div",{},void 0,n()(re.ZP,{numInputs:6,value:g,format:"settings",disabled:!1,onChange:p,autoFocus:!0,isValidKey:re.rN})))}function ue(e){return(0,u.EM)({boldText:{fontWeight:g.Z.fontWeight.semibold}})}function ce(e){window.__c={n:"SettingsRouter"};const{settingsStateMachine:t,onDismiss:s,onStartTOTP:i,onStartSMS:o,onStartBackupCodes:u}=e,c=(0,a.O7)(),m=(0,r.VK)((()=>(0,l.B7)(c)),[c]),g=t.useCurrentStep();switch(g.step){case"settingsUninitialized":return null;case"settingsVerifyWithPassword":return n()(ie,{isLoading:g.isLoading,isForgotPasswordLoading:g.isForgotPasswordLoading,userStore:m,errorMessage:g.error,alertMessage:g.alert,onVerifyPassword:e=>t.settingsVerifyPassword(e),onForgotPassword:e=>t.settingsForgotPassword(e),onDismiss:s});case"settingsVerifyChooseMFAMethod":return n()(T,{isSMSLoading:g.isSMSLoading,chosenMfaSettingId:g.chosenMfaSettingId,mfaSettings:g.mfaSettings,userStore:m,errorMessage:g.error,onClick:e=>t.settingsChooseVerifyMethod(e),onDismiss:s});case"settingsVerifyWithTOTP":return n()(le,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:m,errorMessage:g.error,onDismiss:s,onVerifyTOTP:e=>t.settingsVerifyTOTP(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithSMS":return n()(de,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:m,errorMessage:g.error,resentAt:g.resentAt,resentStatus:g.resentStatus,onDismiss:s,onVerifySMS:(e,s)=>t.settingsVerifySMS({mfaSettingId:e,code:s}),onResendLink:()=>t.settingsVerifyResendSMS(g.mfaSetting.mfaSettingId),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithBackupCode":return n()(te,{isLoading:g.isLoading,userStore:m,errorMessage:g.error,onDismiss:s,onVerifyBackupCode:e=>t.settingsVerifyBackupCode(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsLoadSettings":return null;case"settingsInitialSetup":return n()(f,{errorMessage:g.error,onStartTOTP:i,onStartSMS:o,onDismiss:s});case"settingsShowSettings":const e=g.mfaSettings;return n()($,{mfaSettings:e,errorMessage:g.error,onStartTOTP:i,onStartSMS:o,onStartBackupCodes:u,onTurnOffMFA:()=>t.settingsConfirmDisableMFA(),onDismiss:s,onDeleteMethod:e=>t.settingsConfirmDelete(e),onUpdateMethod:e=>t.settingsUpdate(e)});case"settingsDeleteSettings":return n()(y,{isLoading:g.isLoading,mfaSetting:g.mfaSettingToDelete,errorMessage:g.error,onDismiss:s,onCancel:()=>t.settingsConfirmIdentityForSettings(),onDeleteMethod:()=>t.settingsDelete()});case"settingsConfirmIdentity":case"settingsDisableMFA":const a="settingsConfirmIdentity"===g.step&&"disableMFA"===g.source;return"settingsDisableMFA"===g.step||a?n()(_,{isLoading:a,lastMFASetting:g.lastMFASetting,errorMessage:g.error,onDismiss:s,onTurnOffMFA:()=>t.settingsDisableMFA(),onCancel:()=>t.settingsConfirmIdentityForSettings()}):null;case"settingsIdentityConfirmed":return"disableMFA"===g.source?n()(Z,{errorMessage:g.error,onDismiss:s}):null;default:return(0,d.t1)(g)}}},24173:(e,t,s)=>{s.d(t,{c:()=>u,W:()=>c});var i=s(49085),n=s(62965),o=s(97880),a=s(69503),r=s(49682),d=s(16010);const l={settingsVerifyWithPassword:r.Qj.incorrectPassword,settingsVerifyWithSMS:r.Qj.smsIncorrectCode,settingsVerifyWithTOTP:r.Qj.totpIncorrectCode,settingsVerifyWithBackupCode:r.Qj.backupCodeIncorrectCode};class u extends i.default{getInitialState(){return{step:"settingsUninitialized"}}}class c extends d.o{constructor(e,t){super(e,"settings"),this.service=void 0,this.service=t}settingsConfirmIdentityForPasswordSetting(){this.checkStep("settingsUninitialized")&&(this.store.setState({step:"settingsConfirmIdentity",source:"passwordSetting"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsConfirmIdentityForSettings(){this.checkStep(["settingsUninitialized","settingsDeleteSettings","settingsDisableMFA"])&&(this.store.setState({step:"settingsConfirmIdentity",source:"settings"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsVerifyPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithPassword(e).catch(this.handleUnexpectedError))}settingsForgotPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isForgotPasswordLoading:!0}),this.doForgotPassword(e).catch(this.handleUnexpectedError))}settingsChooseVerifyMethod(e){const t=this.checkStep("settingsVerifyChooseMFAMethod");if(!t)return;const s=e.mfaMethod;switch(s){case"sms":this.store.setState({...t,isSMSLoading:!0,chosenMfaSettingId:e.mfaSettingId}),this.doVerifyIdentitySendSMS({mfaSetting:e});break;case"totp":this.store.setState({mfaSetting:e,step:"settingsVerifyWithTOTP",isLoading:!1,source:t.source});break;case"backup_code":this.store.setState({step:"settingsVerifyWithBackupCode",isLoading:!1,source:t.source});break;default:(0,o.t1)(s)}}settingsTryAnotherMethod(){this.checkStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"])&&this.doTryAnotherMethod().catch(this.handleUnexpectedError)}settingsVerifyTOTP(e){const t=this.checkStep("settingsVerifyWithTOTP");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithTOTP(e).catch(this.handleUnexpectedError))}settingsVerifySMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithSMS(e).catch(this.handleUnexpectedError))}settingsVerifyResendSMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,resentStatus:"resending"}),this.doVerifyIdentityResendSMS(e).catch(this.handleUnexpectedError))}settingsVerifyBackupCode(e){const t=this.checkStep("settingsVerifyWithBackupCode");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithBackupCode({code:e}).catch(this.handleUnexpectedError))}settingsShow(e){const{refresh:t}=e,s=this.getCurrentStep();if("settingsUninitialized"===s.step)return this.settingsConfirmIdentityForSettings();t&&("settingsShowSettings"===s.step||"settingsInitialSetup"===s.step)&&(this.store.setState({step:"settingsLoadSettings"}),this.doLoadSettings().catch(this.handleUnexpectedError))}settingsUpdate(e){this.checkStep("settingsShowSettings")&&this.doUpdateSettings(e).catch(this.handleUnexpectedError)}settingsConfirmDelete(e){const t=this.checkStep("settingsShowSettings");if(!t)return;t.mfaSettings.find((t=>t.mfaSettingId===e.mfaSettingId));1===t.mfaSettings.filter((e=>"totp"===e.mfaMethod||"sms"===e.mfaMethod)).length?this.store.setState({step:"settingsDisableMFA",lastMFASetting:e}):this.store.setState({step:"settingsDeleteSettings",mfaSettings:t.mfaSettings,mfaSettingToDelete:e,isLoading:!1})}settingsDelete(){const e=this.checkStep("settingsDeleteSettings");e&&(this.store.setState({...e,isLoading:!0}),this.doDeleteSettings(e.mfaSettingToDelete.mfaSettingId).catch(this.handleUnexpectedError))}settingsConfirmDisableMFA(){this.checkStep("settingsShowSettings")&&this.store.setState({step:"settingsDisableMFA"})}settingsDisableMFA(){const e=this.checkStep("settingsDisableMFA");e&&(this.store.setState({step:"settingsConfirmIdentity",source:"disableMFA",lastMFASetting:e.lastMFASetting}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"settingsUninitialized"})}async doConfirmIdentity(){const e=await this.withStep("settingsConfirmIdentity",(()=>this.service.confirmIdentity()));if(!e)return;const{result:t,state:s}=e,i=t.status;switch(i){case"ready":this.store.setState({step:"settingsIdentityConfirmed",source:s.source});const e=s.source;"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(a.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,o.t1)(e);break;case"mfa":this.store.setState({step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings,source:s.source});break;case"password":this.store.setState({step:"settingsVerifyWithPassword",isLoading:!1,isForgotPasswordLoading:!1,source:"settings"});break;default:throw(0,o.t1)(i)}}async doForgotPassword(e){if(!e)return void this.store.setState({step:"settingsVerifyWithPassword",source:"settings",isLoading:!1,isForgotPasswordLoading:!1,error:r.Qj.unexpectedError});const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.sendTemporaryPassword({email:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isForgotPasswordLoading:!1,alert:r.to.passwordResentLinkSent(e)});break;case"error":this.store.setState({...i,isForgotPasswordLoading:!1,error:r.Qj.unexpectedError});break;default:return(0,o.t1)(s.status)}}async doVerifyIdentityWithPassword(e){const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.verifyIdentityWithPassword({password:e})));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithTOTP(e){const t=await this.withStep("settingsVerifyWithTOTP",(()=>this.service.verifyIdentityWithTOTP(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.verifyIdentityWithSMS(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityResendSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.sendSMS({mfaSettingId:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isLoading:!1,resentStatus:"resent",resentAt:Date.now()});break;case"error":this.store.setState({...i,resentStatus:"not-resent",error:r.Qj.unexpectedError});break;default:return(0,o.t1)(s.status)}}async doVerifyIdentityWithBackupCode(e){const t=await this.withStep("settingsVerifyWithBackupCode",(()=>this.service.verifyBackupCode(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async handleVerifyIdentityResponse(e){const{status:t,state:s}=e;switch(t){case"match":const e=s.source;this.store.setState({step:"settingsIdentityConfirmed",source:s.source}),"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(a.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,o.t1)(e);break;case"incorrect":this.store.setState({...s,isLoading:!1,error:l[s.step]});break;case"error":this.store.setState({...s,isLoading:!1,error:r.Qj.unexpectedError});break;default:return(0,o.t1)(t)}}async doTryAnotherMethod(){const e=await this.withStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e;t.settings.length>0?this.store.setState({...s,step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings}):this.store.setState({...s,error:r.Qj.unexpectedError})}async doLoadSettings(){const e=await this.withStep(["settingsLoadSettings","settingsIdentityConfirmed"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e,i=s.step;switch(i){case"settingsIdentityConfirmed":case"settingsLoadSettings":t.settings.length>0?this.store.setState({step:"settingsShowSettings",mfaSettings:t.settings}):this.store.setState({step:"settingsInitialSetup"});break;default:return(0,o.t1)(i)}}async doVerifyIdentitySendSMS(e){const{mfaSetting:t}=e,s=await this.withStep("settingsVerifyChooseMFAMethod",(()=>this.service.sendSMS({mfaSettingId:t.mfaSettingId})));if(!s)return;const{result:i,state:n}=s;switch(i.status){case"ok":this.store.setState({mfaSetting:t,step:"settingsVerifyWithSMS",isLoading:!1,resentAt:0,resentStatus:"not-resent",source:n.source});break;case"error":break;default:return(0,o.t1)(i.status)}}async doUpdateSettings(e){const{mfaMethod:t,mfaSettingId:s}=e;if("totp"!==t)return;const i=await this.withStep("settingsShowSettings",(()=>this.service.renameSettings({mfaSettingId:s,friendlyName:e.friendlyName})));if(!i)return;const{result:o,state:a}=i;"saved"===o.status?o.settings.length>0&&!(0,n.Z)(o,a.mfaSettings)?this.store.setState({step:"settingsShowSettings",mfaSettings:o.settings}):this.store.setState({...a,error:void 0}):this.store.setState({...a,error:"duplicate"===o.status?r.Qj.totpDuplicateFriendlyName:"bad_friendly_name"===o.status?r.Qj.totpBadFriendlyName:r.Qj.totpEmptyFriendlyName})}async doDisableMFA(){const e=await this.withStep("settingsIdentityConfirmed",(()=>this.service.disableMFA()));if(!e)return;const{result:t}=e;switch(t.status){case"ok":case"error":break;default:return(0,o.t1)(t.status)}}async doDeleteSettings(e){const t=await this.withStep("settingsDeleteSettings",(()=>this.service.deleteSettings(e)));if(!t)return;const{result:s}=t;this.store.setState({step:"settingsShowSettings",mfaSettings:s.settings})}}},83890:(e,t,s)=>{s.d(t,{Z:()=>w});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=s(67294),d=s(83355),l=s(66897),u=s(53397),c=s(19889),m=s(7928),g=s(5366),p=s(31299),h=s(68216),f=s(92864),v=s(93044),S=s(255),y=s(97680),b=s(98707);class M extends d.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:s,onRemove:i,onClick:n}=t;const o=this.styles,r=this.getUserValue(e),d=a()(S.Z,{disabled:s,onClick:i});return a()(y.Z,{disabled:s,focused:!1,actor:(0,l.m3)(r),right:d,style:o.menuItem,desktopTitleStyle:o.menuItemTitle,onClick:n},e)},this.renderItemForSummary=e=>(0,m.Nz)(this.props.intl,this.getUserValue(e)),this.renderToken=(e,t)=>{const{userIds:s}=this.props,i=1===s.length,n=this.getUserValue(e);if(n)return a()(f.ZP,{format:this.environment.device.isMobile?v.lP.Large:v.lP.Small,showRemoveButton:!0,isSingle:i,onClickRemove:t.onRemove,actor:(0,l.m3)(n),shouldShrink:!0,style:{background:"transparent"}},e)},this.renderResultMenuItem=(e,t)=>{const s=this.getUserValue(e);return r.createElement(y.Z,n()({},t,{key:e,actor:(0,l.m3)(s)}))},this.performRequest=async e=>{let{query:t,current:s}=e;const i=new Set(s);return(await p.Yu({environment:this.environment,query:t,membersOnly:!1})).filter((e=>!i.has(e.id))).slice(0,20).map((e=>e.id))},this.getUserValue=e=>this.createUserStore(e).getValue(),this.createUserStore=e=>{const{parentStore:t}=this.props;return h.U6.createChildStore(t,{table:c.KJ,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:2,fill:"currentColor"}}}renderComponent(){const{mode:e,title:t,userIds:s,onChange:i,disabled:n,focused:o,onMenuDismiss:r,intl:d}=this.props;return a()(b.Z,{mode:e,title:t,icon:u.Z.person,iconStyles:this.styles.recordIcon,items:s,onChange:i,disabled:n,focused:o,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:a()(g.FormattedMessage,{defaultMessage:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:t,tokenInputPlaceholder:d.formatMessage({defaultMessage:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,onMenuDismiss:r,hasItemsSelected:(null==s?void 0:s.length)>0})}}M.displayName="SearchPersonFilter";const w=(0,g.injectIntl)(M)},69507:(e,t,s)=>{s.d(t,{l:()=>c});var i=s(10434),n=s.n(i),o=s(23174),a=s.n(o),r=s(67294),d=s(83355),l=s(5366),u=s(72495);class c extends d.Z{renderComponent(){return r.createElement(u.Z,n()({title:a()(l.FormattedMessage,{id:"inviteUserModal.searchDropdown.selectPersonTitle",defaultMessage:"Select a person"})},this.props))}}c.displayName="SearchPersonDropdown"},79817:(e,t,s)=>{s.d(t,{fr:()=>v,x5:()=>b,j_:()=>M,fC:()=>w,uJ:()=>P,Oh:()=>Z,Si:()=>F,$s:()=>_});s(57658);var i=s(33728),n=s(65917),o=s(24211),a=s(27006),r=s(97880),d=s(54642),l=s(76464),u=s(64964),c=s(33929),m=s(85834),g=s(4708),p=s(19306),h=s(21115),f=s(8323);const v=e=>{const{environment:t,spaceStore:s,contextualInviteStore:i}=e;S({environment:t,spaceStore:s,contextualInviteStore:i})?i.startRequestMembership():y({environment:t,spaceStore:s,contextualInviteStore:i})?i.startWorkspaceInvite():i.setState({...i.state,inviteStage:m.TG.closed})},S=e=>{const{spaceStore:t,contextualInviteStore:s}=e,i=t.getRole();return!(!i||!(0,a.RN)(i))&&(!!s.hasGuests()&&(!t.getDisableMembershipRequests()&&(0,g.p1)()))},y=e=>{const{spaceStore:t,contextualInviteStore:s}=e,i=t.getRole();return!(!i||!(0,a.dy)(i))&&(!!s.hasGuests()&&(0,f.Mk)())},b=e=>{const{success:t,intl:s,contextualInviteStore:i}=e,n=i.state.invitedUsers;0!==n.length&&(t?u.oV({label:s.formatMessage({id:"contextual_invite.permission_invite_success3",defaultMessage:"Successfully sent invites to {users}"},{users:P(n,s)})}):(u.oV({label:s.formatMessage({id:"contextual_invite.permission_invite_failure",defaultMessage:"Failed to send invites to {users}"},{users:P(n,s)})}),i.reset()))},M=async e=>{const{environment:t,spaceStore:s,contextualInviteStore:i,from:o,intl:a}=e,{selection:r,flowId:d}=i.state;if("page_guest"===r||!i.hasGuests())return i.reset(),!1;const{inviteTargets:u,unknownEmails:c}=await k({environment:t,contextualInviteStore:i}),m={...i.state};i.reset();const g=(0,f.zt)(),p=g&&(0,h.o9)(g)?"editor":e.inviteRole??"read_and_write";try{await l.n_({environment:t,store:s,inviteTargets:u,inviteRole:p,isOnboarding:!1,invite:{inviteOrigin:o,inviteFlowId:d}})}catch(v){return T(a,m.invitedUsers),n.log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.inviteTargets",data:{miscDataToConvertToString:{...m,inviteTargets:u}}}),!1}finally{c.length&&n.log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.unknownUserId",data:{miscDataToConvertToString:{...m,unknownEmails:c}}})}return!0},w=async e=>{const{environment:t,spaceStore:s,originId:i,originType:o,reasonMessage:a,contextualInviteStore:r,intl:l}=e,{selection:u}=r.state;if("page_guest"===u||!r.hasGuests())return r.reset(),!1;const{inviteTargets:c,unknownEmails:m}=await k({environment:t,contextualInviteStore:r}),g={...r.state};r.reset();const p=[];try{const e=c.map((e=>d.requestAccess(t,{type:"actor-to-space",forActorId:e.value.id,spaceId:s.id,message:a,attributes:{origin_id:i,origin_type:o,origin_table:"share_menu"===o?"block":"space",add_permissions_on_approval:!1}}).catch((()=>p.push(e)))));await Promise.all(e)}catch(h){return I(l,g.invitedUsers),n.log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.inviteTargets",data:{miscDataToConvertToString:{...g,inviteTargetsWithErrors:p}}}),!1}finally{m.length&&n.log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.unknownUserId",data:{miscDataToConvertToString:{...g,unknownEmails:m}}})}return!0},k=async e=>{const{environment:t,contextualInviteStore:s}=e,{invitedEmailToUserIdMap:i}=s.state,n=[],o=[];for(const a of s.state.invitedUsers){if(!a.isGuest)continue;const e=await C(t,a,i);e?n.push({type:"existingUser",value:{id:e,email:a.email,version:1}}):o.push(a.email)}return{inviteTargets:n,unknownEmails:o}},C=async(e,t,s)=>{const i=await(async(e,t,s)=>{let i=t.id;if(i||(i=s[t.email]),!i){const s=await d.findUser(e,{email:t.email});if("failed"!==s.type){const e=s.data;e.value&&(i=e.value.value.id)}}return i})(e,t,s);if(i)return i;const n=(0,o.E2)(c.default.getIntl()),a=await d.createEmailUser(e,{email:t.email,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:n});return"failed"!==a.type?a.data.userId:void 0},I=(e,t)=>{0!==t.length&&u.oV({label:e.formatMessage({id:"contextual_invite.request_members_failure",defaultMessage:"Failed to request {users} to become members"},{users:P(t,e)})})},T=(e,t)=>{0!==t.length&&u.oV({label:e.formatMessage({id:"contextual_invite.contextual_invite_failure",defaultMessage:"Failed to invite to {users} as members"},{users:P(t,e)})})},P=(e,t)=>(0,p.W)(e.flatMap((e=>e.email||[]))),Z=(e,t)=>{const{state:s}=t,i=(0,f.zt)(),n=t.getGuestEmails();return{invite_flow_id:s.flowId,user_count:n.length,user_emails:n,invite_space_role_selection:s.selection,is_bot:!1,subscription_tier:i}};function F(e){const{type:t}=e;switch(t){case"newUser":return{email:e.value.email,isGuest:!0};case"existingUser":return{...e.value,email:e.value.email,isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};case"group":return;default:(0,r.t1)(t)}}function _(e){const{contextualInviteUser:t,allowedDomains:s}=e,{email:n,isGuest:o}=t;if(o){const e=(0,i.Gd)(n);if(!e)return!1;if(s.has(e))return!0}return!1}},3924:(e,t,s)=>{s.d(t,{M:()=>r});var i=s(67294),n=s(480),o=s(54642),a=s(10161);function r(e){return t=>{const s=(0,n.O7)(),[r,d]=(0,i.useState)({isDomainVerified:!1,settings:{}});(0,i.useEffect)((()=>{a.default.checkGate("enable_managed_users_disabled_profile_edits")&&o.getEmailDomainSettings(s,{}).then((e=>{"success"===e.type&&d(e.data)}))}),[s]);const l={...t,userEmailDomainSettings:r};return i.createElement(e,l)}}},18441:(e,t,s)=>{s.d(t,{jg:()=>a,jc:()=>r,P9:()=>d,YJ:()=>l});s(57658);var i=s(55384),n=s(32161),o=s(5500);function a(e){if(e.integration_id!==o.nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,s,i]=t;return{organizationName:s,accountName:i}}function r(e){return i.kk.fromValue(n.P,e).getSlackWorkspaceId()}function d(e,t){return t?e.filter((e=>{const s=r(e);return!!s&&t(s)})):e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s={};for(const i of e){const{accountName:e,organizationName:n}=a(i);u({query:t,accountName:e,organizationName:n})&&(s[e]||(s[e]=[]),s[e].push({externalAuthentication:i,workspaceName:n}))}return s}function u(e){const{accountName:t,organizationName:s,query:i}=e;if(0===i.length)return!0;const n=t.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0,o=!!s&&s.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0;return n||o}},53353:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(81954),n=s(98165),o=s(65598);const a=function(e){return(0,i.VK)((()=>{if(!(0,o.NZ)(e))return{isStoreInTeam:!1,spaceAllowsGuests:!0};const t=(0,n.VP)(e),s=(0,n.Pj)(e),i=!(null!=s&&s.getDisableGuests());return t?{isStoreInTeam:!0,teamAllowsGuests:!t.getDisableGuests(),spaceAllowsGuests:i}:{isStoreInTeam:!1,spaceAllowsGuests:i}}),[e])}},26781:(e,t,s)=>{s.d(t,{i:()=>d});var i=s(23174),n=s.n(i),o=s(67294),a=s(5366),r=s(53353);function d(e){const t=(0,r.Z)(e);return t.isStoreInTeam?t.teamAllowsGuests?void 0:o.createElement(o.Fragment,null,n()("div",{},void 0,n()(a.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine1",defaultMessage:"This teamspace doesn't allow guests."})),n()("div",{},void 0,n()(a.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."}))):t.spaceAllowsGuests?void 0:o.createElement(o.Fragment,null,n()("div",{},void 0,n()(a.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine1",defaultMessage:"This workspace doesn't allow guests."})),n()("div",{},void 0,n()(a.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})))}},30496:(e,t,s)=>{s.d(t,{Z:()=>i});const i=new(s(61766).Z)},53680:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(49085);class n extends i.default{getInitialState(){return{disablePublicAccess:!1,disableGuests:!1,disableMoveToSpace:!1,disableExport:!1,disableSpacePageEdits:!1,disablePublicAccessRequests:!1,disableTeamCreation:!1,disableMembershipRequests:!1,disableGuestMembershipRequests:!1,enableAiFeature:!1,disableTeamGuests:!1}}getValueForSpace(e){if(e.isDefined())return{disablePublicAccess:Boolean(e.getDisablePublicAccess()),disableGuests:Boolean(e.getDisableGuests()),disableMoveToSpace:Boolean(e.getDisableMoveToSpace()),disableExport:Boolean(e.getDisableExport()),disableSpacePageEdits:Boolean(e.getDisableSpacePageEdits()),disablePublicAccessRequests:Boolean(e.getDisablePublicAccessRequests()),disableTeamCreation:Boolean(e.getDisableTeamCreation()),disableMembershipRequests:Boolean(e.getKeyStore("settings").getKeyStore("disable_membership_requests").getValue()),disableGuestMembershipRequests:Boolean(e.getKeyStore("settings").getKeyStore("disable_guest_membership_requests").getValue()),enableAiFeature:Boolean(e.getKeyStore("settings").getKeyStore("enable_ai_feature").getValue()),disableTeamGuests:Boolean(e.getKeyStore("settings").getKeyStore("disable_team_guests").getValue())}}}const o=n},50501:(e,t,s)=>{s.d(t,{g:()=>i});const i=14*s(63143).A0},96068:(e,t,s)=>{s.d(t,{I:()=>o});var i=s(96486),n=s.n(i);function o(e){if(n().uniq(e).length<=3)return{success:!1,reason:{type:"password_too_consistent"}};if(e.length>=15)return{success:!0};if(e.length<8)return{success:!1,reason:{type:"password_too_short"}};const t=function(e){return e.match(/[a-z]/i)}(e),s=function(e){return e.match(/\d/)}(e);return t&&s?{success:!0}:t||s?s?t?{success:!1,reason:{type:"password_too_short"}}:{success:!1,reason:{type:"password_missing_letter"}}:{success:!1,reason:{type:"password_missing_number"}}:{success:!1,reason:{type:"password_missing_letter_and_number"}}}}}]);