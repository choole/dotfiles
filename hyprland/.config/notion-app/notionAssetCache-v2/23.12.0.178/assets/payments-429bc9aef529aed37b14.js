"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7983],{98922:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ae});var o=n(23174),a=n.n(o),i=n(86664),r=n(67294),l=n(480),s=n(81954),d=n(24405),u=n(8848),c=n(88108),p=n(53397),m=n(3791),y=n(5366),g=n(44463),f=(n(95477),n(43250)),b=n(16100),v=n(21115),S=n(34859),h=n(79315),C=n(88632),M=n(45407),x=n(27242),I=n(78291),O=n(30751),w=n(36488),T=n(53953),F=n(18647),Z=n(29683),A=n(10644),B=n(94919),_=n(97880),k=n(82990),P=n(71993),V=n(69653),D=n(61519),z=n(68785),U=n(1063),W=n(49369),E=n(67773),K=n(43761),q=n(24862),N=n(26156);function H(e){window.__c={n:"SpaceSubscriptionOrderSummary"};const{state:t,data:n,promo:o}=e,{coupon:i}=t,r=(0,l.O7)(),u=(0,d.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16},header:{alignItems:"center",color:e.regularTextColor,display:"flex",fontSize:16,fontWeight:k.Z.fontWeight.semibold,gap:8,marginBottom:11},couponLink:{fontSize:12}})),[]),{availableCurrencyCodes:c,selectedCurrencyCode:p}=(0,s.VK)((()=>({availableCurrencyCodes:O.Z.availableCurrencyCodes,selectedCurrencyCode:O.Z.selectedCurrencyCode})),[]),m=t.temporaryBillingInterval??"month",g=V.Zr(o),f=V.Lp({subscriptionTier:t.subscriptionTier,onlyShowAddOn:t.onlyShowAddOn,addOnFeature:t.addOnFeature}),b=(0,s.VK)((()=>f.map((e=>O.Z.getPrice(r,(t=>t.product===e&&t.billingInterval===m))))),[m,r,f]);if(b.some((e=>!e.isLoaded)))return a()(z.Z,{});const S=b.map((e=>e.result)).filter(Boolean),h=v.su(n),C=S[0].unitAmount.currencyValue,M=V.cv({prices:S,quantity:h,coupon:i}),x=V.VT({calculatingTax:t.calculatingTax,taxAmount:t.taxAmount,currencyValue:C}),I=V.rF({prices:S,quantity:h,promo:g}),w=V.Et(n,C),T=M.plus(x).minus(I).minus(w),F=T.amount<0?T.withMultipliedAmount(0):T;return a()("div",{style:u.container},void 0,a()("label",{style:u.header},void 0,a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.header",defaultMessage:"Order summary"}),a()(W.V,{availableCurrencyCodes:c,onSelectCurrency:P.y,selectedCurrencyCode:p})),a()(R,{prices:S,coupon:t.coupon,data:n}),v.Fu(t.subscriptionTier)&&a()(U.X,{tier:t.subscriptionTier}),a()(D.Z,{size:1}),a()(Y,{subtotal:M,tax:x,discount:I,accountBalance:w,promo:g,state:t,style:{marginBottom:8}}),a()(L,{total:F}))}function L(e){const t=V.hr();return a()("div",{style:t.itemContainer},void 0,a()("div",{style:t.captionContainer},void 0,a()("span",{style:t.totalName},void 0,a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeOrderSummary.totalForToday",defaultMessage:"Total for today"}))),a()("span",{style:t.totalPrice},void 0,a()(B.W,{cost:e.total.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})))}function Y(e){const{subtotal:t,tax:n,discount:o,accountBalance:i,style:r,promo:l}=e,{calculatingTax:s,coupon:d}=e.state;return a()("div",{style:r},void 0,a()(q.r,{subtotal:t}),a()(N.u,{tax:n,calculatingTax:s}),l&&!d?a()(K.T,{discount:o,promo:l}):void 0,a()(E.G,{accountBalance:i}))}function R(e){const{coupon:t,data:n,prices:o}=e;return r.createElement(r.Fragment,null,o.map((e=>a()(X,{price:e,data:n,coupon:t},e.externalId))))}function X(e){window.__c={n:"SpaceSubscriptionGrossOrderItem"};const{price:t,data:n,coupon:o}=e,i=(0,d.yK)((e=>({container:{display:"flex",justifyContent:"space-between"},item:{},title:{fontSize:14,fontWeight:k.Z.fontWeight.medium,marginBottom:4},subtitle:{color:e.mediumTextColor,fontSize:12},price:{fontSize:14}})),[]),r=v.su(n),l=t.getCostPerBillingInterval({quantity:r,coupon:o}),s=a()(B.W,{cost:l.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"});return a()("div",{style:i.container},void 0,a()("div",{style:i.item},void 0,a()("div",{style:i.title},void 0,a()(j,{price:t})),a()("div",{style:i.subtitle},void 0,a()(G,{price:t,data:n,coupon:o}))),a()("div",{style:i.price},void 0,s))}function j(e){const{price:t}=e;switch(t.product){case"free":case"student":return null;case"ai":return a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.ai.addOn",defaultMessage:"Notion AI"});case"personal":return a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.singlePlayerPlusPlan",defaultMessage:"Plus plan with a 1-member limit"});case"plus":return a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.plusPlan",defaultMessage:"Plus plan"});case"business":return a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.businessPlan",defaultMessage:"Business plan"});case"enterprise":return a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.enterprisePlan",defaultMessage:"Enterprise plan"});default:(0,_.t1)(t.product)}}function G(e){const{price:t,data:n,coupon:o}=e,i=v.su(n),r=t.getMonthlyUnitCost(o),l=a()(B.W,{cost:r.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"});switch(t.billingInterval){case"year":return a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedYearly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed yearly",values:{br:a()("br",{}),price:l,numberOfMembers:i}});case"month":return a()(y.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedMonthly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed monthly",values:{br:a()("br",{}),price:l,numberOfMembers:i}});default:(0,_.t1)(t.billingInterval)}}var $=n(26096),Q=n(58025),J=n(65734),ee=n(502);function te(){return(0,d.yK)((e=>({closeButton:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:21,right:20,width:22,height:22,padding:0,borderRadius:"50%",border:"none",background:"light"===e.mode?u.FN.light.gray[75]:u.FN.dark.gray[500],zIndex:10},closeButtonIcon:{width:12,height:12,fill:"light"===e.mode?u.FN.light.gray[400]:u.FN.dark.gray[800]},modal:{background:"dark"===e.mode?"#191919":e.popoverBackground,borderRadius:12,width:750,maxHeight:760,display:"flex"},modalContent:{flex:1,display:"flex",flexDirection:"column",position:"relative",borderRadius:"12px 0 0 12px"},modalContentBody:{padding:"36px 42px 50px 42px",display:"flex",flexDirection:"column"},modalContentSidebar:{flexShrink:1,background:"dark"===e.mode?"#202020":e.sidebarSecondaryBackground,borderLeft:`1px solid ${e.lightDividerColor}`,display:"flex",flexDirection:"column"},modalContentSidebarScroller:{padding:"20px 29px 50px 27px"}})),[])}function ne(e){window.__c={n:"ModalContentWrapper"};const{state:t,data:n,paymentOptionAvailabilityStore:o}=e,{subscriptionTier:r,onlyShowAddOn:l,calculatingTax:d,temporaryBillingInterval:u,taxAmount:c,addOnFeature:p,coupon:m}=t,y=v.XX(n),g=(0,s.VK)((()=>(null==y?void 0:y.currencyCode)??O.Z.selectedCurrencyCode),[y]),{payAmount:f}=v.uN({subscriptionTier:r,currencyCode:g,promo:t.appliedPromo,data:n,onlyShowAddOn:l,calculatingTax:d,billingInterval:u??"year",taxAmount:c,addOnFeature:p,coupon:m}),S=(0,b.useElementsOptions)({type:"subscription",amount:f.amount,currency:f.currencyCode});return a()(i.Elements,{stripe:(0,b.getStripe)(),options:S},void 0,a()(oe,{state:t,data:n,paymentOptionAvailabilityStore:o}))}function oe(e){window.__c={n:"ModalContent"};const{state:t,data:n,paymentOptionAvailabilityStore:o}=e,d=(0,l.O7)(),u=(0,y.useIntl)(),c=te(),f=(0,i.useStripe)(),b=(0,i.useElements)();!function(e){const{data:t,paymentOptionAvailabilityStore:n}=e,o=(0,l.O7)(),a=(0,i.useStripe)(),s=(0,y.useIntl)(),[d,u]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!a||d)return;const e=a.paymentRequest({country:"US",currency:"usd",total:{label:s.formatMessage({id:"spaceSubscriptionUpgradeModal.applePay.total.label",defaultMessage:"Notion - You will be charged on a recurring basis"}),amount:0}});e.canMakePayment().then((t=>{t&&(n.update((n=>({...n,supportsApplePay:t.applePay,paymentRequest:e}))),n.addPaymentOption("native_payment_platform"))})),e.on("paymentmethod",(e=>{const n=x.Z.state;if(n.open)if(g.YN({environment:o,state:n,intl:s})){const n={type:"paymentMethodId",value:e.paymentMethod.id};g.B({environment:o,data:t,paymentData:n,stripe:a,onComplete:e.complete})}else e.complete("fail")})),u(!0)}),[a,d,t,o,s,n])}({data:n,paymentOptionAvailabilityStore:o});const[h,M]=(0,s.VK)((()=>[C.Z.state.online,o.state.availablePaymentMethods]),[o]),[O,w,T,B,_]=(0,s.VK)((()=>{var e;const n=(null===(e=I.default.state.data)||void 0===e?void 0:e.addOns)??[];return[t.subscriptionTier,t.temporaryBillingInterval,t.addOnFeature,!(0,m.de)(n),t.coupon]}),[t]);if(!t.open)return null;if(!h)return a()(A.Z,{});const k=v.E$({state:t,availablePaymentMethods:M});return r.createElement(r.Fragment,null,a()("div",{style:c.modalContent},void 0,a()(F.Z,{type:S.Z.Y,showScrollToBottomIndicator:!0},void 0,a()("div",{style:c.modalContentBody},void 0,a()(J.Q,{subscriptionTier:t.subscriptionTier,onlyShowAddOn:t.onlyShowAddOn,addOnFeature:t.addOnFeature,type:t.type}),t.onlyShowAddOn?null:a()(Z.Z,{subscriptionTier:O,billingInterval:w,addOnFeature:T,canAddAI:B,coupon:_,onChangeBillingInterval:e=>{x.Z.update((t=>({...t,temporaryBillingInterval:e})))},onChangeAddOnFeature:e=>{x.Z.update((t=>({...t,addOnFeature:e})))}}),a()(Q.g,{state:t,paymentOptionAvailabilityStore:o}),a()(ee.C,{paymentMethods:k})))),a()("div",{style:c.modalContentSidebar},void 0,a()(F.Z,{type:S.Z.Y,style:c.modalContentSidebarScroller},void 0,a()(H,{state:t,data:n,promo:t.appliedPromo}),a()($.f,{state:t,paymentOptionAvailabilityStore:o,onClickUpgrade:()=>g.Vu({environment:d,intl:u,state:t,stripe:f,elements:b,data:n,paymentOptionAvailabilityStore:o})}))),a()("button",{style:c.closeButton,onClick:()=>{x.Z.setState({open:!1})}},void 0,p.Z.close(c.closeButtonIcon)))}const ae=function(e){window.__c={n:"SpaceSubscriptionUpgradeModal"};const{data:t}=e,n=(0,s.VK)((()=>x.Z.state),[]),o=(0,y.useIntl)(),i=te(),l=(0,r.useMemo)((()=>new M.Z),[]);return(0,r.useEffect)((()=>{const{state:e}=x.Z;if(!e.open)return;const{currentUserStore:n}=h.default.state,a=null!=n&&n.isDefined()?n.getModel():void 0;if(a){const n=a.getDisplayName(o);var i;if(x.Z.setState({...e,temporaryAddress:{...e.temporaryAddress,name:n}}),"subscribed_admin"===t.type||"unsubscribed_admin"===t.type)x.Z.setState({...e,appliedPromo:null===(i=t.customerData)||void 0===i?void 0:i.stripe.promo})}["local","development","staging"].includes("production")&&(0,c.exposeDebugValue)("useTestClock",(()=>{x.Z.setUseTestClock(!0)}))}),[]),a()(T.Z,{ariaLabelledBy:f.BaY,ariaDescribedBy:f.qr0,open:n.open,preventHideChildrenWhileOpening:!0,innerStyle:i.modal,render:()=>a()(w.Z,{capture:!0,allowEsc:!0,render:()=>n.open?a()(ne,{state:n,data:t,paymentOptionAvailabilityStore:l}):null})})}},1063:(e,t,n)=>{n.d(t,{X:()=>c});var o=n(23174),a=n.n(o),i=(n(67294),n(480)),r=n(24405),l=n(5366),s=n(50906),d=n(8323),u=n(42402);function c(e){window.__c={n:"StartupCouponInlineTextLink"};const t=(0,i.O7)(),n=(0,r.yK)((()=>({couponLink:{fontSize:12}})),[]);return a()(u.Z,{href:"https://notionup.typeform.com/to/qYXezfBW",external:!0,style:n.couponLink,onClick:()=>{const n=(0,d.zt)();s.sS1(t,{tier:e.tier,currentTier:n})}},void 0,a()("div",{},void 0,a()(l.FormattedMessage,{id:"startupCouponInlineLink.text",defaultMessage:"Are you a startup?"})))}},67773:(e,t,n)=>{n.d(t,{G:()=>s});var o=n(23174),a=n.n(o),i=(n(67294),n(94919)),r=n(5366),l=n(69653);function s(e){window.__c={n:"OrderSummaryAccountBalanceItem"};const t=(0,l.hr)(),{accountBalance:n}=e;return 0===n.amount?null:a()("div",{style:t.itemContainer},void 0,a()("div",{style:t.captionContainer},void 0,a()("span",{style:t.name},void 0,a()(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.balance",defaultMessage:"Balance"}))),a()("span",{style:t.credit},void 0,a()(i.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})))}},43761:(e,t,n)=>{n.d(t,{T:()=>s});var o=n(23174),a=n.n(o),i=(n(67294),n(94919)),r=n(5366),l=n(69653);function s(e){window.__c={n:"OrderSummaryDiscountItem"};const t=(0,l.hr)(),{discount:n,promo:o}=e;return a()("div",{style:t.itemContainer},void 0,a()("div",{style:t.captionContainer},void 0,a()("span",{style:t.name},void 0,a()(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo",defaultMessage:"Coupon"}))),o.duration_in_months?a()("span",{style:t.caption},void 0,a()(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo.subtitle",defaultMessage:"Valid for {durationInMonths} months",values:{durationInMonths:o.duration_in_months}})):void 0,a()("span",{style:t.credit},void 0,a()(i.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})))}},24862:(e,t,n)=>{n.d(t,{r:()=>s});var o=n(23174),a=n.n(o),i=(n(67294),n(94919)),r=n(5366),l=n(69653);function s(e){window.__c={n:"OrderSummarySubtotalItem"};const t=(0,l.hr)(),{subtotal:n}=e;return a()("div",{style:t.itemContainer},void 0,a()("div",{style:t.captionContainer},void 0,a()("span",{style:t.name},void 0,a()(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.subTotal",defaultMessage:"Subtotal"}))),a()("span",{style:t.price},void 0,a()(i.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})))}},26156:(e,t,n)=>{n.d(t,{u:()=>d});var o=n(23174),a=n.n(o),i=(n(67294),n(94919)),r=n(5366),l=n(69653),s=n(68785);function d(e){window.__c={n:"OrderSummaryTaxItem"};const t=(0,l.hr)(),{tax:n,calculatingTax:o}=e;return a()("div",{style:t.itemContainer},void 0,a()("div",{style:t.captionContainer},void 0,a()("span",{style:t.name},void 0,a()(r.FormattedMessage,{id:"subscriptionHelpers.lineItems.taxIfApplicable.title",defaultMessage:"Tax if applicable"}))),a()("span",{style:t.price},void 0,o?a()(s.Z,{}):0===n.amount?"—":a()(i.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})))}},69653:(e,t,n)=>{n.d(t,{Lp:()=>u,rF:()=>m,cv:()=>y,VT:()=>g,Et:()=>f,Zr:()=>b,hr:()=>v});var o=n(480),a=n(24405),i=n(59054),r=n(52692),l=n(81886),s=n(54642),d=n(21115);function u(e){const{subscriptionTier:t,onlyShowAddOn:n,addOnFeature:o}=e;return[c({subscriptionTier:t,onlyShowAddOn:n}),p({addOnFeature:o})].filter(Boolean)}function c(e){const{subscriptionTier:t,onlyShowAddOn:n}=e;if(!n)return(0,l.K)(t)}function p(e){const{addOnFeature:t}=e;return t}function m(e){const{prices:t,quantity:n,promo:o}=e;return t.map((e=>e.getDiscountPerBillingInterval({quantity:n,promo:o}))).reduce(((e,t)=>e.plus(t)))}function y(e){const{prices:t,quantity:n,coupon:o}=e;return t.map((e=>e.getCostPerBillingInterval({quantity:n,coupon:o}))).reduce(((e,t)=>e.plus(t)))}function g(e){const{taxAmount:t,calculatingTax:n,currencyValue:o}=e,a=t&&!n?t:0;return new r.n(o,a)}function f(e,t){const n=Math.min(0,d.Et(e));return new r.n(t,-n)}function b(e){const t=(0,o.O7)(),[n]=(0,i.r5)((async()=>{if(!e)return;const n=await s.getPromoCode(t,{code:e.code});return"failed"!==n.type?n.data.promo:void 0}),[t,e]);return"resolved"===n.status?n.value:void 0}function v(){return(0,a.yK)((e=>({caption:{fontSize:12,color:e.mediumTextColor},captionContainer:{display:"flex",flexDirection:"column"},container:{marginTop:24},itemContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",lineHeight:1,minHeight:18},name:{fontSize:12,color:e.mediumTextColor},price:{fontSize:12,color:e.regularTextColor},credit:{fontSize:12,color:"#53A83F"},totalName:{fontSize:16,color:e.regularTextColor},totalPrice:{fontSize:20,lineHeight:"20px"}})),[])}}}]);