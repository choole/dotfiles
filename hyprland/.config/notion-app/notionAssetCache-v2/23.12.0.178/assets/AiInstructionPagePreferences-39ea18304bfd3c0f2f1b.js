"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4471],{29563:(e,n,t)=>{t.r(n),t.d(n,{AiInstructionPagePreferences:()=>K});var a=t(10434),i=t.n(a),l=t(23174),o=t.n(l),c=t(96486),d=t.n(c),s=t(67294),r=t(480),h=t(81954),u=t(24405),p=t(8848),m=t(59054),g=t(53397),v=t(5366),k=t(97880),f=t(54642),w=t(25464),S=t(78030),y=t(53876),C=t(64921),x=t(31945),P=t(89074),A=(t(57658),t(82990)),I=t(18441),M=t(24457),b=t(30874),B=t(52275),W=t(73063),Z=t(78140),F=t(32163),T=t(72495),_=t(93364);const E=(0,v.defineMessages)({backButtonAriaLabel:{id:"SlackSelectWorkspaceAndChannelMenu.backButton.ariaLabel",defaultMessage:"Back to previous step"},selectSlackWorkspace:{id:"SlackSelectWorkspaceAndChannelMenu.selectSlackWorkspace",defaultMessage:"Select Slack workspace"},selectSlackChannel:{id:"SlackSelectWorkspaceAndChannelMenu.selectSlackChannel",defaultMessage:"Select Slack channel"},remove:{id:"SlackSelectWorkspaceAndChannelMenu.remove",defaultMessage:"Remove"}});function R(e){window.__c={n:"SlackSelectWorkspaceAndChannelMenu"};const{onSelect:n,onClose:t,onRemove:a,channelFilter:l,workspaceFilter:c,onNewSlackAccountAdded:d}=e,r=(0,h.VK)((()=>(0,I.P9)(b.Z.completeSlackAuthentications.state,c)),[c]),[u,m]=(0,s.useState)(1===r.length?r[0]:void 0),k=(0,M.F)({maxHeight:"50vh",width:266});return u?o()(P.ZP,{channelFilter:l,onClose:t,currentNotificationChannel:void 0,onNewSlackAccountAdded:()=>{m(void 0),null==d||d()},currentExternalAuthentication:u,onNotificationChannelSelect:e=>n({notificationChannel:e,externalAuthentication:u}),renderMenu:e=>{const n=[...e];return a&&n.push({key:"remove",render:e=>s.createElement(T.Z,i()({topBorder:!0},e)),items:[{key:"remove",render:e=>s.createElement(B.Z,i()({},e,{icon:g.Z.trash({width:16,height:16,marginRight:2}),title:s.createElement(v.FormattedMessage,E.remove),hoveredStyle:{color:p.ZP.red,fill:p.ZP.red}})),action:()=>{a(),t()}}]}),s.createElement(Z.Z,i()({},k,{header:o()(H,{onBack:()=>m(void 0)},void 0,s.createElement(v.FormattedMessage,E.selectSlackChannel))}),o()(F.Z,{type:F.i.Vertical,sections:n,initialFocus:0}))}}):o()(_.U,{onWorkspaceSelect:e=>{const n=(0,I.jc)(e);(!c||n&&c(n))&&m(e)},workspaceFilter:c,onNewSlackAccountAdded:d,renderMenu:e=>s.createElement(Z.Z,i()({},k,{header:o()(H,{},void 0,s.createElement(v.FormattedMessage,E.selectSlackWorkspace))}),o()(F.Z,{type:F.i.Vertical,sections:e,initialFocus:0}))})}function H(e){window.__c={n:"MenuHeader"};const{onBack:n,children:t}=e,a=(0,u.yK)((e=>({wrap:{display:"flex",alignItems:"center",margin:8,color:e.mediumTextColor,fontWeight:A.Z.fontWeight.medium,fontSize:A.Z.fontSize.UISmall.desktop,minHeight:22},iconButtonStyle:{marginRight:8,marginLeft:-2,height:22},iconButtonIconStyle:{width:16,height:16}})),[]),i=(0,v.useIntl)();return o()("div",{style:a.wrap},void 0,n&&o()(W.Z,{ariaLabel:i.formatMessage(E.backButtonAriaLabel),icon:g.Z.arrowLeftThick,style:a.iconButtonStyle,iconStyle:a.iconButtonIconStyle,onClick:n}),t)}const L=(0,v.defineMessages)({slackChannel:{id:"AiInstructionPagePreferences.slackChannel",defaultMessage:"Slack channel"},selectChannel:{id:"AiInstructionPagePreferences.selectChannel",defaultMessage:"Select a channel"},unknownChannel:{id:"AiInstructionPagePreferences.unknownChannel",defaultMessage:"Unknown channel"}});function K(e){const{store:n}=e;return o()("div",{style:{paddingTop:8,paddingBottom:8}},void 0,o()("div",{style:{display:"flex",flexDirection:"column"}},void 0,o()(N,{store:n})))}function N(e){window.__c={n:"SlackChannelPagePreferenceRow"};const{store:n}=e,t=(0,r.O7)(),a=(0,r.Fy)(),l=(0,u.yK)((e=>({button:{alignSelf:"stretch",display:"flex",alignItems:"center",borderRadius:3,width:"100%",padding:y.sf[S.C.Page].text},selectChannelPlaceholder:{color:e.lightTextColor}})),[]),[{value:c},k]=(0,m.r5)((()=>f.getPageAssistantPreferences(t,{pageId:n.id,spaceId:n.getSpaceId()})),[t,n]),P=(0,s.useCallback)((async e=>{const{externalAuthentication:a,notificationChannel:i}=e;await f.setPageAssistantPreferences(t,{pageId:n.id,spaceId:n.getSpaceId(),operation:{type:"set_channel",botId:a.id,channelId:i.id}}),await k()}),[t,n,k]),A=(0,h.VK)((()=>n.canEdit()),[n]),I="success"===(null==c?void 0:c.type)?c.data:void 0,M=d().first((null==I?void 0:I.associatedChannels)??[]),b=(0,s.useCallback)((e=>Boolean(null==I?void 0:I.aiEnabledSlackWorkspaceIds.includes(e))),[I]);return o()(z,{nameComp:s.createElement(s.Fragment,null,g.Z.slackLogoUnfilled({height:12,width:12,marginRight:6,fill:p.ZP.mediumIconColor}),o()("div",{},void 0,s.createElement(v.FormattedMessage,L.slackChannel))),valueComp:o()(x.ZP,{popupType:a.isMobile?x.Z4.SlideUp:x.Z4.Popup,placementToOrigin:w.u.Bottom,alignmentToOrigin:w.v.Start,renderOrigin:e=>s.createElement(C.Z,i()({style:l.button},e,{disabled:!A}),M?o()(V,{channel:M}):o()("div",{style:l.selectChannelPlaceholder},void 0,s.createElement(v.FormattedMessage,L.selectChannel))),render:e=>o()(R,{onClose:()=>e.close(),onSelect:P,channelFilter:U,workspaceFilter:b,onNewSlackAccountAdded:()=>{k()},onRemove:M?async()=>{await f.setPageAssistantPreferences(t,{pageId:n.id,spaceId:n.getSpaceId(),operation:{type:"clear_channel"}}),await k()}:void 0})})})}const U=e=>"public"===e.type;function V(e){window.__c={n:"ChannelValue"};const{channel:n}=e,t=(0,u.yK)((()=>({wrap:{display:"flex",alignItems:"center"},icon:{height:12,width:12}})),[]),a=(0,v.useIntl)();let i,l;return"unknown"===n.type?(i=g.Z.locked(t.icon),l=a.formatMessage(L.unknownChannel)):"channel"===n.type?(i=(0,P.N_)({channel:n.channel,styles:t.icon}),l=n.channel.name):(0,k.t1)(n),o()("div",{style:t.wrap},void 0,i,"Â ",l)}function z(e){window.__c={n:"PagePreferenceRow"};const{nameComp:n,valueComp:t}=e,a=(0,r.Fy)(),i=(0,u.yK)((e=>({wrap:{display:"flex",paddingBottom:4,width:"100%",fontSize:y.z6},name:{display:"flex",alignItems:"center",height:y._w,width:a.isMobile?120:160,flex:"none",color:e.mediumTextColor},value:{display:"flex",alignItems:"center",marginLeft:4,flexGrow:1}})),[a]);return o()("div",{style:i.wrap},void 0,o()("div",{style:i.name},void 0,n),o()("div",{style:i.value},void 0,t))}},24457:(e,n,t)=>{t.d(n,{U:()=>o,F:()=>c});var a=t(480),i=t(81954),l=t(87279);function o(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:l.og.ActionSheet}:{menuType:l.og.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function c(e){const n=(0,a.Fy)();return(0,i.VK)((()=>o({device:n,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[n,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}}}]);