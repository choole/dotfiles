"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[801],{63123:(e,t,i)=>{i.d(t,{V:()=>a});i(21703);var r=i(67294);function a(e){const{value:t,validateLoaded:i}=e,a=e.waitTimeInMs||500,[n,o]=(0,r.useState)(!0),l=(0,r.useRef)(),s=void 0!==t&&(!i||n&&i(t));return(0,r.useEffect)((()=>(l.current=window.setTimeout((()=>{o(!1),l.current=void 0}),a),()=>{l.current&&(clearTimeout(l.current),l.current=void 0)})),[a]),(0,r.useEffect)((()=>{s&&l.current&&(o(!1),clearTimeout(l.current),l.current=void 0)}),[s]),void 0!==t&&s?{status:"resolved",value:t}:n?{status:"pending",value:void 0}:{status:"rejected",value:void 0,error:new Error("Reached end of timeout before value became defined.")}}},76463:(e,t,i)=>{i.d(t,{lz:()=>k,P0:()=>C,Yw:()=>F,VG:()=>Z,v2:()=>T,RN:()=>P,jX:()=>R,k2:()=>B});var r=i(5366),a=i(26825),n=i(27006),o=i(45953),l=i(21202),s=i(77420),d=i(90468),u=i(19889),c=i(97880),p=i(47307),g=i(33929),m=i(67669),f=i(68216),v=i(54642),b=i(92625),_=i(76464),h=i(9953),y=i(64964),w=i(29974),x=i(12359),S=i(761);const I=(0,r.defineMessages)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function M(e,t){const{environment:i,spaceStore:r,spaceRole:a}=t,n=function(e){const{name:t,spaceStore:i,userId:r,icon:a,type:n}=e,o=Date.now(),l={name:t,created_at:o,created_by_table:u.KJ,created_by_id:r,alive:!0,icon:a,space_id:i.id,last_edited_at:o,last_edited_by_id:r,last_edited_by_table:u.KJ};switch(n){case"guest":return{...l,type:"guest",capabilities:e.capabilities,parent_table:d.bx,parent_id:i.id,integration_id:void 0};case"scim":return{...l,type:"scim",parent_table:u.KJ,parent_id:r};default:(0,c.t1)(n)}}(t),o=h.ae({environment:i,table:s.cZ,value:n,inMemoryRecordCache:i.defaultRecordCache.inMemoryRecordCache,transaction:e});return _.ep({environment:i,store:r,permissionItems:[{type:"bot_permission",role:a,bot_id:o.id}],transaction:e}),{botStore:o}}function k(e){const{environment:t}=e,{serverCommitResult:i,performResult:{botStore:r}}=x.createAndCommit({userAction:"botActions.createSpaceBot",environment:t,perform:t=>M(t,e)});return{botStore:r,transactionPromise:i}}async function C(e){const{environment:t,botId:i,onSuccess:r}=e,a=await v.deleteBot(t,{botId:i});"failed"===a.type?p.showError(a):"success"===a.type&&r&&(await S.pJ({environment:t}),r())}async function F(e){const{environment:t,table:i,id:r,type:a}=e,n=await v.getBots(t,{table:i,id:r,type:a});if("failed"===n.type)throw p.showError(n),n;return{botIds:n.data.botIds,recordMap:n.data.recordMap}}async function Z(e){const{environment:t,botId:i}=e,r=await v.getBotToken(t,{botId:i});if("failed"!==r.type)return r.data.token;p.showError(r)}function T(e){const{botValue:t,store:i,environment:r}=e,{id:n,parent_id:o,parent_table:l,capabilities:s}=t,d={type:"bot_permission",bot_id:n,parent_id:o,parent_table:l,role:(0,a.uH)(s)};x.createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:r,perform:e=>{_.ep({environment:r,store:i,permissionItems:[d],transaction:e})}})}function P(e){const{botId:t,store:i,environment:r}=e,a=i.getPermissionItems().filter((0,c.AO)((e=>(0,n.FB)(e)?{true:e}:{false:e})));for(const n of a)if(n.bot_id===t){const e={...n,role:"none"};x.createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:r,perform:t=>{_.ep({environment:r,store:i,permissionItems:[e],transaction:t})}})}}function R(e){const{currentSpaceStore:t,environment:i,pages:r,botStore:a,addPermission:n}=e;if(!t)return;const o=(0,m.zT)({botStore:a,addPermission:n});r.forEach((e=>{const r=f.t1.createChildStore(t,{table:l.iU,id:e});x.createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:i,perform:e=>{_.ep({environment:i,store:r,permissionItems:[o],transaction:e})}})}))}async function B(e){const{environment:t,spaceStore:i,spaceViewStore:r,templatePageId:a,botValue:n,pages:l}=e;if(!i)return;const d=f.t1.createChildStore(i,{table:s.cZ,id:n.id});if(a)return await async function(e){const{environment:t,spaceStore:i,spaceViewStore:r,templatePageId:a,botStore:n}=e;if(!i||!r)return;try{b.j({message:I.duplicatingTemplate});const e=await v.loadBlockSubtree(t,{block:{id:a,spaceId:i.id},shallow:!1});if("failed"===e.type)return;const l=o.PF.create(e.data.subtreeRecordMap),{performResult:s}=x.createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,perform:e=>{const o=w.cc({environment:t,recordMap:l,copyPageId:a,isPrivate:!0,spaceStore:i,spaceViewStore:r,transaction:e,allowCopyExternalObjectInstances:!1}),s=r.getPrivatePageIds();s.length>0&&h.sW({store:r,data:{private_pages:[o.id,...s]},transaction:e});const d=(0,m.zT)({botStore:n,addPermission:!0});return _.ep({environment:t,store:o,permissionItems:[d],transaction:e}),o}});return s}catch(l){y.oV({label:g.default.formatMessage(I.duplicatingTemplateError)})}finally{b.x()}}({environment:t,templatePageId:a,botStore:d,spaceStore:i,spaceViewStore:r});R({environment:t,currentSpaceStore:i,botStore:d,pages:l,addPermission:!0})}},8981:(e,t,i)=>{i.d(t,{uU:()=>T,Pk:()=>U,V2:()=>V,A1:()=>D,QO:()=>B,bO:()=>Z,JJ:()=>P});i(57658);var r=i(15070),a=i(65917),n=i(20270),o=i(2911),l=i(4615),s=i(89101),d=i(77420),u=i(49953),c=i(9844),p=i(19889),g=i(97880),m=i(44876),f=i(36054),v=i(50906),b=i(76463),_=i(47307),h=i(54642),y=i(9953);var w=i(95477),x=i(12982),S=i(43348),I=i(33929),M=i(79315),k=i(68216),C=i(5978),F=i(12359);function Z(e){const{environment:t,integrationStore:i}=e;F.createAndCommit({userAction:"developerIntegrationActions.setIntegrationSecretView",environment:t,perform:e=>{!function(e){const{integrationStore:t,transaction:i}=e,r=(0,k.Vh)(t,t.pointer,"info");y.sW({store:r,data:{has_viewed_secret:!0},transaction:i})}({integrationStore:i,transaction:e})}})}async function T(e){const{environment:t,recordStore:i}=e;function r(){v.tfS(t,{table:i.table})}i.table===d.cZ?await b.P0({environment:t,botId:i.id,onSuccess:r}):i.table===c.K2?await async function(e){const{environment:t,integrationId:i,onSuccess:r}=e,a=await h.deleteIntegration(t,{integrationId:i});"failed"===a.type?_.showError(a):"success"===a.type&&r&&r()}({environment:t,integrationId:i.id,onSuccess:r}):(0,g.t1)(i)}function P(e){const{environment:t,formState:i,formData:a}=e;return"create-bot"===i.type?function(e){const{environment:t,formData:i}=e,{currentUserRootStore:r}=M.default.state;if(!r)return;const{botStore:a}=b.lz({environment:t,name:i.name,icon:i.icon,userId:r.id,spaceStore:i.space,spaceRole:"none",type:"guest",capabilities:i.capabilities||{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0}});return V(t,{id:a.id,table:d.cZ,spaceId:i.space.id}),v.PR(t,{table:d.cZ}),{id:a.id,table:d.cZ,spaceId:i.space.id}}({environment:t,formData:a}):"update-bot"===i.type?function(e){const{environment:t,botPointer:i,formData:r}=e,{currentUserRootStore:a}=M.default.state;if(!a)return;const n=(0,k.Kv)(a,i),o="developerIntegrationActions.updateBot";return F.createAndCommit({userAction:o,environment:t,perform:e=>{y.sW({store:n,data:{name:r.name,icon:r.icon,parent_id:r.space.id,last_edited_by_id:a.id,last_edited_by_table:p.KJ,last_edited_at:Date.now(),capabilities:r.capabilities},transaction:e}),e.postSubmitCallbacks=[t=>{t&&E(t,o,e.spaceId)}]}}),v.FBk(t,{table:d.cZ}),i}({environment:t,botPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table,spaceId:i.startingRecord.value.space_id},formData:a}):"create-guest-integration"===i.type?function(e){const{environment:t,botPointer:i,formData:a}=e,{currentUserRootStore:n}=M.default.state;if(!n)return;const o=(0,k.Kv)(n,i),l=o.getValue(),s=l&&(0,r.hA)(l)?l.capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0},d={name:a.name,tagline:a.tagline,icon:a.icon,email:a.email,website_url:a.website_url,privacy_policy_url:a.privacy_policy_url,terms_of_use_url:a.terms_of_use_url,template_page_id:a.template_page_id,redirect_uris:a.redirect_uris,capabilities:s,userRootStore:n,developer_name:a.developer_name},u="developerIntegrationActions.integrationId",{performResult:g}=F.createAndCommit({userAction:u,environment:t,perform:e=>{const i=function(e,t,i){const{name:r,tagline:a,icon:n,email:o,website_url:l,privacy_policy_url:s,terms_of_use_url:d,template_page_id:u,redirect_uris:g,capabilities:m,userRootStore:f,developer_name:v}=i,b=Date.now(),_=f.id,h={name:r,parent_table:p.KJ,parent_id:_,created_at:b,created_by_id:_,created_by_table:p.KJ,updated_at:b,updated_by_id:_,updated_by_table:p.KJ,redirect_uris:g,type:"guest",status:"unpublished",info:{tagline:a,icon:n,email:o,website_url:l,privacy_policy_url:s,terms_of_use_url:d,template_page_id:u,developer_name:v},capabilities:m,alive:!0};return y.ae({environment:e,table:c.K2,value:h,transaction:t,inMemoryRecordCache:f.inMemoryRecordCache})}(t,e,d).id;return y.sW({store:o,data:{integration_id:i,parent_table:p.KJ,parent_id:n.id},transaction:e}),e.postSubmitCallbacks=[t=>{t&&E(t,u,e.spaceId)}],i}}),m={id:g,table:c.K2};return V(t,m),v.PR(t,{table:c.K2,template_id:a.template_page_id}),m}({environment:t,botPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table,spaceId:i.startingRecord.value.space_id},formData:a}):"update-guest-integration"===i.type?R({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:a}):"create-third-party-external-integration"===i.type?function(e){const{environment:t,formData:i,integrationPointer:r}=e,{currentUserRootStore:a}=M.default.state,n=r.id;if(!a)return;const o=L(i);if(!o)return;const l=o.oauth_authorize_url;R({environment:t,integrationPointer:r,formData:i,hasLinkPreviewCapabilities:!0,redirect_uris:[l]});const s="developerIntegrationActions.createThirdPartyExternalIntegration";return F.createAndCommit({userAction:s,environment:t,perform:e=>{!function(e,t,i){const{integrationId:r,userRootStore:a,config:{oauth_authorize_url:n,oauth_token_url:o,client_id:l,client_secret:s,scopes:d,deletion_url:c}}=i,g={id:r,oauth_authorize_url:n,oauth_token_url:o,client_id:l,client_secret:s,scopes:d,parent_id:a.id,parent_table:p.KJ,deletion_url:c};y.ae({environment:e,table:u.r9,value:g,transaction:t,inMemoryRecordCache:a.inMemoryRecordCache})}(t,e,{integrationId:n,userRootStore:a,config:o}),e.postSubmitCallbacks=[t=>{t&&E(t,s,e.spaceId)}]}}),V(t,r),v.PR(t,{table:c.K2}),r}({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:a}):"update-third-party-external-integration"===i.type?function(e){const{environment:t,integrationPointer:i,formData:r}=e,{currentUserRootStore:a}=M.default.state;if(!a)return;const n=L(r);if(!n)return;const o=(0,k.Kv)(a,{table:u.r9,id:i.id}),l={oauth_authorize_url:n.oauth_authorize_url,oauth_token_url:n.oauth_token_url,client_id:n.client_id,client_secret:n.client_secret,scopes:n.scopes||null,deletion_url:n.deletion_url||null},s=n.oauth_authorize_url;R({environment:t,integrationPointer:i,formData:r,hasLinkPreviewCapabilities:!0,redirect_uris:[s]});const d="developerIntegrationActions.updateThirdPartyExternalIntegration";return F.createAndCommit({userAction:d,environment:t,perform:e=>{y.sW({store:o,data:l,transaction:e}),e.postSubmitCallbacks=[t=>{t&&E(t,d,e.spaceId)}]}}),i}({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:a}):"update-first-party-external-integration"===i.type?R({environment:t,integrationPointer:{id:i.startingRecord.value.id,table:i.startingRecord.table},formData:a,hasLinkPreviewCapabilities:!0}):(0,g.t1)(i)}function R(e){const{environment:t,integrationPointer:i,formData:r,hasLinkPreviewCapabilities:a,redirect_uris:o}=e,{currentUserRootStore:l}=M.default.state;if(!l)return;const s=(0,k.Kv)(l,i),d=s.getValue(),u=i.id,p=null==d?void 0:d.info.template_page_id,f=a?{...r.capabilities,link_preview:!0}:r.capabilities,b=a?"external":"guest",_={name:r.name,redirect_uris:o??r.redirect_uris,capabilities:f,type:b},h=(0,k.Vh)(s,s.pointer,"info"),w=function(e){const{hasLinkPreviewCapabilities:t,integrationId:i,formData:r,currentIntegrationInfo:a}=e;if(t)return function(e){var t;const{integrationId:i,formData:r,currentIntegrationInfo:a}=e,o=(null==a||null===(t=a.original_url_patterns)||void 0===t?void 0:t.filter((e=>{var t;return!0===(null===(t=e.additional_types)||void 0===t?void 0:t.collection)})))??[],l=r.url_matching_and_placeholder.map((e=>{const t=[];for(const i of e.attributes){const e=(0,m.GY)(i);if(!(0,n.nj)(e))return;t.push(e)}return{name:(0,S.X)({patternName:e.name,integrationId:i}),regex:e.regex,attributes:t,sample_urls:e.sampleUrls}})).filter(g.$K),s=r.domain.domainVerifications.filter((e=>"unverified"===e.type)).map((e=>e.domain));return{template_page_id:r.template_page_id,tagline:r.tagline,icon:r.icon,email:r.email,website_url:r.website_url,privacy_policy_url:r.privacy_policy_url,terms_of_use_url:r.terms_of_use_url,developer_name:r.developer_name,unfurl_url:r.unfurl_url,development_url_domains:s,original_url_patterns:[...l,...o],dark_icon:(null==a?void 0:a.dark_icon)??r.icon,accent_color:(null==a?void 0:a.accent_color)??{r:36,g:41,b:47},accent_icon:(null==a?void 0:a.accent_icon)??r.icon}}({integrationId:i,formData:r,currentIntegrationInfo:a});return{tagline:r.tagline,icon:r.icon,email:r.email,website_url:r.website_url,privacy_policy_url:r.privacy_policy_url,terms_of_use_url:r.terms_of_use_url,template_page_id:r.template_page_id,developer_name:r.developer_name}}({hasLinkPreviewCapabilities:a,integrationId:u,formData:r,currentIntegrationInfo:h.getValue()}),x="developerIntegrationActions.updateIntegration";F.createAndCommit({userAction:x,environment:t,perform:e=>{y.sW({store:s,data:_,transaction:e}),y.sW({store:h,data:w,transaction:e}),e.postSubmitCallbacks=[t=>{t&&E(t,x,e.spaceId)}]}});const I=r.template_page_id??void 0,C=p!==I;return v.FBk(t,{table:c.K2,...C&&{template_id_before:p},...C&&{template_id_after:I}}),i}function B(e){const{environment:t,integrationId:i,allVerifiedDomains:r,domainToRemove:a}=e,{currentUserRootStore:n}=M.default.state;if(!n)return;const o=(0,k.Kv)(n,{table:c.K2,id:i}),l=(0,k.Vh)(o,o.pointer,"info"),s="developerIntegrationActions.removeVerifiedDomain";F.createAndCommit({userAction:s,environment:t,perform:e=>{y.sW({store:l,data:{original_url_domains:r.filter((e=>e!==a))},transaction:e}),e.postSubmitCallbacks=[t=>{t&&E(t,s,e.spaceId)}]}}),v.FBk(t,{table:c.K2})}function D(e){C.navigate({environment:e,url:s._j.myIntegrations})}function V(e,t){const i={[d.cZ]:"internal",[c.K2]:"public"}[t.table],r=(0,l.cj)(t.id);C.navigate({environment:e,url:`${s._j.myIntegrations}/${i}/${r}`})}function U(e){const t=(0,l.cj)(e.id);return`${w.default.domainBaseUrl}${s._j.myIntegrations}/public/${t}/lab`}function L(e){const t={oauth_authorize_url:e.external_oauth_authorize_url,oauth_token_url:e.external_oauth_token_url,client_id:e.external_client_id,client_secret:e.external_client_secret,scopes:e.external_oauth_scopes,deletion_url:e.external_deletion_url};return(0,f.Gu)(u.wG,t)?void 0:t}function E(e,t,i){_.showErrorMessage(I.default.formatMessage(x.sY.transactionGenericError)),a.log({level:"error",from:"developerIntegrationActions",type:"createAndCommit",error:(0,o.Ui)(e),data:{userAction:t,spaceId:i}})}},56305:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});var r=i(23174),a=i.n(r),n=(i(67294),i(81954)),o=i(5366),l=i(43250),s=i(12982),d=i(22230),u=i(79500),c=i(43113),p=i(22131);function g(e){window.__c={n:"DeveloperIntegrationCreateV2"};const{onClose:t,onSuccess:i}=e,r=(0,n.qz)(void 0,d.Z);return a()(p.Z,{className:l.Zp2,title:a()(o.FormattedMessage,{id:"developerIntegrationsCreateInternal.title.label",defaultMessage:"Create a new integration"}),subtitle:a()(o.FormattedMessage,{id:"developerIntegrationsCreateInternal.subtitle.label",defaultMessage:"We’ll walk you through how to set up a new integration"}),onNavigateBack:t,sideContent:a()(u.T,{supportedPages:(0,s.H)("create-bot")})},void 0,a()(c.Z,{onCreateNew:i,integrationFormStore:r,currentPage:"basic"}))}},79500:(e,t,i)=>{i.d(t,{T:()=>c,e:()=>m});var r=i(23174),a=i.n(r),n=i(67294),o=i(81954),l=i(24405),s=i(82990),d=i(12982),u=i(89728);function c(e){window.__c={n:"DeveloperIntegrationFormSectionSidebar"};const{supportedPages:t,selectedPage:i,setSelectedPage:r,integrationFormStore:n}=e,l=(0,o.VK)((()=>null==n?void 0:n.getState().type),[n]),s=i||t[0],u=e=>{if(!(0,d.mP)(e))return;const t=(0,d._R)(l);s!==e&&t&&(null==n||n.updateRecordTypeOnSwitch(t)),r&&r(e)};return a()("div",{style:b},void 0,t.map((e=>{const t=function(e,t,i){if(e!==t||!i)return!1;const r="linkPreview"===e&&"update-guest-integration"!==i;return"distribution"===e&&"update-bot"!==i||r}(s,e,l);return a()("div",{},e,a()(g,{highlightedSelection:s,currentSelection:{key:d.vb[e].key,title:d.vb[e].title},handleOnClick:u}),t&&a()(p,{currentPage:e,formStateType:l}))})))}function p(e){window.__c={n:"DeveloperIntegrationFormSidebarSection"};const{currentPage:t,formStateType:i}=e,r=d.vb[t].subsections,[o,s]=n.useState(),u=o||r[0].key,c=(0,l.yK)((()=>({sectionContainer:{marginLeft:20}})),[]),p=e=>{if((0,d.mP)(e))return;const t=document.getElementById((0,d.bK)(e));t&&(t.scrollIntoView(),s(e))};return a()("div",{style:c.sectionContainer},void 0,r.map((e=>a()(g,{currentSelection:e,highlightedSelection:u,handleOnClick:p,formStateType:i},e.key))))}function g(e){window.__c={n:"DeveloperIntegrationFormSidebarButton"};const{currentSelection:{key:t,title:i},highlightedSelection:r,handleOnClick:n,formStateType:o}=e,d="create-third-party-external-integration"===o&&"unfurling"===t,c=(0,l.yK)((e=>({sidebarButton:{...v,color:e.sidebarTextColor,...r===t&&{color:e.regularTextColor,fontWeight:s.Z.fontWeight.medium}}})),[t,r]);return a()(u.Z,{style:c.sidebarButton,onClick:()=>n(t),disabled:d,disabledFeedback:!0},void 0,i)}function m(e){window.__c={n:"DeveloperIntegrationFormSectionHeader"};const{section:t}=e,{title:i,subtitle:r,key:n}=t,o=(0,l.yK)((e=>({titleStyle:{...f},subtitleStyle:{fontWeight:s.Z.fontWeight.regular,fontSize:15,color:e.lightTextColor}})),[]);return a()("div",{style:o.titleStyle,id:(0,d.bK)(n)},void 0,i,r&&a()("div",{style:o.subtitleStyle},void 0,r))}const f={fontSize:30,marginTop:24,marginBottom:24,fontWeight:s.Z.fontWeight.bold},v={fontSize:15,height:28,marginTop:4,width:"100%"},b={display:"grid",gridTemplate:"none | auto | auto",marginTop:24,position:"sticky",top:16}},43113:(e,t,i)=>{i.d(t,{Z:()=>lt});var r=i(23174),a=i.n(r),n=i(96486),o=i(67294),l=i(480),s=i(81954),d=i(21202),u=i(97880),c=i(5366),p=i(8981),g=i(47307),m=i(12982),f=i(33665),v=i(79315),b=i(68216),_=i(33929),h=i(10434),y=i.n(h),w=i(13991),x=i(24405),S=i(8848),I=i(84619),M=i(53397),k=i(74446),C=i(45953),F=i(89101),Z=i(44312),T=i(90468),P=i(82990),R=i(54642),B=i(43132),D=i(65270),V=i(38755),U=i(52507),L=i(64921),E=i(52275),A=i(12508),N=i(74194),z=i(32163),O=i(89728),K=i(72495),q=i(58032),j=i(87279),W=i(78140),Y=i(44532);function H(e){const{value:t}=e,[i,r]=o.useState(!1),n=()=>r(!1);return a()(Y.GI,{popupType:Y.GI.PopupType.Popup,alignmentToOrigin:Y.GI.Alignment.Start,placementToOrigin:Y.GI.Placement.Bottom,originGap:2,sameWidthAsOrigin:!0,open:i,onDismiss:n,render:()=>o.createElement(G,y()({},e,{value:t,onClose:n})),origin:o.createElement($,y()({},e,{value:t,onClick:()=>r(!0)}))})}function $(e){window.__c={n:"ClickableButton"};const{onClick:t,value:i,renderMenuItem:r}=e,a=(0,x.yK)((e=>({dropdown:{background:e.whiteButtonBackground,border:`1px solid ${e.outlineButtonBorder}`,borderRadius:3,height:32},expandIcon:{height:12,width:12,fill:e.lightIconColor}})),[]);return o.createElement(o.Fragment,null,r({item:i,focused:!1,onClick:t,style:a.dropdown,right:M.Z.expand(a.expandIcon)}))}function G(e){const{keyName:t,items:i,value:r,setValue:n,renderMenuItem:l,onClose:s}=e;let d=0;const u=i.map(((e,t)=>(e.id===(null==r?void 0:r.id)&&(d=t),{key:e.id,action:()=>{n(e),s()},render:t=>l({...t,item:e})})));return a()(W.Z,{menuType:j.og.Popup},void 0,a()(z.Z,{type:z.i.Vertical,initialFocus:d,sections:[{key:`form-input-section-${t}`,items:u,render:e=>o.createElement(K.Z,e)}]}))}var J=i(53471),Q=i(71669),X=i(68785),ee=i(63296),te=i(81865);function ie(e){window.__c={n:"DeveloperIntegrationFormIconUpload"};const{value:t,setValue:i,setError:r}=e,n=(0,l.O7)(),[s,d]=o.useState(!1);return o.createElement(o.Fragment,null,t&&a()(te.Z,{url:t,isAuthenticated:!1,stripGoogleIconQuery:!0,width:90,render:(e,t)=>a()("div",{style:{width:90,height:90}},void 0,a()(Q.Z,{src:t,style:{width:90,height:90,objectFit:"cover",borderRadius:3}}))}),a()(ee.Z,{isLarge:!0,style:{width:"fit-content",backgroundColor:"white"},onClick:()=>{J.cR({environment:n,onStart:()=>d(!0),bucket:"public",onError:e=>{r(e.message),d(!1)},onComplete:e=>{i(e[0]),d(!1)},accept:"image/*"})}},void 0,a()(c.FormattedMessage,{id:"formInputIcon.uploadButton.label",defaultMessage:"Upload image"}),s&&a()(X.Z,{style:{marginLeft:4}})))}function re(e){window.__c={n:"DeveloperIntegrationFormLabel"};const{label:t,subtitle:i,caption:r,error:n,children:o,field:l,formStateType:s}=e,d=m.aP[l].requiredBy[s],u=(0,x.yK)((()=>({wrapper:{display:"flex"},label:{fontSize:15,fontWeight:P.Z.fontWeight.medium,color:S.ZP.frontTextMedium},required:{color:S.ZP.red,marginLeft:2},subtitle:{fontSize:15,color:S.ZP.frontTextLight},caption:{fontSize:15,color:S.ZP.frontTextLight},error:{marginTop:4,fontSize:15,color:S.ZP.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:32}})),[]);return a()("div",{style:u.field},void 0,a()("header",{style:u.wrapper},void 0,a()("div",{style:u.label},void 0,t),d&&a()("div",{style:u.required},void 0,"*")),r&&a()("div",{style:u.caption},void 0,r),o,i&&a()("div",{style:u.subtitle},void 0,i),n&&a()("div",{style:u.error},void 0,n))}var ae=i(91996),ne=i(38381),oe=i(74181),le=i(95477),se=i(85567),de=i(719);function ue(e){const{currentValue:t,setNewValue:i,typeaheadTitle:r,style:n}=e,l=t||[],[s,d]=o.useState(""),u=()=>d("");return a()(Y.ZP,{popupType:Y.ZP.PopupType.Popup,sameWidthAsOrigin:!0,open:s.length>0,onDismiss:u,origin:a()(de.Z,{style:{background:S.ZP.white,minHeight:32,fontSize:15},placeholder:"",value:s,onChange:e=>d(e.target.value),tokens:l.map(((e,t)=>a()(se.Z,{format:I.l.Medium,showRemoveButton:!0,isSingle:!1,shouldWrap:!0,value:e,style:n,onClickRemove:()=>{i(l.filter((t=>t!==e)))}},`${e}-${t}`))),onRemoveLastToken:()=>{l.length>0&&i(l.slice(0,l.length-1))}}),render:()=>{const e=s.trim(),t=(0,oe.ue)(le.default.domainBaseUrl,e).map((e=>({key:e,render:t=>o.createElement(E.Z,y()({},t,{title:e})),action:()=>{u(),i([...l,e])}})));return a()(W.Z,{menuType:j.og.Popup},void 0,a()(z.Z,{type:z.i.Vertical,initialFocus:0,sections:[{key:"valid-url-suggestion",items:t,render:e=>o.createElement(K.Z,y()({},e,{title:r}))}]}))}})}function ce(e){const{currentRule:t,onUpdate:i,shouldShowDelete:r,onDelete:n,onError:l}=e,{name:s,regex:d,attributes:u,sampleUrls:p}=t,[g,m]=o.useState(JSON.stringify(u,null,2));return a()("div",{style:{marginBottom:24}},void 0,a()("label",{},void 0,a()("div",{style:{fontSize:15,fontWeight:P.Z.fontWeight.regular,color:S.ZP.frontTextMedium}},void 0,a()(c.FormattedMessage,{id:"developerIntegrationForm.regexRule.name.label",defaultMessage:"Rule Name"})),a()(N.Z,{inputClassName:s,style:{background:S.ZP.white,height:32,fontSize:15},value:s,onChange:e=>{i({...t,name:e.target.value})},right:r&&a()(pe,{onDelete:n})})),a()("label",{},void 0,a()("div",{style:{fontSize:15,fontWeight:P.Z.fontWeight.regular,color:S.ZP.frontTextMedium}},void 0,a()(c.FormattedMessage,{id:"developerIntegrationForm.sampleUrls.label",defaultMessage:"Sample URLs"})),a()(ue,{currentValue:p,setNewValue:e=>{i({...t,sampleUrls:e})},style:{color:S.ZP.frontTextMedium},setErrorValue:e=>l(e),typeaheadTitle:a()(c.FormattedMessage,{id:"developerIntegrationsForm.urlsInput.typePrompt",defaultMessage:"Type or paste a url…"})})),a()("label",{},void 0,a()("div",{style:{fontSize:15,fontWeight:P.Z.fontWeight.regular,color:S.ZP.frontTextMedium}},void 0,a()(c.FormattedMessage,{id:"developerIntegrationForm.regexRule.pattern.label",defaultMessage:"Pattern"})),a()(N.Z,{style:{background:S.ZP.white,fontSize:15},autosize:!0,textarea:!0,value:d,onChange:e=>{i({...t,regex:e.target.value})}})),a()("label",{},void 0,a()("div",{style:{fontSize:15,fontWeight:P.Z.fontWeight.regular,color:S.ZP.frontTextMedium}},void 0,a()(c.FormattedMessage,{id:"developerIntegrationForm.regexRule.attributes.label",defaultMessage:"Attributes"})),a()(N.Z,{format:N.B.ExtraLarge,style:{backgroundColor:S.ZP.white},inputStyle:{fontSize:14,lineHeight:"18px",height:200,fontFamily:P.Z.baseFontFamily.mono,padding:4},textarea:!0,value:g,onChange:e=>{const r=e.target.value;m(r);const n=(0,ae.Jv)(r);void 0===n?l(a()(c.FormattedMessage,{id:"developerIntegrationForm.jsonEditor.error",defaultMessage:"{value} attributes has invalid JSON.",values:{value:s}})):i({...t,attributes:n})}})))}function pe(e){let{onDelete:t}=e;return a()(L.Z,{style:{padding:4,borderRadius:3},onClick:()=>{ne.Z.setState({open:!0,isDestructive:!1,isWarning:!0,title:a()(c.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.title",defaultMessage:"Are you sure you want to delete this regex pattern rule?"}),message:a()(c.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.message",defaultMessage:"Changes will not be saved until you submit the form."}),confirmationMessage:a()(c.FormattedMessage,{id:"developerIntegrationFormRegexRule.deletionModal.confirm",defaultMessage:"Delete"}),onConfirm:()=>{t()}})}},void 0,M.Z.trash({width:15,height:15}))}var ge=i(79500),me=i(31278),fe=i(76798);const ve=o.forwardRef(((e,t)=>{window.__c={n:"DeveloperIntegrationFormSpaceDropdownItem"};const{item:i,...r}=e,n=(0,l.O7)(),d=(0,s.VK)((()=>i&&(0,V.Wd)(n,i)),[n,i]),u=(0,s.VK)((()=>i&&(0,V.rn)(n,i)),[n,i]);return o.createElement(E.Z,y()({},r,{ref:t,title:i&&a()(fe.Z,{store:i}),icon:i&&a()(me.Z,{disabled:!0,icon:d,title:u,isEmptyPage:!1,size:19})}))}));var be=i(77420),_e=i(50906),he=i(33954);function ye(e){const{secret:t,secretName:i,onCopy:r,actionButtons:n}=e;return a()(N.Z,{type:t?"text":"password",disabled:!0,style:{fontFamily:P.Z.getCompositeFontFamily(w.SP).mono,color:S.ZP.frontTextMedium},inputStyle:t?{cursor:"text"}:void 0,value:t||" ".repeat(40),right:a()("div",{style:{display:"flex"}},void 0,a()("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),t?a()(we,{onCopy:r,secret:t,secretName:i}):n)})}function we(e){window.__c={n:"CopySecretButton"};const{secretName:t,secret:i,onCopy:r}=e,n=(0,l.O7)(),[s,d]=o.useState(!1),u=o.useCallback((()=>{B.RD({environment:n,stringValue:i,copiedMessage:B.tq.copiedToClipboard}),r()}),[n,r,i]),p=a()(c.FormattedMessage,s?{defaultMessage:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",values:{secretName:t}}:{defaultMessage:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",values:{secretName:t}});return a()(q.Z,{placement:q.Z.Placement.Top,renderTooltip:()=>p,render:e=>o.createElement(L.Z,y()({onClick:e=>{e.preventDefault(),d(!0),setTimeout((()=>{d(!1)}),1500),u()}},e,{style:{...xe.button,color:s?S.ZP.mediumTextColor:S.ZP.blue}}),a()(c.FormattedMessage,s?{id:"formSecretShow.copied.label",defaultMessage:"Copied"}:{id:"formSecretShow.copySecret.label",defaultMessage:"Copy"}))})}const xe={button:{display:"inline-flex",alignItems:"center",fontFamily:P.Z.getCompositeFontFamily(w.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:S.ZP.blue}};function Se(e){window.__c={n:"DeveloperIntegrationShowBotToken"};const{onError:t,bot:i}=e,r=(0,l.O7)(),n=(0,c.useIntl)(),s=i.id,[d,u]=o.useState(),p=o.useCallback((async()=>{const e=await R.getBotToken(r,{botId:s});"success"===e.type?(_e.Cm3(r,{table:be.cZ}),u(e.data.token)):t((0,he.wf)(n,e)??"Error fetching bot token.")}),[r,s,t,n]),g=o.useCallback((async()=>{const e=await R.revokeBotToken(r,{botId:s});return"success"===e.type?{success:!0}:(t((0,he.wf)(n,e)??"Error revoking bot token."),{success:!1})}),[r,s,t,n]);return a()(ye,{secret:d,secretName:a()(c.FormattedMessage,{id:"developerIntegrationForm.botToken.secretName",defaultMessage:"token"}),onCopy:()=>{_e.IVn(r,{table:be.cZ,from:"developer-integrations-view"})},actionButtons:o.createElement(o.Fragment,null,a()(L.Z,{onClick:()=>{!function(e){const{onConfirm:t}=e;ne.Z.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:t,title:a()(c.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.title",defaultMessage:"Refresh token?"}),message:a()(c.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.message",defaultMessage:"Refreshing will revoke the existing token and generate a new one. Make sure you’re storing the token securely."}),confirmationMessage:a()(c.FormattedMessage,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.confirm",defaultMessage:"Continue"})})}({onConfirm:async()=>{(await g()).success&&await p()}})},style:Ie.button},void 0,a()(c.FormattedMessage,{id:"developerIntegrationShotBotToken.refreshSecret.label",defaultMessage:"Refresh"})),a()(L.Z,{onClick:()=>{p()},style:Ie.button},void 0,a()(c.FormattedMessage,{id:"developerIntegrationShotBotToken.showSecret.label",defaultMessage:"Show"})))})}const Ie={button:{display:"inline-flex",alignItems:"center",fontFamily:P.Z.getCompositeFontFamily(w.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:S.ZP.blue}};var Me=i(9844);function ke(e){window.__c={n:"DeveloperIntegrationShowClientSecret"};const{onError:t,integration:i}=e,r=(0,l.O7)(),n=(0,c.useIntl)(),[d,u]=o.useState(),g=i.id,m=i.info.has_viewed_secret,f=(0,s.VK)((()=>v.default.state.currentUserStore),[]),_=f?(0,b.Kv)(f,{id:g,table:Me.K2}):void 0,h=o.useCallback((async()=>{if(!_)return;const e=await R.getIntegrationSecret(r,{integrationId:g});"success"===e.type?(p.bO({environment:r,integrationStore:_}),_e.Cm3(r,{table:Me.K2}),u(e.data.secret)):t((0,he.wf)(n,e)??"Error fetching client secret.")}),[r,_,g,t,n]);return a()(ye,{secret:d,secretName:a()(c.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.secretName",defaultMessage:"secret"}),onCopy:()=>{_e.IVn(r,{table:Me.K2,from:"developer-integrations-view"})},actionButtons:a()(Ce,{onClick:()=>{!function(e){const{hasSecretBeenViewed:t,onConfirm:i}=e,r=a()(c.FormattedMessage,t?{id:"developerIntegrationForm.clientSecret.confirmationModal.refreshTitle",defaultMessage:"Refresh OAuth client secret?"}:{id:"developerIntegrationForm.clientSecret.confirmationModal.showTitle",defaultMessage:"Show OAuth client secret?"}),n=a()(c.FormattedMessage,t?{id:"developerIntegrationForm.clientSecret.confirmationModal.alreadyViewedMessage",defaultMessage:"You’ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure you’re storing the secret securely."}:{id:"developerIntegrationForm.clientSecret.confirmationModal.displayOnceMessage",defaultMessage:"This client secret will only be displayed once and cannot be viewed again. Make sure you’re storing the secret securely."});ne.Z.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:i,title:r,message:n,confirmationMessage:a()(c.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.confirm",defaultMessage:"Continue"})})}({hasSecretBeenViewed:m,onConfirm:()=>{h()}})},hasSecretBeenViewed:m})})}function Ce(e){const{onClick:t,hasSecretBeenViewed:i}=e;return a()(L.Z,{onClick:t,style:Fe.button},void 0,a()(c.FormattedMessage,i?{id:"formSecretShow.refreshSecret.label",defaultMessage:"Refresh"}:{id:"formSecretShow.showSecret.label",defaultMessage:"Show"}))}const Fe={button:{display:"inline-flex",alignItems:"center",fontFamily:P.Z.getCompositeFontFamily(w.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:S.ZP.blue}};var Ze=i(47478),Te=i(42402),Pe=i(46978),Re=i(5478);function Be(e){window.__c={n:"DeveloperIntegrationFormPageView"};const{integrationFormStore:t,formData:i,setFormData:r,pageSections:n,fieldDetails:l}=e,d=(0,s.VK)((()=>t.getState()),[t]),{type:u}=d,c=n.map((e=>({...e,fields:e.fields.filter((e=>{const{supportedBy:t}=m.aP[e];return t[u]}))})));return o.createElement(o.Fragment,null,c.map((e=>o.createElement(o.Fragment,null,e.fields.length>0&&a()("div",{style:{marginBottom:24}},e.key,a()(ge.e,{section:e})),e.fields.map((e=>a()(De,{formData:i,setFormData:r,formStoreState:d,formFieldDetail:l,field:e},e)))))))}function De(e){window.__c={n:"DeveloperIntegrationsFormFieldView"};const{formData:t,setFormData:i,formStoreState:r,formFieldDetail:n,field:o}=e,l=(0,s.VK)((()=>v.default.state.currentUserRootStore),[]),d=(0,s.VK)((()=>l?l.getAdminSpaceStores():[]),[l]),{type:u}=r,{label:c,subtitle:p,caption:g}=n[o]??{},m=Ve[o];return m?a()(re,{label:c,subtitle:p,caption:g,error:t[o].error,field:o,formStateType:u},o,a()(m,{autoFocus:Boolean("create-bot"===u&&"name"===o),spaces:d,currentValue:t[o].value,setErrorValue:e=>{i({field:o,error:e})},setNewValue:e=>{i({value:e,field:o})},formStoreState:r})):null}const Ve={type:function(){return a()(N.Z,{style:{color:S.ZP.frontTextLight},value:"Internal",disabled:!0})},name:Ue,icon:function(e){const{currentValue:t,setNewValue:i,setErrorValue:r}=e;return a()(ie,{value:t,setValue:i,setError:r})},space:function(e){window.__c={n:"SpacePicker"};const{spaces:t,currentValue:i,setNewValue:r,setErrorValue:n}=e,[l,s]=o.useState(!1);return(0,o.useEffect)((()=>{l||0!==t.length||(s(!0),n(a()(c.FormattedMessage,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",defaultMessage:"You are not an owner of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your workspace owner to update your access.",values:{linktonotion:e=>a()(Te.Z,{href:(0,f.UY)("guides.joinOrCreateWorkspace")},void 0,e)}})))}),[t,n,l]),a()(H,{keyName:"space",items:t,value:i,setValue:r,renderMenuItem:e=>o.createElement(ve,e)})},token:function(e){window.__c={n:"ShowBotToken"};const t=(0,l.O7)(),{currentValue:i,setErrorValue:r}=e,n=(0,s.VK)((()=>v.default.state.currentUserStore),[]),d=(0,s.VK)((()=>{if(!n||!i)return;if(i.value.parent_table!==T.bx)return;const e=b.H2.createChildStore(n,{id:i.value.parent_id,table:i.value.parent_table});return(0,V.rn)(t,e)}),[n,i,t]);if(!i)return null;return o.createElement(o.Fragment,null,a()(Se,{bot:i.value,onError:r}),d&&a()("div",{style:{fontSize:15,color:S.ZP.frontTextLight}},void 0,a()(c.FormattedMessage,{id:"developerIntegrationForm.botToken.subtitle",defaultMessage:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{spaceName:d,bold:e=>a()("b",{},void 0,e),developertermslink:e=>a()(Te.Z,{href:F._j.myIntegrations},void 0,e)}})))},client_id:function(e){window.__c={n:"ShowOAuthClientId"};const{currentValue:t}=e,i=(0,l.O7)(),[r,n]=o.useState(!1),s=Ne(r);if(!t)return null;const d=a()(c.FormattedMessage,r?{defaultMessage:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}:{defaultMessage:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return a()(N.Z,{type:"text",disabled:!0,style:s.authInput,value:t.value.id,right:a()("div",{style:{display:"flex"}},void 0,a()("div",{style:s.authInputRight}),a()(q.Z,{placement:q.Z.Placement.Top,renderTooltip:()=>d,render:e=>o.createElement(L.Z,y()({onClick:e=>{e.preventDefault(),n(!0),setTimeout((()=>{n(!1)}),1500),B.RD({environment:i,stringValue:t.value.id,copiedMessage:B.tq.copiedLinkToClipboard})}},e,{style:s.authButton}),a()(c.FormattedMessage,r?{id:"developerIntegrationsForm.copiedId.label",defaultMessage:"Copied"}:{id:"developerIntegrationsForm.copyId.label",defaultMessage:"Copy"}))}))})},client_secret:function(e){const{currentValue:t,setErrorValue:i}=e;if(!t)return null;return a()(ke,{integration:t.value,onError:i})},authorization_url:function(e){window.__c={n:"ShowAuthorizationURL"};const{currentValue:t}=e,i=(0,l.O7)(),[r,n]=o.useState(!1),s=Ne(r);if(!t)return null;const d=a()(c.FormattedMessage,r?{defaultMessage:"URL copied",id:"developerIntegrationsForm.authUrlCopied.tooltip"}:{defaultMessage:"Copy authorization URL",id:"developerIntegrationsForm.authUrlCopy.tooltip"});return a()(N.Z,{type:"text",disabled:!0,style:s.authInput,value:t,right:a()("div",{style:{display:"flex"}},void 0,a()("div",{style:s.authInputRight}),a()(q.Z,{placement:q.Z.Placement.Top,renderTooltip:()=>d,render:e=>o.createElement(L.Z,y()({onClick:e=>{e.preventDefault(),n(!0),setTimeout((()=>{n(!1)}),1500),B.RD({environment:i,stringValue:t,copiedMessage:B.tq.copiedLinkToClipboard})}},e,{style:s.authButton}),a()(c.FormattedMessage,r?{id:"developerIntegrationsForm.copiedAuthUrl.label",defaultMessage:"Copied"}:{id:"developerIntegrationsForm.copyAuthUrl.label",defaultMessage:"Copy"}))}))})},capabilities:function(e){const{setNewValue:t,currentValue:i}=e,r={...m.fP,...i},l={no_user_capabilities:!1===r.read_user_without_email&&!1===r.read_user_with_email,read_user_without_email:!0===r.read_user_without_email&&!1===r.read_user_with_email,read_user_with_email:!0===r.read_user_with_email};return a()(z.Z,{type:z.i.Vertical,initialFocus:void 0,sections:n.compact([{key:"content_capabilities",items:["read_content","update_content","insert_content"].map((e=>Ee(e,r,t))),render:e=>o.createElement(K.Z,y()({},e,{title:_.default.formatMessage(Le.content_capabilities_title)}))},{key:"comment_capabilities",items:["read_comment","insert_comment"].map((e=>Ee(e,r,t))),render:e=>o.createElement(K.Z,y()({},e,{title:_.default.formatMessage(Le.comment_capabilities_title)}))},{key:"user_capabilities",items:["no_user_capabilities","read_user_without_email","read_user_with_email"].map((e=>((e,t,i,r)=>({key:e,action:()=>null,render:n=>{const l=t=>{t.preventDefault(),r({...i,read_user_without_email:"no_user_capabilities"!==e,read_user_with_email:"read_user_with_email"===e})};return o.createElement(E.Z,y()({},n,{title:_.default.formatMessage(Le[`${e}_title`]),caption:_.default.formatMessage(Le[`${e}_caption`]),icon:a()(Pe.Z,{isSelected:t}),key:e,onClick:l}))}}))(e,l[e],r,t))),render:e=>o.createElement(K.Z,y()({},e,{title:_.default.formatMessage(Le.user_capabilities_title)}))}])})},template_url:Ue,redirect_uris:function(e){return o.createElement(ue,y()({},e,{style:{color:S.ZP.frontTextMedium},typeaheadTitle:a()(c.FormattedMessage,{id:"developerIntegrationsForm.redirectUri.typePrompt",defaultMessage:"Type a redirect uri…"})}))},tagline:Ue,privacy_policy_url:Ue,terms_of_use_url:Ue,email:Ue,developer_name:Ue,website_url:Ue,unfurl_url:Ue,domain:function(e){window.__c={n:"VerifyDomainInput"};const{currentValue:t,autoFocus:i,setNewValue:r,formStoreState:n,setErrorValue:s}=e,d=(0,l.O7)(),g=(0,c.useIntl)(),m=Ae();if("update-third-party-external-integration"!==n.type&&"update-first-party-external-integration"!==n.type)return null;const{developmentDomain:f,verifiedDomains:v,domainVerifications:b}=t||{developmentDomain:"",verifiedDomains:[],domainVerifications:[]},_=v.map((e=>({domain:e,status:Re.YF.Success,data:{type:"verified",domain:e}}))),h=Date.now(),y=b.filter(U.AS).sort(((e,t)=>e.createdAt-t.createdAt)).map((e=>({domain:e.domain,status:h>e.expiresAt?Re.YF.Failure:Re.YF.Pending,data:{...e,type:h>e.expiresAt?"invalid":"unverified"}}))),w=n.startingRecord.value.id;async function x(){const e=await R.getIntegrationDomainVerifications(d,{integrationId:w});if("success"===e.type){const t=C.PF.create(e.data.recordMap),i=k.mF.fromRecordMapWithRole(t),a=e.data.verificationIds.map((e=>i({table:Z.Jd,id:e}))).filter(u.$K).map(U.Hs).filter((e=>"verified"!==e.type));r({developmentDomain:f,verifiedDomains:v,domainVerifications:a})}}if("update-third-party-external-integration"===n.type)return a()(Ze.ZP,{domains:[..._,...y],domainVerificationStore:n.domainVerificationStore,verificationType:"integration",verificationTargetId:w,refreshDomains:x,onRemoveDomain:async function(e){if("verified"!==e.type){const t=await R.deleteDomainVerificationCode(d,{id:e.id});"failed"===t.type&&s(t.error.message),await x()}else p.QO({environment:d,integrationId:w,allVerifiedDomains:v,domainToRemove:e.domain})}});return o.createElement(o.Fragment,null,a()("div",{style:m.domainInputTitle},void 0,a()(c.FormattedMessage,{id:"developerIntegrationForm.domain.developmentDomain.label",defaultMessage:"Development domain"})),a()(N.Z,{autoFocus:i,style:m.basicTextInput,value:f,onChange:e=>r({verifiedDomains:v,domainVerifications:b,developmentDomain:e.target.value})}),a()("div",{style:m.domainInputTitle},void 0,a()(c.FormattedMessage,{id:"developerIntegrationForm.domain.verifiedDomains.label",defaultMessage:"Verified domain(s)"})),a()(de.Z,{placeholder:g.formatMessage({id:"domainVerificationInput.domainInput.placeholder",defaultMessage:"No domains configured"}),value:"",onChange:()=>{},onRemoveLastToken:()=>{},readOnly:!0,tokens:_.map((e=>{let{domain:t,status:i}=e;return a()(Re.ZP,{status:i,showRemoveButton:!1,isSingle:!1,format:I.l.Medium,value:t},t)}))}))},url_matching_and_placeholder:function(e){window.__c={n:"RegexPatternRulesInput"};const{currentValue:t,setNewValue:i,setErrorValue:r}=e,n=Ae();return o.createElement(o.Fragment,null,null==t?void 0:t.map(((e,n)=>a()(ce,{currentRule:e,shouldShowDelete:0!==n,onUpdate:e=>{i([...t.slice(0,n),e,...t.slice(n+1)])},onDelete:()=>{0!==n&&i([...t.slice(0,n),...t.slice(n+1)])},onError:r},`regex-rule-${n}`))),a()(O.Z,{style:n.plainButton,isBlue:!0,onClick:e=>{e.preventDefault(),i([...t??[],D.VH])}},void 0,M.Z.plus(n.icon),a()(c.FormattedMessage,{id:"developerIntegrationsForm.regexPatternRulesInput.addMore.label",defaultMessage:"Add another rule"})))},external_oauth_authorize_url:Ue,external_oauth_token_url:Ue,external_client_id:Ue,external_client_secret:function(e){window.__c={n:"HiddenTextInput"};const{autoFocus:t,currentValue:i,setNewValue:r}=e,n=Ae();return a()(N.Z,{type:"password",autoFocus:t,style:n.basicTextInput,value:i,onChange:e=>r(e.target.value)})},external_oauth_scopes:Ue,external_deletion_url:Ue};function Ue(e){window.__c={n:"BasicTextInput"};const{autoFocus:t,currentValue:i,setNewValue:r}=e,n=Ae();return a()(N.Z,{autoFocus:t,style:n.basicTextInput,value:i,onChange:e=>r(e.target.value)})}const Le=(0,c.defineMessages)({read_comment_title:{id:"developerIntegrationForm.capabilities.read_comment.title",defaultMessage:"Read comments"},read_comment_caption:{id:"developerIntegrationForm.capabilities.read_comment.caption",defaultMessage:"Read comments on blocks and pages."},insert_comment_title:{id:"developerIntegrationForm.capabilities.insert_comment.title",defaultMessage:"Insert comments"},insert_comment_caption:{id:"developerIntegrationForm.capabilities.insert_comment.caption",defaultMessage:"Create comments on blocks and pages."},comment_capabilities_title:{id:"developerIntegrationForm.capabilities.comment_capabilities.title",defaultMessage:"Comment Capabilities"},content_capabilities_title:{id:"developerIntegrationForm.capabilities.content_capabilities.headerTitle",defaultMessage:"Content Capabilities"},user_capabilities_title:{id:"developerIntegrationForm.capabilities.user_capabilities.headerTitle",defaultMessage:"User Capabilities"},read_content_title:{id:"developerIntegrationForm.capabilities.read_content.title",defaultMessage:"Read content"},read_content_caption:{id:"developerIntegrationForm.capabilities.read_content.caption",defaultMessage:"Request to read content."},update_content_title:{id:"developerIntegrationForm.capabilities.update_content.title",defaultMessage:"Update content"},update_content_caption:{id:"developerIntegrationForm.capabilities.update_content.caption",defaultMessage:"Request to update existing content."},insert_content_title:{id:"developerIntegrationForm.capabilities.insert_content.title",defaultMessage:"Insert content"},insert_content_caption:{id:"developerIntegrationForm.capabilities.insert_content.caption",defaultMessage:"Request to create new content."},no_user_capabilities_title:{id:"developerIntegrationForm.capabilities.no_user_capabilities.title",defaultMessage:"No user information"},no_user_capabilities_caption:{id:"developerIntegrationForm.capabilities.no_user_capabilities.caption",defaultMessage:"Do not request any user information access."},read_user_without_email_title:{id:"developerIntegrationForm.capabilities.read_user_without_email.title",defaultMessage:"Read user information without email addresses"},read_user_without_email_caption:{id:"developerIntegrationForm.capabilities.read_user_without_email.caption",defaultMessage:"Request access to user information, not including email addresses."},read_user_with_email_title:{id:"developerIntegrationForm.capabilities.read_user_with_email.title",defaultMessage:"Read user information including email addresses"},read_user_with_email_caption:{id:"developerIntegrationForm.capabilities.read_user_with_email.caption",defaultMessage:"Request access to user information, including email addresses."}}),Ee=(e,t,i)=>({key:e,action:()=>null,render:r=>{const n=r=>{r.preventDefault(),i({...t,[e]:!t[e]})};return o.createElement(E.Z,y()({},r,{title:_.default.formatMessage(Le[`${e}_title`]),caption:_.default.formatMessage(Le[`${e}_caption`]),icon:a()(A.Z,{checked:Boolean(t[e]),size:16,onClick:n}),key:e,onClick:n}))}});function Ae(){return(0,x.yK)((()=>({basicTextInput:{background:S.ZP.white,height:32,fontSize:15},domainInputTitle:{marginTop:15,fontSize:15,fontWeight:P.Z.fontWeight.regular,color:S.ZP.frontTextMedium},plainButton:{display:"flex",alignItems:"center"},icon:{width:15,height:15}})),[])}function Ne(e){return(0,x.yK)((()=>({authInput:{color:S.ZP.frontTextMedium,fontFamily:P.Z.getCompositeFontFamily(w.SP).mono},authInputRight:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1},authButton:{display:"inline-flex",alignItems:"center",borderRadius:3,padding:"0 6px",height:24,color:e?S.ZP.frontTextMedium:S.ZP.blue,fontFamily:P.Z.getCompositeFontFamily(w.SP).sans}})),[e])}const ze={key:"basic",title:_.default.formatMessage(m.sY.basicSectionTitle),fields:["type","space","name","icon"]},Oe=[ze],Ke={type:{label:_.default.formatMessage(m.sY.integrationTypeLabel),subtitle:_.default.formatMessage(m.sY.integrationTypeSubtitle)},name:{label:_.default.formatMessage(m.sY.nameLabel),subtitle:_.default.formatMessage(m.sY.nameSubtitle)},icon:{label:_.default.formatMessage(m.sY.iconLabel),subtitle:_.default.formatMessage(m.sY.iconSubtitle)},space:{label:_.default.formatMessage(m.sY.spaceLabel),subtitle:_.default.formatMessage(m.sY.spaceSubtitle)}};const qe=[{key:"capabilities",title:_.default.formatMessage(m.sY.capabilitiesSectionTitle),fields:["capabilities"]}],je={capabilities:{label:_.default.formatMessage(m.sY.capabilitiesLabel),caption:a()(c.FormattedMessage,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>a()(Te.Z,{href:"https://developers.notion.com/docs/authorization"},void 0,e)}})}};var We=i(70764),Ye=i(24006);function He(e){window.__c={n:"DeveloperIntegrationFormSwitcherButton"};const{label:t,subtitle:i,onClick:r,isDisabled:n,isActive:l}=e,s=(0,x.yK)((e=>({label:{fontSize:15,color:e.lightTextColor,display:"flex",justifyContent:"space-between"},subtitle:{fontSize:15,color:e.lightTextColor,paddingTop:15}})),[]);return o.createElement(o.Fragment,null,a()("div",{style:s.label},void 0,t,a()(Ye.Z,{onClick:r,on:l,disabled:n})),a()("div",{style:s.subtitle},void 0,i))}const $e=[{key:"organization",title:_.default.formatMessage(m.sY.organizationSectionTitle),fields:["developer_name","website_url","tagline","privacy_policy_url","terms_of_use_url","email"]},{key:"oauth",title:_.default.formatMessage(m.sY.oauthSectionTitle),fields:["redirect_uris","template_url"]}];function Ge(e){const t=e?_.default.formatMessage(m.sY.redirectUrisBetaSubtitle):_.default.formatMessage(m.sY.redirectUrisSubtitle);return{redirect_uris:{label:_.default.formatMessage(m.sY.redirectUrisLabel),subtitle:t},website_url:{label:_.default.formatMessage(m.sY.websiteUrlLabel),subtitle:_.default.formatMessage(m.sY.websiteUrlSubtitle)},tagline:{label:_.default.formatMessage(m.sY.taglineLabel),subtitle:_.default.formatMessage(m.sY.taglineSubtitle)},privacy_policy_url:{label:_.default.formatMessage(m.sY.privacyPolicyUrlLabel),subtitle:_.default.formatMessage(m.sY.privacyPolicyUrlSubtitle)},terms_of_use_url:{label:_.default.formatMessage(m.sY.termOfUseLabel),subtitle:_.default.formatMessage(m.sY.termOfUseSubtitle)},template_url:{label:_.default.formatMessage(m.sY.templateLabel),subtitle:_.default.formatMessage(m.sY.templateSubtitle)},email:{label:_.default.formatMessage(m.sY.emailLabel),subtitle:_.default.formatMessage(m.sY.emailSubtitle)},developer_name:{label:_.default.formatMessage(m.sY.developerNameLabel),subtitle:_.default.formatMessage(m.sY.developerNameSubtitle)}}}var Je=i(97122);const Qe=(0,c.defineMessages)({confirmTitle:{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.title",defaultMessage:"Switch to Public integration?"},confirmContinue:{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.confirm",defaultMessage:"Continue"},confirmCapability:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.title",defaultMessage:"Change requested capabilities?"},confirmCapabilityMessage:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.message",defaultMessage:"Any existing users of your integration will be required to re-authenticate."},confirmCapabilitySubmit:{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.confirm",defaultMessage:"Change"},submitButtonCreate:{id:"formHandler.submitButton.create.label",defaultMessage:"Submit"},submitButtonUpdate:{id:"formHandler.submitButton.create.update",defaultMessage:"Save changes"},submitButtonContinue:{id:"formHandler.submitButton.continue.label",defaultMessage:"Continue"},submitButtonSaved:{id:"formHandler.submitButton.saved.label",defaultMessage:"Saved"}});function Xe(e){window.__c={n:"DeveloperIntegrationFormHandler"};const{onSubmit:t,children:i,submitType:r,currentPage:n,capabilitiesHaveChanged:o,formSaved:l}=e,s=(0,m.hs)(n,r),d=("update-guest-integration"===r||"update-third-party-external-integration"===r)&&o,u=it({});return a()("form",{id:"developer-integration-form",style:u.formContainerStyle,onSubmit:e=>{e.preventDefault(),"create-guest-integration"===r?ne.Z.setState({open:!0,isDestructive:!1,isWarning:!1,title:_.default.formatMessage(Qe.confirmTitle),message:a()(c.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.message",defaultMessage:"You‘ll get an OAuth secret and will need to implement OAuth for authorization. See <oauthdocumentationlink>developer docs</oauthdocumentationlink> for more information.",values:{oauthdocumentationlink:e=>a()(Te.Z,{href:F._j.developerOAuthDocs},void 0,e)}}),confirmationMessage:_.default.formatMessage(Qe.confirmContinue),onConfirm:()=>{t()}}):d?ne.Z.setState({open:!0,isDestructive:!1,isWarning:!0,title:_.default.formatMessage(Qe.confirmCapability),message:_.default.formatMessage(Qe.confirmCapabilityMessage),confirmationMessage:_.default.formatMessage(Qe.confirmCapabilitySubmit),onConfirm:()=>{t()}}):t()}},void 0,i,s&&a()(et,{submitType:r,formSaved:l}))}function et(e){window.__c={n:"FormFooter"};const{submitType:t,formSaved:i}=e,r=(0,m.oX)(t),n=(0,m.w8)(t),o=!r&&i,l=it({isCreate:r});return a()("div",{style:l.buttonContainerStyle},void 0,r&&a()("span",{style:l.buttonLabelStyle},void 0,a()(c.FormattedMessage,{id:"developerIntegrationFormHandler.create.developerTermsOnSubmit",defaultMessage:"By {action}, you agree to Notion's <developertermslink>Developer Terms</developertermslink>.",values:{developertermslink:e=>a()(Te.Z,{href:F._j.developerTerms},void 0,e),action:n?"continuing":"submitting"}})),a()(tt,{submitType:t,showSavedButton:o}))}function tt(e){window.__c={n:"FormButton"};const{submitType:t,showSavedButton:i}=e,r=(0,m.oX)(t),n=(0,m.w8)(t),o=it({showSavedButton:i}),l=n?"submitButtonContinue":"submitButtonCreate",s=i?"submitButtonSaved":"submitButtonUpdate",d=r?_.default.formatMessage(Qe[l]):_.default.formatMessage(Qe[s]);return a()(Je.h,{styles:o.buttonBackground,onClick:()=>{const e=document.querySelector("form#developer-integration-form");if(e){const t=e.ownerDocument.createElement("input");t.style.display="none",t.type="submit",e.appendChild(t).click(),e.removeChild(t)}}},void 0,d,r&&M.Z.arrowRight(o.rightArrow))}function it(e){const{showSavedButton:t,isCreate:i}=e;return(0,x.yK)((()=>({buttonContainerStyle:{display:"flex",marginTop:24,flexDirection:i?"row":"row-reverse",alignItems:"center"},buttonLabelStyle:{fontSize:15,color:S.ZP.frontTextLight,marginRight:42},formContainerStyle:{minWidth:200,maxWidth:440,marginLeft:24,display:"flex",flexDirection:"column"},buttonBackground:{...t&&{background:S.ZP.frontBlackButtonBackgroundPressed}},rightArrow:{width:14,height:14,marginLeft:4}})),[t,i])}const rt=[{key:"secrets",title:_.default.formatMessage(m.sY.secretSectionTitle),fields:["token","client_id","client_secret","authorization_url"]}],at={token:{label:_.default.formatMessage(m.sY.tokenLabel)},client_id:{label:_.default.formatMessage(m.sY.clientIdLabel)},client_secret:{label:_.default.formatMessage(m.sY.clientSecretLabel)},authorization_url:{label:_.default.formatMessage(m.sY.authorizationUrlLabel)}};const nt={key:"external_oauth",title:_.default.formatMessage(m.sY.externalOauthSectionTitle),subtitle:a()(c.FormattedMessage,{id:"developerIntegrationFormUnfurlingView.sectionSubtitle.external_oauth",defaultMessage:"See <textlink>Notion documentation</textlink> for information on <authlink>OAuth 2.0.</authlink>",values:{textlink:e=>a()(Te.Z,{href:"https://developers.notion.com/docs/build-a-link-preview-integration",external:!0},void 0,e),authlink:e=>a()(Te.Z,{href:"https://datatracker.ietf.org/doc/html/rfc6749",external:!0},void 0,e)}}),fields:["icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url"]};const ot={icon:{label:_.default.formatMessage(m.sY.iconLabel),subtitle:_.default.formatMessage(m.sY.iconSubtitle)},unfurl_url:{label:_.default.formatMessage(m.sY.unfurlUrlLabel),caption:_.default.formatMessage(m.sY.unfurlUrlCaption)},domain:{label:_.default.formatMessage(m.sY.domainLabel),caption:a()(c.FormattedMessage,{id:"developerIntegrationForm.domainVerification.caption",defaultMessage:"Development and verified domains for URLs to unfurl with this integration. Domains must be verified before publishing to users. See the <textlink>Notion documentation</textlink> for more verification process.",values:{textlink:e=>a()(Te.Z,{href:"https://developers.notion.com/docs/building-a-link-preview#domain-verification",external:!0},void 0,e)}})},url_matching_and_placeholder:{label:_.default.formatMessage(m.sY.urlMatchingAndPlaceholderLabel),caption:_.default.formatMessage(m.sY.urlMatchingAndPlaceholderCaption)},external_oauth_authorize_url:{label:_.default.formatMessage(m.sY.externalOauthAuthorizeUrlLabel),caption:_.default.formatMessage(m.sY.externalOauthAuthorizeUrlCaption)},external_oauth_token_url:{label:_.default.formatMessage(m.sY.externalOauthTokenUrlLabel),caption:_.default.formatMessage(m.sY.externalOauthTokenUrlCaption)},external_oauth_scopes:{label:_.default.formatMessage(m.sY.externalOauthScopesLabel),caption:_.default.formatMessage(m.sY.externalOauthScopesCaption)},external_client_id:{label:_.default.formatMessage(m.sY.externalClientIdLabel)},external_client_secret:{label:_.default.formatMessage(m.sY.externalClientSecretLabel)},external_deletion_url:{label:_.default.formatMessage(m.sY.externalDeletionUrlLabel),caption:_.default.formatMessage(m.sY.externalDeletionUrlCaption)}};function lt(e){var t;window.__c={n:"DeveloperIntegrationForm"};const{integrationFormStore:i,onCreateNew:r,currentPage:_,setSelectedPage:h,spaceName:y}=e,w=(0,l.O7)(),[x,S]=o.useState(!1),I=(0,s.VK)((()=>v.default.state.currentUserRootStore),[]),M=(0,s.VK)((()=>i.getState()),[i]),{type:k}=M,[C,F]=o.useReducer(m.x6,m.yb);(0,o.useEffect)((()=>{if(!I)return;(async()=>{const e=await(0,m.hl)({formStoreState:M,userRootStore:I,environment:w});for(const t of(0,u.Yd)(e))F({field:t,value:e[t]})})()}),[M,I,w,_]),(0,o.useEffect)((()=>{const e=()=>{S(!1)};return window.addEventListener("keydown",e),window.addEventListener("click",e),()=>{window.removeEventListener("keydown",e),window.removeEventListener("click",e)}}));const Z=n.debounce((async()=>{S(!0);const e=(0,m.m0)({formData:C,setFormData:F,formStateType:k,currentFieldNames:dt(_)});let t;if(C.template_url.value){const e=(0,f.K2)(C.template_url.value);I&&e&&(t=b.G.createChildStore(I,{table:d.iU,id:e}),await t.load())}const i=(0,m.Z6)({formData:C,setFormData:F,formStateType:k,templateStore:t,currentFieldNames:dt(_)});if(e.length>0||i.length>0||(0,m.tm)({formData:C,formStateType:k,currentFieldNames:dt(_)})||!I)return void S(!1);const n=p.JJ({environment:w,formState:M,formData:(0,m.Xr)(C)});if(!n)return g.showErrorMessage(a()(c.FormattedMessage,{id:"developerIntegrationsForm.error.submission",defaultMessage:"There was an error submitting your integration. Please try again or contact support if the issue persists."})),void S(!1);r&&r(n),(0,m.w8)(k)||(0,m.oX)(k)&&h&&h("secrets")}),300),T=function(e,t){if(!t||!e)return!1;return(0,u.qP)(t).some((t=>{let[i,r]=t;return Boolean(e[i])!==r}))}(null===(t=M.startingRecord)||void 0===t?void 0:t.value.capabilities,C.capabilities.value),P=st[_];return a()(Xe,{submitType:k,onSubmit:Z,capabilitiesHaveChanged:T,currentPage:_,formSaved:x},void 0,a()(P,{integrationFormStore:i,formData:C,setFormData:F,spaceName:y}))}const st={distribution:function(e){window.__c={n:"DeveloperIntegrationFormDistributionView"};const{integrationFormStore:t}=e,i=(0,s.VK)((()=>t.getState().type),[t]),r=(0,s.VK)((()=>(0,We.QS)()),[]),n=["update-guest-integration","update-third-party-external-integration","update-first-party-external-integration","create-third-party-external-integration"].includes(i),l="update-bot"!==i,[d,u]=(0,o.useState)(l);return o.createElement(o.Fragment,null,a()(He,{onClick:()=>{const e=d?"internal":"public";u(!d),t.updateRecordTypeOnSwitch(e)},label:_.default.formatMessage(m.sY.distributionSwitcherLabel),subtitle:a()(c.FormattedMessage,{id:"developerIntegrationFormDistributionView.switcher.subtitle",defaultMessage:"A public integration is available to any Notion user. <br>After submission, only the creator will be able to manage this integration. To transfer ownership of this integration to another user, please contact Notion support.</br> <br>If you’ve built a public integration, you may be eligible to become a technology partner and get Notion’s support in promoting and distributing your integration. Learn more about the Notion Technology Partner Program <partnerProgramLink>here</partnerProgramLink>.</br>",values:{partnerProgramLink:e=>a()(Te.Z,{href:"https://www.notion.so/technology-partner-program",external:!0},void 0,e),br:e=>a()("div",{style:{marginTop:15}},void 0,e)}}),isActive:d,isDisabled:n}),d&&o.createElement(Be,y()({},e,{pageSections:$e,fieldDetails:Ge(r)})))},linkPreview:function(e){window.__c={n:"DeveloperIntegrationFormUnfurlingView"};const{integrationFormStore:t}=e,i=(0,s.VK)((()=>t.getState().type),[t]),r=(0,s.VK)((()=>{var e;return null===(e=t.getState().startingRecord)||void 0===e?void 0:e.value.id}),[t]),n="update-third-party-external-integration"===i||"update-first-party-external-integration"===i,l="create-third-party-external-integration"===i||"update-third-party-external-integration"===i||"update-first-party-external-integration"===i,[d,u]=(0,o.useState)(l),g="create-third-party-external-integration"===i?[nt]:[nt,(f=r,{key:"unfurling",title:_.default.formatMessage(m.sY.unfurlingSectionTitle),subtitle:a()(c.FormattedMessage,{id:"developerIntegrationForm.sectionCaption.unfurling",defaultMessage:"Visit the <previewlab>Link Preview Lab</previewlab> to plan out unfurling previews and responses.",values:{previewlab:e=>{if(!f)return"";const t=p.Pk({table:Me.K2,id:f});return a()(Te.Z,{href:t,external:!0},void 0,e)}}}),fields:["unfurl_url","domain","url_matching_and_placeholder"]})];var f;return o.createElement(o.Fragment,null,a()(He,{onClick:()=>{const e=d?"public":"unfurling";u(!d),t.updateRecordTypeOnSwitch(e)},label:_.default.formatMessage(m.sY.unfurlingSwitcherLabel),subtitle:a()(c.FormattedMessage,{id:"developerIntegrationFormUnfurlingView.switcher.subtitle",defaultMessage:"Unfurl external data inside Notion. Requires additional fields to configure the matching URL pattern and interface. <br> To be publicly distributed, <formLink>fill out this form</formLink> to submit your integration for security review. </br>",values:{br:e=>a()("div",{style:{marginTop:15}},void 0,e),formLink:e=>a()(Te.Z,{href:"https://docs.google.com/forms/d/e/1FAIpQLSd94UcRziV-1yFv6udO0qZwohLyXxhYYadUqEJyyEd03RAj1w/viewform",external:!0},void 0,e)}}),isActive:d,isDisabled:n}),d&&o.createElement(Be,y()({},e,{pageSections:g,fieldDetails:ot})))},secrets:function(e){return o.createElement(Be,y()({},e,{pageSections:rt,fieldDetails:at}))},capabilities:function(e){return o.createElement(Be,y()({},e,{pageSections:qe,fieldDetails:je}))},basic:function(e){const{integrationFormStore:t,formData:i,setFormData:r,spaceName:n}=e,o=n?a()(c.FormattedMessage,{id:"developerIntegrationView.subtitle.internalIntegrationLabel",defaultMessage:"Workspace owners for <bold>{spaceName}</bold> can manage this integration",values:{spaceName:n,bold:e=>a()("b",{},void 0,e)}}):void 0;return a()(Be,{integrationFormStore:t,formData:i,setFormData:r,pageSections:[{...ze,subtitle:o}],fieldDetails:Ke})}};function dt(e){switch(e){case"basic":return(0,m.Qo)(Oe);case"secrets":return(0,m.Qo)(rt);case"capabilities":return(0,m.Qo)(qe);case"distribution":return(0,m.Qo)($e);case"linkPreview":return["icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url","unfurl_url","domain","url_matching_and_placeholder"];default:return[]}}},87886:(e,t,i)=>{i.r(t),i.d(t,{LinkPreviewLab:()=>ie,default:()=>te});var r=i(10434),a=i.n(r),n=i(23174),o=i.n(n),l=i(67294),s=i(480),d=i(81954),u=i(24405),c=i(63123),p=i(53397),g=i(74181),m=i(89602),f=i(70203),v=i(97880),b=i(82990),_=i(44876),h=i(36054),y=i(5366),w=i(8981),x=i(43250),S=i(91996),I=i(65270),M=i(87279),k=i(79315),C=i(61766),F=i(30874),Z=i(3403),T=i(64921),P=i(52275),R=i(31945),B=i(74194),D=i(78140),V=i(32163),U=i(63296),L=i(72495),E=i(29823),A=i(22131),N=i(76745),z=i(27830),O=i(17970),K=i(34958),q=i(14577),j=i(20475),W=i(8848),Y=i(77744),H=(i(73063),i(58032)),$=i(64369);i(29551);function G(e){window.__c={n:"Artboard"};const[t,i]=(0,l.useState)(!1);return o()("div",{onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)}},void 0,o()(J,{isInverted:e.isInverted},void 0,o()(Q,{showSize:e.showSize??t,showInsets:e.showInsets??t,insetSize:24},void 0,o()(ee,{isInverted:e.isInverted},void 0,e.children))))}function J(e){window.__c={n:"ArtboardBorder"};const t=(0,u.Fg)(),i=X(),r=e.isInverted?i:t,a=(0,l.useMemo)((()=>({borderRadius:3,overflow:"hidden",border:`1px solid ${r.regularDividerColor}`,backgroundColor:r.contentBackground,marginTop:12,marginBottom:12,color:r.regularTextColor})),[r]);return o()("div",{style:a},void 0,e.children)}function Q(e){window.__c={n:"ArtboardInsets"};const{showInsets:t,showSize:i,insetSize:r,children:a}=e,n=(0,l.useRef)(null),s=(0,u.yK)((e=>{const i=t?"rgba(255, 105, 180, 1)":"rgba(255, 105, 180, 0)",a=`1px dashed ${i}`,n=`${r}px`,o="all 0.1s ease-in-out",l={t:{borderBottom:a,transition:o},l:{borderRight:a,transition:o},r:{borderLeft:a,transition:o},b:{borderTop:a,transition:o,position:"relative"}};return{grid:{display:"grid",gridTemplateColumns:`${n} auto ${n}`,gridTemplateRows:`${n} auto ${n}`,...l.t,...l.l,...l.r,...l.b},...l,tl:{...l.t,...l.l},tr:{...l.t,...l.r},bl:{...l.b,...l.l},br:{...l.b,...l.r},c:{position:"relative"},insetText:{color:i,fontSize:10,paddingLeft:(r-10)/2,fontFamily:b.Z.baseFontFamily.githubMono,lineHeight:n,maxHeight:r,transition:o,position:"absolute"}}}),[t,r]);return o()("div",{style:s.grid},void 0,o()("div",{style:s.tl}),o()("div",{style:s.t}),o()("div",{style:s.tr}),o()("div",{style:s.l}),l.createElement("div",{style:s.c,ref:n},a),o()(H.Z,{forceVisibleState:i??t,renderTooltip:()=>{var e;return`${null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect().height}px`},placement:H.Z.Placement.Right,render:()=>o()("div",{style:s.r})}),o()("div",{style:s.bl}),o()(H.Z,{placement:H.Z.Placement.Bottom,forceVisibleState:i??t,renderTooltip:()=>{var e;return`${null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect().width}px`},render:()=>o()("div",{style:s.b},void 0,o()($.Z,{style:s.insetText},void 0,`${r}px inset`))}),o()("div",{style:s.br}))}function X(){const{mode:e}=(0,u.Fg)();return(0,W.gh)({theme:"light"===e?"dark":"light"})}function ee(e){let{children:t,isInverted:i}=e;window.__c={n:"InverseThemeProvider"};const{mode:r}=X(),a=function(e){const t=(0,s.O7)();return(0,l.useMemo)((()=>{const i=new j.Z;return i.setState({mode:e}),{...t,ThemeStore:i,ThemeModeStore:new q.Z((()=>i.state.mode),{debugName:"UIDocComponents.ThemeModeStore"})}}),[t,e])}(r);return i?o()(K.EnvironmentContextProvider,{value:a},void 0,t):(0,Y.jD)(t)}function te(e){window.__c={n:"DeveloperIntegrationLab"};const t=(0,s.O7)(),{integrationPointer:i}=e,r=(0,d.VK)((()=>k.default.state.currentUserStore),[]),a=(0,d.VK)((()=>{if(r)return r.getRecordValue(i)}),[r,i]),n=(0,c.V)({value:a,waitTimeInMs:5e3});return"pending"===n.status?o()(Z.Z,{}):"rejected"!==n.status&&(0,g.VM)(n.value)?o()(A.Z,{className:x.hEP,title:o()(y.FormattedMessage,{id:"developerIntegrationLab.title.label",defaultMessage:"Link Preview Lab"}),subtitle:o()(y.FormattedMessage,{id:"developerIntegrationLab.subtitle.label",defaultMessage:"Plan out preview URL regex patterns and API responses."}),onNavigateBack:()=>w.V2(t,i),navigateBackMessage:o()(y.FormattedMessage,{id:"developerIntegrationLab.navigateBack.label",defaultMessage:"Back to integration"}),innerContainerStyles:{width:1200,margin:"auto",marginBottom:200}},void 0,o()(ie,{starterIntegration:n.value})):o()(E.Z,{})}function ie(e){let{starterIntegration:t}=e;const[i,r]=l.useState(""),[a,n]=l.useState(I.Az),[s,d]=l.useState(I.SV),[u,c]=l.useState(I.VR()),[p,g]=l.useState(I.nZ),[m,f]=l.useState(I.e_),[v,b]=l.useState(I.P4),[h,y]=l.useState(t);return l.useEffect((()=>{const{original_url_domains:e,development_url_domains:i,original_url_patterns:r}=t.info,a=(null==e?void 0:e[0])||(null==i?void 0:i[0]);if(a&&g(a),null!=r&&r[0]){const{regex:e,attributes:t,sample_urls:i}=null==r?void 0:r[0];f(e);const a=t.map(_.Ah);b(a);const o=null==i?void 0:i[0];o&&n(o)}}),[t]),l.useEffect((()=>{y((e=>I.Hx({domain:p,regex:m,attributes:v,currentIntegration:e})))}),[p,m,v]),l.useEffect((()=>{F.Z.setState({loaded:!0,loading:!1,userId:void 0,spaceId:I.C,integrations:[h],externalAuthentications:[],bots:[],completeSlackAuthentications:[],webhookSubscriptions:[]})}),[h]),o()("div",{style:{display:"flex",justifyContent:"space-between"}},void 0,o()(re,{style:{flex:1,marginRight:12},setErrorMessage:r,rootUrl:a,setRootUrl:n,relatedUrisToAttributes:u,setRelatedUrisToAttributes:c,domain:p,setDomain:g,regexPattern:m,setRegexPattern:f,regexAttributes:v,setRegexAttributes:b,rootAttributes:s,setRootAttributes:d}),o()(oe,{style:{flex:1},rootUrl:a,rootAttributes:s,relatedUrisToAttributes:u,integration:h,errorMessage:i}))}function re(e){window.__c={n:"ConfigurationInput"};const{style:t,rootUrl:i,setRootUrl:r,domain:a,setDomain:n,regexPattern:l,setRegexPattern:s,regexAttributes:u,setRegexAttributes:c,rootAttributes:p,setRootAttributes:g,relatedUrisToAttributes:f,setRelatedUrisToAttributes:v,setErrorMessage:_}=e,h=(0,d.VK)((()=>I.TG(p)),[p]);return o()("div",{style:t},void 0,o()("label",{},void 0,o()("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.medium}},void 0,o()(y.FormattedMessage,{id:"developerIntegrationLab.rootUrl.label",defaultMessage:"Pasted URL to Preview"})),o()(B.Z,{value:i,onChange:e=>r(e.target.value)})),o()(le,{title:o()(y.FormattedMessage,{id:"developerIntegrationLab.regexConfiguration.label",defaultMessage:"Manage Regex Configuration"}),style:{marginTop:12}},void 0,o()("label",{style:{marginTop:12}},void 0,o()("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.medium}},void 0,o()(y.FormattedMessage,{id:"developerIntegrationLab.domain.label",defaultMessage:"Domain"})),o()(B.Z,{value:a,onChange:e=>n(e.target.value)})),o()(de,{regexPattern:l,setRegexPattern:s,setErrorMessage:_}),o()("label",{style:{marginTop:12}},void 0,o()("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.medium}},void 0,o()(y.FormattedMessage,{id:"developerIntegrationLab.regexAttributes.label",defaultMessage:"Regex Attributes"})),o()(se,{value:u,onChange:c,validationType:m.$1,setErrorMessage:_}))),o()(le,{title:o()(y.FormattedMessage,{id:"developerIntegrationLab.rootAttributes.label",defaultMessage:"Unfurl response payload"}),style:{marginTop:12}},void 0,o()(se,{value:p,onChange:g,validationType:m.$1,setErrorMessage:_})),o()(le,{title:o()(y.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.label",defaultMessage:"Related unfurl response payloads"}),style:{marginTop:12}},void 0,h.map((e=>{const t=f[e];return o()(le,{title:e,style:{marginTop:12,marginLeft:12}},e,t?o()(se,{value:t,onChange:t=>{v({...f,[e]:t})},validationType:m.$1,setErrorMessage:_}):o()(y.FormattedMessage,{id:"developerIntegrationLab.relatedAttributes.empty",defaultMessage:"No related attributes found."}))}))))}const ae=["preview","mention","hover"],ne=["authenticate","error","update","loaded"];function oe(e){const{style:t,rootUrl:i,rootAttributes:r,relatedUrisToAttributes:a,integration:n,errorMessage:s}=e,[d,u]=l.useState("preview"),[c,p]=l.useState("loaded");return o()("div",{style:t},void 0,o()("div",{style:{display:"flex",alignItems:"center"}},void 0,o()("div",{style:{marginRight:12}},void 0,"Preview type:"),o()(ue,{title:d,options:ae,onSelectOption:e=>u(e)}),o()("div",{style:{marginLeft:12,marginRight:12}},void 0,"Preview state:"),o()(ue,{title:c,options:ne,onSelectOption:e=>p(e)})),o()("div",{style:{marginTop:12,maxWidth:600}},void 0,o()(ce,{previewType:d,previewState:c,rootUrl:i,rootAttributes:r,relatedUrisToAttributes:a,integration:n,errorMessage:s})))}function le(e){const[t,i]=l.useState(!1);return o()("div",{style:e.style},void 0,o()(T.Z,{onClick:()=>i(!t),style:{display:"flex",alignItems:"center"}},void 0,p.Z.triangle({width:"0.6875em",height:"0.6875em",transition:"transform 200ms ease-out",transform:`rotateZ(${t?180:90}deg)`,marginRight:4}),e.title),t&&e.children)}function se(e){const{value:t,onChange:i,validationType:r,setErrorMessage:a}=e,[n,s]=l.useState(JSON.stringify(t,null,2));return o()(B.Z,{format:B.B.ExtraLarge,inputStyle:{fontSize:14,lineHeight:"18px",height:500},textarea:!0,value:n,onChange:e=>{const t=e.target.value;s(t);const n=S.Jv(t);if(void 0===n)a("Could not parse JSON object input.");else{const e=(0,h.Gu)(r,n);e?a(e.message):(a(""),i(n))}}})}function de(e){const{regexPattern:t,setRegexPattern:i,setErrorMessage:r}=e,[a,n]=l.useState(t);return o()("label",{style:{marginTop:12}},void 0,o()("div",{style:{fontSize:15,fontWeight:b.Z.fontWeight.medium}},void 0,"Regex Pattern"),o()(B.Z,{value:a,onChange:e=>{const t=e.target.value;n(t);try{new RegExp(t);i(t),r("")}catch(a){r("Invalid Regex.")}}}))}function ue(e){window.__c={n:"PreviewDropdownButton"};const{title:t,options:i,onSelectOption:r}=e,[n,s,u]=(0,d.AF)(void 0,C.Z);return o()(R.ZP,{popupType:R.Z4.Popup,buttonPopupStore:u,renderOrigin:()=>o()(U.Z,{onClick:()=>s({...n,open:!0})},void 0,t,p.Z.chevronDown({width:10,marginTop:4,marginLeft:4})),render:()=>o()(D.Z,{menuType:M.og.Popup},void 0,o()(V.Z,{type:V.i.Vertical,sections:[{key:t,items:i.map((e=>({key:e,action:()=>{r(e),s({...n,open:!1})},render:t=>l.createElement(P.Z,a()({},t,{title:e}))}))),render:e=>l.createElement(L.Z,e)}],initialFocus:void 0}))})}function ce(e){window.__c={n:"RenderedPreviewWithError"};const{previewType:t,previewState:i,rootUrl:r,rootAttributes:a,relatedUrisToAttributes:n,integration:d,errorMessage:c}=e,[p,g]=l.useState(""),m=(0,s.O7)(),[f,v]=l.useState();l.useEffect((()=>{const e=I.rn({environment:m,rootUrl:r,rootAttributes:a,relatedUrisToAttributes:n,integration:d});"error"in e?g(e.error):(g(""),v(e))}),[m,r,a,n,d]),l.useEffect((()=>{g(c)}),[c]);const b=(0,u.yK)((e=>({error:{marginTop:12,marginBottom:12,padding:"12px 24px",marginRight:"auto",backgroundColor:e.accentColors.red[100]}})),[]);return l.createElement(l.Fragment,null,p&&o()("div",{style:b.error},void 0,p," "),f&&l.createElement(l.Fragment,null,o()(G,{isInverted:!1,showInsets:!1,showSize:!1},void 0,o()(ge,{previewType:t,previewState:i,previewStores:f})),o()(G,{isInverted:!0,showInsets:!1,showSize:!1},void 0,o()(ge,{previewType:t,previewState:i,previewStores:f}))))}function pe(e){window.__c={n:"RenderedHoverPreview"};const{previewStores:t}=e,i=(0,u.yK)((e=>({container:{borderRadius:4,boxShadow:e.lightBoxShadow}})),[]),r=(0,d.VK)((()=>{const e=t.previewBlockStore.id;if(!e)return;return{annotation:(0,f.x3)(e),store:t.inlineBlockStore,token:void 0}}),[t.previewBlockStore,t.inlineBlockStore]);return r?o()("div",{style:i.container},void 0,o()(z.D,{isHoveredTokenEditable:!0,state:r})):null}function ge(e){const{previewType:t,previewState:i,previewStores:r}=e;return"preview"===t?o()(N.Z,{store:"authenticate"===i?r.emptyInstanceBlockStore:r.previewBlockStore,disabled:!1,forceActionForUIDoc:"loaded"===i?void 0:i}):"mention"===t?o()(O.Z,{store:"authenticate"===i?r.emptyInlineBlockStore:r.inlineBlockStore,disabled:!1}):"hover"===t?l.createElement(pe,e):void(0,v.t1)(t)}},29823:(e,t,i)=>{i.d(t,{Z:()=>c});var r=i(23174),a=i.n(r),n=(i(67294),i(480)),o=i(53397),l=i(5366),s=i(8981),d=i(43250),u=i(22131);function c(){window.__c={n:"DeveloperIntegrationNotFound"};const e=(0,n.O7)();return a()(u.Z,{className:d.wG0,title:a()(l.FormattedMessage,{id:"developerIntegrationNotFound.title.label",defaultMessage:"Not Found"}),subtitle:a()(l.FormattedMessage,{id:"developerIntegrationNotFound.subtitle.label",defaultMessage:"This integration doesn't exist."}),onNavigateBack:()=>s.A1(e),icon:o.Z.eyes({width:98,height:98}),sideContent:null},void 0,null)}},12265:(e,t,i)=>{i.r(t),i.d(t,{default:()=>E});var r=i(23174),a=i.n(r),n=i(67294),o=i(480),l=i(81954),s=i(63123),d=i(15070),u=i(59054),c=i(39248),p=i(77420),g=i(44312),m=i(49953),f=i(9844),v=i(90468),b=i(70043),_=i(97880),h=i(5366),y=i(50906),w=i(54642),x=i(8981),S=i(43250),I=i(70764),M=i(12982),k=i(38755),C=i(79315),F=i(22230),Z=i(68216),T=i(3403),P=i(91754),R=i(31278),B=i(79500),D=i(43113),V=i(29823),U=i(22131),L=i(42402);function E(e){window.__c={n:"DeveloperIntegrationView"};const{botOrIntegrationPointer:t}=e,i=(0,o.O7)(),r=(0,l.VK)((()=>C.default.state.currentUserRootStore),[]),E=(0,l.qz)(void 0,F.Z),A=(0,l.VK)((()=>E.getState().type),[E]),N=(0,l.VK)((()=>E.getState().startingRecord),[E]),z=(0,l.VK)((()=>E.getState().status),[E]),O=(0,l.VK)((()=>{const e=(0,I.QS)();return(0,M.H)(A,e)}),[A]),[K,q]=(0,n.useState)("secrets"),j="published"===z&&"secrets"!==K,W=(0,l.VK)((()=>{if(t&&r){const e=t.table,i=r.getRecordValue(t);if(i){const a=e===f.K2&&((0,d.Be)(i.capabilities)||(0,d.Uz)(i.capabilities))&&r.getRecordValue({table:m.r9,id:t.id});return{botOrIntegrationRecord:{value:i,table:t.table},maybeExternalAuthRecord:a?{table:m.r9,value:a}:void 0}}}}),[r,t]),[{value:Y}]=(0,u.r5)((async()=>{if(!r||!W||W.botOrIntegrationRecord.table!==f.K2)return[];const e=W.botOrIntegrationRecord.value.id,t=await w.getIntegrationDomainVerifications(i,{integrationId:e});if("success"===t.type){return t.data.verificationIds.map((e=>r.getRecordValue({table:g.Jd,id:e}))).filter(_.$K)}if("failed"===t.type)throw t.error;return(0,_.t1)(t)}),[i,W,r]);(0,n.useEffect)((()=>{if(!W)return;const{botOrIntegrationRecord:e,maybeExternalAuthRecord:t}=W;E.initializeNewForm(e,t,Y||[]),y.DUp(i,{table:e.table})}),[E,i,W,Y]);const H=(0,l.VK)((()=>{if(!r||!W)return;const{botOrIntegrationRecord:e}=W;if(e.value.parent_table!==v.bx)return;const t=Z.H2.createChildStore(r,{id:e.value.parent_id,table:e.value.parent_table});return(0,k.rn)(i,t)}),[W,r,i]),$=(0,s.V)({value:N});if("rejected"===$.status||!t)return a()(V.Z,{});if("pending"===$.status)return a()(T.Z,{});const G=$.value,J=i.currentUser.id;if(G.table===f.K2&&G.value.parent_id!==J)return a()(V.Z,{});const Q=G.value.name,X=G.table===p.cZ?G.value.icon:G.value.info.icon,ee={id:G.value.id,table:G.table},te=X?{pointer:ee,icon:X}:void 0;return a()(U.Z,{className:S.TFu,title:Q,subtitle:a()(h.FormattedMessage,{id:"developerIntegrationView.subtitle.genericLabel",defaultMessage:"Review and edit integration information."}),onNavigateBack:()=>x.A1(i),icon:a()(R.Z,{disabled:!0,icon:te,title:Q,isEmptyPage:!1,size:98,isLarge:!0,style:{boxShadow:b.Z.frontDeepShadow},useInvertedColors:!0}),sideContent:a()(B.T,{supportedPages:O,selectedPage:K,setSelectedPage:q,integrationFormStore:E})},void 0,j&&a()(P.Z,{type:P.$.Red,isMobile:!1,style:{marginBottom:20}},void 0,a()(h.FormattedMessage,{id:"developerIntegrationView.publishedIntegrationWarning.label",defaultMessage:"Saving changes to your integration will immediately update its listing on Notion's <integrationgallerylink>Integration Gallery.</integrationgallerylink> ",values:{integrationgallerylink:e=>a()(L.Z,{disableHover:!0,href:(0,c.E)(G.value.id,G.value.name||"")},void 0,e)}})),a()(D.Z,{integrationFormStore:E,currentPage:K,setSelectedPage:q,spaceName:H}))}},50526:(e,t,i)=>{i.d(t,{Z:()=>k});var r=i(10434),a=i.n(r),n=i(23174),o=i.n(n),l=i(67294),s=i(480),d=i(81954),u=i(53397),c=i(19889),p=i(97880),g=i(7928),m=i(70782),f=i(33929),v=i(87279),b=i(79315),_=i(64921),h=i(52275),y=i(78140),w=i(32163),x=i(44532),S=i(72495),I=i(64369),M=i(45653);function k(e){let{onChange:t}=e;window.__c={n:"DeveloperIntegrationsAccountSwitcher"};const i=(0,s.O7)(),[r,a]=(0,l.useState)(!1),n=()=>a(!1),u=(0,d.VK)((()=>b.default.state.currentUserStore),[]),g=(0,d.VK)((()=>u?i.currentUser.loggedInUserIds.map((e=>u.getRecordModel({table:c.KJ,id:e}))).filter(p.$K):[]),[u,i]),m=(0,d.VK)((()=>null==u?void 0:u.getValue()),[u]);return m?o()(x.ZP,{popupType:x.kQ.Popup,origin:o()(C,{onClick:()=>a(!0),currentUserValue:m}),render:()=>o()(F,{users:g,currentUserId:m.id,onChange:t,onClose:n}),placementToOrigin:x.ZP.Placement.Bottom,alignmentToOrigin:x.ZP.Alignment.End,onDismiss:n,open:r}):null}function C(e){const{onClick:t,currentUserValue:i}=e;return o()("div",{style:{marginLeft:18}},void 0,o()(_.Z,{onClick:t,style:{borderRadius:"100%"}},void 0,o()(M.Z,{userValue:i,size:32})))}function F(e){window.__c={n:"OpenedSwitcherMenu"};const t=(0,s.O7)(),{users:i,currentUserId:r,onClose:n,onChange:d}=e;return o()(y.Z,{menuType:v.og.Popup},void 0,o()(w.Z,{type:w.i.Vertical,initialFocus:void 0,sections:[{key:"developer-integration-accounts",items:i.map((e=>({key:e.id,action:async()=>{const i=await m.x({environment:t,newCurrentUserId:e.id});null==d||d(i),n()},render:t=>l.createElement(Z,a()({},t,{user:e,isLoggedIn:e.id===r}))}))),render:e=>l.createElement(S.Z,e)}]}))}const Z=l.forwardRef(((e,t)=>{window.__c={n:"AccountMenuItem"};const{user:i,isLoggedIn:r,...n}=e,s=f.default.getIntl(),c=(0,d.VK)((()=>(0,g.Nz)(s,i)),[s,i]),p=(0,d.VK)((()=>i.email),[i]);return l.createElement(h.Z,a()({},n,{ref:t,title:o()(I.Z,{className:"notranslate"},void 0,c),icon:o()(M.Z,{userValue:i,size:28}),caption:o()(I.Z,{isSmall:!0},void 0,p),right:r&&u.Z.thinCheck({width:12,height:12})}))}))},22131:(e,t,i)=>{i.d(t,{Z:()=>R});var r=i(23174),a=i.n(r),n=i(67294),o=i(13991),l=i(41892),s=i(8848),d=i(53397),u=i(89101),c=i(82990),p=i(5366),g=i(8981),m=i(43250),f=i(34859),v=i(64921),b=i(16354),_=i(89728),h=i(18647),y=i(50526),w=i(81954),x=i(70043),S=i(51454),I=i(38381),M=i(74194),k=i(53953);function C(){window.__c={n:"DeveloperIntegrationsDialog"};const e=(0,w.Kw)(I.Z);return a()(k.Z,{open:e.open,overlayZIndex:S.Wd,onDismiss:()=>{I.Z.reset()},preventHideChildrenWhileOpening:!0,innerStyle:{overflow:"hidden",borderRadius:3,padding:"24px 32px",width:336,fontSize:16,boxShadow:x.Z.frontDialogShadow,background:s.ZP.white},render:()=>n.createElement(F,e)})}function F(e){const[t,i]=n.useState(""),[r,o]=n.useState(!1);if(!e.open)return null;const{title:l,message:d,onConfirm:u}=e,g=i=>{const{deleteIntegrationIfConfirmationInputMatch:r}=i;e.isDestructive&&e.deleteMatchText!==t?o(!0):r&&(u(),I.Z.reset())};return a()("div",{style:{display:"flex",flexDirection:"column"}},void 0,a()("div",{style:{fontSize:16,fontWeight:c.Z.fontWeight.semibold}},void 0,l),a()("div",{style:{fontSize:14,color:s.ZP.frontTextMedium,margin:"8px 0 16px"}},void 0,d),e.isDestructive&&a()("div",{style:{marginBottom:12}},void 0,a()(M.Z,{autoFocus:!0,placeholder:e.deleteMatchText,value:t,onChange:t=>{const a=t.target.value;r&&e.deleteMatchText===a&&o(!1),i(a)},onSubmit:()=>g({deleteIntegrationIfConfirmationInputMatch:!1})}),r&&a()("div",{style:{marginTop:4,color:s.ZP.frontRed,fontSize:12}},void 0,e.deleteMatchError)),a()("div",{style:{display:"flex"}},void 0,a()(v.Z,{onClick:()=>{I.Z.reset()},style:{...T.button,border:`1px solid ${s.ZP.uiLightBorder}`,marginRight:8,fontSize:15}},void 0,a()(p.FormattedMessage,{id:"developerIntegration.confirmationModal.cancelLabel",defaultMessage:"Cancel"})),a()(Z,{onSubmit:()=>g({deleteIntegrationIfConfirmationInputMatch:!0}),isWarning:e.isDestructive||e.isWarning,confirmationMessage:e.confirmationMessage})))}function Z(e){const{onSubmit:t,confirmationMessage:i,isWarning:r}=e;return a()(v.Z,{onClick:t,style:{...T.button,background:r?s.ZP.frontPrimaryButtonBackground:s.ZP.blue,color:s.ZP.white,fontSize:15},hoveredStyle:{backgroundColor:r?s.ZP.frontPrimaryButtonBackgroundHovered:s.ZP.frontBlueButtonHoveredBackground},pressedStyle:{backgroundColor:r?s.ZP.frontPrimaryButtonBackgroundPressed:s.ZP.frontBlueButtonPressedBackground}},void 0,i)}const T={button:{padding:6,borderRadius:3,flex:1,textAlign:"center"}};var P=i(36360);function R(e){window.__c={n:"DeveloperIntegrationsContainer"};const{className:t,title:i,subtitle:r,onNavigateBack:n,navigateBackMessage:o,children:s,icon:c,sideContent:w,innerContainerStyles:x}=e,S=(0,p.useIntl)();return a()(P.Z,{title:S.formatMessage({id:"developerIntegrationsLayout.document.title",defaultMessage:"My integrations | Notion Developers"})},void 0,a()(h.Z,{className:t,style:B.scroller,type:f.Z.Y},void 0,a()(C,{}),a()("div",{className:m.rIs,style:B.topBar},void 0,a()("div",{},void 0,a()(b.Z,{href:u._j.developerPortal,external:!0},void 0,a()("img",{src:l.Z.images.integrations.notionDevsLogoGaSvg}))),a()("div",{style:{display:"flex",alignItems:"center"}},void 0,a()(b.Z,{style:{display:"flex",marginLeft:-6},href:u._j.developerPortal,external:!0},void 0,a()(_.Z,{icon:d.Z.alias,isSmall:!0},void 0,"View documentation")),a()(y.Z,{onChange:e=>{g.A1(e)}}))),a()("div",{style:{...B.innerContainer,...x}},void 0,a()("div",{style:{display:"flex",justifyContent:"space-between",marginTop:80,marginBottom:80}},void 0,a()("div",{style:{display:"flex",flexDirection:"column",width:"66%",justifyContent:"center"}},void 0,a()(v.Z,{style:{...B.button,...!n&&{display:"none"}},onClick:n},void 0,a()("div",{style:{...B.buttonContent,fontSize:20}},void 0,d.Z.historyBack(B.arrowIcon),a()("div",{style:{marginLeft:12}},void 0,o||a()(p.FormattedMessage,{id:"developerIntegrationsLayout.backButton.label",defaultMessage:"My integrations"})))),a()("div",{style:B.header},void 0,i),a()("div",{style:B.subtitle},void 0,r)),a()("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"center",flex:1}},void 0,c)),w?a()("div",{style:B.gridContainer},void 0,a()("div",{style:B.leftColumn},void 0,w),a()("div",{style:B.rightColumn},void 0,s)):s),a()("footer",{style:B.footerContainer},void 0,a()("section",{style:B.footerColophon},void 0,a()("h1",{style:B.footerLogo},void 0,a()("img",{src:l.Z.images.integrations.notionFooterLogoSvg})),a()("h6",{style:B.footerCopy},void 0,"The all-in-one workspace for your notes, tasks, wikis, and databases."),a()("h6",{style:B.footerCopy},void 0,`©${(new Date).getFullYear()} Notion Labs, Inc.`),a()(b.Z,{external:!0,href:u._j.termsAndPrivacy,style:B.footerLink},void 0,"Terms & Privacy")),a()("nav",{style:{...B.footerNav,gridColumnStart:7}},void 0,a()("h5",{style:B.footerSectionHeader},void 0,"Developers"),a()(b.Z,{external:!0,href:"https://developers.notion.com/docs",style:B.footerLink},void 0,"Guides"),a()(b.Z,{external:!0,href:"https://developers.notion.com/reference",style:B.footerLink},void 0,"API Reference"),a()(b.Z,{external:!0,href:u._j.myIntegrations,style:B.footerLink},void 0,"My integrations"),a()(b.Z,{external:!0,href:"https://developers.notion.com/page/frequently-asked-questions",style:B.footerLink},void 0,"FAQs"),a()(b.Z,{external:!0,href:u._j.developerTerms,style:B.footerLink},void 0,"Developer terms")),a()("nav",{style:B.footerNav},void 0,a()("h5",{style:B.footerSectionHeader},void 0,"Notion"),a()(b.Z,{external:!0,href:u._j.product,style:B.footerLink},void 0,"Product"),a()(b.Z,{external:!0,href:u._j.teams,style:B.footerLink},void 0,"Teams"),a()(b.Z,{external:!0,href:u._j.enterprise,style:B.footerLink},void 0,"Enterprise"),a()(b.Z,{external:!0,href:u._j.blog,style:B.footerLink},void 0,"Blog"),a()(b.Z,{external:!0,href:u._j.careers,style:B.footerLink},void 0,"Careers")),a()("nav",{style:B.footerNav},void 0,a()("h5",{style:B.footerSectionHeader},void 0,"Social"),a()(b.Z,{external:!0,href:"https://notionup.typeform.com/to/dSurQQp2Q",style:B.footerLink},void 0,"Developer newsletter"),a()(b.Z,{external:!0,href:"http://twitter.com/notionapi",style:B.footerLink},void 0,"Twitter")))))}const B={footerLink:{color:s.ZP.frontTextMedium,cursor:"pointer",textDecoration:"none",display:"block",marginBottom:4},footerColophon:{gridColumn:"auto/span 3"},footerNav:{gridColumn:"auto/span 2",marginBottom:16},footerLogo:{margin:"0 auto 20px",fontSize:0,display:"block"},footerSectionHeader:{fontFamily:c.Z.getCompositeFontFamily(o.SP).mono,fontWeight:c.Z.fontWeight.medium,margin:"0 auto 8px",marginBottom:"1.1em",fontSize:15},footerCopy:{fontSize:15,fontWeight:c.Z.fontWeight.regular,lineHeight:"1.5em",color:s.ZP.frontTextMedium,margin:"0 auto 8px",marginBottom:"1.1em"},footerContainer:{padding:"70px 30px",alignItems:"flex-start",justifyItems:"flex-start",flex:"1 0 auto",zIndex:999,width:"100%",maxWidth:1160,boxSizing:"border-box",margin:"0 auto",borderTop:`1px solid ${s.ZP.dividerColor}`,display:"grid",gridTemplateColumns:"repeat(12,1fr)",columnGap:16,gap:16},scroller:{height:"100vh",background:s.ZP.frontCreamBackground,padding:"0px 10px"},innerContainer:{margin:"auto",width:914},topBar:{maxWidth:1100,height:60,margin:"0 auto",display:"flex",alignItems:"center",marginTop:13,marginBottom:10,justifyContent:"space-between"},header:{fontWeight:c.Z.fontWeight.bold,fontFamily:c.Z.getCompositeFontFamily(o.SP).sans,fontSize:50,color:s.ZP.frontText,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},subtitle:{fontWeight:c.Z.fontWeight.regular,fontSize:24,color:s.ZP.frontTextMedium,letterSpacing:"0.015em"},button:{display:"inline-flex",color:s.ZP.frontTextMedium,borderRadius:3,padding:6,fontSize:15,width:"fit-content"},buttonContent:{display:"flex",alignItems:"center"},arrowIcon:{width:20,height:20},gridContainer:{display:"grid",gridTemplateColumns:"180px auto",paddingBottom:120,gap:60},leftColumn:{gridColumnStart:1,gridColumnEnd:2},rightColumn:{gridColumnStart:2,gridColumnEnd:3}}},15933:(e,t,i)=>{i.r(t),i.d(t,{default:()=>$});var r=i(23174),a=i.n(r),n=i(67294),o=i(480),l=i(81954),s=i(63123),d=i(41892),u=i(8848),c=i(59054),p=i(53397),g=i(77420),m=i(9844),f=i(97880),v=i(82990),b=i(63143),_=i(5366),h=i(50906),y=i(54642),w=i(43250),x=i(71776),S=i(77907),I=i(79315),M=i(97122),k=i(89728),C=i(19889),F=i(70043),Z=i(7928),T=i(8981),P=i(68216),R=i(64921),B=i(31278),D=i(10434),V=i.n(D),U=i(87279),L=i(38381),E=i(52275),A=i(78140),N=i(32163),z=i(44532),O=i(72495);function K(e){window.__c={n:"DeveloperIntegrationCardPopup"};const{integrationOrBot:t}=e,i=(0,l.VK)((()=>t.name||""),[t]),r=(0,o.O7)(),s=(0,l.VK)((()=>I.default.state.currentUserStore),[]),[d,c]=n.useState(!1),[g,m]=(0,l.AF)(L.Z);if(!s)return null;const f=(0,P.Kv)(s,{id:t.id,table:t.table});return a()(z.ZP,{popupType:z.ZP.PopupType.Popup,open:d,placementToOrigin:z.ZP.Placement.Bottom,alignmentToOrigin:z.ZP.Alignment.End,onDismiss:()=>c(!1),origin:a()(R.Z,{onClick:()=>{c(!0),h.iIv(r,{table:f.table})},style:{padding:"3px 6px",borderRadius:3}},void 0,p.Z.dots({width:18,height:18})),render:()=>a()(A.Z,{menuType:U.og.Popup},void 0,a()(N.Z,{type:N.i.Vertical,initialFocus:0,sections:[{key:"integration-card-dropdown",items:[{key:"delete-integration",action:()=>{h.DWr(r,{table:f.table}),m({open:!0,title:a()(_.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationTitle",defaultMessage:"Delete {integrationName}?",values:{integrationName:i}}),message:a()(_.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationMessage",defaultMessage:"This public integration will be deactivated and removed from all workspaces it has been added to. To confirm, type in the name of this integration."}),confirmationMessage:a()(_.FormattedMessage,{id:"developerIntegration.confirmationModal.deleteLabel",defaultMessage:"Delete"}),onConfirm:async()=>{await T.uU({environment:r,recordStore:f})},isDestructive:!0,deleteMatchText:i,deleteMatchError:a()(_.FormattedMessage,{id:"developerIntegrationCardDropdown.delete.confirmationError",defaultMessage:"Input did not match integration name."})})},render:e=>n.createElement(E.Z,V()({},e,{title:a()(_.FormattedMessage,{id:"developerIntegrationCard.dropdown.delete",defaultMessage:"Delete this integration"}),style:{color:u.ZP.frontRed}}))}],render:e=>n.createElement(O.Z,e)}]}))})}function q(e){window.__c={n:"DeveloperIntegrationCard"};const{integrationOrBot:t}=e,i=(0,o.O7)(),r=(0,_.useIntl)(),s=(0,l.VK)((()=>t.table===m.K2?t.getInfo().tagline||a()(_.FormattedMessage,{id:"developerIntegrationCard.integrationTagline.placeholder",defaultMessage:"Public integration."}):a()(_.FormattedMessage,{id:"developerIntegrationCard.botTagline.placeholder",defaultMessage:"Internal integration."})),[t]),d=(0,l.VK)((()=>t.table===m.K2?t.getInfo().icon:t.icon),[t]),u=(0,l.VK)((()=>({id:t.id,table:t.table})),[t]),c=(0,l.VK)((()=>I.default.state.currentUserStore),[]),p=(0,l.VK)((()=>{if(!c)return;if(t.created_by_id===c.id)return a()(_.FormattedMessage,{id:"developerIntegrationCard.createdByTagline.creatorIsUser",defaultMessage:"Created by you"});const e=P.U6.createChildStore(c,{table:C.KJ,id:t.created_by_id}),i=e.getModel();return e.isReady()&&i?a()(_.FormattedMessage,{id:"developerIntegrationCard.createdByTagline.placeholder",defaultMessage:"Created by {userFullDisplayName}",values:{userFullDisplayName:(0,Z.Nz)(r,i)}}):void 0}),[t,r,c]),g=(0,n.useCallback)((()=>{T.V2(i,u)}),[i,u]),f=(0,l.VK)((()=>t.name),[t]);return a()(R.Z,{style:Y.containerCard,onClick:g},void 0,a()("div",{style:Y.innerDetailsContainer},void 0,a()(B.Z,{disabled:!0,icon:d?{pointer:u,icon:d}:void 0,title:f,isEmptyPage:!1,size:48,isLarge:!0,useInvertedColors:!0}),a()("div",{style:Y.name},void 0,f),a()("div",{style:Y.creatorTagline},void 0,p),a()("div",{style:Y.typeTagline},void 0,s)),a()("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},void 0,a()(k.Z,{onClick:g,style:{...Y.blueButton,padding:8,marginLeft:-8,fontSize:15}},void 0,a()(_.FormattedMessage,{id:"developerIntegrationsList.viewIntegration.buttonText",defaultMessage:"View integration"})),a()(K,{integrationOrBot:t})))}function j(e){const{onClick:t}=e;return a()(R.Z,{onClick:t,style:{...Y.containerCard,...Y.addNewCard}},void 0,p.Z.plus({width:24,height:24,color:u.ZP.mediumIconColor}),a()("div",{style:{height:12}}),a()(_.FormattedMessage,{id:"developerIntegrationCard.placeholderCard.label",defaultMessage:"Create new integration"}))}function W(){return a()(R.Z,{style:{...Y.containerCard,boxShadow:"none",background:"rgba(0,0,0,0.02)",border:"none"}},void 0,a()("div",{style:Y.innerDetailsContainer},void 0,a()("div",{style:{...Y.placeholderGradient,opacity:.7,width:48,height:48,borderRadius:4}}),a()("div",{style:{...Y.name,...Y.placeholderGradient,opacity:.7,width:"50%",height:24}})))}const Y={containerCard:{boxShadow:F.Z.frontCardShadow,border:`1px solid ${u.ZP.blackWithAlpha(.1)}`,background:u.ZP.white,height:240,width:320,borderRadius:5,padding:24,paddingTop:28,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between"},addNewCard:{background:"transparent",boxShadow:void 0,alignItems:"center",justifyContent:"center",color:u.ZP.frontTextLight,fill:u.ZP.frontTextLight},innerDetailsContainer:{width:"100%"},name:{fontWeight:v.Z.fontWeight.semibold,fontSize:18,marginTop:12,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},creatorTagline:{lineHeight:"24px",fontSize:14,color:u.ZP.frontTextLight,maxHeight:72,overflow:"hidden"},typeTagline:{lineHeight:"24px",fontSize:14,color:u.ZP.frontTextLight,maxHeight:72,overflow:"hidden",marginTop:10},blueButton:{padding:0,background:void 0,color:u.ZP.blue,fill:u.ZP.blue},placeholderGradient:{backgroundColor:"rgba(0,0,0,0.05)"}};var H=i(22131);function $(){window.__c={n:"DeveloperIntegrationsList"};const e=(0,o.O7)(),[t,i]=n.useState(!1),[r,s]=n.useState([]),[d,u]=n.useState([]),v=(0,l.VK)((()=>I.default.state.currentUserStore),[]),C=(0,l.VK)((()=>I.default.state.currentUserRootStore),[]),F=(0,l.VK)((()=>C?C.getAdminSpaceStores():[]),[C]),[Z,T]=n.useState("all");(0,n.useEffect)((()=>{s([]),u([])}),[e.currentUser.id]);const P=(0,n.useCallback)((e=>{const{id:t,table:i}=e;i===g.cZ?u((e=>e.includes(t)?e:e.concat(t))):i===m.K2?s((e=>e.includes(t)?e:e.concat(t))):(0,f.t1)(i)}),[]),R=(0,n.useCallback)((()=>{i(!0),h.Ngp(e)}),[e]);(0,n.useEffect)((()=>{h.BI8(e)}),[e]);const[{status:B,error:D,value:V}]=(0,c.r5)((async()=>{const t=F.map((e=>e.id)),i=await y.getDeveloperBotsAndIntegrations(e,{ownedSpaceIds:t});if("success"===i.type)return i.data;if("failed"===i.type)throw i.error;return(0,f.t1)(i)}),[e,F]),U=null==V?void 0:V.integrationIds;(0,n.useEffect)((()=>{U&&s((e=>(0,b.jj)([...e,...U])))}),[U]);const L=null==V?void 0:V.botIds;(0,n.useEffect)((()=>{L&&u((e=>(0,b.jj)([...e,...L])))}),[L]);const E=(0,l.VK)((()=>{if(v){return(0,x.GU)({ids:r,table:m.K2,userStore:v}).filter((e=>e.alive))}return[]}),[v,r]),A=(0,l.VK)((()=>{if(v){return(0,x.GU)({ids:d,table:g.cZ,userStore:v}).filter((e=>e.alive))}return[]}),[v,d]),N=(0,l.VK)((()=>(0,x.cr)([...E,...A])),[E,A]),z=(0,l.VK)((()=>({all:N,internal:A,public:E}[Z])),[Z,N,A,E]);return t?a()(S.LazyDeveloperIntegrationCreateV2,{onClose:()=>i(!1),onSuccess:P}):a()(H.Z,{className:w.pg$,title:a()(_.FormattedMessage,{id:"developerIntegrationsList.title",defaultMessage:"My integrations"}),subtitle:a()(_.FormattedMessage,{id:"developerIntegrationsList.subtitle",defaultMessage:"Create, review, and edit development info and credentials."}),icon:a()(J,{}),sideContent:n.createElement(n.Fragment,null,a()(M.h,{onClick:R,styles:{marginBottom:12,width:"100%"}},void 0,p.Z.plus({width:16,height:16,fill:"white"}),a()("div",{style:{marginLeft:8}},void 0,a()(_.FormattedMessage,{id:"developerIntegrationsList.addNewButton.label",defaultMessage:"New integration"}))),a()("div",{style:{marginTop:8}},void 0,x.$Z.map((t=>a()("div",{},t,a()(k.Z,{onClick:()=>{T(t),h.EJs(e,{type:t})},isSmall:!0,style:{...X.filterButton,...t===Z&&X.selectedFilterButton}},void 0,G[t]))))))},void 0,a()(Q,{isLoading:!v||"pending"===B||"idle"===B,error:D,integrationOrBotRecords:z,onCreateNewClick:R}))}const G={all:a()(_.FormattedMessage,{id:"developerIntegrationsList.allFilter.label",defaultMessage:"View all"}),internal:a()(_.FormattedMessage,{id:"developerIntegrationsList.internalFilter.label",defaultMessage:"Internal"}),public:a()(_.FormattedMessage,{id:"developerIntegrationsList.publicFilter.label",defaultMessage:"Public"})};function J(){return a()("img",{alt:"Funky build icon",src:d.Z.images.integrations.funkyManagementIconPng,style:{height:130,width:130}})}function Q(e){window.__c={n:"CardGrid"};const{isLoading:t,error:i,integrationOrBotRecords:r,onCreateNewClick:o}=e,{status:l}=(0,s.V)({value:r,validateLoaded:e=>e.length>0});return i?a()("div",{style:X.error},void 0,i.message):a()("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridAutoRows:"auto",gap:28,minHeight:508}},void 0,"pending"===l||t?n.createElement(n.Fragment,null,a()(W,{}),a()(W,{}),a()(W,{})):n.createElement(n.Fragment,null,r.map((e=>a()(q,{integrationOrBot:e},e.id))),a()(j,{onClick:o})))}const X={filterButton:{fontSize:15,height:28,marginTop:4,color:u.ZP.frontTextLight,width:"100%"},selectedFilterButton:{color:u.ZP.frontText,fontWeight:v.Z.fontWeight.medium},error:{color:u.ZP.frontRed}}},36360:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(83355);class a extends r.Z{willMount(e){document.title=e.title}willUpdate(e){document.title=e.title}renderComponent(){return this.props.children}}a.displayName="DocumentTitle";const n=a},46978:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(23174),a=i.n(r),n=i(67294),o=i(24405);function l(e,t){let{isSelected:i}=e;window.__c={n:"RadioButtonIcon"};const{radioButtonStyle:r,dotStyle:l}=(0,o.yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:8,background:i?e.blueColor:e.whiteButtonBackground,border:i?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:i?1:0}})),[i]);return n.createElement("div",{ref:t,style:r},a()("div",{style:l}))}const s=n.forwardRef(l)},97122:(e,t,i)=>{i.d(t,{h:()=>s});var r=i(23174),a=i.n(r),n=(i(67294),i(8848)),o=i(82990),l=i(64921);function s(e){const{onClick:t,children:i,disabled:r}=e;return a()(l.Z,{onClick:t,style:{...d.button,...e.styles||{}},hoveredStyle:d.hovered,pressedStyle:d.pressed,disabled:r},void 0,i)}const d={button:{background:n.ZP.frontBlackButtonBackground,color:n.ZP.white,fill:n.ZP.white,display:"inline-flex",alignItems:"center",borderRadius:3,padding:"6px 18px",fontSize:15,height:36,fontWeight:o.Z.fontWeight.medium},hovered:{background:n.ZP.frontBlackButtonBackgroundHovered},pressed:{background:n.ZP.frontBlackButtonBackgroundPressed}}},12982:(e,t,i)=>{i.d(t,{sY:()=>S,mP:()=>M,vb:()=>k,H:()=>C,aP:()=>F,m0:()=>Z,Z6:()=>T,Xr:()=>R,tm:()=>B,Qo:()=>D,fP:()=>V,yb:()=>E,x6:()=>A,hl:()=>z,oX:()=>O,_R:()=>K,w8:()=>q,bK:()=>j,hs:()=>W});var r=i(23174),a=i.n(r),n=(i(57658),i(96486)),o=i.n(n),l=(i(67294),i(33728)),s=i(21202),d=i(90468),u=i(97880),c=i(44876),p=i(64002),g=i(5366),m=(i(95477),i(81236)),f=i(68216),v=i(91924),b=i(43348),_=i(91996),h=i(65270),y=i(84210),w=i(33929),x=i(33665);const S=(0,g.defineMessages)({missingValuesError:{id:"developerIntegrationForm.error.missingFieldRequired",defaultMessage:"{ fieldName } is required."},invalidInputError:{id:"developerIntegrationForm.error.invalidInput",defaultMessage:"{ fieldName } is invalid."},transactionGenericError:{id:"developerIntegrationAction.error.failedTransaction",defaultMessage:"Something went wrong, please try again"},basicSectionTitle:{id:"developerIntegrationForm.sectionHeader.basic",defaultMessage:"Basic Information"},secretSectionTitle:{id:"developerIntegrationForm.sectionHeader.secrets",defaultMessage:"Secrets"},capabilitiesSectionTitle:{id:"developerIntegrationForm.sectionHeader.capabilities",defaultMessage:"Capabilities"},oauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.oauthAndUri",defaultMessage:"OAuth Domain & URIs"},organizationSectionTitle:{id:"developerIntegrationForm.sectionHeader.organization",defaultMessage:"Organization Information"},externalOauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.external_oauth_setup",defaultMessage:"External Authorization Setup"},unfurlingSectionTitle:{id:"developerIntegrationForm.sectionHeader.unfurlingDomains",defaultMessage:"Unfurling Domain & Patterns"},basicPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.basic",defaultMessage:"Basic Information"},secretPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.secrets",defaultMessage:"Secrets"},capabilitiesPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.capabilities",defaultMessage:"Capabilities"},distributionPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.distribution",defaultMessage:"Distribution"},linkPreviewPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.unfurling",defaultMessage:"Link Preview"},distributionSwitcherLabel:{id:"developerIntegrationFormDistributionView.switcher.label",defaultMessage:"Do you want to make this integration public?"},unfurlingSwitcherLabel:{id:"developerIntegrationFormUnfurlingView.switcher.label",defaultMessage:"Do you want to enable link preview for this integration?"},integrationTypeLabel:{id:"developerIntegrationFormBasicView.integrationType.label",defaultMessage:"Type"},integrationTypeSubtitle:{id:"developerIntegrationFormBasicView.integrationType.subtitle",defaultMessage:"Internal integrations are installed to a specific workspace. You can make this integration public later"},nameLabel:{id:"developerIntegrationFormBasicView.name.label",defaultMessage:"Name"},nameSubtitle:{id:"developerIntegrationFormBasicView.name.subtitle",defaultMessage:"Name to identify your integration to users"},iconLabel:{id:"developerIntegrationFormBasicView.icon.label",defaultMessage:"Logo"},iconSubtitle:{id:"developerIntegrationFormBasicView.icon.subtitle",defaultMessage:"512px x 512px in PNG format is recommended"},spaceLabel:{id:"developerIntegrationFormBasicView.space.label",defaultMessage:"Associated workspace"},spaceSubtitle:{id:"developerIntegrationFormBasicView.space.subtitle",defaultMessage:"Select a workspace to install the integration to. Workspace owners will be able to manage the integration as well. You can upgrade the integration to use OAuth later"},tokenLabel:{id:"developerIntegrationFormSecretView.secret.label",defaultMessage:"Internal Integration Secret"},authorizationUrlLabel:{id:"developerIntegrationFormSecretView.integrationAuthUrl.label",defaultMessage:"Authorization URL"},clientIdLabel:{id:"developerIntegrationFormSecretView.clientId.label",defaultMessage:"OAuth client ID"},clientSecretLabel:{id:"developerIntegrationFormSecretView.clientSecret.label",defaultMessage:"OAuth client secret"},capabilitiesLabel:{id:"developerIntegrationFormCapabilitiesView.capabilities.label",defaultMessage:"Capabilities"},redirectUrisLabel:{id:"developerIntegrationFormDistributionView.redirect_uris.label",defaultMessage:"Redirect URIs"},redirectUrisBetaSubtitle:{id:"developerIntegrationFormDistributionView.redirect_uri_link_preview_beta.subtitle",defaultMessage:"If you are creating a integration with Link Preview capabilities, redirect to notion.so. Otherwise, populate this field with the URI that users will be redirected to after they complate authentication with Notion. The URI will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request"},redirectUrisSubtitle:{id:"developerIntegrationFormDistributionView.redirect_uri.subtitle",defaultMessage:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request"},websiteUrlLabel:{id:"developerIntegrationFormDistributionView.website_url.label",defaultMessage:"Website or homepage"},websiteUrlSubtitle:{id:"developerIntegrationFormDistributionView.website_url.subtitle",defaultMessage:"Used to link to your integration’s website or homepage in your integration page and authentication screens"},taglineLabel:{id:"developerIntegrationFormDistributionView.tagline.label",defaultMessage:"Tagline"},taglineSubtitle:{id:"developerIntegrationFormDistributionView.tagline.subtitle",defaultMessage:"A short description of what the integration does"},privacyPolicyUrlLabel:{id:"developerIntegrationFormDistributionView.privacy_policy_url.label",defaultMessage:"Privacy policy"},privacyPolicyUrlSubtitle:{id:"developerIntegrationFormDistributionView.privacy_policy_url.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens"},termOfUseLabel:{id:"developerIntegrationFormDistributionView.term_of_use.label",defaultMessage:"Terms of use"},termOfUseSubtitle:{id:"developerIntegrationFormDistributionView.term_of_use.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"},emailLabel:{id:"developerIntegrationFormDistributionView.email.label",defaultMessage:"Support email"},emailSubtitle:{id:"developerIntegrationFormDistributionView.email.subtitle",defaultMessage:"Used to link to your integration’s support email in your integration page and authentication screens"},developerNameLabel:{id:"developerIntegrationFormDistributionView.developer_name.label",defaultMessage:"Company name"},developerNameSubtitle:{id:"developerIntegrationFormDistributionView.developer_name.subtitle",defaultMessage:"The name of your company or organization. You may use your own name if this does not apply"},templateLabel:{id:"developerIntegrationFormDistributionView.template.label",defaultMessage:"Notion URL for optional template"},templateSubtitle:{id:"developerIntegrationFormDistributionView.template.subtitle",defaultMessage:"Use this field if you'd like to offer a user a Notion page to duplicate into their workspace during OAuth. URL must be to a public Notion page"},unfurlUrlLabel:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.label",defaultMessage:"Unfurl Callback URL"},unfurlUrlCaption:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.caption",defaultMessage:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl url preview(s) or mention(s) is deleted"},domainLabel:{id:"developerIntegrationFormUnfurlingView.domain.label",defaultMessage:"Unfurl Url Domain"},urlMatchingAndPlaceholderLabel:{id:"developerIntegrationFormUnfurlingView.urlmatching.label",defaultMessage:"URL matching and placeholder"},urlMatchingAndPlaceholderCaption:{id:"developerIntegrationFormUnfurlingView.urlmatching.caption",defaultMessage:"When users paste a URL that matches this pattern on your verified domain, they'll have the option to unfurl it as a preview. Any sample URLs are validated against provided patterns"},externalOauthAuthorizeUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.label",defaultMessage:"OAuth Authorize URL"},externalOauthAuthorizeUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.caption",defaultMessage:"Used by Notion to initiate user authorization with the integration"},externalOauthTokenUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.label",defaultMessage:"OAuth Token URL"},externalOauthTokenUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.caption",defaultMessage:"Called by Notion to retrieve an access token for the unfurl callback URL"},externalOauthScopesLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.label",defaultMessage:"OAuth Scopes"},externalOauthScopesCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.caption",defaultMessage:"Optional scopes string"},externalDeletionUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.label",defaultMessage:"Deleted Token Callback URL "},externalDeletionUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.caption",defaultMessage:"Called by Notion when a user removes your integration"},externalClientIdLabel:{id:"developerIntegrationFormUnfurlingView.externalClientId.label",defaultMessage:"OAuth Client ID"},externalClientSecretLabel:{id:"developerIntegrationFormUnfurlingView.externalClientSecret.label",defaultMessage:"OAuth Client Secret"}});function I(e){return`${o().camelCase(e)}Label`}const M=(0,u.AO)((e=>"distribution"===e||"secrets"===e||"basic"===e||"linkPreview"===e||"capabilities"===e?{true:e}:{false:e})),k={basic:{key:"basic",title:w.default.formatMessage(S.basicPageTitle),subsections:[]},secrets:{key:"secrets",title:w.default.formatMessage(S.secretPageTitle),subsections:[]},capabilities:{key:"capabilities",title:w.default.formatMessage(S.capabilitiesPageTitle),subsections:[]},distribution:{key:"distribution",title:w.default.formatMessage(S.distributionPageTitle),subsections:[{key:"organization",title:w.default.formatMessage(S.organizationSectionTitle)},{key:"oauth",title:w.default.formatMessage(S.oauthSectionTitle)}]},linkPreview:{key:"linkPreview",title:w.default.formatMessage(S.linkPreviewPageTitle),subsections:[{key:"external_oauth",title:w.default.formatMessage(S.externalOauthSectionTitle)},{key:"unfurling",title:w.default.formatMessage(S.unfurlingSectionTitle)}]}},C=(e,t)=>{const i=["basic","secrets","capabilities","distribution"];switch(t&&i.push("linkPreview"),e){case"create-bot":return["basic"];case"update-bot":case"create-guest-integration":return["basic","secrets","capabilities","distribution"];case"update-first-party-external-integration":case"update-guest-integration":default:return i}},F={type:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},capabilities:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},authorization_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},template_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},developer_name:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},unfurl_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},domain:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},url_matching_and_placeholder:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0}},external_oauth_authorize_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},external_oauth_token_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},external_oauth_scopes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},external_client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},external_client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}},external_deletion_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1}}};function Z(e){const{formData:t,setFormData:i,formStateType:r,currentFieldNames:a}=e,n=function(e){const{formData:t,formStateType:i,currentFieldNames:r}=e;return r.filter((e=>{const r=t[e].value;return F[e].requiredBy[i]&&!r}))}({formData:t,formStateType:r,currentFieldNames:a});return n.forEach((e=>{const t=I(e);i({field:e,error:w.default.formatMessage(S.missingValuesError,{fieldName:w.default.formatMessage(S[t])})})})),n}function T(e){const{formData:t,formStateType:i,templateStore:r,setFormData:n,currentFieldNames:o}=e,l=function(e){const{formData:t,formStateType:i,templateStore:r,currentFieldNames:a}=e,n=[];return a.forEach((e=>{const a=t[e].value,o=F[e].supportedBy[i],l=_.tV[e];if(o&&a&&l){const i=l({value:a,formData:t,templateStore:r});var s;i.validated||n.push({fieldName:e,errorMessages:null===(s=i.errorMessages)||void 0===s?void 0:s.map((e=>{let{descriptor:t,values:i}=e;return{descriptor:t,values:i??{}}}))})}})),n}({formData:t,formStateType:i,templateStore:r,currentFieldNames:o});return l.forEach((e=>{n({field:e.fieldName,error:e.errorMessages?e.errorMessages.map(((e,t)=>{let{descriptor:i,values:r}=e;return a()("div",{},`validation-error-${t}`,w.default.formatMessage(i,r))})):w.default.formatMessage(S.invalidInputError,{fieldName:S[I(e.fieldName)].defaultMessage})})})),l}function P(e){if(!e)return;const t={};return Object.entries(e).forEach((e=>{let[i,r]=e;r&&(t[i]=!0)})),t}function R(e){return{token:e.token.value,client_id:e.client_id.value,client_secret:e.client_secret.value,authorization_url:e.authorization_url.value,name:e.name.value,icon:e.icon.value,space:e.space.value,redirect_uris:(e.redirect_uris.value||[]).map((e=>_.FR(e))),website_url:_.FR(e.website_url.value),tagline:e.tagline.value,privacy_policy_url:_.FR(e.privacy_policy_url.value),terms_of_use_url:_.FR(e.terms_of_use_url.value),template_page_id:(0,x.K2)(e.template_url.value??"")??null,email:l.H3(e.email.value),capabilities:P(e.capabilities.value),developer_name:e.developer_name.value,unfurl_url:e.unfurl_url.value,domain:e.domain.value,url_matching_and_placeholder:e.url_matching_and_placeholder.value,external_oauth_authorize_url:_.FR(e.external_oauth_authorize_url.value),external_oauth_token_url:_.FR(e.external_oauth_token_url.value),external_client_id:e.external_client_id.value,external_client_secret:e.external_client_secret.value,external_oauth_scopes:e.external_oauth_scopes.value,external_deletion_url:_.FR(e.external_deletion_url.value)}}function B(e){const{formData:t,formStateType:i,currentFieldNames:r}=e;return r.some((e=>F[e].supportedBy[i]&&t[e].error))}const D=e=>e.flatMap((e=>e.fields)),V={read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1,read_comment:!1,insert_comment:!1,link_preview:!1,synced_database:!1};function U(e){const t={...V};return e&&Object.entries(e).forEach((e=>{let[i,r]=e;r&&(t[i]=!0)})),t}const L={value:void 0,error:void 0},E={type:L,name:L,icon:L,space:L,capabilities:L,token:L,authorization_url:L,client_secret:L,client_id:L,tagline:L,email:L,website_url:L,privacy_policy_url:L,terms_of_use_url:L,template_url:L,redirect_uris:L,developer_name:L,external_oauth_authorize_url:L,external_oauth_token_url:L,external_client_id:L,external_client_secret:L,external_oauth_scopes:L,external_deletion_url:L,unfurl_url:L,domain:L,url_matching_and_placeholder:L};function A(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}async function N(e){const{pageId:t,store:i,environment:r}=e;if(!i||!t)return;const a=f.G.createChildStore(i,{table:s.iU,id:t});return await a.load(),(0,y.ZP)({store:a,preferPublicLink:!0,getSpaceDomain:()=>{var e;return null===(e=m.Z.getPublicSpaceData(r,a.getSpaceId()))||void 0===e?void 0:e.domain},pageVisitSource:void 0})}async function z(e){const{userRootStore:t,formStoreState:i,environment:r}=e;if("create-bot"===i.type){return{token:void 0,client_id:void 0,client_secret:void 0,authorization_url:void 0,space:(t?t.getAdminSpaceStores():[])[0],developer_name:void 0,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_comment:!1,insert_comment:!1,read_user_with_email:!1,read_user_without_email:!1,link_preview:!1,synced_database:!1},unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-bot"===i.type||"create-guest-integration"===i.type){const e=i.startingRecord.value,r=t&&f.H2.createChildStore(t,{id:e.space_id,table:d.bx});return{token:i.startingRecord,client_id:void 0,client_secret:void 0,authorization_url:void 0,name:e.name,icon:e.icon,space:r,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:U(e.capabilities),developer_name:void 0,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-guest-integration"===i.type){const e=i.startingRecord.value;return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:(0,p.LH)({baseUrl:(0,v.k2)("production"),clientId:i.startingRecord.value.id,redirectUri:i.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await N({pageId:e.info.template_page_id,store:t,environment:r}),redirect_uris:e.redirect_uris,capabilities:U(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("create-third-party-external-integration"===i.type){const e=i.startingRecord.value;return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:(0,p.LH)({baseUrl:(0,v.k2)("production"),clientId:i.startingRecord.value.id,redirectUri:i.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await N({pageId:e.info.template_page_id,store:t,environment:r}),redirect_uris:void 0,capabilities:U(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:{developmentDomain:h.nZ,verifiedDomains:[],domainVerifications:[]},url_matching_and_placeholder:[h.VH],external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-third-party-external-integration"===i.type){var a,n;const e=i.startingRecord.value,o=null===(a=i.startingAuthRecord)||void 0===a?void 0:a.value,l=i.domainVerifications,s=e.info.original_url_patterns||[],d={developmentDomain:(null===(n=e.info.development_url_domains)||void 0===n?void 0:n[0])||"",verifiedDomains:e.info.original_url_domains||[],domainVerifications:l},g=s.map((t=>{var i;if(!0!==(null===(i=t.additional_types)||void 0===i?void 0:i.collection))return{name:(0,b.R)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(c.Ah),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(u.$K);return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:(0,p.LH)({baseUrl:(0,v.k2)("production"),clientId:i.startingRecord.value.id,redirectUri:i.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await N({pageId:e.info.template_page_id,store:t,environment:r}),redirect_uris:e.redirect_uris,capabilities:U(e.capabilities),developer_name:e.info.developer_name,domain:d,url_matching_and_placeholder:g,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:null==o?void 0:o.oauth_authorize_url,external_oauth_token_url:null==o?void 0:o.oauth_token_url,external_client_id:null==o?void 0:o.client_id,external_client_secret:null==o?void 0:o.client_secret,external_oauth_scopes:null==o?void 0:o.scopes,external_deletion_url:null==o?void 0:o.deletion_url}}if("update-first-party-external-integration"===i.type){var o;const e=i.startingRecord.value,t=e.info.original_url_patterns||[],r={developmentDomain:(null===(o=e.info.development_url_domains)||void 0===o?void 0:o[0])||"",verifiedDomains:e.info.original_url_domains??[],domainVerifications:[]},a=t.map((t=>{var i;if(!0!==(null===(i=t.additional_types)||void 0===i?void 0:i.collection))return{name:(0,b.R)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(c.Ah),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(u.$K);return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,authorization_url:void 0,name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:void 0,redirect_uris:e.redirect_uris,capabilities:U(e.capabilities),developer_name:e.info.developer_name,domain:r,url_matching_and_placeholder:a,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}(0,u.t1)(i)}function O(e){return"create-bot"===e||"create-guest-integration"===e||"create-third-party-external-integration"===e}function K(e){return"create-guest-integration"===e?"internal":"create-third-party-external-integration"===e?"public":void 0}function q(e){return"create-third-party-external-integration"===e}function j(e){return`developer-integration-section-header-${e}`}function W(e,t){return!("secrets"===e)&&!("distribution"===e&&"update-bot"===t)&&!("linkPreview"===e&&"update-guest-integration"===t)}},43348:(e,t,i)=>{i.d(t,{R:()=>a,X:()=>n});var r=i(5500);i(95477);function a(e){const{patternName:t,integrationId:i}=e;if((0,r.BP)({integrationId:i,env:"production"}))return t;{const e=t.indexOf("_");return e<0?"entity_item":t.slice(e+1)}}function n(e){const{patternName:t,integrationId:i}=e;return(0,r.BP)({integrationId:i,env:"production"})?t:`${i}_${t}`}},91996:(e,t,i)=>{i.d(t,{Jv:()=>b,FR:()=>x,tV:()=>M});i(57658);var r=i(33728),a=i(20270),n=i(74181),o=i(89602),l=i(97880),s=i(44876),d=i(64002),u=i(63143),c=i(36054),p=i(5366),g=i(95477),m=i(67669),f=i(33665);const v=(0,p.defineMessages)({capabilityErrorMessage:{id:"developerIntegrationsCreate.error.capabilities.invalidContent2",defaultMessage:"At least one capability must be requested."},regexPatternErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.regex.error",defaultMessage:"{value} regex pattern is invalid."},regexAttributesErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.attributes.error",defaultMessage:"{value} attributes JSON does not match request schema."},sampleUrlMissingDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlMissingDomain.error",defaultMessage:'URL "{value}" is missing a domain.'},sampleUrlDoesNotMatchProvidedDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedDomain.error",defaultMessage:'URL "{value}" does not match a provided domain.'},sampleUrlDoesNotMatchProvidedRegexes:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedRegexes.error",defaultMessage:'URL "{value}" does not match a provided regex pattern.'},templateUrlIsNotNotionPage:{id:"developerIntegrationFormValidator.templateUrl.templateUrlIsNotNotionPage.error",defaultMessage:"URL must direct to a public Notion template."},templateUrlCannotBeDuplicated:{id:"developerIntegrationFormValidator.templateUrl.templateUrlCannotBeDuplicated.error",defaultMessage:"Linked template must be public."}});function b(e){let t;try{t=JSON.parse(e)}catch(i){t=void 0}return t}function _(e){const{value:t}=e,i=d.yn(t);if(!i)return{validated:!1};return d.Qc(i).hostname?{validated:!0}:{validated:!1}}function h(e){try{return new RegExp(e),{validated:!0}}catch{return{validated:!1}}}function y(e){if((0,c.Gu)(o.$1,e))return{validated:!1};for(const t of e){const e=(0,s.GY)(t);if(!(0,a.nj)(e))return{validated:!1}}return{validated:!0}}function w(e){const{domains:t,regex:i,urls:r}=e;if(0===r.length)return[];const a=[];for(const n of r){const e=(0,s.XR)({url:n,domains:t,regex:new RegExp(i)});"invalid_url"===e.type?a.push({descriptor:v.sampleUrlMissingDomain,value:n}):"url_does_not_match_domain"===e.type?a.push({descriptor:v.sampleUrlDoesNotMatchProvidedDomain,value:n}):"url_does_not_match_regex"===e.type?a.push({descriptor:v.sampleUrlDoesNotMatchProvidedRegexes,value:n}):"success"===e.type||(0,l.t1)(e)}return a}function x(e){const t=d.yn(e);if(!t||!e)return;const i=t[t.length-1],r=e[e.length-1];return"/"===i&&"/"!==r?t.slice(0,t.length-1):t}const S={insert_comment:!0,insert_content:!0,read_comment:!0,read_content:!0,update_content:!0,link_preview:!0,synced_database:!0,read_user_with_email:!1,read_user_without_email:!1},I=(0,l.Yd)(S).filter((e=>S[e]));const M={email:function(e){const{value:t}=e,i=r.H3(t);return i?{validated:r.oH(i).valueOf()}:{validated:!1}},redirect_uris:function(e){const{value:t}=e;return{validated:t.every((e=>(0,n.mb)(g.default.domainBaseUrl,e)))}},website_url:_,privacy_policy_url:_,terms_of_use_url:_,template_url:function(e){const{value:t,templateStore:i}=e;return d.yn(t)?(0,f.K2)(t)?i&&(0,m.Oc)(i)?{validated:!0}:{validated:!1,errorMessages:[{descriptor:v.templateUrlCannotBeDuplicated}]}:{validated:!1,errorMessages:[{descriptor:v.templateUrlIsNotNotionPage}]}:{validated:!1}},capabilities:function(e){const{value:t}=e;return I.some((e=>t[e]))?{validated:!0}:{validated:!1,errorMessages:[{descriptor:v.capabilityErrorMessage}]}},unfurl_url:_,url_matching_and_placeholder:function(e){const{value:t,formData:i}=e,r=[];for(const o of t){if(h(o.regex).validated){var a;const e=w({domains:(n=null===(a=i.domain)||void 0===a?void 0:a.value,n?(0,u.jj)([...n.developmentDomain&&[n.developmentDomain],...n.domainVerifications.map((e=>{let{domain:t}=e;return t})),...n.verifiedDomains]):[]),regex:o.regex,urls:o.sampleUrls});r.push(...e)}else r.push({descriptor:v.regexPatternErrorMessage,value:o.name});y(o.attributes).validated||r.push({descriptor:v.regexAttributesErrorMessage,value:o.name})}var n;return r.length>0?{validated:!1,errorMessages:r.map((e=>{let{descriptor:t,value:i}=e;return{descriptor:t,values:{value:i}}}))}:{validated:!0}},external_oauth_authorize_url:_,external_oauth_token_url:_,external_deletion_url:_}},65270:(e,t,i)=>{i.d(t,{TG:()=>m,rn:()=>f,C:()=>v,Az:()=>b,nZ:()=>_,e_:()=>h,P4:()=>y,VH:()=>w,SV:()=>x,VR:()=>M,Hx:()=>k});i(57658);var r=i(26263),a=i(41432),n=i(20270),o=i(4615),l=i(21202),s=i(19889),d=i(70203),u=i(97880),c=i(44876),p=i(63143),g=i(68216);function m(e){return(0,p.jj)(e.flatMap((e=>{if("relation"===e.type)return e.relation.uri})).filter(u.$K))}function f(e){const{environment:t,integration:i,rootUrl:u,rootAttributes:p,relatedUrisToAttributes:m}=e,f=(0,o.ZP)(),v=t.currentUser.id,b=new r.Z({name:"developerIntegrationLabHelpers.getBlockStores"}),_=[],h={};for(const[r,a]of Object.entries(m)){const e=(0,o.ZP)();_.push({id:e,uri:r,attributes:a}),h[r]=e}const y=[{id:"rootInstanceId",original_url:u,attributes:p,related_external_object_uris_to_instance_ids:h},..._].map((e=>{const t=[];for(const i of e.attributes){const e=(0,c.GY)(i);(0,n.nj)(e)&&t.push(e)}return{...e,attributes:t}}));if("success"!==(0,c.ny)({url:u,integrations:[i],currentSpaceId:f}).type)return{error:"Sample URL does not match provided integration regex."};const w={table:l.iU,id:(0,o.ZP)(),spaceId:f};let x;for(const r of y){const e={table:l.iU,id:r.id,spaceId:f},t={...r,domain:"test"},i={id:r.id,type:a.Ti.externalObjectInstance,version:0,created_at:0,created_by_table:s.KJ,created_by_id:(0,o.ZP)(),last_edited_time:0,last_edited_by_table:s.KJ,last_edited_by_id:(0,o.ZP)(),parent_table:l.iU,parent_id:(0,o.ZP)(),space_id:f,alive:!0,domain:"",format:t};if(b.setRecord({pointer:e,userId:v},{role:"editor",value:i}),r===y[0]){const r={...i,format:{...t,attributes:void 0}};b.setRecord({pointer:w,userId:v},{role:"editor",value:r}),x=e}}if(!x)return{error:"Root external object was not defined."};const S=new g.G(t,w,{inMemoryRecordCache:b}),I=new g.G(t,x,{inMemoryRecordCache:b}),M={table:l.iU,id:(0,o.ZP)(),spaceId:f},k=new g.G(t,M,{inMemoryRecordCache:b}),C={id:M.id,type:"text",version:0,space_id:f,parent_id:(0,o.ZP)(),parent_table:l.iU,alive:!0,properties:{title:[(0,d.YC)((0,d.x3)(w.id))]}};b.setRecord({pointer:M,userId:v},{role:"editor",value:C});const F={table:l.iU,id:(0,o.ZP)(),spaceId:f},Z=new g.G(t,F,{inMemoryRecordCache:b}),T={id:F.id,type:"text",version:0,space_id:f,parent_id:(0,o.ZP)(),parent_table:l.iU,alive:!0,properties:{title:[(0,d.YC)((0,d.x3)(y[0].id))]}};return b.setRecord({pointer:F,userId:v},{role:"editor",value:T}),{emptyInstanceBlockStore:S,previewBlockStore:I,emptyInlineBlockStore:k,inlineBlockStore:Z}}const v=(0,o.ZP)(),b="https://acme.com/items/23487",_="acme.com",h="^(?<site>https\\:\\/\\/acme\\.com)\\/items\\/(?<itemNo>\\d+)$",y=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Acme Item #$<itemNo>",section:"title"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#$<itemNo>",section:"identifier"}}},{id:"site",name:"Site",type:"inline",inline:{plain_text:{value:"$<site>",section:"secondary"}}}],w={name:"item",regex:h,attributes:y,sampleUrls:[b]},x=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Feature Request: Link Previews",section:"title"}}},{id:"state",name:"State",type:"relation",relation:{uri:"acme:item_state/open",mention:{section:"primary"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#23487",section:"identifier"}}},{id:"itemIcon",name:"Item Icon",type:"inline",inline:{color:{value:{r:247,g:247,b:42},section:"entity"}}},{id:"user",name:"User",type:"relation",relation:{uri:"https://acme.com/fig-ment",extension:[{id:"title",section:"secondary"},{id:"avatar_url",section:"avatar"}]}},{id:"description",name:"Description",type:"inline",inline:{plain_text:{value:"Would love to be able to preview some Acme resources in Notion!\n Maybe an open item?",section:"body"}}},{id:"updated_at",name:"Updated At",type:"inline",inline:{datetime:{value:"2022-01-11T19:53:18.829Z",section:"secondary"}}},{id:"label",name:"Label",type:"inline",inline:{enum:{value:"🔨 Ready to Build",color:{r:100,g:100,b:100},section:"primary"}}}],S={uri:"https://acme.com/fig-ment",attributes:[{id:"title",name:"User Name",type:"inline",inline:{title:{value:"fig"}}},{id:"avatar_url",name:"Avatar URL",type:"embed",embed:{src_url:"https://avatars.githubusercontent.com/u/93556354?s=88&u=4967f0be0900684b6963a953ca7fe0ff2268746f&v=4",image:{}}}]},I={uri:"acme:item_state/open",attributes:[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Open",section:"title"}}},{id:"icon",name:"Icon",type:"embed",embed:{src_url:"/images/external_integrations/acme-icon.png",image:{section:"avatar"}}},{id:"color",name:"Color",type:"inline",inline:{color:{value:{r:235,g:64,b:52},section:"background"}}}]};function M(){const e=[S,I],t=m(x),i={};for(const r of t){const t=e.find((e=>e.uri===r));t&&(i[r]=t.attributes)}return i}function k(e){const{domain:t,regex:i,currentIntegration:r}=e,a={...r.info,original_url_domains:[t],original_url_patterns:[{name:"acme-issue",regex:i,attributes:e.attributes.map((e=>{const t=(0,c.GY)(e);if((0,n.nj)(t))return t})).filter(u.$K)}]};return{...r,info:a}}},22230:(e,t,i)=>{i.d(t,{Z:()=>c});var r=i(49085),a=i(74181),n=i(77420),o=i(9844),l=i(5500),s=i(97880),d=(i(95477),i(52507));class u extends r.default{getInitialState(){return{type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal",status:"unpublished"}}updateRecordTypeOnSwitch(e){if("update-bot"===this.state.type){if("public"!==e)return;this.setState({type:"create-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("create-guest-integration"===this.state.type){if("internal"!==e)return;this.setState({type:"update-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("update-guest-integration"===this.state.type){if("unfurling"!==e)return;this.setState({type:"create-third-party-external-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,startingAuthRecord:void 0,status:"unpublished"})}else if("create-third-party-external-integration"===this.state.type){if("public"!==e)return;this.setState({type:"update-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else"create-bot"===this.state.type||"update-third-party-external-integration"===this.state.type||"update-first-party-external-integration"===this.state.type||(0,s.t1)(this.state)}initializeNewForm(e,t,i){if(e.table===n.cZ)this.setState({type:"update-bot",startingRecord:e,recordTypeOnSubmission:"internal",status:"unpublished"});else if(e.table===o.K2)if((0,a.VM)(e.value)||(0,a.t9)(e.value))if((0,l.BP)({integrationId:e.value.id,env:"production"}))this.setState({type:"update-first-party-external-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"unfurling",status:e.value.status});else{if(!t)return;const r=i.map((e=>({type:e.verified_at?"verified":"unverified",id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,alive:e.alive})));this.setState({type:"update-third-party-external-integration",startingRecord:{table:e.table,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"unfurling",status:e.value.status,domainVerifications:r,domainVerificationStore:"update-third-party-external-integration"===this.state.type?this.state.domainVerificationStore:new d.ZP})}else"guest"===e.value.type&&this.setState({type:"update-guest-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"public",status:e.value.status});else(0,s.t1)(e)}}const c=u},38381:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(49085);class a extends r.default{getInitialState(){return{open:!1}}}const n=new a},89602:(e,t,i)=>{i.d(t,{$1:()=>Z});var r=i(14710),a=i(74487);const n=a.object({required:{r:a.lte(a.gte(a.integer(),0),255),g:a.lte(a.gte(a.integer(),0),255),b:a.lte(a.gte(a.integer(),0),255)},optional:{}}),o=a.object({required:{value:a.union([a.string(),a.nonEmpty(a.array(a.string()))])},optional:{section:a.literals(r.kE.avatar,r.kE.identifier,r.kE.primary,r.kE.secondary,r.kE.body)}}),l=a.object({required:{value:a.union([a.boolean(),a.nonEmpty(a.array(a.boolean()))])},optional:{}}),s=a.object({required:{value:a.union([a.number(),a.nonEmpty(a.array(a.number()))])},optional:{}}),d=a.object({required:{value:a.union([a.string(),a.nonEmpty(a.array(a.string()))])},optional:{color:n,section:a.literals(r.kE.primary)}}),u=a.object({required:{value:a.union([a.string(),a.tuple([a.string()])])},optional:{color:n,section:a.literal(r.kE.title)}}),c=a.object({required:{value:a.union([n,a.nonEmpty(a.array(n))])},optional:{section:a.literals(r.kE.entity,r.kE.background)}}),p=a.object({required:{value:a.union([a.dateString(),a.nonEmpty(a.array(a.dateString()))])},optional:{section:a.literals(r.kE.primary,r.kE.secondary)}}),g=a.object({required:{value:a.union([a.dateString(),a.nonEmpty(a.array(a.dateString()))])},optional:{section:a.literals(r.kE.primary,r.kE.secondary)}}),m=a.object({required:{value:a.union([a.dateString(),a.tuple([a.dateString()])])},optional:{section:a.literals(r.kE.primary,r.kE.secondary)}}),f=a.object({required:{value:a.union([a.dateString(),a.tuple([a.dateString()])])},optional:{section:a.literals(r.kE.primary,r.kE.secondary)}}),v=a.union([a.object({required:{plain_text:o},optional:{type:a.literal("plain_text")}}),a.object({required:{boolean:l},optional:{type:a.literal("boolean")}}),a.object({required:{number:s},optional:{type:a.literal("number")}}),a.object({required:{enum:d},optional:{type:a.literal("enum")}}),a.object({required:{title:u},optional:{type:a.literal("title")}}),a.object({required:{color:c},optional:{type:a.literal("color")}}),a.object({required:{date:p},optional:{type:a.literal("date")}}),a.object({required:{datetime:g},optional:{type:a.literal("datetime")}}),a.object({required:{created_datetime:m},optional:{type:a.literal("created_datetime")}}),a.object({required:{last_edited_datetime:f},optional:{type:a.literal("last_edited_datetime")}})]),b=a.object({required:{},optional:{section:a.literal(r.kE.embed)}}),_=a.object({required:{},optional:{section:a.literal(r.kE.embed)}}),h=a.object({required:{},optional:{section:a.literal(r.kE.embed)}}),y=a.object({required:{},optional:{section:a.literal(r.kE.embed)}}),w=a.object({required:{},optional:{format:a.nullable(a.literals("icon")),section:a.literals(r.kE.avatar,r.kE.entity,r.kE.embed)}}),x=a.intersection([a.object({required:{src_url:a.union([a.string(),a.nonEmpty(a.array(a.string()))])},optional:{default_height:a.number(),default_width:a.number()}}),a.union([a.object({required:{html:b},optional:{type:a.literal("html")}}),a.object({required:{pdf:_},optional:{type:a.literal("pdf")}}),a.object({required:{audio:h},optional:{type:a.literal("audio")}}),a.object({required:{video:y},optional:{type:a.literal("video")}}),a.object({required:{image:w},optional:{type:a.literal("image")}})])]),S=a.union([a.string(),a.nonEmpty(a.array(a.string()))]),I=a.object({required:{uri:S},optional:{type:a.literal("mention"),mention:a.object({required:{},optional:{section:a.literal(r.kE.primary)}}),extension:a.isNull()}}),M=a.object({required:{uri:S},optional:{type:a.literal("extension"),extension:a.nonEmpty(a.array(a.object({required:{id:a.string()},optional:{section:a.literals(r.kE.avatar,r.kE.embed,r.kE.primary,r.kE.secondary)}}))),mention:a.isNull()}}),k=a.union([I,M]),C=a.object({required:{uri:S},optional:{}}),F=a.intersection([a.object({required:{id:a.string(),name:a.string()},optional:{}}),a.union([a.object({required:{inline:v},optional:{type:a.literal("inline")}}),a.object({required:{embed:x},optional:{type:a.literal("embed")}}),a.object({required:{relation:k},optional:{type:a.literal("relation")}}),a.object({required:{people:C},optional:{type:a.literal("people")}})])]),Z=a.array(F)}}]);