"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2721],{66653:(t,e,i)=>{i.d(e,{Z:()=>M});var n=i(23174),r=i.n(n),s=i(10434),o=i.n(s),a=i(96486),d=i.n(a),l=i(67294),h=i(83355),p=i(40506),u=i(53877),c=i(84795),g=i(97880),m=i(5366),v=i(17335),y=i(80084),f=i(67950),S=i(74194),b=i(68894),x=i(58032);class D extends h.Z{constructor(){super(...arguments),this.storeTypes={store:f.Z},this.renderInput=()=>{const{device:t}=this.environment,{store:e,hideClearButton:i,focused:n,value:r,...s}=this.props,a=t.isMobile&&"relative"!==(null==r?void 0:r.type)?"date":"text",d="date"===a?S.Z.Format.Transparent:S.Z.Format.Large,h=t.isMobile?void 0:n;return l.createElement(b.ZP,o()({},s,{type:a,format:d,left:this.renderMobilePlaceholder(a),showClearButton:this.showClearButton(),focus:h,onFocus:this.handleFocus,onClearButtonClick:this.handleClear,onChange:this.handleChange,onSubmit:this.handleSubmit,onBlur:this.handleBlur,value:this.getInputValue(),disableInput:"relative"===(null==r?void 0:r.type)},this.getInputStyles()))},this.handleFocus=t=>{const{onFocus:e}=this.props,{store:i}=this.stores;i.setState({...i.state,edited:!1}),e&&e(t)},this.handleClear=()=>{const{onClearButtonClick:t,onUpdate:e}=this.props,{store:i}=this.stores;i.setState({...i.state,edited:!0,temporary:"",error:void 0});const n=this.validateCurrent();n&&e(n),i.setState({...i.state,edited:!1}),t&&t()},this.handleChange=t=>{const{device:e}=this.environment,{store:i}=this.stores;i.setState({...i.state,edited:!0,temporary:t.target.value||""}),e.isAndroid&&this.handleBlur()},this.handleSubmit=t=>{const{onUpdate:e,onSubmit:i}=this.props,{store:n}=this.stores,r=this.validateCurrent();r&&(e(r),r.error?n.setState({...n.state,edited:!1,error:r.error}):n.reset()),i&&i(t,r)},this.handleBlur=t=>{const{onUpdate:e,onBlur:i}=this.props,{store:n}=this.stores,r=this.validateCurrent();r?(e(r),r.error?n.setState({...n.state,edited:!1,error:r.error}):n.reset()):n.setState({...n.state,edited:!1}),t&&i&&i(t)},this.styles={menuItem:{marginBottom:this.environment.device.isMobile?1:8},inputWrapper:{borderRadius:3,height:28,paddingRight:this.showClearButton()?8:0,position:"relative"},inputEditRegion:{width:this.showClearButton()?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"},placeholder:{position:"absolute",left:this.environment.device.isIpad?26:12,top:this.environment.device.isIpad?void 0:"50%",transform:"translateY(-50%)"},tooltipOriginGap:-8}}didUpdate(t){const{store:e}=this.stores;d().isEqual(t.value,this.props.value)||e.reset()}renderComponent(){const t=this.styles,e=this.getError();return e?r()(x.Z,{renderTooltip:()=>e,forceVisibleState:!0,placement:x.Z.Placement.Left,render:this.renderInput,originGap:t.tooltipOriginGap}):this.renderInput()}getDateFormat(){const{device:t}=this.environment;return t.isMobile?"YYYY-MM-DD":this.props.desktopDateFormat??p.sF}renderMobilePlaceholder(t){const{placeholder:e,value:i}=this.props,n=this.styles,s=this.getThemeColors();if("date"===t&&!i)return r()("div",{style:{...n.placeholder,...s.placeholder}},void 0,e)}getInputValue(){const{device:t}=this.environment,{value:e,intl:i}=this.props,{store:n}=this.stores;if(e&&"relative"===e.type)return(0,v.x)(e);const r=e&&"date"!==e.type?u.Id(e):e;return t.isMobile?r?y.p6(r,i,this.getDateFormat()):"":n.state.temporary||n.state.edited?n.state.temporary:r?y.p6(r,i,this.getDateFormat()):""}getError(){const{store:t}=this.stores,{intl:e}=this.props;if(t.state.error)switch(t.state.error){case f.B.INVALID_DATE:return e.formatMessage({id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"});case f.B.INVALID_RANGE:return e.formatMessage({id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"});default:(0,g.t1)(t.state.error)}}validateCurrent(){const{validate:t}=this.props,e=this.parseCurrentValue();if(e)return t?t(e):e}parseCurrentValue(){const{store:t}=this.stores;if(!t.state.edited)return;if(!t.state.temporary)return{value:void 0};const e=(0,c.parseDateValueWithInputFormat)(t.state.temporary,this.environment.device.isMobile?u.Iq:this.getDateFormat(),this.props.intl);return e?{value:{type:"date",start_date:e}}:{error:f.B.INVALID_DATE}}showClearButton(){const{device:t}=this.environment,{hideClearButton:e}=this.props;return!!t.isMobile||!e}getInputStyles(){const{device:t}=this.environment,{inputStyle:e,inputOuterStyle:i,style:n}=this.props,r=this.styles;return{style:{...r.menuItem,...n,marginRight:0},inputOuterStyle:{...this.getInputBorders(),...r.inputWrapper,...i},inputStyle:{...r.inputEditRegion,...t.isMobile&&r.inputEditRegionMobile,...e}}}getInputBorders(){const{disabled:t,focused:e}=this.props,i=this.getThemeColors(),n=this.getError();if(!t)return n?i.inputError:e?i.inputFocused:i.inputDefault}getThemeColors(){return{inputDefault:{background:this.theme.inputBackground,boxShadow:this.theme.inputBoxShadow},inputFocused:{background:this.theme.inputBackground,boxShadow:this.theme.outlineBlueInputBoxShadow},inputError:{background:this.theme.inputBackground,boxShadow:this.theme.outlineRedInputBoxShadow},placeholder:{color:this.theme.lightTextColor}}}}D.displayName="DateInputMenuItem";const M=(0,m.injectIntl)(D)},41209:(t,e,i)=>{i.d(e,{Z:()=>S});var n=i(23174),r=i.n(n),s=i(10434),o=i.n(s),a=i(67294),d=i(480),l=i(76205),h=i(17335),p=i(33929),u=i(87279),c=i(52275),g=i(31945),m=i(78140),v=i(32163),y=i(44532),f=i(72495);function S(t){window.__c={n:"DateOrRangeFilterOperatorValueMenu"};const{filterValue:e,renderOrigin:i,buttonPopupStore:n}=t,s=(0,d.O7)(),S=t=>"relative"===t.filter.type&&"custom"===t.filter.value?p.default.formatMessage(h.HL[t.filter.value]):"date"===t.type?(0,h.x)(t.filter):(0,h.ip)(t.filter);return r()(g.ZP,{popupType:s.device.isMobile?y.kQ.SlideUp:y.kQ.Popup,buttonPopupStore:n,render:()=>{let i;i=s.device.isMobile?{menuType:u.og.ActionSheet}:{menuType:u.og.Popup};const d="date"===t.type?(()=>{const t=l.tO;return[...t.filter((t=>"relative"===t.type)),...t.filter((t=>"exact"===t.type))]})().map((i=>({key:"relative"===i.type?i.value:i.type,render:t=>a.createElement(c.Z,o()({},t,{title:S({type:"date",filter:i}),checkState:i.type===e.type&&(void 0===i.value||i.value===e.value)})),action:()=>{t.onUpdate(i),n.setState({open:!1})}}))):(()=>{const t=(0,l.v8)();return[...t.filter((t=>"relative"===t.type)),...t.filter((t=>"exact"===t.type))]})().map((i=>({key:(0,l.eX)(i),render:t=>a.createElement(c.Z,o()({},t,{title:S({type:"daterange",filter:i}),checkState:i.type===e.type&&(void 0===i.value||i.value===e.value)})),action:()=>{t.onUpdate(i),n.setState({open:!1})}})));return a.createElement(m.Z,i,r()(v.Z,{type:v.i.Vertical,sections:[{key:"filterOperators",render:t=>a.createElement(f.Z,o()({disableMobilePadding:!0},t)),items:d}],initialFocus:void 0}))},renderOrigin:i,style:{width:240},originGap:2,placementToOrigin:g.pO.Bottom,alignmentToOrigin:g.vR.Center,disabled:t.disabled})}},83264:(t,e,i)=>{i.d(e,{Z:()=>T});var n=i(10434),r=i.n(n),s=i(23174),o=i.n(s),a=i(67294),d=i(83355),l=i(76205),h=i(53877),p=i(42875),u=i(97880),c=i(5366),g=i(28020),m=i(33929),v=i(87279),y=i(80084),f=i(67950),S=i(41558),b=i(78140),x=i(40721),D=i(72495),M=i(64369),w=i(66653),C=i(41209),k=i(46945),E=i(14390);const R=(0,c.defineMessages)({startingMessage:{defaultMessage:"Starting",id:"search.dateRangeMenu.startingMessage"},endingMessage:{defaultMessage:"Ending",id:"search.dateRangeMenu.endingMessage"}});class I extends d.Z{constructor(){super(...arguments),this.storeTypes={store:S.Z},this.renderInputs=()=>{const{value:t,relativeRangePopupStore:e,onUpdateRelativeFilter:i}=this.props;if(e&&i){const n="type"in t?t:{type:"exact",value:void 0};return o()(C.Z,{type:"daterange",filterValue:n,onUpdate:i,renderOrigin:t=>"exact"===n.type?this.renderStartEnd(t):"relative"!==n.type||"surrounding"!==n.value&&"custom"!==n.value?void 0:this.renderRelativePicker(t,i,n),disabled:"exact"===n.type,buttonPopupStore:e})}return this.renderStartEnd()},this.renderRelativePicker=(t,e,i)=>o()("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:this.environment.device.isMobile?"wrap":void 0,marginBottom:12}},void 0,o()("div",{style:{width:"92%",marginLeft:10,marginRight:10}},void 0,o()(E.b,{onUpdate:e,filter:i}))),this.renderStartEnd=t=>{const{value:e,disabled:i,allowRelativeRangeFilter:n}=this.props,{store:s}=this.stores,d=s.getFocus(),l=this.getRangeBounds(),h="type"in e?{starting:void 0,ending:void 0}:e;return a.createElement("div",r()({},t,{style:{display:"flex",flexDirection:n&&!this.environment.device.isMobile?"row":"column",alignItems:"center",width:this.environment.device.isMobile?void 0:280}}),o()(w.Z,{disabled:i,placeholder:this.environment.device.isMobile?void 0:m.default.formatMessage(R.startingMessage),focused:"starting"===d,value:h.starting,validate:this.validateStart,onUpdate:this.handleUpdateStart,onFocus:()=>this.handleFocus("starting"),onSubmit:this.handleStartSubmit,inputElementAttributes:l?{max:l.latestValidStarting}:void 0,inputOuterStyle:this.styles.firstDateInput,textWrapperStyle:n&&!this.environment.device.isMobile?{marginRight:2}:{},desktopDateFormat:n?"YYYY/MM/DD":void 0}),o()(w.Z,{disabled:i,placeholder:this.environment.device.isMobile?void 0:m.default.formatMessage(R.endingMessage),focused:"ending"===d,value:h.ending,validate:this.validateEnd,onUpdate:this.handleUpdateEnd,onFocus:()=>this.handleFocus("ending"),onSubmit:this.handleEndSubmit,inputElementAttributes:l?{min:l.earliestValidEnding}:void 0,textWrapperStyle:n&&!this.environment.device.isMobile?{marginLeft:2}:{},desktopDateFormat:n?"YYYY/MM/DD":void 0}))},this.renderCalendar=()=>{const{device:t}=this.environment,{value:e,onUpdate:i}=this.props,{store:n}=this.stores,r=this.styles,s=this.getThemeColors(),a={...r.pickerSection,...t.isMobile&&r.pickerSectionMobile,...t.isMobile&&s.pickerSectionMobile},d="type"in e?this.convertToDateRangeFilter(e):e;return o()(D.Z,{style:r.calendarWrapper},void 0,o()("div",{style:a},void 0,o()(k.Z,{value:d,store:n,onUpdate:i,validate:this.validateField,readonly:"type"in e}),"type"in e&&o()(M.Z,{isSmall:!0,style:{marginLeft:4,marginTop:4}},void 0,o()(c.FormattedMessage,{id:"collectionFilterMenu.dateRangeFilter.relativeDateRangeFilter.description",defaultMessage:"Filter will update with the current date"}))))},this.handleFocus=t=>{const{store:e}=this.stores;e.setState({...e.state,focus:t})},this.handleUpdateStart=t=>{const{onUpdate:e}=this.props;t.error||e({value:{starting:t.value}})},this.handleUpdateEnd=t=>{const{onUpdate:e}=this.props;t.error||e({value:{ending:t.value}})},this.handleStartSubmit=(t,e)=>{const{store:i}=this.stores;e&&e.error||i.setState({...i.state,focus:"ending"})},this.handleEndSubmit=(t,e)=>{const{onDismiss:i}=this.props;e&&e.error||i&&i(t)},this.validateStart=t=>{const e=this.validateField("starting",t);return e.error?e:{value:e.value.starting}},this.validateEnd=t=>{const e=this.validateField("ending",t);return e.error?e:{value:e.value.ending}},this.validateField=(t,e)=>{const{value:i}=this.props;if("type"in i)return{value:{starting:void 0,ending:void 0}};if(e.error)return e;const n=e.value&&"date"!==e.value.type?h.Id(e.value):e.value;return this.validateRange({...i,[t]:n})},this.validateRange=t=>{if(t.starting&&t.ending){const e=h.OQ.notionDateToLuxon(t.starting);return h.OQ.notionDateToLuxon(t.ending)>=e?{value:t}:{error:f.B.INVALID_RANGE}}return{value:t}},this.getMenuProps=()=>{const{device:t}=this.environment,{onDismiss:e,title:i}=this.props;if(t.isMobile){return{menuType:v.og.Modal,title:i,right:o()(x.DoneMenuText,{}),onClickRight:e,header:this.renderInputs()}}return{menuType:v.og.Popup,onClickOutside:e}},this.styles={calendarWrapper:{display:"flex",justifyContent:"center",alignItems:"center"},pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},firstDateInput:{marginTop:2}}}renderComponent(){const{disableMenuWrap:t,hideDateInputMenuItems:e}=this.props,{device:i}=this.environment;return t?a.createElement(a.Fragment,null,!e&&this.renderInputs(),this.renderCalendar()):a.createElement(b.Z,this.getMenuProps(),!i.isMobile&&!e&&this.renderInputs(),this.renderCalendar())}convertToDateRangeFilter(t){return"custom"===t.value?this.calculateDateRangeFromCustomRelativeFilter(t.direction,t.count,t.unit):"surrounding"===t.value?this.calculateDateRangeFromSurroundingRelativeFilter(t.unit):this.convertToDateRangeFilterLegacy(t)}convertToDateRangeFilterLegacy(t){switch(t.value){case"this_week":return{starting:this.startOfWeek((0,p.r)()),ending:this.endOfWeek((0,p.r)())};case"the_past_month":return{starting:h.dj((0,p.r)()),ending:h.Lg((0,p.r)())};case"the_past_week":return{starting:h.Oo((0,p.r)()),ending:h.Lg((0,p.r)())};case"the_past_year":return{starting:h.b8((0,p.r)()),ending:h.Lg((0,p.r)())};case"the_next_month":return{starting:h.Lg((0,p.r)()),ending:h.nD((0,p.r)())};case"the_next_week":return{starting:h.Lg((0,p.r)()),ending:h.Kq((0,p.r)())};case"the_next_year":return{starting:h.Lg((0,p.r)()),ending:h.NJ((0,p.r)())};default:(0,u.t1)(t)}}calculateDateRangeFromSurroundingRelativeFilter(t){const{start:e,end:i}=(0,l.je)(t,(0,p.r)(),g.AK.state);return{starting:h.ME(e),ending:h.ME(i)}}calculateDateRangeFromCustomRelativeFilter(t,e,i){const n=(0,l.Fo)(t,e,i,(0,p.r)());switch(t){case"past":return{starting:h.ME(n),ending:h.Lg((0,p.r)())};case"future":return{starting:h.Lg((0,p.r)()),ending:h.ME(n)};default:(0,u.t1)(t)}}getRangeBounds(){const{value:t,intl:e}=this.props;if("type"in t)return;return{earliestValidEnding:t.starting&&y.p6(t.starting,e,"YYYY-MM-DD"),latestValidStarting:t.ending&&y.p6(t.ending,e,"YYYY-MM-DD")}}startOfWeek(t){return{type:"date",start_date:h.em(Date.now(),h.aN(),t).toFormat(h.Iq)}}endOfWeek(t){return{type:"date",start_date:h.gQ(Date.now(),h.aN(),t).toFormat(h.Iq)}}getThemeColors(){return{pickerSectionMobile:{background:this.theme.popoverBackground,boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,marginBottom:1}}}}I.displayName="DateRangeMenu";const T=(0,c.injectIntl)(I)},46945:(t,e,i)=>{i.d(e,{Z:()=>m});var n=i(23174),r=i.n(n),s=(i(67294),i(83355)),o=i(13991),a=i(8848),d=i(53877),l=i(42875),h=i(82990),p=i(28020),u=i(77907),c=i(13854);class g extends s.Z{constructor(){super(...arguments),this.currentDate=void 0,this.handleDayClick=t=>{const{disabled:e,store:i,dateTimeStore:n,value:r,validate:s,onUpdate:o,readonly:a}=this.props;if(e||a)return;const l=i.getFocus(),h=s(l,{value:d.OQ.toPersistedDate(t.valueOf())});if(o(h.error?h:{value:{[l]:h.value[l]}}),i.setState({...i.state,hovered:void 0}),n&&n.setState({...n.state,hovered:void 0}),h.error)return;"starting"!==l||r.ending||(i.setState({...i.state,focus:"ending"}),n&&n.setState({...n.state,focus:c.yO.ending}));const p="starting"===l?"ending":"starting";i.setState({...i.state,focus:p}),n&&n.setState({...n.state,focus:c.yO[p]})},this.handleDayMouseEnter=t=>{const{disabled:e,store:i,dateTimeStore:n,value:r,readonly:s}=this.props,o=i.getFocus(),a=d.OQ.jsDateToLuxon(t);if(!e&&!s)if("starting"===o&&r.ending&&!r.starting){d.OQ.notionDateToLuxon(r.ending)>=a&&(i.setState({...i.state,hovered:t}),n&&n.setState({...n.state,hovered:t}))}else if("ending"===o&&r.starting&&!r.ending){d.OQ.notionDateToLuxon(r.starting)<=a&&(i.setState({...i.state,hovered:t}),n&&n.setState({...n.state,hovered:t}))}},this.handleMonthChange=t=>{const{store:e,dateTimeStore:i}=this.props;e.setState({...e.state,displayMonth:d.OQ.jsDateToLuxon(t)}),i&&i.setState({...i.state,displayMonth:d.OQ.jsDateToLuxon(t)})},this.styles={monthControl:{position:"absolute",top:0,right:0,display:"flex"},selectedRange:{backgroundColor:a.ZP.blueWithAlpha(.15)},active:{backgroundColor:a.ZP.blue,color:a.ZP.white},inactive:{backgroundColor:a.ZP.blueWithAlpha(.43)},disabled:{pointerEvents:"none"},today:{fontWeight:h.Z.fontWeight.regular}}}renderComponent(){const{readonly:t}=this.props,e=this.getDisplayMonth();return r()(u.LazyDayPicker,{className:"notion-calendar-picker",defaultMonth:e,month:e,numberOfMonths:1,weekStartsOn:this.getFirstDayOfWeek(),locale:o.SP,showOutsideDays:!0,fixedWeeks:!0,onDayClick:this.handleDayClick,onDayMouseEnter:this.handleDayMouseEnter,onMonthSelected:this.handleMonthChange,modifiers:this.getModifiers(),modifiersStyles:this.getModifiersStyles(),disabled:!!t||void 0})}getCurrentDate(){if(!this.currentDate){const t=d.Lg((0,l.r)());this.currentDate=d.OQ.notionDateToJsDate(t)}return this.currentDate}getDisplayMonth(){const{value:t,store:e}=this.props;if(e.state.displayMonth)return e.state.displayMonth.toJSDate();if("starting"===e.getFocus()){if(t.starting)return d.OQ.notionDateToJsDate(t.starting);if(t.ending)return d.OQ.notionDateToJsDate(t.ending)}if("ending"===e.getFocus()){if(t.ending)return d.OQ.notionDateToJsDate(t.ending);if(t.starting)return d.OQ.notionDateToJsDate(t.starting)}return this.getCurrentDate()}getFirstDayOfWeek(){return p.AK.state}getModifiers(){const{store:t,disabled:e,value:i}=this.props,n=this.getDisabledModifier(),{hovered:r}=t.state;if(e)return{disabled:n};if(i.starting&&i.ending){const t=d.OQ.notionDateToJsDate(i.starting),e=d.OQ.notionDateToJsDate(i.ending);return{range:{from:t,to:e},start:t,end:e,disabled:n}}if(i.starting){const t=d.OQ.notionDateToJsDate(i.starting);return{range:r&&{from:t,to:r},start:t,end:r,disabled:n,selected:[t,r]}}if(i.ending){const t=d.OQ.notionDateToJsDate(i.ending);return{range:r&&{from:r,to:t},start:r,end:t,disabled:n,selected:[t,r]}}}getDisabledModifier(){const{value:t,disabled:e,store:i}=this.props;if(e)return t=>!0;const n=t=>"ending"===i.getFocus()&&{before:t},r=t=>"starting"===i.getFocus()&&{after:t};if(t.starting&&t.ending){const e=d.OQ.notionDateToJsDate(t.starting),i=d.OQ.notionDateToJsDate(t.ending);return n(e)||r(i)}if(t.starting){return n(d.OQ.notionDateToJsDate(t.starting))}if(t.ending){return r(d.OQ.notionDateToJsDate(t.ending))}return!1}getModifiersStyles(){const{store:t}=this.props,e=this.styles,i=this.getThemeColors(),n=t.getFocus(),r=e.selectedRange,s={...e.disabled,...i.disabled},o={...e.today,...i.today};return{range:r,start:"starting"===n?e.active:e.inactive,end:"ending"===n?e.active:e.inactive,disabled:s,today:o}}getThemeColors(){return{disabled:{color:this.theme.lightTextColor},today:{color:a.ZP.white}}}}g.displayName="DateRangePicker";const m=g},62045:(t,e,i)=>{i.d(e,{Z:()=>m});var n=i(10434),r=i.n(n),s=i(23174),o=i.n(s),a=i(67294),d=i(83355),l=i(8848),h=i(53397),p=i(52275),u=i(8982),c=i(63296);class g extends d.Z{constructor(){super(...arguments),this.handleClick=()=>{this.props.onClick&&this.props.onClick()}}renderComponent(){const{device:t}=this.environment,e=Boolean(this.props.title);if(t.isMobile)return o()(p.Z,{showExtensionArrow:!this.props.disabled,focused:!1,title:e?o()("div",{style:{display:"flex",alignItems:"center",...this.props.innerStyle}},void 0,this.props.title):o()("div",{style:{display:"flex",alignItems:"center",color:l.ZP.uiGray,...this.props.innerStyle}},void 0,this.props.placeholder),onClick:this.props.onClick});{const t="dark"===this.theme.mode?this.theme.lightTextColor:this.theme.mediumTextColor;return o()(u.i,{action:this.handleClick,disabled:this.props.disabled,render:i=>a.createElement(c.Z,r()({},i,{hovered:i.focused,isLarge:!0,backgroundColor:this.theme.buttonBackground,style:{marginRight:8,maxWidth:180,padding:"0 8px",...i.disabled&&{opacity:.5},...this.props.disableMargins&&{marginRight:0,maxWidth:"100%",justifyContent:"space-between"},...this.props.desktopStyle}}),o()("div",{style:{display:"flex",minWidth:0,color:e?this.theme.regularTextColor:t,...this.props.innerStyle}},void 0,e?this.props.title:this.props.placeholder),!this.props.disabled&&h.Z.chevronDown({width:10,marginLeft:6,fill:this.theme.lightIconColor}))})}}}g.displayName="QueryMenuDropdownItem";const m=g},14390:(t,e,i)=>{i.d(e,{b:()=>I});var n=i(10434),r=i.n(n),s=i(23174),o=i.n(s),a=i(67294),d=i(480),l=i(81954),h=i(24405),p=i(53397),u=i(63143),c=i(17335),g=i(33929),m=i(87279),v=i(61766),y=i(52275),f=i(31945),S=i(73063),b=i(68894),x=i(78140),D=i(32163),M=i(63296),w=i(44532),C=i(72495),k=i(64369),E=i(62045);function R(t){window.__c={n:"DateRangePickerButton"};const{humanReadableLabel:e,placeholder:i,outlineButtonStyle:n,buttonWrapperStyle:s,renderAsQueryDropdown:d,events:l,isMobile:u}=t,c=(0,h.yK)((t=>({iconStyle:{...!u&&{height:12,width:12},color:t.mediumIconColor},textStyle:{marginLeft:6,color:t.regularTextColor}})),[u]);return d?a.createElement(E.Z,r()({},l,{placeholder:i,title:o()(k.Z,{isMobile:u},void 0,e),disableMargins:!0})):a.createElement("div",r()({style:s},l),o()(M.Z,{isLarge:u,style:n},void 0,o()("div",{style:c.textStyle},void 0,e),o()(S.Z,{disableBackground:!0,icon:p.Z.chevronDown,iconStyle:c.iconStyle})))}function I(t){window.__c={n:"RelativeDateRangePicker"};const{onUpdate:e,filter:i,renderAsQueryDropdown:n}=t,s=(0,d.Fy)(),p=(0,l.qz)(void 0,v.Z),S=(0,l.qz)(void 0,v.Z),M="count"in i,k=(0,h.yK)((t=>({directionButtonStyle:{paddingLeft:4,paddingRight:4,minWidth:70,justifyContent:"space-between",...s.isMobile&&{marginTop:12,width:"100%",paddingLeft:12,marginBottom:6},...!M&&{marginRight:4}},unitButtonStyle:{paddingLeft:4,paddingRight:4,minWidth:90,justifyContent:"space-between",width:"100%",...s.isMobile&&{paddingLeft:12,marginTop:6}},directionButtonWrapperStyle:{...s.isMobile&&{width:"100%"},flexGrow:0},unitButtonWrapperStyle:{...s.isMobile&&{width:"100%"},flexGrow:2},inputStyle:{minWidth:35,height:16},inputOuterStyle:{minWidth:60,height:32},container:{display:"flex",justifyContent:"start",alignItems:"center",flexDirection:s.isMobile?"column":"row",width:"100%"},textWrapper:{marginRight:6,marginLeft:n?16:6}})),[s.isMobile,n,M]);function E(t){return"this"===t?g.default.formatMessage(c.Fc[t]):g.default.formatMessage(c.Sj[t])}function I(t,e){return e&&e>1?g.default.formatMessage(c.D0[t]):g.default.formatMessage(c.Sb[t])}const T=["day","week","month","year"].map((t=>({key:t,render:e=>a.createElement(y.Z,r()({},e,{title:I(t,M?i.count:void 0),checkState:t===i.unit})),action:n=>{e({...i,unit:t}),p.setState({open:!1})}}))),F=["past","future","this"].map((t=>({key:t,render:e=>a.createElement(y.Z,r()({},e,{checkState:"surrounding"===i.value?"this"===t:t===i.direction,title:E(t)})),action:n=>{"this"===t&&"custom"===i.value?e({type:"relative",value:"surrounding",unit:i.unit}):"this"!==t&&"surrounding"===i.value?e({type:"relative",value:"custom",count:1,direction:t,unit:i.unit}):"this"!==t&&"custom"===i.value&&e({...i,direction:t}),S.setState({open:!1})}})));return o()("div",{style:k.container},void 0,o()(f.ZP,{buttonPopupStore:S,popupType:s.isMobile?w.kQ.SlideUp:w.kQ.Popup,renderOrigin:t=>o()(R,{events:t,placeholder:c.$7.direction,renderAsQueryDropdown:n,isMobile:s.isMobile,outlineButtonStyle:k.directionButtonStyle,buttonWrapperStyle:k.directionButtonWrapperStyle,humanReadableLabel:E("direction"in i?i.direction:"this")}),render:()=>o()(x.Z,{menuType:s.isMobile?m.og.ActionSheet:m.og.Popup},void 0,o()(D.Z,{initialFocus:void 0,type:D.i.Vertical,sections:[{key:"directionOptions",render:t=>a.createElement(C.Z,r()({disableMobilePadding:!0},t)),items:F}]}))}),M&&o()(b.ZP,{type:"number",style:k.inputStyle,textWrapperStyle:k.textWrapper,inputOuterStyle:k.inputOuterStyle,min:"1",value:i.count.toString(),onChange:t=>{const n=parseInt(t.target.value);!(0,u.hj)(n)||n<1||e({...i,count:n})}}),o()(f.ZP,{buttonPopupStore:p,popupType:s.isMobile?w.kQ.SlideUp:w.kQ.Popup,renderOrigin:t=>o()(R,{events:t,placeholder:c.$7.unit,renderAsQueryDropdown:n,isMobile:s.isMobile,outlineButtonStyle:k.unitButtonStyle,buttonWrapperStyle:k.unitButtonWrapperStyle,humanReadableLabel:I(i.unit,"count"in i?i.count:void 0)}),render:()=>o()(x.Z,{menuType:s.isMobile?m.og.ActionSheet:m.og.Popup},void 0,o()(D.Z,{initialFocus:void 0,type:D.i.Vertical,sections:[{key:"unitOptions",render:t=>a.createElement(C.Z,r()({disableMobilePadding:!0},t)),items:T}]}))}))}},47082:(t,e,i)=>{i.d(e,{Z:()=>M});var n=i(10434),r=i.n(n),s=i(23174),o=i.n(s),a=i(96486),d=i.n(a),l=i(67294),h=i(83355),p=i(53397),u=i(87279),c=i(98742),g=i(34859),m=i(64113),v=i(64921),y=i(37601),f=i(74194),S=i(3386),b=i(18647),x=function(t){return t[t.Select=0]="Select",t[t.Person=1]="Person",t[t.Relation=2]="Relation",t[t.FilterValue=3]="FilterValue",t[t.Share=4]="Share",t[t.Group=5]="Group",t}(x||{});class D extends h.Z{constructor(){super(...arguments),this.storeTypes={store:m.Z},this.handleFocused=()=>{this.stores.store.setState({focused:!0})},this.handleBlurred=()=>{this.stores.store.setState({focused:!1})},this.handleKeyDown=t=>{"Backspace"===t.key&&0===this.props.value.length&&this.props.onRemoveLastToken(),this.props.onKeyDown&&this.props.onKeyDown(t)},this.handleSubmit=t=>{0===this.props.value.length&&this.props.onEmptySubmit&&this.props.onEmptySubmit(),this.props.onSubmit&&this.props.onSubmit(t)},this.handleContainerClick=()=>{var t,e;this.props.disabled||(this.input.focusInput(),null===(t=(e=this.props).onClick)||void 0===t||t.call(e))}}willMount(){(this.props.focus||this.props.focusInitial)&&this.stores.store.setState({focused:!0})}willUpdate(){void 0!==this.props.focus&&this.stores.store.setState({focused:this.props.focus})}renderComponent(){const{disabled:t}=this.props;return o()(S.Z,{capture:!t,onLeft:d().identity,onRight:d().identity,onSelectAll:d().identity,onRedo:d().identity,onUndo:d().identity,onToggleBold:d().identity,onToggleItalics:d().identity,onToggleCode:d().identity,onCut:d().identity,onCopy:d().identity,onPaste:d().identity,onKeypress:d().identity},void 0,o()(S.Z,{capture:!t&&this.props.value.length>0,onDelete:d().identity,onBackspace:d().identity},void 0,this.renderTokenInput()))}renderTokenInput(){const{right:t,showClearButton:e}=this.props;return t||e?o()(b.Z,{type:g.Z.All,style:{...this.getWrapStyle(),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick},void 0,o()("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,...this.props.inputAndTokenWrapRightStyle}},void 0,this.props.tokens,!this.props.hideInput&&this.renderInput()),o()("div",{style:{flexShrink:0}},void 0,this.renderRight())):this.environment.device.isMobile?o()("div",{style:{...this.getWrapStyle(),flexWrap:"nowrap",...this.props.style},onClick:this.handleContainerClick},void 0,o()("div",{style:{display:"flex",flexWrap:"wrap",flexGrow:1,minWidth:0,overflow:"hidden",marginRight:this.isGroup()?6:0}},void 0,this.props.tokens,!this.props.hideInput&&this.renderInput()),o()(y.Z,{show:this.stores.store.state.focused})):o()(b.Z,{type:g.Z.All,style:{...this.getWrapStyle(),...this.props.style},onClick:this.handleContainerClick},void 0,this.props.tokens,!this.props.hideInput&&this.renderInput())}renderRight(){const{showClearButton:t,right:e,onClearButtonClick:i,tokens:n,value:r}=this.props,{isMobile:s}=this.environment.device;return e||(t&&(n.length>0||r.length>0)?o()(v.Z,{onClick:i,style:{flexShrink:0,flexGrow:0,borderRadius:s?24:20,marginTop:2}},void 0,p.Z.clearInput({width:s?16:14,height:s?16:14,fill:this.theme.lightIconColor})):void 0)}renderInput(){const t=0===this.props.tokens.length;return l.createElement(f.Z,r()({disabled:this.props.disabled,format:f.Z.Format.Transparent},(0,c.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),{value:this.props.value,focus:this.props.focus,focusInitial:this.props.focusInitial,focusAfterAnimation:this.props.focusAfterAnimation,style:this.getInputDivStyle(),inputStyle:this.props.inputStyle||{height:this.environment.device.isMobile?24:this.isGroup()?20:18},size:1,ref:t=>t&&(this.input=t),type:this.props.type,placeholder:t?this.props.placeholder:"",onSubmit:this.handleSubmit,onFocus:this.handleFocused,onBlur:this.handleBlurred,textarea:this.props.textarea,autoComplete:this.props.autoComplete}))}isGroup(){return this.props.format===x.Group}getDesktopWrapStyle(){const{disabled:t}=this.props;return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",background:t?"none":this.theme.tokenInputMenuItemBackground,cursor:"text",overflow:"hidden"}}getMobileWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",flexShrink:0,minHeight:44,borderBottom:`1px solid ${this.theme.regularDividerColor}`,fontSize:16,background:this.theme.popoverBackground}}getWrapStyle(){var t,e;const{focus:i,format:n}=this.props,{WindowSizeStore:r}=this.environment;return{...this.environment.device.isMobile?{...this.getMobileWrapStyle(),paddingTop:14,paddingBottom:8,paddingLeft:(null===(t=this.context.menu)||void 0===t?void 0:t.menuType)!==u.og.Popup?r.getSafePaddingLeftCSS(16):16,paddingRight:(null===(e=this.context.menu)||void 0===e?void 0:e.menuType)!==u.og.Popup?r.getSafePaddingRightCSS(16):16,...this.props.dontShowBorderBottom&&{borderBottom:"none"}}:{...this.getDesktopWrapStyle(),...this.getStyles()[n].desktopWrapStyle},...this.props.showBorder&&{boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},...this.props.showBorder&&this.props.focus&&{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},...!this.environment.device.isMobile&&i&&this.getStyles()[this.props.format].inputDivDesktopFocusStyle}}getStyles(){const t={desktopWrapStyle:{padding:"8px 9px 1px",width:"100%",minHeight:34,fontSize:14},inputDivDesktopStyle:{margin:"0 6px 6px 0",borderTopLeftRadius:3,borderTopRightRadius:3},inputDivDesktopFocusStyle:{}};return{[x.Select]:t,[x.Person]:t,[x.Relation]:t,[x.Share]:t,[x.Group]:t,[x.FilterValue]:{desktopWrapStyle:{padding:"6px 6px 1px",boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,margin:"6px 8px 2px 8px",minHeight:30,fontSize:12,borderRadius:3},inputDivDesktopStyle:{margin:"0 6px 4px 0"},inputDivDesktopFocusStyle:{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"}}}}getInputDivStyle(){return{flexGrow:1,flexShrink:1,flexBasis:this.props.inputFullWidth?"100%":60,minWidth:60,width:"auto",lineHeight:"20px",...this.environment.device.isMobile?{margin:"0 8px 8px 0"}:this.getStyles()[this.props.format].inputDivDesktopStyle,...this.props.inputDivStyle}}}D.displayName="TokenInputMenuItem",D.contextTypes={...u.mw,...h.w},D.Format=x;const M=D},8982:(t,e,i)=>{i.d(e,{D:()=>M,i:()=>C});var n=i(10434),r=i.n(n),s=i(23174),o=i.n(s),a=i(96486),d=i.n(a),l=i(67294),h=i(73935),p=i(83355),u=i(55010),c=i(45060),g=i(49085),m=i(77897),v=i(15723),y=i(3386);const f=l.createContext(void 0);f.displayName="DynamicMenuContext";const S={x:0,y:-1},b={x:0,y:1},x={x:-1,y:0},D={x:1,y:0};class M extends p.Z{constructor(){super(...arguments),this.maxLeftRect=void 0,this.entries=new Set,this.focusedEntry=g.default.createValue(void 0),this.handleArrowUp=t=>this.handleFocusVector(S,t),this.handleArrowRight=t=>this.handleFocusVector(D,t),this.handleArrowDown=t=>this.handleFocusVector(b,t),this.handleArrowLeft=t=>this.handleFocusVector(x,t),this.handleTab=t=>this.handleFocusIndexVector(1,t),this.handleUntab=t=>this.handleFocusIndexVector(-1,t),this.handleEnter=t=>{const e=this.focusedEntry.state;e&&e.onAction(t,this)},this.handleEscape=()=>{this.focusedEntry.state?this.focusEntry(void 0,void 0):this.close()},this.handleMouseLeave=()=>{this.focusEntry(void 0,void 0)}}willUnmount(){this.entries.clear(),this.focusedEntry.reset()}getEntries(){return Array.from(this.entries)}getMountedEntriesInDomOrder(){return this.getEntries().map((t=>({entry:t,element:t.getDomElement()}))).filter((t=>{let{element:e}=t;return void 0!==e})).sort(((t,e)=>(0,u.Z)(t.element,e.element))).map((t=>{let{entry:e}=t;return e}))}registerEntry(t){this.entries.add(t)}unregisterEntry(t){const e=this.focusedEntry.state;if(this.entries.delete(t),t===e){if(this.handleFocusVector({x:-1,y:-1},void 0))return;this.focusEntry(void 0,void 0)}}onFocusEvent(t,e){this.focusEntry(t,void 0)}close(){this.props.onClose&&this.props.onClose()}focusEntry(t,e){t&&!this.entries.has(t)||t!==this.focusedEntry.state&&(t&&t.disabled||(this.focusedEntry.setState(t),this.maxLeftRect=e))}renderComponent(){const{disableKeyboard:t,children:e}=this.props;return o()(y.Z,{capture:!t,onUp:this.handleArrowUp,onDown:this.handleArrowDown,onLeft:this.handleArrowLeft,onRight:this.handleArrowRight,onEnter:this.handleEnter,onCommandEnter:this.handleEnter,onEsc:this.handleEscape,onTab:this.handleTab,onUntab:this.handleUntab},void 0,o()("div",{onMouseLeave:this.handleMouseLeave},void 0,o()(f.Provider,{value:this},void 0,e)))}handleFocusVector(t,e){const i=this.focusedEntry.state,n=this.getEntries().filter((t=>!t.disabled));if(0===n.length)return;e&&e.preventDefault&&e.preventDefault();const r=i&&i.getRect();if(!r){const e=t.x*t.y>0?1:-1;return this.handleFocusIndexVector(e,void 0)||this.handleFocusIndexVector(1,void 0)}const s=n.map((t=>({entry:t,rect:t.getRect()}))).filter((t=>void 0!==t.rect&&t.entry!==i));let o;if(0===t.x&&void 0!==this.maxLeftRect&&this.maxLeftRect.left>r.left){const e=r.top-this.maxLeftRect.top,i=new v.iL(this.maxLeftRect.left,this.maxLeftRect.top+e,this.maxLeftRect.width,r.height);i.height=r.height,this.drawDebugRect("maxLeftRect",i,"orange"),o=k(i,t,s,this.props.debug),o&&this.drawDebugRect("found from maxLeft",o.rect,"yellow")}o||(o=k(r,t,s,this.props.debug),o&&this.drawDebugRect("found from originRect",o.rect,"yellow"));const a=0!==t.x||void 0===this.maxLeftRect;if(o){const t=o.rect;return this.focusEntry(o.entry,a?t:this.maxLeftRect),o.entry}a&&(this.maxLeftRect=r)}handleFocusIndexVector(t,e){const i=this.findNextFocusableEntry(t);if(i)return e&&e.preventDefault(),this.focusEntry(i,void 0),i}findNextFocusableEntry(t){const e=this.focusedEntry.state,i=this.getMountedEntriesInDomOrder(),n=e?i.indexOf(e):-1,r=t>0?i.length:-1;for(let s=n+t;t>0?s<r:s>r;s+=t){const t=i[s];if(t&&!t.disabled)return t}}drawDebugRect(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"magenta";this.props.debug&&E(t,e,i)}}M.displayName="DynamicMenuArea";class w extends p.Z{constructor(){super(...arguments),this.domElement=null,this.elementIsFocusedStore=this.createComputedStore((()=>{const t=this.dynamicMenuContext;return!!t&&t.focusedEntry.state===this})),this.onAction=t=>{this.props.action(t,this.dynamicMenuContext)},this.handleMouseEnter=t=>{this.dynamicMenuContext&&this.dynamicMenuContext.onFocusEvent(this,t)},this.handleClick=t=>{this.props.action(t,this.dynamicMenuContext)},this.handleRef=t=>{if(!t)return void(this.domElement=null);if(t instanceof Element)return void(this.domElement=t);const e=h.findDOMNode(t);e instanceof Element?this.domElement=e:this.domElement=null}}renderComponent(){return this.props.render({onMouseEnter:this.handleMouseEnter,onClick:this.handleClick,ref:this.handleRef,focused:this.elementIsFocusedStore.state,disabled:this.disabled},this.dynamicMenuContext)}getDomElement(){return this.domElement||void 0}getRect(){if(this.domElement)return this.domElement.getBoundingClientRect()}get disabled(){return!!this.props.disabled}didMount(){const t=this.dynamicMenuContext;t&&t.registerEntry(this)}willUnmount(){const t=this.dynamicMenuContext;t&&t.unregisterEntry(this)}get dynamicMenuContext(){return this.props.dynamicMenuContext}}w.displayName="DynamicMenuElementRenderer";class C extends l.Component{constructor(){super(...arguments),this.context=void 0}render(){return l.createElement(w,r()({},this.props,{dynamicMenuContext:this.context}))}}function k(t,e,i,n){const r=(0,v.MU)(t),s=[r.top,r.left];let o=(0,v.jn)(t,-5);e.x>0&&(o=new v.iL(r.left,o.top,1/0,o.height)),e.x<0&&(o=new v.iL(0,o.top,r.right,o.height)),e.y>0&&(o=new v.iL(o.left,r.top,o.width,1/0)),e.y<0&&(o=new v.iL(o.left,0,o.width,r.bottom)),n&&E("search space",o,"magenta");const a=i.filter((t=>(0,v.kK)(o,t.rect))),l=d().sortBy(a.map((t=>{const e=(0,v.MU)(t.rect);return{entry:t,distance:m.TE(s,[e.top,e.left])}})),(t=>t.distance))[0];if(l)return l.entry}async function E(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"magenta";await(0,c.yX)(e,t,i)}C.contextType=f},67950:(t,e,i)=>{i.d(e,{B:()=>r,Z:()=>o});var n=i(49085);const r={INVALID_DATE:"Invalid date",INVALID_RANGE:"Invalid range"};class s extends n.default{getInitialState(){return{edited:!1,temporary:"",error:void 0}}}const o=s},76150:(t,e,i)=>{i.d(e,{Hv:()=>r,pd:()=>s,ZP:()=>a});var n=i(49085);let r=function(t){return t.StartDate="startDate",t.StartTime="startTime",t.EndDate="endDate",t.EndTime="endTime",t}({}),s=function(t){return t.InvalidDate="Invalid date",t.InvalidTime="Invalid time",t.InvalidRange="Invalid range",t}({});class o extends n.default{getInitialState(){return{focus:r.StartDate,inputIsFocused:!1,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}}}}const a=o},13854:(t,e,i)=>{i.d(e,{QJ:()=>s,yO:()=>o,ZP:()=>d});var n=i(49085),r=i(76150);const s={[r.Hv.StartDate]:"starting",[r.Hv.StartTime]:"starting",[r.Hv.EndDate]:"ending",[r.Hv.EndTime]:"ending"},o={starting:r.Hv.StartDate,ending:r.Hv.EndDate};class a extends n.default{getInitialState(){return{isOpen:!1,focus:r.Hv.StartDate,temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,showTime:!1}}getFocus(){return this.state.focus}toggleShowTime(){this.setState({...this.state,showTime:!this.state.showTime})}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const d=a},41558:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(49085);class r extends n.default{getInitialState(){return{isOpen:!1,focus:"starting",temporaryDateRange:{starting:void 0,ending:void 0},displayMonth:void 0,hovered:void 0,dateFilterType:"lastEditedTime"}}getFocus(){return this.state.focus}clearTemporaryDateRange(){this.setState({...this.state,temporaryDateRange:{starting:void 0,ending:void 0}})}}const s=r}}]);