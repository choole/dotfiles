"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7001],{5474:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(23174),i=n.n(o),r=n(67294),a=n(24405),s=n(53397),d=n(82990),l=n(68785),c=n(63296),u=n(64369);function g(e){window.__c={n:"MFAActionButton"};const{type:t,isActive:n,title:o,caption:g,onClick:m,isLoading:f,style:h,disabled:p}=e,[y,b]=(0,r.useState)(!1),v=(0,r.useCallback)((()=>b(!0)),[b]),k=(0,r.useCallback)((()=>b(!1)),[b]),S=(0,a.yK)((e=>({button:{width:"100%",justifyContent:"left",padding:"10px 16px",alignItems:"start",height:"auto",...h},buttonLoading:{width:"100%",height:59,...h},buttonInner:{minWidth:0},icon:{width:20,height:20,marginRight:10,fill:n||y&&!p?e.blueColor:e.regularIconColor},caption:{fontSize:d.Z.fontSize.UISmall.desktop,lineHeight:1.35,color:e.mediumTextColor,whiteSpace:"normal"}})),[n,y,p,h]),w=(0,r.useMemo)((()=>f?S.buttonLoading:S.button),[f,S.buttonLoading,S.button]),C={totp:s.Z.authenticatorCode(S.icon),sms:s.Z.textMessage(S.icon),backup_code:s.Z.collectionNumberType(S.icon)}[t];return i()(c.Z,{style:w,onClick:m,onMouseEnter:v,onMouseLeave:k,hovered:y,disabled:p,disabledFeedback:p},void 0,f?i()(l.Z,{}):r.createElement(r.Fragment,null,i()("div",{style:S.icon},void 0,C),i()("div",{style:S.buttonInner},void 0,i()(u.Z,{},void 0,o),i()("span",{style:S.caption},void 0,g))))}},88175:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(10434),i=n.n(o),r=n(23174),a=n.n(r),s=n(67294),d=n(24405),l=n(8848),c=n(53397),u=n(82990),g=n(42922),m=n(89728),f=n(1629);function h(e){let{onDismiss:t,onBack:n,disableBackButton:o,primaryAction:r,secondaryActions:l,title:u,header:h,children:y,errorMessage:b,alertMessage:v,icon:k,containerStyles:S}=e;window.__c={n:"MFAPrompt"};const w=(0,d.yK)(p,[]),C=(0,s.useMemo)((()=>a()(s.Fragment,{},void 0,a()("div",{style:n&&t?w.topIconRow:{...w.topIconRow,justifyContent:"flex-end"}},void 0,n?a()(m.Z,{isSmall:!0,style:w.backButton,onClick:n,disabled:o},void 0,c.Z.arrowLeftThick(w.backIcon)):null,t?a()(m.Z,{isSmall:!0,style:w.dismissButton,hoveredStyle:w.dismissButtonHovered,onClick:t},void 0,c.Z.closeSmall(w.dismissIcon)):null),k?a()("div",{style:w.titleIconRow},void 0,k):null)),[w,k,t,n,o]),M=(0,s.useMemo)((()=>r?a()(g.Z,{style:w.primaryActionButton,isLarge:!0,onClick:r.onClick,disabled:r.disabled,isRed:r.isRed},void 0,r.text):null),[r,w]),x=(0,s.useMemo)((()=>null==l?void 0:l.map(((e,t)=>s.createElement(f.Z,i()({},e,{key:t}))))),[l]),A=(0,s.useCallback)((e=>{e.preventDefault(),r&&!r.disabled&&r.onClick()}),[r]),I=b?a()("div",{style:w.error},void 0,b):void 0,F=v?a()("div",{style:w.alert},void 0,v):void 0;return a()("form",{style:{...w.container,...S},onSubmit:A},void 0,C,a()("h2",{style:w.title},void 0,u),a()("div",{style:w.header},void 0,h),I,F,y,M,x,a()("button",{style:w.hiddenButton}))}function p(e){return(0,d.EM)({container:{position:"relative",width:280,padding:16},topIconRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:4,width:"100%"},titleIconRow:{display:"flex",justifyContent:"center",marginBottom:15},dismissButton:{marginTop:-5,marginRight:-5,borderRadius:"50%",width:18,height:18,background:"light"===e.mode?l.FN.light.gray[75]:l.FN.dark.gray[400],display:"flex",justifyContent:"center",alignItems:"center",padding:0},dismissButtonHovered:{background:"light"===e.mode?l.FN.light.gray[100]:l.FN.dark.gray[500]},backButton:{marginTop:-5,marginLeft:-5,height:20,width:20,display:"flex",justifyContent:"center",alignItems:"center"},title:{fontWeight:u.Z.fontWeight.medium,fontSize:u.Z.fontSize.UIRegular.desktop,lineHeight:1.2,color:e.regularTextColor,marginTop:0,marginBottom:4,paddingLeft:10,paddingRight:10,textAlign:"center"},error:{color:l.ZP.red,width:"100%",marginBottom:8,textAlign:"center",fontSize:u.Z.fontSize.UISmall.desktop},alert:{color:l.ZP.red,width:"100%",marginBottom:10,textAlign:"center",fontSize:u.Z.fontSize.UISmall.desktop},header:{fontWeight:u.Z.fontWeight.regular,fontSize:u.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,textAlign:"center",marginBottom:16,lineHeight:1.35},primaryActionButton:{width:"100%",margin:"15px auto 0"},hiddenButton:{display:"none"},backIcon:{width:14,height:14,fill:e.mediumIconColor},dismissIcon:{width:12,height:12,fill:e.mediumIconColor}})}},1629:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(23174),i=n.n(o),r=n(67294),a=n(24405),s=n(97880),d=n(82990),l=n(63296),c=n(85740),u=n(8848);function g(e){let{onClick:t,disabled:n,view:o,icon:r,isRed:s,href:d,isExternal:l,saveAs:c,style:g,children:m}=e;window.__c={n:"MFAPromptLink"};const f=(0,a.yK)((e=>({link:{userSelect:"none",WebkitUserSelect:"none",transition:"background 20ms ease-in",cursor:n?void 0:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",borderRadius:4,height:"outline"===o?32:28,paddingLeft:Boolean(r)?6:"outline"===o?12:8,paddingRight:12,fontSize:14,lineHeight:1.2,color:s?u.O9.red:e.regularTextColor,..."outline"===o?{border:`1px solid ${s?e.outlineRedButtonBorder:e.outlineButtonBorder}`}:{},...g}})),[o,s,r,g,n]);return i()("a",{style:f.link,target:l?"_blank":void 0,href:d,download:c,onClick:t,rel:"noopener noreferrer"},void 0,m)}function m(e){window.__c={n:"MFAPromptSecondaryAction"};const{type:t,view:n,text:o,disabled:u,isRed:m,icon:f}=e,h=(0,a.yK)((e=>(0,a.EM)({secondaryActionBase:{width:"100%",margin:"8px auto 0",justifyContent:"center"},secondaryActionPlainButton:{width:"100%",margin:"8px auto 0",justifyContent:"center",fontWeight:d.Z.fontWeight.regular,fontSize:d.Z.fontSize.UIRegular.desktop,color:"button"===t?e.lightTextColor:e.regularTextColor},secondaryActionOutlineButton:{width:"100%",margin:"8px auto 0",justifyContent:"center",fontWeight:d.Z.fontWeight.regular,fontSize:d.Z.fontSize.UIRegular.desktop,color:"link"===t&&"outline"!==n||"plain"===n?e.lightTextColor:e.regularTextColor},secondaryActionIcon:{width:12,height:12,marginRight:4}})),[t,n]),p=m?h.secondaryActionBase:h.secondaryActionOutlineButton,y=i()(r.Fragment,{},void 0,f?f(h.secondaryActionIcon):null,o);if("button"===t){const t="outline"===n?l.Z:c.Z;return i()(t,{onClick:e.onClick,style:p,isRed:m,disabled:u},void 0,y)}if("link"===t)return i()(g,{onClick:e.onClick,view:n,isExternal:e.isExternal,icon:f,isRed:m,href:e.href,saveAs:e.saveAs,style:p,disabled:u},void 0,y);throw(0,s.t1)(t)}},73602:(e,t,n)=>{n.d(t,{y:()=>b});var o=n(10434),i=n.n(o),r=n(23174),a=n.n(r),s=n(67294),d=n(24405),l=n(53397),c=n(97880),u=n(82990),g=n(63143),m=n(5366),f=n(68785),h=n(58032),p=n(42402);const y=60*g.C0;function b(e){let{resentStatus:t,resentAt:n,onResendLink:o}=e;window.__c={n:"MFASMSVerificationResendText"};const r=(0,d.yK)(v,[]),[u,g]=(0,s.useState)((()=>Date.now()));(0,s.useEffect)((()=>{if(n+y>u){const e=setTimeout((()=>{g(Date.now())}),1e3);return()=>{clearTimeout(e)}}}),[n,g,u]);const b=Math.max(Math.floor((n+y-u)/1e3),0);if("not-resent"===t||"resent"===t&&0===b)return a()(m.FormattedMessage,{id:"mfa.sms.resend.resend.link",defaultMessage:"<resend>Resend</resend>",values:{resend:e=>a()(p.Z,{style:r.resendLink,disableUnderline:!0,onClick:o},void 0,e)}});if("resending"===t)return a()(m.FormattedMessage,{id:"mfa.sms.resend.sending.label",defaultMessage:"<sending>Sending</sending>",values:{sending:e=>s.createElement(s.Fragment,null,e,a()(f.Z,{style:r.loading}))}});if("resent"===t)return a()(h.Z,{placement:h.Z.Placement.Bottom,renderTooltip:()=>a()(m.FormattedMessage,{id:"mfa.sms.resend.resent.tooltip",defaultMessage:"You can send a code again in {resendTimeout} seconds",values:{resendTimeout:b}}),render:e=>s.createElement("span",i()({},e,{style:r.resent}),a()(m.FormattedMessage,{id:"mfa.sms.resend.resent.message",defaultMessage:"<resent>Resent</resent>",values:{resent:e=>s.createElement(s.Fragment,null,e,l.Z.checkmark(r.checkmark))}}))});throw(0,c.t1)(t)}function v(e){return(0,d.EM)({resendLink:{fontWeight:u.Z.fontWeight.medium,color:e.blueColor},checkmark:{width:12,height:12,display:"inline",verticalAlign:"middle",marginLeft:2,color:"green"},resent:{userSelect:"none",WebkitUserSelect:"none"},loading:{width:12,height:12,display:"inline",verticalAlign:"middle",marginLeft:2}})}},11898:(e,t,n)=>{n.d(t,{rN:()=>h,ZP:()=>p});var o=n(10434),i=n.n(o),r=n(23174),a=n.n(r),s=n(96486),d=n(67294),l=n(480),c=n(24405),u=n(8848),g=n(97880),m=n(71119),f=n(80935);const h=e=>e>="0"&&e<="9";function p(e){let{numInputs:t,disabled:n,value:o,format:i,onChange:r,autoFocus:l,isValidKey:g}=e;window.__c={n:"MFAVerificationSingleInput"};const m=(0,c.yK)((e=>function(e,t){return(0,c.EM)({inputRow:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},cell:{display:"flex",alignItems:"center",justifyContent:"center",width:"login"===t?40:33,height:44,paddingLeft:0,paddingRight:0,fontSize:18,background:"light"===e.mode?u.ZP.transparent:e.inputBackground,lineHeight:"20px",borderRadius:4,boxShadow:e.inputBoxShadow},focusedCell:{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},cellInput:{textAlign:"center",color:e.darkTextColor},hiddenInput:{position:"absolute",top:"0",left:"0",height:"100%",width:"100%",opacity:0}})}(e,i)),[i]),[f,h]=(0,d.useState)(void 0),p=(0,d.useMemo)((()=>(0,s.times)(t,(e=>{const n=void 0!==f&&(f.selectionStart<=e&&e<=f.selectionEnd||e===t-1&&f.selectionStart>=t),i={...m.cell,...n?m.focusedCell:{}};return a()("div",{style:i},void 0,a()("div",{style:m.cellInput},void 0,o[e]||""))}))),[t,f,m,o]),b=(0,d.useMemo)((()=>a()(y,{value:o,cursor:f,isValidCharacter:g,disabled:n,maxLength:{limit:t,method:"replaceLast"},onSetValue:r,onSetCursor:h,autoFocus:l,style:m.hiddenInput})),[t,g,r,h,l,m,o,f,n]);return a()("div",{style:{position:"relative"}},void 0,b,a()("div",{style:m.inputRow},void 0,p))}function y(e){let{isValidCharacter:t,cursor:n,value:o,maxLength:r,onSetCursor:a,onSetValue:c,style:u,autoFocus:h,disabled:p}=e;window.__c={n:"FilteredInput"};const y=(0,d.useRef)(null),b=(0,l.Fy)();(0,d.useEffect)((()=>{const e=y.current;if(e){const{selectionStart:t,selectionEnd:o}=e;if(n&&n.selectionStart!==t&&n.selectionEnd!==o){const t=document.createRange();t.selectNode(e),f.set(t,b),e.setSelectionRange(n.selectionStart,n.selectionEnd)}}}),[y,n,o,b]);const v=(0,d.useCallback)(((e,n)=>{const o=n.filter(t);if(void 0===r)return o;if(o.length<=r.limit)return o;const i=e.slice(0,r.limit),a=o.slice(0,r.limit);if("truncate"!==r.method&&(0,s.isEqual)(i,a)){if("replaceLast"===r.method){return[...o.slice(0,r.limit-1),...o.slice(-1)]}return(0,g.t1)(r.method)}return a}),[t,r]),k=(0,d.useCallback)((e=>{const{selectionStart:t,selectionEnd:n}=e.target;null!==t&&null!==n&&a({selectionStart:t,selectionEnd:n})}),[a]),S=(0,d.useCallback)((e=>{"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||k(e)}),[k]),w=(0,d.useCallback)((e=>{const{selectionStart:t,selectionEnd:n}=e.target,i=Array.from(e.target.value),s=v(o,i);if(null!==t&&null!==n){const e=Math.min(i.length,(null==r?void 0:r.limit)??1/0)-s.length;a({selectionStart:t-e,selectionEnd:n-e})}else a(void 0);c(s)}),[a,c,o,v,r]),C=(0,d.useCallback)((e=>{const t=e.clipboardData;if(t&&t.getData){const n=t.getData("text"),o=Array.from(n),i=v([],o);a({selectionStart:i.length,selectionEnd:i.length}),c(i),e.preventDefault()}}),[v,c,a]);return d.createElement("input",i()({onChange:w,onBlur:()=>{a(void 0)},onFocus:k,onPaste:C,disabled:p,autoFocus:h,type:"text",inputMode:"numeric",pattern:"[0-9]*",onKeyUp:S,ref:y,value:o.join(""),style:u},m.pf))}},49682:(e,t,n)=>{n.d(t,{Q3:()=>l,Qj:()=>s,to:()=>d});var o=n(23174),i=n.n(o),r=(n(67294),n(97880)),a=n(5366);const s={unexpectedError:i()(a.FormattedMessage,{id:"general.mfa.error.unexpectedError",defaultMessage:"Something went wrong, please try again."}),smsIncorrectCode:i()(a.FormattedMessage,{id:"general.mfa.error.incorrectSMSCode",defaultMessage:"The code didn’t work, try typing it again or resend code."}),smsInvalidCountryCode:i()(a.FormattedMessage,{id:"general.mfa.error.smsInvalidCountryCode",defaultMessage:"The country code is not valid."}),smsInvalidPhoneCode:i()(a.FormattedMessage,{id:"general.mfa.error.smsInvalidPhoneNumber",defaultMessage:"The phone number is not valid."}),smsEmptyPhoneNumber:i()(a.FormattedMessage,{id:"general.mfa.error.smsEmptyPhoneNumber",defaultMessage:"Phone number cannot be empty."}),smsAlreadyVerifiedPhoneNumber:i()(a.FormattedMessage,{id:"general.mfa.error.smsAlreadyVerifedPhoneNumber",defaultMessage:"This phone number has already been verified."}),smsUnsupportedPhoneNumber:e=>i()(a.FormattedMessage,{id:"general.mfa.error.unsupportedPhoneNumber",defaultMessage:"SMS authentication is currently not available in {countryName}. You may consider using an authenticator app as an alternative authentication method.",values:{countryName:e}}),totpIncorrectCode:i()(a.FormattedMessage,{id:"general.mfa.error.incorrectTOTPCode",defaultMessage:"The code didn’t work, try typing it again."}),totpEmptyFriendlyName:i()(a.FormattedMessage,{id:"general.mfa.error.totpEmptyFriendlyName",defaultMessage:"Authenticator name cannot be empty."}),totpDuplicateFriendlyName:i()(a.FormattedMessage,{id:"general.mfa.error.totpDuplicateFriendlyName",defaultMessage:"Authenticator name is already in use."}),totpBadFriendlyName:i()(a.FormattedMessage,{id:"general.mfa.error.totpBadFriendlyName",defaultMessage:"Authenticator name cannot be used."}),backupCodeIncorrectCode:i()(a.FormattedMessage,{id:"general.mfa.error.incorrectBackupCode",defaultMessage:"The backup code didn’t work, try typing it again or use a different one."}),incorrectPassword:i()(a.FormattedMessage,{id:"general.mfa.error.incorrectPassword",defaultMessage:"Incorrect password."})},d={passwordResentLinkSent:e=>i()(a.FormattedMessage,{id:"general.mfa.passwordResentLinkSent",defaultMessage:"A password reset link has been sent to {email}.",values:{email:e}})};function l(e){switch(e){case"totp":return s.totpIncorrectCode;case"sms":return s.smsIncorrectCode;case"backup_code":return s.backupCodeIncorrectCode;default:throw(0,r.t1)(e)}}},16010:(e,t,n)=>{n.d(t,{o:()=>c});var o=n(96486),i=n(81954),r=n(65917),a=n(2911),s=n(33954),d=n(33929),l=n(49682);class c{constructor(e,t){this.debugName=void 0,this.store=void 0,this.handleUnexpectedError=e=>{const t={...this.store.getState()};if("object"==typeof e&&null!==e){const n=e,{body:o,error:i,data:c}=n;let u;if(o)u=o;else if(c){u=c.responseBody}if(u){if("object"==typeof u&&null!==u){const e=u,{clientData:n}=e;if(n){const e=n,o=(0,s.mH)(e);if(o){const e=d.default.getIntl();this.store.setState({...t,error:e.formatMessage(o)})}}}}else r.log({level:"error",from:this.debugName,type:"handleUnexpectedError",error:(0,a.Ui)(i)}),this.store.setState({...t,error:l.Qj.unexpectedError})}else this.store.setState({...t,error:l.Qj.unexpectedError})},this.store=e,this.debugName=t}getState(){return this.store.getState()}getCurrentStep(){return this.store.getState()}useCurrentStep(){const[e]=(0,i.AF)(this.store);return e}async withStep(e,t){const n=this.store.getState();if(!(o.isArray(e)?e.includes(n.step):n.step===e))return;const i=await t(n),r=this.store.getState();return r.step===n.step?{result:i,state:r}:void 0}checkStep(e){const t=this.store.getState();if(o.isArray(e)?e.includes(t.step):t.step===e)return t}}},71119:(e,t,n)=>{n.d(t,{pf:()=>d,UG:()=>l,cR:()=>c,pu:()=>u});var o=n(97880),i=n(5366),r=n(54642),a=n(33929);const s=(0,i.defineMessages)({sms:{id:"mfaMethod.sms",defaultMessage:"SMS"},totp:{id:"mfaMethod.totp",defaultMessage:"Authenticator"},backupCode:{id:"mfaMethod.backupCode",defaultMessage:"Backup code"}}),d={"data-1p-ignore":"true","data-lpignore":"true"};function l(e){const t=["totp","sms","backup_code"];return e.sort(((e,n)=>{const o=t.indexOf(e.mfaMethod),i=t.indexOf(n.mfaMethod);return o===i?e.createdAt-n.createdAt:o-i}))}function c(e){switch(e){case"sms":return a.default.formatMessage(s.sms);case"totp":return a.default.formatMessage(s.totp);case"backup_code":return a.default.formatMessage(s.backupCode);default:(0,o.t1)(e)}}async function u(e){const t=await r.authGetLoginConfiguration(e,{});if("success"===t.type){const e=t.data,n="required"!==e.samlSignIn&&e.hasAccount&&e.passwordSignIn,o="required"===e.samlSignIn,i="required"!==e.samlSignIn&&e.hasAccount&&e.mfaOptions.length>0,r=n&&!o?i?"on":"off":"disabled",a=e.mfaOptions.find((e=>"backup_code"===e.mfaMethod));return{hasPassword:n,canConfigurePassword:!o,isSamlEnforced:o,mfaStatus:r,numMfaSettings:e.mfaOptions.length,regenerateBackupCodes:void 0===a&&"on"===r}}throw t.error}},1799:(e,t,n)=>{n.d(t,{A:()=>o,K:()=>i});const o="XXXX-XXXX";function i(e){return e.replace(/[^a-z0-9A-Z]/g,"").replace(/^(.{4})/,"$1-")}}}]);