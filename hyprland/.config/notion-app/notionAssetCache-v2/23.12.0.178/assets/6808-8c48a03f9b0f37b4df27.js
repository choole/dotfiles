"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6808],{47478:(e,t,i)=>{i.d(t,{ZP:()=>$,UV:()=>q,f4:()=>G});var n=i(10434),o=i.n(n),a=i(23174),r=i.n(a),s=(i(57658),i(67294)),d=i(24405),l=i(53397),c=i(5366),m=i(97880),u=i(47307),g=i(40394),f=i(42922),p=i(52275),v=i(53695),y=i(64369),h=i(480),S=i(81954),w=i(50906),b=i(54642),x=i(33954),M=i(52507),k=i(53953),D=i(13991),C=i(82990),F=i(74194),I=i(68785);const T=(0,c.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.addNewDomain.samlConfig.subtitle",defaultMessage:"Users with a verified domain can log in {br}using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.addNewDomain.integration.subtitle",defaultMessage:"Link preview integrations must verify {br}domains before they are published."}});const Z=function(e){let{handleAddNewDomain:t,loading:i,verificationType:n}=e;window.__c={n:"AddNewDomain"};const[a,l]=(0,s.useState)(""),u=!Boolean(a),g=(0,s.useCallback)((e=>{l(e.target.value)}),[]),p=(0,d.yK)((()=>({title:{fontFamily:C.Z.getCompositeFontFamily(D.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:C.Z.getCompositeFontFamily(D.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},input:{marginTop:22,marginBottom:14},button:{width:"100%",opacity:u?.5:1}})),[u]);let v;switch(n){case"integration":v=T.integrationSubtitle;break;case"saml_config":v=T.samlConfigSubtitle;break;default:(0,m.t1)(n)}return r()(s.Fragment,{},void 0,r()(y.Z,{style:p.title},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.addNewDomain.title",defaultMessage:"Add new domain"})),r()(y.Z,{style:p.subtitle,isMultiline:!0},void 0,s.createElement(c.FormattedMessage,o()({},v,{values:{br:r()("br",{})}}))),r()(F.Z,{value:a,style:p.input,placeholder:"notion.so",onChange:g}),r()(f.Z,{onClick:()=>t(a),style:p.button,isLarge:!0,disabled:u},void 0,i?r()(I.Z,{}):r()(c.FormattedMessage,{id:"verifyDomainModal.addNewDomain.next",defaultMessage:"Next"})))};var A=i(63296);const P=function(e){let{domain:t,isExpired:i,onClose:n}=e;window.__c={n:"InvalidDomain"};const o=(0,d.yK)((e=>({title:{fontFamily:C.Z.getCompositeFontFamily(D.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:C.Z.getCompositeFontFamily(D.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);return r()(s.Fragment,{},void 0,r()(y.Z,{style:o.title,isMultiline:!0},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.invalidDomain.title",defaultMessage:"Unable to verify {domain}",values:{domain:t}})),r()(y.Z,{style:o.subtitle,isMultiline:!0},void 0,r()(c.FormattedMessage,i?{id:"verifyDomainModal.invalidDomain.expired",defaultMessage:"The code for this domain's verification has expired."}:{id:"verifyDomainModal.invalidDomain.invalid",defaultMessage:"You are unable to verify this domain because it has already been verified by another workspace."})),r()(A.Z,{onClick:n,style:{width:"100%"}},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.invalidDomain.okay",defaultMessage:"Okay"})))},R=(0,c.defineMessages)({samlConfigSubtitle:{id:"verifyDomainModal.verifiedDomain.samlConfig.subtitle",defaultMessage:"Users are able to use this email domain to{br}log in using SAML SSO."},integrationSubtitle:{id:"verifyDomainModal.verifiedDomain.integration.subtitle",defaultMessage:"This integration can unfurl URLs containing this domain."}});const V=function(e){let{domain:t,onClose:i,verificationType:n}=e;window.__c={n:"VerifyDomain"};const a=(0,d.yK)((()=>({title:{fontFamily:C.Z.getCompositeFontFamily(D.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:C.Z.getCompositeFontFamily(D.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center",marginBottom:22}})),[]);let l;switch(n){case"saml_config":l=R.samlConfigSubtitle;break;case"integration":l=R.integrationSubtitle;break;default:(0,m.t1)(n)}return r()(s.Fragment,{},void 0,r()(y.Z,{style:a.title,isMultiline:!0},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.title",defaultMessage:"Successfully verified {domain}",values:{domain:t}})),r()(y.Z,{style:a.subtitle,isMultiline:!0},void 0,s.createElement(c.FormattedMessage,o()({},l,{values:{br:r()("br",{})}}))),r()(A.Z,{onClick:i,style:{width:"100%"}},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifiedDomain.okay",defaultMessage:"Okay"})))};var _=i(63143),E=i(43132),B=i(16402),O=i(64921);const U=function(e){let{handleVerifyDomain:t,domainVerification:i,loading:n}=e;window.__c={n:"VerifyExistingDomain"};const o=(0,h.O7)(),a=i.expiresAt-Date.now()<2*_.U6,m=(0,d.yK)((e=>({title:{fontFamily:C.Z.getCompositeFontFamily(D.SP).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},subtitle:{fontFamily:C.Z.getCompositeFontFamily(D.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"},list:{paddingInlineStart:22,margin:"24px 0"},listItem:{fontFamily:C.Z.getCompositeFontFamily(D.SP).sans,fontSize:14,fontWeight:400,lineHeight:"19px",marginBottom:12},expiresSoonText:{color:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500]},copyButton:{borderRadius:3,padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,fontFamily:C.Z.getCompositeFontFamily(D.SP).sans,fontSize:12,fontWeight:500,lineHeight:"14px"},copyIcon:{width:16,height:16,marginRight:4,fill:e.mediumIconColor},code:{width:"100%",color:e.mediumTextColor,fontFamily:C.Z.getCompositeFontFamily(D.SP).mono,fontSize:14,fontWeight:400,lineHeight:"18px"},codeContainer:{display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${e.outlineButtonBorder}`,height:32,paddingLeft:12,paddingRight:12,borderRadius:3,marginTop:4,marginBottom:8}})),[]);return r()(s.Fragment,{},void 0,r()(y.Z,{style:m.title},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.title",defaultMessage:"Verify your domain"})),r()(y.Z,{style:m.subtitle},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.subtitle",defaultMessage:"Follow these steps to finalize verification."})),r()(y.Z,{isSmall:!0,style:{marginTop:22}},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeLabel",defaultMessage:"Verification code"})),r()("div",{style:m.codeContainer},void 0,r()(y.Z,{style:m.code},void 0,`notion-domain-verification=${i.verificationCode}`),r()(O.Z,{onClick:function(){E.RD({environment:o,stringValue:`notion-domain-verification=${i.verificationCode}`,copiedMessage:E.tq.copiedLinkToClipboard})},style:m.copyButton},void 0,l.Z.copy(m.copyIcon),r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.copy",defaultMessage:"Copy"}))),r()(y.Z,{style:a?m.expiresSoonText:void 0,isSmall:!0},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verificationCodeExpiresAt",defaultMessage:"Expires on {timeLeft}",values:{timeLeft:(0,B.gs)(i.expiresAt)}})),r()("ol",{style:m.list},void 0,r()("li",{style:m.listItem},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsDNS",defaultMessage:"Navigate to the DNS record section of your domain host."})),r()("li",{style:m.listItem},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsTXT",defaultMessage:"Create a new TXT record and paste in the code above as the value."})),r()("li",{style:m.listItem},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsHangTight",defaultMessage:"Typically, this change takes only minutes to occur, however, there are cases where it may take up to 72 hours for the DNS record to propagate."})),r()("li",{style:m.listItem},void 0,r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.instructionsVerify",defaultMessage:'Click "Verify" to notify Notion to check your DNS record.'}))),r()(A.Z,{style:{width:"100%"},onClick:()=>t(i),disabled:n},void 0,n?r()(I.Z,{}):r()(c.FormattedMessage,{id:"verifyDomainModal.verifyExistingDomain.verify",defaultMessage:"Verify"})))};const W=function(e){window.__c={n:"VerifyDomainModal"};const t=(0,h.O7)(),i=(0,c.useIntl)(),n=(0,d.Fg)(),[o,a]=(0,S.AF)(e.store,M.ZP),{verificationType:l,verificationTargetId:g,refreshDomains:f}=e,p=(0,s.useCallback)((()=>{a((e=>({...e,loading:!1,modalOpen:!1})))}),[a]),v=(0,s.useCallback)((async e=>{a((e=>({...e,loading:!0})));const n="integration"===l?{type:l,integrationId:g,domain:e}:{type:l,spaceId:g,domain:e},o=await b.createDomainVerificationCode(t,n);if("success"===o.type){f(),w.G7$(t,{type:l});const e=o.data.domainVerification,i=(0,M.Hs)(e);a((e=>({...e,domainVerification:i,loading:!1})))}else u.showErrorMessage((0,x.wf)(i,o)),a((e=>({...e,loading:!1})))}),[t,a,g,f,l,i]),y=(0,s.useCallback)((async e=>{a((e=>({...e,loading:!0})));const n=await b.verifyDomain(t,{verificationId:e.id});if(w.DoK(t,{type:l}),"success"===n.type){f(),w.aOs(t,{type:l});const i={type:"verified",domain:e.domain};a((e=>({...e,domainVerification:i,loading:!1})))}else u.showErrorMessage((0,x.wf)(i,n)),a((e=>({...e,loading:!1})))}),[t,i,a,f,l]),D=(0,s.useCallback)((()=>{if(!o.domainVerification)return r()(Z,{handleAddNewDomain:v,loading:o.loading,verificationType:l});switch(o.domainVerification.type){case"invalid":return r()(P,{domain:o.domainVerification.domain,isExpired:Date.now()>o.domainVerification.expiresAt,onClose:p});case"unverified":return r()(U,{handleVerifyDomain:y,domainVerification:o.domainVerification,loading:o.loading});case"verified":return r()(V,{domain:o.domainVerification.domain,onClose:p,verificationType:l});default:(0,m.t1)(o.domainVerification)}}),[o.domainVerification,o.loading,y,v,p,l]);return r()(k.Z,{open:o.modalOpen,preventHideChildrenWhileOpening:!0,onDismiss:p,render:()=>r()("div",{style:{background:n.popoverBackground,width:410,padding:24,borderRadius:3}},void 0,D())})};var z=i(5478);const H=[{id:"domain",headerTitle:r()(c.FormattedMessage,{id:"domainVerificationTable.table.header.domain",defaultMessage:"Domain"}),renderCell:e=>r()(y.Z,{},void 0,e.domain),widthData:{width:100},sortable:!1},{id:"status",headerTitle:r()(c.FormattedMessage,{id:"domainVerificationTable.table.header.status",defaultMessage:"Status"}),renderCell:e=>r()(Y,{status:e.status}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:null,renderCell:e=>r()(j,{onShowDetails:e.onShowDetails,onRemove:e.onRemove}),widthData:{width:20},sortable:!1}],L=(0,c.defineMessages)({verifiedSAMLWarning:{defaultMessage:"Deleting this domain will prevent others with this email from logging in using SAML SSO.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.description"},verifiedIntegrationsWarning:{defaultMessage:"Deleting this domain will prevent integrations from unfurling urls that contain this domain.",id:"domainVerificationInput.myIntegrations.emailDomainsSection.removeDomain.description"},unverifiedDomainWarning:{defaultMessage:"Deleting this domain will restart its verification process. A new verification code will be generated for this domain in the next verification attempt.",id:"domainVerificationInput.securitySAMLSettings.emailDomainsSection.removeDomain.pending.description"}}),K={fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center",marginBottom:8},N={fontSize:14,fontWeight:400,lineHeight:"19px",textAlign:"center"};function Y(e){let{status:t}=e;window.__c={n:"VerificationToken"};const i=(0,d.yK)((e=>{const i={[z.YF.Success]:e.statusTokenBackground.green,[z.YF.Pending]:e.statusTokenBackground.yellow,[z.YF.Failure]:e.statusTokenBackground.red},n={[z.YF.Success]:e.statusTokenIndicator.green,[z.YF.Pending]:e.statusTokenIndicator.yellow,[z.YF.Failure]:e.statusTokenIndicator.red},o={[z.YF.Success]:e.statusTokenText.green,[z.YF.Pending]:e.statusTokenText.yellow,[z.YF.Failure]:e.statusTokenText.red};return{container:{background:i[t],color:o[t],display:"flex",justifyContent:"center",alignItems:"center",gap:6,borderRadius:18,height:20,paddingLeft:7,paddingRight:9},dot:{background:n[t],width:10,height:10,borderRadius:"100%"}}}),[t]);return r()("div",{style:i.container},void 0,r()("div",{style:i.dot}),function(e){switch(e){case z.YF.Success:return r()(c.FormattedMessage,{defaultMessage:"Verified",id:"domainVerificationInput.emailDomainsSection.statusToken.verified"});case z.YF.Pending:return r()(c.FormattedMessage,{defaultMessage:"Pending",id:"domainVerificationInput.emailDomainsSection.statusToken.pending"});case z.YF.Failure:return r()(c.FormattedMessage,{defaultMessage:"Failed",id:"domainVerificationInput.emailDomainsSection.statusToken.failed"});default:(0,m.t1)(e)}}(t))}function j(e){let{onShowDetails:t,onRemove:i}=e;window.__c={n:"DropdownMenu"};const n=(0,d.yK)((e=>({primaryIcon:{width:14,height:14,color:e.mediumIconColor,fill:"currentColor"},menuItem:{width:250},menuIcon:{width:14,height:14,color:e.regularIconColor,fill:"currentColor"}})),[]),a=[];return t&&a.push({key:"details",action:()=>t(),render:e=>s.createElement(p.Z,o()({},e,{style:n.menuItem,focused:!1,icon:l.Z.info(n.menuIcon),title:r()(c.FormattedMessage,{defaultMessage:"View details",id:"securitySAMLSettings.emailDomainsSection.details"}),caption:r()(c.FormattedMessage,{defaultMessage:"See more information about the state of this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.detailsCaption"}),shouldWrapCaption:!0}))}),i&&a.push({key:"remove",action:()=>i(),render:e=>s.createElement(p.Z,o()({},e,{style:n.menuItem,focused:!1,icon:l.Z.trash(n.menuIcon),title:r()(c.FormattedMessage,{defaultMessage:"Remove domain",id:"securitySAMLSettings.emailDomainsSection.remove"}),caption:r()(c.FormattedMessage,{defaultMessage:"Delete this domain verification record.",id:"securitySAMLSettings.emailDomainsSection.removeCaption"}),shouldWrapCaption:!0}))}),0===a.length?null:r()(v.N,{hideDropdownIcon:!0,title:l.Z.dots(n.primaryIcon),items:a})}function G(e){return{domain:e,status:z.YF.Success,data:{type:"verified",domain:e}}}function q(e){return Date.now()>e.expiresAt||Boolean(e.invalidatedAt)?{domain:e.domain,status:z.YF.Failure,data:{type:"invalid",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}:{domain:e.domain,status:z.YF.Pending,data:{type:"unverified",id:e.id,domain:e.domain,verificationCode:e.verificationCode,createdAt:e.createdAt,expiresAt:e.expiresAt,invalidatedAt:e.invalidatedAt}}}const $=function(e){window.__c={n:"DomainVerificationTable"};const{disabled:t,domains:i,domainVerificationStore:n,verificationType:o,verificationTargetId:a,refreshDomains:l,onRemoveDomain:p,onClickAddDomain:v,renderOverrideAddDomainButton:h}=e,S=(0,d.yK)((e=>(0,g.b)({columnRenderInfo:H,theme:e,containerMarginTop:0})),[]);function w(){t||(v&&v(),n.setState({domainVerification:void 0,loading:!1,modalOpen:!0}))}const b=i.map((e=>{let{domain:i,status:a,data:d}=e;return{id:"verified"===d.type?i:d.id,isClickable:!1,domain:i,status:a,onShowDetails:t?void 0:()=>function(e){t||n.setState({domainVerification:e,loading:!1,modalOpen:!0})}(d),onRemove:t?void 0:()=>async function(e,t){let i;if(t===z.YF.Failure)return void p(e);t===z.YF.Pending?i=L.unverifiedDomainWarning:t===z.YF.Success?i="saml_config"===o?L.verifiedSAMLWarning:L.verifiedIntegrationsWarning:(0,m.t1)(t),await u.confirmUserAction({message:r()("div",{style:K},void 0,r()(c.FormattedMessage,{defaultMessage:"Are you sure you want to delete this domain?",id:"domainVerificationInput.emailDomainsSection.removeDomain.message"})),description:r()("div",{style:N},void 0,s.createElement(c.FormattedMessage,i)),acceptLabel:r()(c.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.accept",defaultMessage:"Delete domain"}),cancelLabel:r()(c.FormattedMessage,{id:"domainVerificationInput.emailDomainsSection.removeDomain.cancel",defaultMessage:"Cancel"})})&&p(e)}(d,a)}}));return r()(s.Fragment,{},void 0,h?h(w):r()(f.Z,{isLarge:!0,disabled:t,onClick:w,style:{margin:"4px 0px 16px",width:"fit-content"}},void 0,r()(c.FormattedMessage,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})),r()(g.D,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:H,rows:b,styles:S,renderNoRowsComponent:()=>r()(y.Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"}},void 0,r()(c.FormattedMessage,{id:"securitySAMLSettings.emailDomainsSection.emptyTable",defaultMessage:"No domains configured."}))}),r()(W,{store:n,verificationTargetId:a,verificationType:o,refreshDomains:l}))}},27830:(e,t,i)=>{i.d(t,{s:()=>le,D:()=>pe});var n=i(10434),o=i.n(n),a=i(23174),r=i.n(a),s=(i(57658),i(96486)),d=i.n(s),l=i(67294),c=i(1302),m=i(480),u=i(81954),g=i(24405),f=i(15145),p=i(1800),v=i(7057),y=i(78601),h=i(66673),S=i(53397),w=i(64572),b=i(76725),x=i(51859),M=i(21202),k=i(70279),D=i(70203),C=i(44805),F=i(82990),I=i(44876),T=i(5366),Z=i(43132),A=i(45990),P=i(993),R=i(25103),V=i(12359),_=i(761),E=i(95477),B=i(17731),O=i(73744),U=i(41232),W=i(6398),z=i(88804),H=i(25464),L=i(15723),K=i(79315),N=i(82484),Y=i(96049),j=i(42653),G=i(68216),q=i(48588),$=i(93405),X=i(64921),J=i(31945),Q=i(51077),ee=i(73063),te=i(71669),ie=i(44532),ne=i(76798),oe=i(27186),ae=i(40662),re=i(69255),se=i(25735),de=i(29551);function le(e){window.__c={n:"HoverPreviewOverlay"};const t=(0,u.Kw)(Y.Z,{debugName:"HoverPreviewOverlay"}),{state:i,pinPopup:n,unpinPopup:o,hasBeenHovering:a,isPinned:s}=function(){const[e]=(0,u.AF)(q.Z),t=(0,h.Kt)(e,400,Object.is),[i,n]=(0,l.useState)(void 0),o=i||t,a=(0,l.useCallback)((()=>n(o)),[o]),r=(0,l.useCallback)((()=>{n(void 0)}),[]);return{state:o,pinPopup:a,unpinPopup:r,hasBeenHovering:e&&e===o,isPinned:Boolean(i)}}(),d=function(e){const t=(0,m.O7)();return(0,u.VK)((()=>!!e&&(0,z.E)(t,e.store)),[e,t])}(i),c=(0,l.useMemo)((()=>Boolean(i&&function(e,t){return t&&(e.annotations.some(D.j0)||e.annotations.some(D.nS))}(i,d))),[i,d]),g=!!c||Boolean(!t&&a),f=(0,l.useMemo)((()=>i&&i.token.node.getBoundingClientRect()),[i]),[,p]=(0,u.AF)(j.Z);(0,l.useEffect)((()=>(p({isPinned:s}),()=>p({isPinned:!1}))),[s,p]);const v=!(null!=i&&i.annotations.some(D.nS));return r()(ie.ZP,{disableMouseCapture:!0,preventCaptureEsc:!0,preventPointerEvents:!c,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:ie.ZP.PopupType.Popup,open:g,originRect:f,originGap:8,alignmentToOrigin:ie.ZP.Alignment.Start,placementToOrigin:ie.ZP.Placement.Bottom,useLightBoxShadow:v,render:()=>i&&r()("div",{onMouseEnter:n,onMouseLeave:o},void 0,r()(ce,{state:i,isHoveredTokenEditable:d,onDismiss:o}))})}function ce(e){window.__c={n:"HoverPreviewOverlayRenderer"},(0,l.useEffect)((()=>{const e=d().throttle(R.l,200,{leading:!0});return O.lj(window,"scroll",e,!0),()=>O.ZV(window,"scroll",e,!0)}),[]);const t=(0,m.Fy)(),i=(0,u.VK)((()=>{const{currentSpaceStore:e}=K.default.state;return e?e.getPermissionGroups():[]}),[]),n=(0,g.yK)((e=>({noMembersInGroupStyle:{fontSize:F.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]),a=e.state.annotations,s=a.find(D.j0),c=a.find(D.fp),f=a.find(D._b),p=a.find(D.aq),v=D.fr(a);if(s&&e.state.store.table!==k.x_)return l.createElement(me,o()({},e,{state:{...e.state,annotation:s}}));if(c)return l.createElement(ue,o()({},e,{state:{...e.state,annotation:c}}));if(f){const e=D.kx(f);if(e){const t=e.groupId,o=i.find((e=>e.id===t));if(o)return r()(se.Y,{group:o,limit:10,color:"white_background",trackHover:!0,noMembersMessage:r()(de.gq,{style:n.noMembersInGroupStyle},void 0,r()("div",{style:F.Z.textOverflowStyle},void 0,r()(T.FormattedMessage,{id:"groupPreview.noUsers",defaultMessage:"No users in this group"})))})}}return p?l.createElement(ge,o()({},e,{state:{...e.state,annotation:p}})):v&&!t.isMobile?l.createElement(pe,o()({},e,{state:{...e.state,annotation:v},onDismiss:e.onDismiss})):null}function me(e){window.__c={n:"HoverLinkPreviewOverlayRenderer"};const{onDismiss:t}=e,{annotation:i,store:n,token:o}=e.state,a=(0,m.O7)(),s=(0,g.Fg)(),d=D.zW(i),v=(0,w.A5)({url:d,baseUrl:E.default.domainBaseUrl,publicDomainName:E.default.publicDomainName}),y=(0,l.useCallback)((async()=>{t(),P.AE({token:o,store:n}),await c.default.afterNextFlush(),A.dz({type:"focusOnly",focus:!0})}),[t,n,o]),h=(0,l.useCallback)((async()=>{t(),await c.default.afterNextFlush();const e=Z.tq.copiedLinkToClipboard;let i=d;const o=(0,x.Wj)({url:d,baseUrl:E.default.domainBaseUrl,publicDomainName:E.default.publicDomainName,isMobile:a.device.isMobile,protocol:E.default.protocol,currentUrl:window.location.href});if("page"===o.name){const e=G.G.createChildStore(n,{table:M.iU,id:o.blockId});i=(0,p.Z)({pageId:o.blockId,pageModel:e.getModel(),baseUrl:E.default.domainBaseUrl,discussionId:o.discussionId,scrollToBlockId:o.scrollToBlockId,peekViewBlockId:o.peekViewBlockId,peekMode:o.peekMode,pageVisitSource:f.tY.CopyLink})}Z.RD({environment:a,stringValue:i,copiedMessage:e})}),[a,t,n,d]),b=(0,g.yK)((e=>({wrapper:{fontSize:F.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,fontWeight:F.Z.fontWeight.regular,fill:e.mediumIconColor},destination:{padding:"4px 0 4px 6px"},button:{display:"flex",alignItems:"center",padding:"2px 6px",whiteSpace:"nowrap",marginRight:2,borderRadius:3,color:e.regularTextColor},destinationText:{paddingRight:6,maxWidth:250,...F.Z.textOverflowStyle},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),k=(0,u.VK)((()=>{if(!v)return;const e=G.G.createChildStore(n,{table:M.iU,id:v});return{pageIcon:(0,C.tp)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:E.default.domainBaseUrl,getRecordModel:n.getRecordModel,emojiType:(0,B.e_)(a),isSafariOrIOS:a.device.isSafari||a.device.isIOS,isClient:!0,showEmojiInline:a.device.isWindows,currentUserId:a.currentUser.id,theme:s,emojiData:N.Z.state}),title:r()(ne.Z,{style:b.destinationText,store:e})}}),[a,n,v,b,s])||{pageIcon:S.Z.globe2(b.icon),title:r()("div",{style:b.destinationText},void 0,d)};return r()(de.gq,{style:b.wrapper,alignItems:"center"},void 0,r()(de.gq,{style:b.destination,alignItems:"center"},void 0,k.pageIcon,k.title),r()(ee.Z,{onClick:h,icon:S.Z.copy,isDarkIconColor:!0}),e.isHoveredTokenEditable&&r()(X.Z,{style:b.button,onClick:y},void 0,r()(T.FormattedMessage,{defaultMessage:"Edit",id:"hoverPreviewOverlay.editButton.label"})))}function ue(e){window.__c={n:"HoverDatePreviewOverlayRenderer"};const{annotation:t}=e.state,i=D.Ot(t),n=(0,g.yK)((e=>({container:{fontSize:F.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),o=(0,T.useIntl)(),a="relative"===i.date_format?"ll":"relative",s=(0,v.ZV)({value:i,date_format:a,time_format:"h:mm A",allowRelativeDates:!0,intl:o});return s===(0,v.ZV)({value:i,date_format:i.date_format,time_format:i.time_format,allowRelativeDates:!0,intl:o})?null:r()(de.gq,{style:n.container,alignItems:"center"},void 0,S.Z.calendar(n.icon),r()("div",{style:F.Z.textOverflowStyle},void 0,s))}function ge(e){window.__c={n:"HoverTemplateVariablePreviewOverlayRenderer"};const{annotation:t}=e.state,i=D.fs(t),n=(0,T.useIntl)(),o=D.Z0(i.type,n),a=(0,g.yK)((e=>({container:{fontSize:F.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]);return r()(de.gq,{style:a.container,alignItems:"center"},void 0,r()("div",{style:F.Z.textOverflowStyle},void 0,o))}function fe(e){var t;window.__c={n:"ExternalObjectInstancePreviewContent"};const{renderConfig:i,store:n}=e,a=(0,g.yK)((e=>({title:{color:e.regularTextColor,fontWeight:F.Z.fontWeight.medium,whiteSpace:"initial"},header:{color:e.mediumTextColor,fontSize:F.Z.fontSize.UISmall.desktop},dictionaryKey:{color:e.mediumTextColor,fontWeight:F.Z.fontWeight.regular,fontSize:F.Z.fontSize.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:F.Z.fontSize.UIRegular.desktop,whiteSpace:"normal",wordBreak:"break-word"}})),[]);return l.createElement(l.Fragment,null,i.title&&r()(de.gq,{},void 0,l.createElement(W.ox,o()({},i.title,{store:n,style:a.title}))),i.headerAttributes&&i.headerAttributes.length>0&&r()(de.gq,{alignItems:"center",style:{...a.header,marginBottom:3}},void 0,(0,b.Z)(i.headerAttributes.map(((e,t)=>l.createElement(W.ox,o()({key:`attribute-${t}`},e,{store:n,style:{...a.header,...F.Z.textOverflowStyle}}))))||[],(e=>r()("span",{},`dot-${e}`," ","·"," ")))),i.dictionaryAttributes&&i.dictionaryAttributes.length>0&&r()(de.Ht,{},void 0,i.dictionaryAttributes.map(((e,t)=>{var s;let{key:d,value:c}=e;return r()(de.gq,{style:{marginBottom:t!==((null===(s=i.dictionaryAttributes)||void 0===s?void 0:s.length)??0)-1?3:0}},t,r()("div",{style:{marginRight:10,width:"30%",display:"flex",alignItems:"center"}},void 0,r()("span",{style:a.dictionaryKey},void 0,l.createElement(T.FormattedMessage,o()({},d.formatter,{values:{value:c.attribute.name}})))),r()("div",{style:{width:"70%",display:"flex",alignItems:"center"}},void 0,c.icon&&(0,I.li)(c.icon)&&r()(Q.Z,{type:"image_url",imageURL:c.icon.values[0],size:16,style:{marginRight:4}}),l.createElement(W.ox,o()({},c,{store:n,style:a.dictionaryValue,avatarStyle:{marginRight:4}}))))}))),i.bodyAttribute&&r()(de.gq,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{}},void 0,r()(W.hx,{attribute:i.bodyAttribute})),i.previewImageAttribute&&r()("div",{style:{marginTop:i.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"}},void 0,r()("div",{},void 0,r()(te.Z,{src:i.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}}))))}function pe(e){window.__c={n:"HoverExternalObjectInstanceOverlayRenderer"};const{state:{annotation:t,store:i,token:n},onDismiss:a}=e,s=D.Ik(t),d=(0,m.O7)(),c=(0,g.Fg)(),f=(0,l.useRef)(null),p=(0,u.VK)((()=>{const t=G.G.createChildStore(i,{table:M.iU,id:s,spaceId:i.pointer.spaceId}),m=t.canEdit(),u=(0,U._F)({store:t,isInDarkMode:"dark"===c.mode,canEdit:m,currentUserId:d.currentUser.id,getRenderFn:e=>t=>{var i,n;return(null===(i=e.hover)||void 0===i?void 0:i.call(e,t))||(null===(n=y.j.hover)||void 0===n?void 0:n.call(y.j,t))},showAction:void 0});if(!u)return;const{renderConfig:g,integration:p}=u,v=Boolean(u.action),h=e.isHoveredTokenEditable,w=i.recordStoreUIParentStore&&i.recordStoreUIParentStore instanceof G.G?i.recordStoreUIParentStore:void 0,b={key:"turn preview into block",render:e=>l.createElement($.Z,o()({},e,{title:r()(T.FormattedMessage,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",defaultMessage:"Turn into preview"}),svg:S.Z.loop})),action:()=>{w&&n&&V.createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:d,perform:e=>{_.aV({block:t,parentStore:w,transaction:e,token:n}),e.postSubmitCallbacks.push((e=>{e||null==a||a()}))}})}},x=[];return t.isExternalObjectInstanceBlockStore()&&x.push(b),l.createElement("div",{style:{display:"flex",flexDirection:"column"},ref:f},r()(de.gq,{alignItems:"center",style:{fontSize:12}},void 0,r()(Q.Z,{type:"image_url",imageURL:p.icon,size:16,style:{marginRight:"4px"}}),r()("div",{style:{flexGrow:1,fontWeight:F.Z.fontWeight.medium}},void 0,p.name),n&&!v&&h&&r()("div",{},void 0,r()(J.ZP,{popupType:J.Z4.Popup,placementToOrigin:H.u.Right,alignmentToOrigin:H.v.Start,originGap:4,onClose:()=>{let e=!1;const t=f.current;t&&(e=(0,L.uh)(t.getBoundingClientRect(),oe.IL.x,oe.IL.y)),e||null==a||a()},renderOrigin:e=>l.createElement(X.Z,o()({style:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:3}},e),S.Z.dots({width:14})),render:e=>r()(re.Z,{titleForReloadMenuOption:r()(T.FormattedMessage,{id:"linkMention.reload",defaultMessage:"Reload mention"}),store:t,onAccept:()=>e.close(),extraSecondaryItems:x})}))),v&&h?r()("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"6px 0"}},void 0,r()(ae.Z,{canEdit:m,store:t,isHoverPreview:!0,postActionCallback:a})):r()(fe,{renderConfig:g,store:t}))}),[s,i,d,c,n,a,e.isHoveredTokenEditable,f]);return p?r()("div",{style:{padding:"8px 16px",minWidth:300,maxWidth:350}},void 0,p):null}},5478:(e,t,i)=>{i.d(t,{YF:()=>u,ZP:()=>f});var n=i(10434),o=i.n(n),a=i(23174),r=i.n(a),s=i(67294),d=i(24405),l=i(25464),c=i(58032),m=i(85567);const u={Success:"success",Pending:"pending",Failure:"failure"};const g={display:"flex",justifyContent:"center",alignItems:"baseline"},f=function(e){let{status:t,value:i,renderTooltip:n,...a}=e;window.__c={n:"StatusToken"};const f=(0,d.Fg)(),p={[u.Success]:f.statusTokenBackground.green,[u.Pending]:f.statusTokenBackground.yellow,[u.Failure]:f.statusTokenBackground.red},v={[u.Success]:f.statusTokenIndicator.green,[u.Pending]:f.statusTokenIndicator.yellow,[u.Failure]:f.statusTokenIndicator.red},y={[u.Success]:f.statusTokenText.green,[u.Pending]:f.statusTokenText.yellow,[u.Failure]:f.statusTokenText.red};return n?s.createElement(m.Z,o()({},a,{backgroundColor:p[t],color:y[t],value:r()(c.Z,{placement:l.u.Bottom,alignment:l.v.Start,renderTooltip:n,render:e=>s.createElement("div",o()({style:g},e),r()("div",{style:{background:v[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),i)})})):s.createElement(m.Z,o()({},a,{backgroundColor:p[t],color:y[t],value:r()("div",{style:g},void 0,r()("div",{style:{background:v[t],width:8,height:8,borderRadius:"100%",marginRight:4}}),i)}))}},719:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(10434),o=i.n(n),a=i(23174),r=i.n(a),s=i(67294),d=i(83355),l=i(98742),c=i(74194);class m extends d.Z{constructor(){super(...arguments),this.handleKeyDown=e=>{"Backspace"===e.key&&0===this.props.value.length&&this.props.onRemoveLastToken()}}renderComponent(){const{device:e}=this.environment;return r()("div",{className:this.props.readOnly?void 0:"notion-focusable-within",onClick:this.props.onClick,style:e.isMobile?this.getMobileWrapStyle():this.getDesktopWrapStyle()},void 0,this.props.tokens,this.renderInput())}renderInput(){const{device:e}=this.environment,t=0===this.props.tokens.length;return s.createElement(c.Z,o()({format:c.Z.Format.Transparent},(0,l.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),{value:this.props.value,onSubmit:this.props.onSubmit,onBlur:this.props.onBlur,focus:this.props.focus,style:{...m.inputStyle,margin:e.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:this.props.readOnly,inputStyle:{height:18},size:1,type:this.props.type,placeholder:t?this.props.placeholder:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}))}getDesktopWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,borderRadius:3,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...this.props.style}}getMobileWrapStyle(){return{...this.getDesktopWrapStyle(),fontSize:14,padding:"7px 10px 0"}}}m.displayName="TokenInput",m.inputStyle={flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"};const u=m},25735:(e,t,i)=>{i.d(t,{Y:()=>p});var n=i(23174),o=i.n(n),a=i(67294),r=i(480),s=i(81954),d=i(24405),l=i(5366),c=i(82990),m=i(50906),u=i(16639),g=i(79315),f=i(29302);function p(e){window.__c={n:"GroupMembersListTooltip"};const{group:t,limit:i,noMembersMessage:n,color:p,trackHover:v}=e,y=(0,d.yK)((e=>({container:{marginBottom:4,..."white_background"===p?{fontSize:c.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===p?{fontSize:c.Z.fontSize.UISmall.desktop,color:e.mediumTextColor}:{color:e.mediumInvertedTextColor}}})),[p]),h=(0,s.VK)((()=>g.default.state.currentSpaceStore),[]),S=(0,r.O7)();(0,s.VK)((()=>{v&&m.iHH(S,{group_id:t.id})}),[v,t.id,S]);const{countRemainingUsers:w,limitedUserStores:b}=(0,s.VK)((()=>(0,u.rm)({group:t,spaceStore:h,limit:i})),[t,h,i]);return 0===b.length?a.createElement(a.Fragment,null,n):o()("div",{style:y.container},void 0,b.map((e=>o()("div",{style:y.userContainer},e.id,o()(f.Z,{style:y.user,userStore:e,avatarSize:18})))),w>0&&o()("div",{style:y.moreMessage},void 0,o()(l.FormattedMessage,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:w}})))}},88804:(e,t,i)=>{i.d(t,{N:()=>s,E:()=>d});var n=i(96026),o=i(68216),a=i(98165),r=i(67669);function s(e,t){const i=t.getRecordStoreUIRoot(),s=i instanceof o.G&&i.isPageBlock()&&i.isLocked(),d=(0,a.n3)(i)&&n.Z.getMode(e,i),l=Boolean((0,r.YF)(d));return!t.canEdit()||s||l}function d(e,t){return!s(e,t)}},52507:(e,t,i)=>{i.d(t,{AS:()=>d,Hs:()=>l,ZP:()=>c});var n=i(49085),o=i(55384),a=i(44312),r=i(97880);class s extends n.default{getInitialState(){return{modalOpen:!1,loading:!1,domainVerification:void 0}}}const d=(0,r.AO)((e=>"invalid"===e.type||"unverified"===e.type?{true:e}:{false:e}));function l(e){const t=o.kk.fromValue(a.Jd,e);return{type:t.verified_at?"verified":"unverified",id:t.id,domain:t.domain,verificationCode:t.verification_code,createdAt:t.created_at,expiresAt:t.expires_at,invalidatedAt:t.getInfo().invalidated_at}}const c=s},39248:(e,t,i)=>{i.d(t,{E:()=>s});var n=i(4615),o=i(89101),a=i(64002);function r(e,t){const i=t.trim().toLowerCase(),n=(0,a.Of)(i).replace(/\./g,"-");return n?`${n}-${e}`:e}function s(e,t){if(!(0,n.e)(e))return`${o._j.integrations}/${e}`;const i=r(e,void 0===t?"":t);return`${o._j.integrations}/${i}`}}}]);