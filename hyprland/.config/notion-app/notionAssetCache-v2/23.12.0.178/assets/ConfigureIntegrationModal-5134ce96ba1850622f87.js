"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5116,4931],{5026:(e,t,n)=>{n.r(t),n.d(t,{ConfigureIntegrationModal:()=>L});var o=n(23174),i=n.n(o),a=n(67294),r=n(480),s=n(81954),l=n(24405),d=n(53397),g=n(5366),c=n(9844),u=n(35794),p=n(9038),m=n(64002),f=n(47307),h=n(64964),M=n(761),b=n(1790),v=n(33929),y=n(79315),S=n(74021),I=n(68216),w=n(73063),C=n(74194);const k=(0,g.defineMessages)({toggleSecretVisibility:{id:"integrations.configureIntegrationShowSecret.toggleSecretVisibility",defaultMessage:"Toggle secret visibility"}});function Z(e){const{secret:t,onChange:n,submit:o,placeholder:r}=e,[s,l]=a.useState(!1);return i()(C.Z,{type:s?"text":"password",value:t,onChange:n,placeholder:r,style:{padding:"4px 8px"},focusInitial:!1,onKeyDown:e=>{"Enter"===e.key&&o()},right:t&&i()("div",{style:{display:"flex"}},void 0,i()(w.Z,{icon:s?d.Z.eye:d.Z.eyeHide,onClick:()=>{l(!s)},ariaLabel:v.default.formatMessage(k.toggleSecretVisibility),isBlue:!0,iconStyle:{height:18,width:18},style:{height:18}}))})}var x=n(64453),N=n(18153),T=n(42922),_=n(68785),F=n(92660),B=n(13490);const K=(0,g.defineMessages)({webhookUrlPlaceholder:{id:"integrations.configureIntegrationModal.webhookUrlInput.placeholder",defaultMessage:"Paste webhook URL"},webhookSecretPlaceholder:{id:"integrations.configureIntegrationModal.webhookSecretInput.placeholder",defaultMessage:"Paste secret code"},updateButton:{id:"integrations.configureIntegrationModal.submitButton.update",defaultMessage:"Update"},createButton:{id:"integrations.configureIntegrationModal.submitButton.create",defaultMessage:"Connect"},errorOccurred:{id:"integrations.configureIntegrationModal.error.dialog",defaultMessage:"Failed to connect {integration}. Please contact support."},closeModalAriaLabel:{id:"integrations.configureIntegrationModal.closeButtonLabel",defaultMessage:"Close integration configuration modal"}});function L(){var e;window.__c={n:"ConfigureIntegrationModal"};const t=(0,r.O7)(),n=(0,l.yK)((e=>({errorText:{color:e.errorText,fontSize:12},input:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:360},helpInfo:{display:"inline-flex",marginLeft:2}})),[]),o=(0,N.useConnectIntegrationModalStyles)(),k=(0,s.VK)((()=>S.Z.state.open?S.Z.state.integrationId:void 0),[]),L=(0,s.VK)((()=>S.Z.state.open?S.Z.state.webhookSubscriptionId:void 0),[]),W=(0,s.VK)((()=>y.default.state.currentSpaceStore),[]),P=k&&W?I.y2.createChildStore(W,{id:k,table:c.K2}):void 0,U=L&&W?I.n4.createChildStore(W,{id:L,table:u.b,spaceId:W.id}):void 0;(0,a.useEffect)((()=>{const{webhookUrl:e,webhookSecret:t}={webhookUrl:(null==U?void 0:U.getWebhookUrl())||"",webhookSecret:(null==U?void 0:U.getWebhookSecret())||""};D(e),A(t)}),[U]);const[V,D]=a.useState(""),[O,A]=a.useState(""),[R,z]=a.useState(!1),[E,H]=a.useState(!1),[q,j]=a.useState(!1),$=(0,s.VK)((()=>{if(P)return P.getModel()}),[P]),J=(0,p.RW)(k),Y=null==J||null===(e=J.info.customization)||void 0===e||null===(e=e.headers)||void 0===e?void 0:e.hmac,G=(0,s.VK)((()=>null==$?void 0:$.getInfo()),[$]),Q=(0,a.useCallback)((e=>{e&&G&&(j(!1),f.showErrorMessage(v.default.formatMessage(K.errorOccurred,{integration:G.developer_name})))}),[G]),X=(0,a.useCallback)((async()=>{if(!q){if(!(0,m.yn)(V))return z(!0),void j(!1);if(z(!1),Y&&!O)return H(!0),void j(!1);j(!0),$&&(await b.E({environment:t,integration:$,webhookUrl:V,webhookSecret:O,webhookSubscriptionId:L,onError:Q,onSuccess:()=>h.oV({label:i()(g.FormattedMessage,{id:"configureIntegrationModal.snackbar.title",defaultMessage:"Added {integrationName} to your workspace",values:{integrationName:$.name}})})}),await M.pJ({environment:t}),te())}}),[t,Q,$,q,O,Y,L,V]),ee=(0,a.useCallback)((e=>A(e.target.value)),[]),te=()=>{S.Z.setState({open:!1}),D(""),A(""),z(!1),H(!1),j(!1)};return $&&J&&W?i()(F.Z,{innerStyle:o.modal,requireOnline:!0,modalStore:S.Z,onDismiss:te,render:()=>i()("div",{style:o.mobileModal},void 0,i()("div",{style:o.innerModal},void 0,i()(w.Z,{icon:d.Z.closeSmall,onClick:te,style:o.cancelButton,hoveredStyle:o.hovered,ariaLabel:v.default.formatMessage(K.closeModalAriaLabel)}),i()(x.P,{integrationModel:$,integrationConfig:J,spaceStore:W}),i()("div",{style:n.input},void 0,i()(B.Z,{style:{display:"flex",alignItems:"center",marginTop:40}},void 0,i()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookUrlInput",defaultMessage:"Webhook URL"})),i()(C.Z,{type:"text",style:{padding:"4px 8px"},value:V,onChange:e=>{D(e.target.value),z(!1)},placeholder:v.default.formatMessage(K.webhookUrlPlaceholder),focusInitial:!0,onKeyDown:async e=>{"Enter"===e.key&&await X()}}),R?i()("div",{style:{marginTop:5,...n.errorText}},void 0,i()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.invalidUrl",defaultMessage:"Invalid webhook URL"})):null),J.acceptsSecretToken&&i()("div",{style:n.input},void 0,i()(B.Z,{style:{display:"flex",alignItems:"center",marginTop:24}},void 0,i()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookSecretCode",defaultMessage:"Secret code"})),i()(Z,{secret:O,onChange:ee,submit:X,placeholder:v.default.formatMessage(K.webhookSecretPlaceholder)}),E?i()("div",{style:{marginTop:5,...n.errorText}},void 0,i()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.invalidSecret",defaultMessage:"Webhook secret is required."})):null),i()(T.Z,{style:o.connect,onClick:X,disabled:""===V||Y&&""===O},void 0,q?i()(_.Z,{}):i()("span",{},void 0,L?v.default.formatMessage(K.updateButton):v.default.formatMessage(K.createButton)))))}):null}},64453:(e,t,n)=>{n.d(t,{P:()=>p});var o=n(23174),i=n.n(o),a=(n(57658),n(67294)),r=n(81954),s=n(24405),l=n(15070),d=n(5366),g=n(82990),c=n(71669),u=n(64369);function p(e){window.__c={n:"ConnectIntegrationHeader"};const{integrationModel:t,integrationConfig:n,spaceStore:o}=e,p=(0,s.yK)((e=>({integrationIcon:{width:40,height:40,borderRadius:6,overflow:"hidden"},title:{marginTop:4,fontSize:17,fontWeight:590,lineHeight:"22px"},subTitle:{fontWeight:g.Z.fontWeight.regular,fontSize:g.Z.fontSize.UISmall.desktop,color:e.lightTextColor,lineHeight:"17px",marginTop:6.5}})),[]),m=(0,r.VK)((()=>t.getInfo().developer_name||"Unknown"),[t]),f=(0,r.VK)((()=>t.getCapabilities()),[t]),h=function(e){const t=[];e.read_content&&t.push(i()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.readContent",defaultMessage:"view content"}));e.read_comment&&t.push(i()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.readComment",defaultMessage:"view comments"}));e.update_content&&t.push(i()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.updateContent",defaultMessage:"edit content"}));e.insert_comment&&t.push(i()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.updateComment",defaultMessage:"edit comments"}));e.insert_content&&t.push(i()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.insertContent",defaultMessage:"create content"}));e.insert_comment&&t.push(i()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationCapabilities.insertComment",defaultMessage:"create comments"}));return i()(d.FormattedList,{value:t,type:"conjunction"})}(f),M=(0,r.VK)((()=>o.getName()),[o]);let b;return(0,l.ms)(f)&&f.webhooks?b=i()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationDescriptionDlp",defaultMessage:"Connect to {integrationName} for real-time monitoring and protection of sensitive content.",values:{integrationName:m}}):f.webhooks&&(b=i()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationDescriptionSiem",defaultMessage:"Connect to {integrationName} for real-time monitoring, alerting, and analysis of your workspace event logs.",values:{integrationName:m}})),a.createElement(a.Fragment,null,i()("div",{style:p.integrationIcon},void 0,i()(c.Z,{style:p.integrationIcon,src:n.info.icon})),i()(u.Z,{style:p.title},void 0,i()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationName",defaultMessage:"Connect {integrationName} to Notion",values:{integrationName:m}})),i()(u.Z,{style:p.subTitle,isMultiline:!0},void 0,b),i()(u.Z,{style:p.subTitle,isMultiline:!0},void 0,f.webhooks&&i()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationScope.webhooks",defaultMessage:"{integrationName} will be authorized to receive event logs on all activity in {spaceName}.",values:{integrationName:m,spaceName:M}})," ",(0,l.ms)(f)&&i()(d.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationScope.contentCapabilities",defaultMessage:"{hasWebhooks, select, true {For <b>all</b> pages, {integrationName} will also able to {formattedCapabilities}} other {For <b>all</b> pages, {integrationName} will able to {formattedCapabilities}}}.",values:{hasWebhooks:f.webhooks,b:e=>i()("span",{style:{fontWeight:g.Z.fontWeight.semibold}},void 0,e),integrationName:m,formattedCapabilities:h}})))}},18153:(e,t,n)=>{n.r(t),n.d(t,{ConnectOAuthIntegrationModal:()=>x,useConnectIntegrationModalStyles:()=>N});var o=n(10434),i=n.n(o),a=n(23174),r=n.n(a),s=n(67294),l=n(480),d=n(81954),g=n(24405),c=n(53397),u=n(5366),p=n(9844),m=n(9038),f=n(50906),h=n(77719),M=n(33929),b=n(79315),v=n(17549),y=n(68216),S=n(64453),I=n(42922),w=n(73063),C=n(58032),k=n(92660);const Z=(0,u.defineMessages)({createButton:{id:"integrations.connectOAuthIntegrationModal.submitButton.create",defaultMessage:"Connect to {integrationName}"},waiting:{id:"integrations.connectOAuthIntegrationModal.submitButton.waiting",defaultMessage:"Waiting for changes in {integrationName}"},waitingTooltip:{id:"integrations.connectOAuthIntegrationModal.submitButton.waitingTooltip",defaultMessage:"You need to complete some steps in {integrationName} to continue"},closeModalAriaLabel:{id:"integrations.connectOAuthIntegrationModal.closeButtonLabel",defaultMessage:"Close integration installation modal"}});function x(){window.__c={n:"ConnectOAuthIntegrationModal"};const e=(0,l.O7)(),t=N(),n=(0,d.VK)((()=>v.Z.state.open?v.Z.state.integrationId:void 0),[]),o=(0,d.VK)((()=>b.default.state.currentSpaceStore),[]),a=n&&o?y.y2.createChildStore(o,{id:n,table:p.K2}):void 0,[g,x]=s.useState(!1),T=(0,d.VK)((()=>{if(a)return a.getModel()}),[a]),_=(0,d.VK)((()=>null==T?void 0:T.getInfo()),[T]),F=(0,m.RW)(n);if(!(T&&_&&F&&o&&n))return null;const B=async()=>{g||(x(!0),await h.$$({environment:e,integration:T,spaceId:o.id,from:"compliance_connected_apps_settings"}),f.eRW(e,{integration_id:n,configuration_type:"oauth"}),K())},K=()=>{v.Z.setState({open:!1}),x(!1)};return r()(k.Z,{innerStyle:t.modal,requireOnline:!0,modalStore:v.Z,onDismiss:K,render:()=>r()("div",{style:t.mobileModal},void 0,r()("div",{style:t.innerModal},void 0,r()(w.Z,{icon:c.Z.closeSmall,onClick:K,style:t.cancelButton,hoveredStyle:t.hovered,ariaLabel:M.default.formatMessage(Z.closeModalAriaLabel)}),r()(S.P,{integrationModel:T,integrationConfig:F,spaceStore:o}),r()(C.Z,{placement:C.Z.Placement.Top,renderTooltip:()=>s.createElement(u.FormattedMessage,i()({},Z.waitingTooltip,{values:{integrationName:_.developer_name}})),disableTooltip:!g,render:e=>s.createElement(I.Z,i()({style:t.connect,onClick:B,disabled:g},e),g?r()("span",{},void 0,M.default.formatMessage(Z.waiting,{integrationName:_.developer_name})):r()("span",{style:t.createButton},void 0,M.default.formatMessage(Z.createButton,{integrationName:_.developer_name}),c.Z.redirect(t.redirectIcon)))})))})}function N(){return(0,g.yK)((e=>({modal:{maxWidth:400,padding:"40px 20px 24px",fontSize:14,textAlign:"center",borderRadius:10},connect:{marginTop:40,padding:"0px 12px",width:360,height:32},innerStyle:{borderRadius:10},mobileModal:{fontSize:14,textAlign:"center"},innerModal:{display:"flex",flexDirection:"column",alignItems:"center"},hovered:{background:e.buttonPressedBackground},cancelButton:{position:"absolute",top:"10px",right:"10px",background:e.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},createButton:{display:"flex",alignItems:"center"},redirectIcon:{width:14,height:14,marginLeft:8}})),[])}},92660:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(23174),i=n.n(o),a=(n(67294),n(83355)),r=n(53953),s=n(44532);class l extends a.Z{renderComponent(){const{render:e}=this.props,{device:t}=this.environment,n=this.props.modalStore.state;return t.isMobile?i()(s.ZP,{ariaLabel:this.props.ariaLabel,open:n.open,popupType:s.ZP.PopupType.SlideUp,origin:this.props.origin,onDismiss:this.props.onDismiss,render:e,style:this.props.style}):i()(r.Z,{ariaLabel:this.props.ariaLabel,open:n.open,preventHideChildrenWhileOpening:!0,render:e,onDismiss:this.props.onDismiss,style:this.props.style,innerStyle:this.props.innerStyle})}}l.displayName="DefaultPopupOrModal"},74021:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(49085);class i extends o.default{getInitialState(){return{open:!1}}}const a=new i},17549:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(49085);class i extends o.default{getInitialState(){return{open:!1}}}const a=new i}}]);