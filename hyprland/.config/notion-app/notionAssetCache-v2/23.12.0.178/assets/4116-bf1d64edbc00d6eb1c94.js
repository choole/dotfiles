"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4116],{13658:(t,e,i)=>{i.d(e,{Z:()=>h});var o=i(23174),r=i.n(o),n=(i(67294),i(83355)),s=i(49085),a=i(5366),d=i(64921);class l extends n.Z{constructor(){super(...arguments),this.storeTypes={open:s.default.createClass(!1)},this.handleOpen=()=>{this.stores.open.setState(!0)}}renderComponent(){return this.stores.open.state||this.props.items.length<=this.props.visible?r()("div",{},void 0,this.props.items):r()("div",{},void 0,this.props.items.slice(0,this.props.visible),r()(d.Z,{onClick:this.handleOpen,style:this.getStyle()},void 0,r()(a.FormattedMessage,{defaultMessage:"View {moreCount} more",id:"activity.viewMoreButton.label",values:{moreCount:this.props.items.length-this.props.visible}})))}getStyle(){return{display:"flex",alignItems:"center",height:28,fontSize:12,color:this.theme.lightTextColor,padding:0,paddingLeft:52,paddingRight:16}}}l.displayName="ViewMore";const h=l},17022:(t,e,i)=>{i.d(e,{ME:()=>h,dG:()=>u,V3:()=>c,BE:()=>p,h9:()=>f});var o=i(15145),r=i(82813),n=i(64002),s=i(50906),a=i(19719),d=i(51456),l=i(4761);function h(t){return(0,n.SK)(t,{[o.$X]:o.tY.Notification})}function u(t){const e=t.mightCloseTab??!0;g({target:"body",...t,mightCloseTab:e})}function c(t){const e=t.mightCloseTab??!0;g({target:"title",...t,mightCloseTab:e})}function p(t){g({target:"add_reaction",...t,mightCloseTab:!1})}function g(t){const{target:e,environment:i,activity:o,notification:n,source:h,tab:u,mightCloseTab:c}=t,p="notifications_tab"===h?l.ZP.state.sessionId:void 0,g="notifications_tab"===h?l.ZP.isFilteredToUnreadOnly():void 0;s.CgP(i,{target:e,activity_id:o.id,notification_id:null==n?void 0:n.id,sessionId:p,is_filtered:g,tab:u}),c&&a.pw({environment:i,target:e}),n&&r.e((0,d.mc)(i),{alreadyRead:n.read,notificationId:n.id,activityId:n.activity_id,from:e,sessionId:p})}function f(t){const{notification:e,activity:i,environment:o,tab:r}=t,n={environment:o,activity:i,notificationId:null==e?void 0:e.id,alreadyRead:Boolean(null==e?void 0:e.read),tab:r};return{onBacklinkClicked:t=>a.EQ({...n,backlinkPageId:t}),onArchiveClicked:()=>a._b(n),onMarkAsReadClicked:()=>a.cC(n),onMarkAsUnreadClicked:()=>a.u_(n),onNotificationFrameClicked:()=>a.ix(n)}}},90097:(t,e,i)=>{i.d(e,{uA:()=>F,XW:()=>D,P6:()=>U,cr:()=>$,jC:()=>N,N8:()=>V});var o=i(96486),r=i.n(o),n=i(66897),s=i(23174),a=i.n(s),d=i(67294),l=i(5366),h=(i(41892),i(8848)),u=i(7057),c=(i(53397),i(24211)),p=(i(54368),i(77420)),g=i(19889),f=(i(97880),i(82990)),b=i(15145),m=i(76725),v=i(55384),y=i(63306),S=i(64002);class A extends d.PureComponent{render(){const{href:t}=this.props;return a()("a",{href:(0,S.Nm)({str:t,allowNoProtocol:!0}),style:this.getStyle(),className:"notion-email-button-hover"},void 0,this.props.children)}getStyle(){return{display:this.props.inline?"inline":"block",color:h.ZP.inherit,textDecoration:"none",cursor:"pointer",...this.props.style}}}const C=A;class T extends d.PureComponent{render(){const t=this.getPathWithoutDomain();return t.length>0?a()("div",{},void 0,this.props.left,(0,m.Z)(t,(t=>a()("span",{style:{paddingLeft:4,paddingRight:4}},`slash:${t}`,"/"))),this.props.right):null}getPathWithoutDomain(){const{getRecordValue:t,blockId:e,intl:i}=this.props,o=y.uJ({table:"block",id:e},t),n=v.om.fromGetRecordValueFn(t);return r().initial(o.reverse()).map((t=>{const e=v.kk.fromBlock(t),o=e.getRenderTitle({getRecordModel:n,userTimeZone:this.props.userTimeZone,intl:i})||i.formatMessage({id:"recordPath.untitledBlock.placeholder",defaultMessage:"Untitled"}),r=e.getRenderUrl({getRecordModel:n,pageVisitSource:b.tY.Email});return a()(C,{href:`${this.props.baseUrl}${r}`,style:{display:"inline-block",maxWidth:120,verticalAlign:"top",...f.Z.textOverflowStyle}},t.id,o)}))}}const k=(0,l.injectIntl)(T);i(43593),i(17755),i(58102);d.PureComponent;class M extends d.PureComponent{constructor(){super(...arguments),this.theme=(0,h.gh)({theme:"light"})}render(){const{children:t}=this.props;return a()("table",{style:{paddingTop:12,paddingBottom:t?0:8,borderSpacing:0,width:"100%",borderCollapse:"separate"}},void 0,a()("tr",{},void 0,a()("td",{style:{verticalAlign:"top",width:M.avatarSize+6,minWidth:M.avatarSize+6,paddingTop:2}},void 0,this.props.icon),a()("td",{},void 0,this.renderHeader())),a()("tr",{},void 0,a()("td",{}),a()("td",{style:{maxWidth:400}},void 0,t&&this.renderChildren())),this.renderDivider())}renderDivider(){const{isLast:t}=this.props;if(!t)return a()("tr",{},void 0,a()("td",{colSpan:2},void 0,a()("div",{style:this.getBorderBottomStyle()})))}renderHeader(){const{timestamp:t,header:e,intl:i}=this.props,o=(0,u.Yx)(Math.min(t,Date.now()),"medium_with_time",(0,c.E2)(i),this.props.userTimeZone);return a()("div",{style:M.headerStyle},void 0,a()("div",{},void 0,e),a()("table",{style:{...this.getPathAndTimeStyle(),marginTop:4,marginBottom:this.props.children?8:4,borderSpacing:0}},void 0,a()("tr",{},void 0,a()("td",{},void 0,o),a()("td",{},void 0,this.props.navigableBlockId&&a()(k,{getRecordValue:this.props.getRecordValue,blockId:this.props.navigableBlockId,baseUrl:this.props.baseUrl,left:a()("span",{style:this.getDotStyle()},void 0,"Â·"),userTimeZone:this.props.userTimeZone})))))}renderChildren(){return a()("div",{},void 0,this.props.children)}getBorderBottomStyle(){return{borderBottom:`1px solid ${this.props.theme.regularDividerColor}`,marginBottom:4}}getPathAndTimeStyle(){return{fontSize:12,color:this.theme.lightTextColor,whiteSpace:"nowrap"}}getDotStyle(){return{color:this.theme.lightTextColor,marginLeft:4,marginRight:4}}}M.avatarSize=28,M.headerStyle={fontSize:14,lineHeight:1.4};const x={fontWeight:f.Z.fontWeight.semibold};(0,l.injectIntl)(M);var P=i(21202),w=i(6287),O=i(33709),B=i(90468),R=i(70203),I=i(33929),_=i(67669),Z=i(79315),W=i(68216);function U(t){const{edits:e,rootStore:i}=t,o=r().uniqWith(e.flatMap((t=>t.authors||[])),r().isEqual);return r().compact(o.map((t=>F(t,i))))}function D(t){const{currentUserStore:e}=Z.default.state,i=null==e?void 0:e.id;return function(t,e,i){const o=e.find((t=>t.id===i)),r=e.map((e=>(0,n.$4)(t,e)));if(1===e.length)return a()("span",{},void 0,a()(l.FormattedMessage,o?{defaultMessage:"You",id:"activitySection.authorPhrase.forOneAuthorCurrentUser.label",values:{b:t=>a()("span",{style:x},void 0,t)}}:{defaultMessage:"<b>{author}</b>",id:"activitySection.authorPhrase.forOneAuthor.label",values:{author:r[0],b:t=>a()("span",{style:x},void 0,t)}}));if(2===e.length){if(o){const i=e.filter((t=>t!==o)).map((e=>(0,n.$4)(t,e)));return a()("span",{},void 0,a()(l.FormattedMessage,{defaultMessage:"<b>{firstAuthor}</b> and you",id:"activitySection.authorPhrase.forTwoAuthorsCurrentUser.label",values:{firstAuthor:i[0],b:t=>a()("span",{style:x},void 0,t)}}))}return a()("span",{},void 0,a()(l.FormattedMessage,{defaultMessage:"<b>{firstAuthor}</b> and <b>{secondAuthor}</b>",id:"activitySection.authorPhrase.forTwoAuthors.label",values:{firstAuthor:r[0],secondAuthor:r[1],b:t=>a()("span",{style:x},void 0,t)}}))}if(r.length>2){if(o){const i=e.filter((t=>t!==o)).map((e=>(0,n.$4)(t,e))),r=a()(l.FormattedMessage,{defaultMessage:"{numberOfOtherAuthors, plural, =0 {<b>{firstAuthor}</b>, <b>{secondAuthor}</b> and you} one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, you and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, you and {numberOfOtherAuthors} others}}",id:"activitySection.authorPhrase.forMoreThanTwoAuthorsCurrentUser.label",values:{numberOfOtherAuthors:i.length-2,firstAuthor:i[0],secondAuthor:i[1],b:t=>a()("span",{style:x},void 0,t)}});return a()("span",{},void 0,r)}{const t=a()(l.FormattedMessage,{defaultMessage:"{numberOfOtherAuthors, plural, one {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} other} other {<b>{firstAuthor}</b>, <b>{secondAuthor}</b>, and {numberOfOtherAuthors} others}}",id:"activitySection.authorPhrase.forMoreThanTwoAuthors.label",values:{numberOfOtherAuthors:r.length-2,firstAuthor:r[0],secondAuthor:r[1],b:t=>a()("span",{style:x},void 0,t)}});return a()("span",{},void 0,t)}}return a()("span",{style:x},void 0,a()(l.FormattedMessage,{defaultMessage:"Nobody",id:"activitySection.authorPhrase.forNoAuthors.label"}))}(I.default.getIntl(),t,i)}function F(t,e){if(t.table===g.KJ){const i=V(t.id,e);if(i)return(0,n.dp)(i)}else{const i=function(t,e){return(0,W.Kv)(e,{table:p.cZ,id:t}).getValue()}(t.id,e);if(i)return(0,n.D$)(i)}}function V(t,e){return W.U6.createChildStore(e,{table:g.KJ,id:t}).getValue()}function N(t){const{tab:e,recordId:i,recordType:o,rootStore:r,environment:n}=t;if("all"===e){if(!i)return!1;let t;return t="block"===o?W.G.createChildStore(r,{table:P.iU,id:i}):"collection"===o?W.NW.createChildStore(r,{table:w.v,id:i}):W.H2.createChildStore(r,{table:B.bx,id:i}),(0,_.yi)(n,t)}return!1}function $(t){const{activity:e,rootStore:i}=t;if("commented"!==e.type)return;const o=i.getRecordModel({table:O.qF,id:e.discussion_id,spaceId:e.space_id});if(!o)return;const r=o.getContext();if(!r)return;const n=(0,R.VP)(r,(t=>!(0,R.xw)(t)||(0,R.h1)(t)===o.id));return{id:o.id,context:n}}},22649:(t,e,i)=>{i.d(e,{lS:()=>n,e9:()=>s,nP:()=>a,OD:()=>d,c3:()=>l,_W:()=>h,TL:()=>u,b9:()=>c});var o=i(82990);const r={userSelect:"text",WebkitUserSelect:"text"},n={padding:1,...r},s={display:"inline-flex",marginRight:2,verticalAlign:"text-top"},a={fontWeight:o.Z.fontWeight.semibold};function d(t){return{padding:0,paddingLeft:l(t),paddingRight:16,paddingBottom:3,...r}}function l(t){const{source:e,isMobile:i}=t;return"notifications_tab"===e?52+(i?3:2):52}function h(t){return{height:26,paddingLeft:8,paddingRight:8,color:t.mediumTextColor}}function u(t){return{display:"inline",whiteSpace:"normal",marginRight:t?3:0,wordBreak:"break-word",...a}}function c(t){return{boxShadow:t.plainButtonBoxShadow,height:26,paddingLeft:8,paddingRight:8,fontWeight:500,color:t.regularTextColor}}}}]);