"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5775],{42253:(e,t,n)=>{n.d(t,{K:()=>u});n(21703);var a=n(7406),r=n(84116),o=n(73152),i=n(47218);function s(e){return e.find((e=>void 0!==e&&!isNaN(e)))}function u(e){const t=function(){const e=(0,o.XR)(),t=(0,o.Z8)(e).getBaseCstVisitorConstructor();return new class extends t{constructor(){super(),this.validateVisitor()}expression(e){return this.visit(e.conditionalExpression)}primaryExpression(e){return void 0!==e.parenthesisExpression?this.visit(e.parenthesisExpression):void 0!==e.arrayExpression?this.visit(e.arrayExpression):void 0!==e.NumberLiteral?{kind:i.bG.Number,text:e.NumberLiteral[0].image,startOffset:e.NumberLiteral[0].startOffset,endOffset:e.NumberLiteral[0].endOffset}:void 0!==e.StringLiteral?{kind:i.bG.String,text:e.StringLiteral[0].image.substring(1,e.StringLiteral[0].image.length-1),startOffset:e.StringLiteral[0].startOffset,endOffset:e.StringLiteral[0].endOffset}:void 0!==e.UnclosedStringLiteral?{kind:i.bG.String,text:e.UnclosedStringLiteral[0].image.substring(1,e.UnclosedStringLiteral[0].image.length),startOffset:e.UnclosedStringLiteral[0].startOffset,endOffset:e.UnclosedStringLiteral[0].endOffset}:void 0!==e.BooleanLiteral?{kind:i.bG.Boolean,text:e.BooleanLiteral[0].image,startOffset:e.BooleanLiteral[0].startOffset,endOffset:e.BooleanLiteral[0].endOffset}:void 0!==e.InputToken?{kind:i.bG.NotionToken,token:e.InputToken[0].payload,startOffset:e.InputToken[0].startOffset,endOffset:e.InputToken[0].endOffset}:void 0!==e.IdentifierName?{kind:i.bG.Identifier,text:e.IdentifierName[0].image,startOffset:e.IdentifierName[0].startOffset,endOffset:e.IdentifierName[0].endOffset}:{kind:i.bG.RecoveryNode,startOffset:-1,endOffset:-1}}conditionalExpression(e){const t=this.visit(e.condition[0]);var n,a,r,o;return void 0!==e.QuestionMark?{kind:i.bG.Conditional,condition:t,expIfTrue:this.visit(e.expIfTrue[0]),expIfFalse:void 0!==(null===(n=e.expIfFalse)||void 0===n?void 0:n[0])?this.visit(e.expIfFalse[0]):void 0,startOffset:e.condition[0].location.startOffset,endOffset:s([null===(a=e.expIfFalse)||void 0===a||null===(a=a[0].location)||void 0===a?void 0:a.endOffset,null===(r=e.Colon)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.endOffset,null===(o=e.expIfTrue[0].location)||void 0===o?void 0:o.endOffset,e.QuestionMark[0].endOffset])}:t}logicalOrExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.Or){var n,a;const r=(null===(n=e.rhs)||void 0===n?void 0:n.map((e=>this.visit(e))))??[];return{kind:i.bG.LogicalOr,elements:[t,...r],startOffset:e.lhs[0].location.startOffset,endOffset:s([null===(a=e.rhs)||void 0===a||null===(a=a[e.rhs.length-1])||void 0===a||null===(a=a.location)||void 0===a?void 0:a.endOffset,e.Or[0].endOffset])}}return t}logicalAndExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.And){var n,a;const r=(null===(n=e.rhs)||void 0===n?void 0:n.map((e=>this.visit(e))))??[];return{kind:i.bG.LogicalAnd,elements:[t,...r],startOffset:e.lhs[0].location.startOffset,endOffset:s([null===(a=e.rhs)||void 0===a||null===(a=a[e.rhs.length-1])||void 0===a||null===(a=a.location)||void 0===a?void 0:a.endOffset,e.And[0].endOffset])}}return t}equalityExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.EqualityOperator){var n;const a=e.rhs[0];return{kind:i.bG.Equality,op:e.EqualityOperator[0].image,lhs:t,rhs:this.visit(a),startOffset:e.lhs[0].location.startOffset,endOffset:s([null===(n=a.location)||void 0===n?void 0:n.endOffset,e.EqualityOperator[0].endOffset])}}return t}relationalExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.RelationalOperator){var n;const a=e.rhs[0];return{kind:i.bG.Relational,op:e.RelationalOperator[0].image,lhs:t,rhs:this.visit(a),startOffset:e.lhs[0].location.startOffset,endOffset:s([null===(n=a.location)||void 0===n?void 0:n.endOffset,e.RelationalOperator[0].endOffset])}}return t}additionExpression(e){let t=this.visit(e.lhs[0]);if(void 0!==e.AdditionOperator)for(let a=0;a<e.AdditionOperator.length;a++){var n;const r=e.rhs[a];t={kind:i.bG.Additive,op:e.AdditionOperator[a].image,lhs:t,rhs:this.visit(r),startOffset:e.lhs[0].location.startOffset,endOffset:s([null===(n=r.location)||void 0===n?void 0:n.endOffset,e.AdditionOperator[a].endOffset])}}return t}multiplicationExpression(e){let t=this.visit(e.lhs[0]);if(void 0!==e.MultiplicationOperator)for(let a=0;a<e.MultiplicationOperator.length;a++){var n;const r=e.rhs[a];t={kind:i.bG.Multiplicative,op:e.MultiplicationOperator[a].image,lhs:t,rhs:this.visit(r),startOffset:e.lhs[0].location.startOffset,endOffset:s([null===(n=r.location)||void 0===n?void 0:n.endOffset,e.MultiplicationOperator[a].endOffset])}}return t}exponentiationExpression(e){let t;const n=this.visit(e.lhs[0]);if(void 0!==e.Caret){var a;const r=e.Caret.length-1;let o,s=null===(a=e.rhs[r].location)||void 0===a?void 0:a.endOffset;(void 0===s||isNaN(s))&&(s=e.Caret[r].endOffset);for(let n=e.Caret.length-1;n>=0;n--){const a=e.rhs[n];t=void 0===o?this.visit(a):{kind:i.bG.Exponentiation,op:o,lhs:this.visit(a),rhs:t,startOffset:a.location.startOffset,endOffset:s},o=e.Caret[n].image}return{kind:i.bG.Exponentiation,op:o,lhs:n,rhs:t,startOffset:e.lhs[0].location.startOffset,endOffset:s}}return n}unaryExpression(e){let t=this.visit(e.primaryExpression[0]),n=e.primaryExpression[0].location.startOffset;var a;if(void 0!==e.UnaryOperator&&(t={kind:i.bG.Unary,op:e.UnaryOperator[0].image.toLowerCase(),expression:t,startOffset:e.UnaryOperator[0].startOffset,endOffset:t.endOffset}),isNaN(n)&&(n=null===(a=e.memberCallSubExpression)||void 0===a?void 0:a[0].location.startOffset),void 0!==e.memberCallSubExpression)for(const p of e.memberCallSubExpression){const e=p.location.endOffset;if(void 0!==p.children.callArguments){var o,s,u;const a=p.children.callArguments[0].children;t={kind:i.bG.Call,expression:t,arguments:(null===(o=p.children.callArguments[0])||void 0===o||null===(o=o.children.expression)||void 0===o?void 0:o.map((e=>this.visit(e))))??[],lParenOffset:a.LParen[0].startOffset,rParenOffset:null===(s=a.RParen)||void 0===s?void 0:s[0].startOffset,commaOffsets:(null===(u=a.Comma)||void 0===u?void 0:u.map((e=>e.startOffset)))??[],startOffset:n,endOffset:e}}else if(void 0!==p.children.dotMemberExpression){const a=p.children.dotMemberExpression[0].children;if(void 0!==a.IdentifierName){const r=a.IdentifierName[0];t={kind:i.bG.UnifiedFunctionProperty,expression:t,name:r.image,nameStartOffset:r.startOffset,nameEndOffset:r.endOffset,startOffset:n,endOffset:e}}else if(void 0!==a.InputToken){const o=a.InputToken[0],s=o.payload;switch(s.type){case r.Oy.BlockProperty:t={kind:i.bG.MemberBlockProperty,expression:t,propertyToken:void 0===s.collection?{property:s.property,collection:void 0}:{property:s.property,collection:s.collection},propertyStartOffset:o.startOffset,propertyEndOffset:o.endOffset,startOffset:n,endOffset:e}}}}}return t}parenthesisExpression(e){return this.visit(e.expression[0])}arrayExpression(e){var t,n,a,r,o;return{kind:i.bG.Array,elements:(null===(t=e.expression)||void 0===t?void 0:t.map((e=>this.visit(e))))??[],lBracketOffset:e.LBracket[0].startOffset,rBracketOffset:null===(n=e.RBracket)||void 0===n?void 0:n[0].startOffset,commaOffsets:(null===(a=e.Comma)||void 0===a?void 0:a.map((e=>e.startOffset)))??[],startOffset:e.LBracket[0].startOffset,endOffset:s([null===(r=e.RBracket)||void 0===r?void 0:r[0].endOffset,null===(o=e.expression)||void 0===o||null===(o=o[e.expression.length-1])||void 0===o||null===(o=o.location)||void 0===o?void 0:o.endOffset,e.LBracket[0].endOffset])}}memberCallSubExpression(e){throw new Error("unexpected memberCallSubExpression")}dotMemberExpression(e){throw new Error("unexpected dotMemberExpression")}callArguments(e){throw new Error("unexpected callArguments")}}}();try{return{value:t.visit(e)}}catch(n){return{error:{type:i.$E.UnexpectedError,error:(0,a.tg)(n),offset:0}}}}},23790:(e,t,n)=>{n.d(t,{qT:()=>r,xK:()=>o,uy:()=>i,Jy:()=>s});var a=n(606);function r(e,t){return Array.isArray(t)?t.some((t=>r(e,t))):"unknown"===e.type||"unknown"===t.type||"expression"===t.type||e.type===t.type&&("block"===e.type||"select"===e.type||"function"===e.type?s(e,t):"array"!==e.type||"array"!==t.type||r(e.of,t.of))}function o(e,t){return!!r(e,t)||(r({type:"checkbox"},t)?{type:"checkbox"}:!!r({type:"text"},t)&&{type:"text"})}function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=n?s:(e,t)=>e.type===t.type;return a(e,t)||"array"===e.type&&a(e.of,t)}function s(e,t){return e.type===t.type&&("block"===e.type&&"block"===t.type?void 0===e.collection?void 0===t.collection:void 0!==t.collection&&(0,a.qo)(e.collection,t.collection):"select"===e.type&&"select"===t.type?(0,a.qo)(e.collection,t.collection)&&e.property===t.property:"array"===e.type&&"array"===t.type?s(e.of,t.of):"function"!==e.type||"function"!==t.type||e.libraryFunction===t.libraryFunction&&void 0!==e.boundTargetType==(void 0!==t.boundTargetType))}},5998:(e,t,n)=>{n.d(t,{FR:()=>v,OY:()=>h,sG:()=>y,ic:()=>m,sB:()=>f});var a=n(96486),r=n.n(a),o=n(97880),i=n(5366);const s=(0,i.defineMessages)({InvalidCharacter:{defaultMessage:'Invalid character "{errorCharacter}".',id:"formulas.formulaParseError.invalidCharacter"},UnclosedStringLiteral:{defaultMessage:"Unclosed string literal.",id:"formulas.formulaParseError.unclosedStringLiteral"},UnclosedComment:{defaultMessage:"Unclosed comment. Comments must be closed with a */ sequence.",id:"formulas.formulaParseError.unclosedComment"},TokenExpected:{defaultMessage:'Expected token "{expectedToken}".',id:"formulas.formulaParseError.tokenExpected"},StringLiteralContainsToken:{defaultMessage:"String literal contains token.",id:"formulas.formulaParseError.stringLiteralContainsToken"},ExpressionExpected:{defaultMessage:"Expression expected.",id:"formulas.formulaParseError.expressionExpected"},PropertyExpected:{defaultMessage:"Property token or function expected.",id:"formulas.formulaParseError.propertyExpected"},EndOfInputExpected:{defaultMessage:"End of input expected.",id:"formulas.formulaParseError.endOfInputExpected"},UnexpectedError:{defaultMessage:"Unexpected error.",id:"formulas.formulaParseError.unexpectedError"}}),u=(0,i.defineMessages)({ThisRowTypeNotFound:{defaultMessage:"Cannot find this row in context.",id:"formulas.formulaTypecheckerError.thisRowTypeNotFound"},ThisRowNotBlockWithCollection:{defaultMessage:"This row is not a block with a collection.",id:"formulas.formulaTypecheckerError.thisRowNotBlockWithCollection"},MissingPropertyOnThisRow:{defaultMessage:"Cannot find property {propertyName} on this row.",id:"formulas.formulaTypecheckerError.missingPropertyOnThisRow"},MissingContextVariable:{defaultMessage:"Cannot find context variable {valueId}.",id:"formulas.formulaTypecheckerError.missingContextVariable"},MissingBlock:{defaultMessage:"Could not find block {blockId}.",id:"formulas.formulaTypecheckerError.missingBlock"},CallingNotFunction:{defaultMessage:"Cannot call expression of type {expressionType}.",id:"formulas.formulaTypecheckerError.callingNotFunction"},FunctionCallTooFewArguments:{defaultMessage:"Function {functionName} expects {minNumParameters} arguments, but only {numArguments} were provided.",id:"formulas.formulaTypecheckerError.functionCallTooFewArguments"},FunctionCallUnexpectedArgument:{defaultMessage:"Function {functionName} received unexpected argument.",id:"formulas.formulaTypecheckerError.functionCallUnexpectedArgument"},FunctionCallArgumentWrongType:{defaultMessage:"Argument of type {argumentType} does not satisfy function {functionName}.",id:"formulas.formulaTypecheckerError.functionCallArgumentWrongType"},MemberPropertyMismatchCollection:{defaultMessage:"Token {propertyName} does not match block's collection.",id:"formulas.formulaTypecheckerError.memberPropertyMismatchCollection"},MemberPropertyMissing:{defaultMessage:"Cannot find property {propertyName} on collection.",id:"formulas.formulaTypecheckerError.memberPropertyMissing"},MemberPropertyTargetNotBlock:{defaultMessage:"Cannot access property on non-block.",id:"formulas.formulaTypecheckerError.memberPropertyTargetNotBlock"},MemberPropertyButtonType:{defaultMessage:"Cannot access property of type button.",id:"formulas.formulaTypecheckerError.memberPropertyButtonType"},UndefinedIdentifier:{defaultMessage:"{identifier} is not defined.",id:"formulas.formulaTypecheckerError.undefinedIdentifier"},IdentifierExpected:{defaultMessage:"Expected identifier.",id:"formulas.formulaTypecheckerError.identifierExpected"},UnifiedFunctionCannotFindFunction:{defaultMessage:"Cannot find function {functionName}.",id:"formulas.formulaTypecheckerError.unifiedFunctionCannotFindFunction"},UnifiedFunctionNoArguments:{defaultMessage:"Function {functionName} does not expect any arguments.",id:"formulas.formulaTypecheckerError.unifiedFunctionNoArguments"},UnifiedFunctionTargetWrongType:{defaultMessage:"Cannot call {functionName} with target of type {targetType}.",id:"formulas.formulaTypecheckerError.unifiedFunctionTargetWrongType"},CannotRelativelyCompareTypes:{defaultMessage:"Cannot compare {lhsType} and {rhsType}.",id:"formulas.formulaTypecheckerError.cannotRelativelyCompareTypes"},CannotDoMathOnType:{defaultMessage:"Cannot do math on {lhsType} and {rhsType}.",id:"formulas.formulaTypecheckerError.cannotDoMathOnType"},UnaryMinusOnNonNumber:{defaultMessage:"Cannot apply minus to {type}.",id:"formulas.formulaTypecheckerError.unaryMinusOnNonNumber"},CircularDependency:{defaultMessage:"Circular dependency detected; this formula references itself.",id:"formulas.formulaTypecheckerError.circularDependency"},FunctionCallExpected:{defaultMessage:"Expected function {functionName}() to be called.",id:"formulas.formulaTypecheckerError.functionCallExpected"},RenamedIdentifier:{defaultMessage:'The function "{identifier}()" was renamed to "{renamedTo}()".',id:"formulas.formulaEvaluatorError.renamedIdentifier"},RemovedFunction:{defaultMessage:'The function "{functionName}()" was removed. You can use {alternative} instead.',id:"formulas.formulaEvaluatorError.removedFunction"}}),p=(0,i.defineMessages)({MissingThisRow:{defaultMessage:"Cannot find this row.",id:"formulas.formulaEvaluatorError.missingThisRow"},MissingSchemaPropertyOnThisRow:{defaultMessage:'Missing property "{propertyName}" on this row.',id:"formulas.formulaEvaluatorError.missingSchemaPropertyOnThisRow"},ThisRowBlockPropertyMismatchCollection:{defaultMessage:"This row property belongs to a different collection.",id:"formulas.formulaEvaluatorError.thisRowBlockPropertyMismatchCollection"},MissingContextVariable:{defaultMessage:'Missing context variable "{valueId}".',id:"formulas.formulaEvaluatorError.missingContextVariable"},IdentifierNotFound:{defaultMessage:'"{identifier}" is not defined.',id:"formulas.formulaEvaluatorError.identifierNotFound"},CannotRelativelyCompareTypes:{defaultMessage:'Cannot compare types "{lhsType}" and "{rhsType}".',id:"formulas.formulaEvaluatorError.cannotRelativelyCompareTypes"},CannotDoMathOnType:{defaultMessage:'Cannot do math on type "{valueType}".',id:"formulas.formulaEvaluatorError.cannotDoMathOnType"},CannotCallNonFunction:{defaultMessage:'Cannot call type "{calleeType}".',id:"formulas.formulaEvaluatorError.cannotCallNonFunction"},UnifiedFunctionPropertyNotFound:{defaultMessage:'Function "{functionName}" not found.',id:"formulas.formulaEvaluatorError.unifiedFunctionPropertyNotFound"},LibraryFunctionExecutionError:{defaultMessage:'Error occurred while calling "{functionName}".',id:"formulas.formulaEvaluatorError.libraryFunctionExecutionError"},FunctionCallTooFewArguments:{defaultMessage:'Called "{functionName}" with too few arguments.',id:"formulas.formulaEvaluatorError.functionCallTooFewArguments"},FunctionCallUnexpectedArgument:{defaultMessage:'Called "{functionName}" with unexpected argument.',id:"formulas.formulaEvaluatorError.functionCallUnexpectedArgument"},FunctionCallArgumentWrongType:{defaultMessage:'Called "{functionName}" with wrong argument type "{argumentType}".',id:"formulas.formulaEvaluatorError.functionCallArgumentWrongType"},AccessingPropertyOnNonBlock:{defaultMessage:"Target value is not a block.",id:"formulas.formulaEvaluatorError.accessingPropertyOnNonBlock"},AccessingUserPropertyOnNonPerson:{defaultMessage:"Target value is not a person.",id:"formulas.formulaEvaluatorError.accessingUserPropertyOnNonPerson"},MissingDataDependencyBlock:{defaultMessage:'Cannot find target block "{blockId}".',id:"formulas.formulaEvaluatorError.missingDataDependencyBlock"},MissingDataDependencyPerson:{defaultMessage:'Cannot find target person "{personId}".',id:"formulas.formulaEvaluatorError.missingDataDependencyPerson"},MemberPropertyMismatchCollection:{defaultMessage:"Cannot access property of a different collection.",id:"formulas.formulaEvaluatorError.memberPropertyMismatchCollection"},MissingPropertyOnSchemaForMemberProperty:{defaultMessage:"Cannot find property on collection.",id:"formulas.formulaEvaluatorError.missingPropertyOnSchemaForMemberProperty"},UnaryMinusOnNonNumber:{defaultMessage:"Cannot negate value of type {expressionType}.",id:"formulas.formulaEvaluatorError.unaryMinusOnNonNumber"},UnexpectedRecoveryNode:{defaultMessage:"Unexpected recovery node.",id:"formulas.formulaEvaluatorError.unexpectedRecoveryNode"},UnexpectedError:{defaultMessage:"Unexpected error.",id:"formulas.formulaEvaluatorError.unexpectedError"},DepthExceeded:{defaultMessage:"Maximum recursion depth exceeded.",id:"formulas.formulaEvaluatorError.depthExceeded"},CycleDetected:{defaultMessage:"Cycle detected in formula.",id:"formulas.formulaEvaluatorError.cycleDetected"}});var l=n(47218),d=n(78106);function c(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,o.t1)(e)}}function y(e){switch(e.type){case l.$E.InvalidCharacter:return{...s.InvalidCharacter,values:{errorCharacter:e.character}};case l.$E.UnclosedStringLiteral:return s.UnclosedStringLiteral;case l.$E.UnclosedComment:return s.UnclosedComment;case l.$E.TokenExpected:return{...s.TokenExpected,values:{expectedToken:e.token}};case l.$E.StringLiteralContainsToken:return s.StringLiteralContainsToken;case l.$E.ExpressionExpected:return s.ExpressionExpected;case l.$E.PropertyTokenOrFunctionExpected:return s.PropertyExpected;case l.$E.EndOfInputExpected:return s.EndOfInputExpected;case l.$E.UnexpectedError:return s.UnexpectedError;default:(0,o.t1)(e)}}function f(e){switch(e.type){case l.h4.FunctionCallArgumentWrongType:case l.h4.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function m(e){let t;switch(e.type){case l.h4.ThisRowTypeNotFound:t=u.ThisRowTypeNotFound;break;case l.h4.ThisRowNotBlockWithCollection:t=u.ThisRowNotBlockWithCollection;break;case l.h4.MissingPropertyOnThisRow:t={...u.MissingPropertyOnThisRow,values:{propertyName:e.token.property}};break;case l.h4.MissingContextVariable:t={...u.MissingContextVariable,values:{valueId:e.token.valueId}};break;case l.h4.MissingBlock:t={...u.MissingBlock,values:{blockId:e.token.blockId}};break;case l.h4.CallingNotFunction:t={...u.CallingNotFunction,values:{expressionType:c(e.callee.type.type)}};break;case l.h4.FunctionCallTooFewArguments:t={...u.FunctionCallTooFewArguments,values:{minNumParameters:e.minNumParameters,functionName:e.libraryFunction.name,numArguments:e.numArguments}};break;case l.h4.FunctionCallUnexpectedArgument:t={...u.FunctionCallUnexpectedArgument,values:{functionName:e.libraryFunction.name}};break;case l.h4.FunctionCallArgumentWrongType:t={...u.FunctionCallArgumentWrongType,values:{argumentType:c(e.argument.type.type),functionName:e.libraryFunction.name}};break;case l.h4.MemberPropertyMismatchCollection:t={...u.MemberPropertyMismatchCollection,values:{propertyName:e.token.property}};break;case l.h4.MemberPropertyMissing:t={...u.MemberPropertyMissing,values:{propertyName:e.token.property}};break;case l.h4.MemberPropertyTargetNotBlock:t=u.MemberPropertyTargetNotBlock;break;case l.h4.MemberPropertyButtonType:t=u.MemberPropertyButtonType;break;case l.h4.UndefinedIdentifier:t={...u.UndefinedIdentifier,values:{identifier:e.node.text}};break;case l.h4.UnifiedFunctionCannotFindFunction:t={...u.UnifiedFunctionCannotFindFunction,values:{functionName:e.name}};break;case l.h4.UnifiedFunctionNoArguments:t={...u.UnifiedFunctionNoArguments,values:{functionName:e.libraryFunction.name}};break;case l.h4.UnifiedFunctionTargetWrongType:t={...u.UnifiedFunctionTargetWrongType,values:{functionName:e.libraryFunction.name,targetType:c(e.expression.type.type)}};break;case l.h4.CannotRelativelyCompareTypes:t={...u.CannotRelativelyCompareTypes,values:{lhsType:c(e.lhsType.type),rhsType:c(e.rhsType.type)}};break;case l.h4.CannotDoMathOnType:t={...u.CannotDoMathOnType,values:{lhsType:c(e.lhsType.type),rhsType:c(e.rhsType.type)}};break;case l.h4.UnaryMinusOnNonNumber:t={...u.UnaryMinusOnNonNumber,values:{type:c(e.expression.type.type)}};break;case l.h4.CircularDependency:t=u.CircularDependency;break;case l.h4.IdentifierExpected:t=u.IdentifierExpected;break;case l.h4.FunctionCallExpected:t={...u.FunctionCallExpected,values:{functionName:e.functionName}};break;case l.h4.RenamedIdentifier:t={...u.RenamedIdentifier,values:{identifier:e.identifier,renamedTo:e.renamedTo}};break;case l.h4.RemovedFunction:t={...u.RemovedFunction,values:{functionName:e.functionName,alternative:e.alternative}};break;default:(0,o.t1)(e)}return{...t,values:{...t.values,startOffset:e.node.startOffset,endOffset:e.node.endOffset+1}}}function h(e){let t;switch(e.type){case l.FY.MissingThisRow:t=p.MissingThisRow;break;case l.FY.MissingSchemaPropertyOnThisRow:t={...p.MissingSchemaPropertyOnThisRow,values:{propertyName:e.property}};break;case l.FY.ThisRowBlockPropertyMismatchCollection:t=p.ThisRowBlockPropertyMismatchCollection;break;case l.FY.MissingContextVariable:t={...p.MissingContextVariable,values:{valueId:e.valueId}};break;case l.FY.IdentifierNotFound:t={...p.IdentifierNotFound,values:{identifier:e.node.text}};break;case l.FY.CannotRelativelyCompareTypes:t={...p.CannotRelativelyCompareTypes,values:{lhsType:c(e.lhsType),rhsType:c(e.rhsType)}};break;case l.FY.CannotDoMathOnType:t={...p.CannotDoMathOnType,values:{valueType:c(e.valueType)}};break;case l.FY.CannotCallNonFunction:t={...p.CannotCallNonFunction,values:{calleeType:c(e.calleeType)}};break;case l.FY.UnifiedFunctionPropertyNotFound:t={...p.UnifiedFunctionPropertyNotFound,values:{functionName:e.node.name}};break;case l.FY.LibraryFunctionExecutionError:t={...p.LibraryFunctionExecutionError,values:{functionName:e.libraryFunction.name}};break;case l.FY.FunctionCallTooFewArguments:t={...p.FunctionCallTooFewArguments,values:{functionName:e.libraryFunction.name}};break;case l.FY.FunctionCallUnexpectedArgument:t={...p.FunctionCallUnexpectedArgument,values:{functionName:e.libraryFunction.name}};break;case l.FY.FunctionCallArgumentWrongType:t={...p.FunctionCallArgumentWrongType,values:{functionName:e.libraryFunction.name,argumentType:c(e.argumentType)}};break;case l.FY.AccessingPropertyOnNonBlock:t=p.AccessingPropertyOnNonBlock;break;case l.FY.MissingDataDependencyBlock:t={...p.MissingDataDependencyBlock,values:{blockId:e.blockPointer.id}};break;case l.FY.MissingDataDependencyPerson:t={...p.MissingDataDependencyPerson,values:{personId:e.personPointer.id}};break;case l.FY.MemberPropertyMismatchCollection:t=p.MemberPropertyMismatchCollection;break;case l.FY.MissingPropertyOnSchemaForMemberProperty:t=p.MissingPropertyOnSchemaForMemberProperty;break;case l.FY.UnaryMinusOnNonNumber:t={...p.UnaryMinusOnNonNumber,values:{expressionType:c(e.expressionType)}};break;case l.FY.UnexpectedRecoveryNode:t=p.UnexpectedRecoveryNode;break;case l.FY.UnexpectedError:t=p.UnexpectedError;break;case l.FY.DepthExceeded:t=p.DepthExceeded;break;case l.FY.CycleDetected:t=p.CycleDetected;break;default:(0,o.t1)(e)}return(0,d.w7)(e)?{...t,values:{...t.values,startOffset:e.node.startOffset,endOffset:e.node.endOffset+1}}:t}function v(e){const t=null==e?void 0:e.values;return[r().omit(e,"values"),t]}},33063:(e,t,n)=>{n.d(t,{vW:()=>N,u6:()=>C,kg:()=>R});n(21703);var a=n(96486),r=n.n(a),o=n(80951),i=n(34299),s=n(60246),u=n(7406),p=n(29477),l=n(606),d=n(68626),c=n(21202),y=n(6287),f=n(19889),m=n(70203),h=n(97880),v=n(84682),x=n(42253),b=n(84116),g=n(21027),T=n(51849),k=n(32620),E=n(47218),M=n(78106),w=n(83158);function O(e,t,n){if("number"!==t.type&&"undefined"!==t.type)throw new E.WV({type:E.FY.CannotDoMathOnType,op:n,operand:e,valueType:t.type})}function*N(e,t){if(t.depth>7)throw new E.WV({type:E.FY.DepthExceeded});switch(e.kind){case E.bG.Number:return{type:"number",value:parseFloat(e.text)};case E.bG.String:return{type:"text",value:[[e.text.replace(/\\([\\"])/g,"$1")]]};case E.bG.Boolean:return{type:"checkbox",value:"true"===e.text.toLowerCase()};case E.bG.NotionToken:{const a=e.token;switch(a.type){case b.Oy.Checkbox:return{type:"checkbox",value:a.checked};case b.Oy.BlockProperty:{const n=t.values.find((e=>e.kind===b.yp.ThisRow));if("block"!==(null==n?void 0:n.value.type))throw new E.WV({type:E.FY.MissingThisRow,node:e});const r=n.value.value,o=(yield{recordPointers:[r]}).getRecordModel(r);if(void 0===o)throw new E.WV({type:E.FY.MissingThisRow,node:e});if(void 0===a.collection)return(0,M.SQ)(o,a.property);const i=(0,M.SR)(a.property),s={table:y.v,id:o.getParentId(),spaceId:o.getSpaceId()};if(!(0,l.qo)(a.collection,s))throw new E.WV({type:E.FY.ThisRowBlockPropertyMismatchCollection,node:e,thisRowCollection:s});const u=(yield{recordPointers:[s]}).getRecordModel(s),p=null==u?void 0:u.getNormalizedSchema(),d=null==p?void 0:p[i];if(void 0===d||void 0===p)throw new E.WV({type:E.FY.MissingSchemaPropertyOnThisRow,node:e,collectionId:o.getParentId(),property:i});return yield*P(o,i,p,d,t)}case b.Oy.Block:return{type:"block",value:{table:c.iU,id:a.blockId,spaceId:a.spaceId}};case b.Oy.ContextValue:{var n;const r=null===(n=t.values.find((e=>e.kind===b.yp.ContextValue&&e.id===(0,M.Kv)(a.valueId))))||void 0===n?void 0:n.value;if(void 0===r)throw new E.WV({type:E.FY.MissingContextVariable,node:e,valueId:a.valueId});return r}case b.Oy.Date:return{type:"date",value:a.date};case b.Oy.Person:return{type:"person",value:{table:f.KJ,id:a.userId}};default:(0,h.t1)(a)}break}case E.bG.Identifier:{var a;const n=null===(a=t.values.find((t=>t.kind===b.yp.Binding&&t.id===e.text)))||void 0===a?void 0:a.value;if(void 0!==n)return n;if(e.text in k.Vr)return{type:"function",function:k.Vr[e.text]};throw new E.WV({type:E.FY.IdentifierNotFound,node:e})}case E.bG.Array:return{type:"array",values:yield*(0,M.LD)(e.elements.map((e=>N(e,t))))};case E.bG.Conditional:{const n=yield*N(e.condition,t);return(0,M.vh)(n)?yield*N(e.expIfTrue,t):yield*N(e.expIfFalse,t)}case E.bG.LogicalOr:return{type:"checkbox",value:(yield*(0,M.LD)(e.elements.map((e=>N(e,t))))).map(M.vh).some((e=>e))};case E.bG.LogicalAnd:return{type:"checkbox",value:(yield*(0,M.LD)(e.elements.map((e=>N(e,t))))).map(M.vh).every((e=>e))};case E.bG.Equality:{const[n,a]=yield*(0,M.LD)([N(e.lhs,t),N(e.rhs,t)]),r=yield*(0,M.Jr)(n,a,t);switch(e.op){case"==":return{type:"checkbox",value:r};case"!=":return{type:"checkbox",value:!r}}break}case E.bG.Relational:{const[n,a]=yield*(0,M.LD)([N(e.lhs,t),N(e.rhs,t)]);if("date"===n.type&&"date"===a.type){const r=(0,M.SU)(n.value,a.value,t.userTimeZone);switch(e.op){case"<":return{type:"checkbox",value:r<0};case"<=":return{type:"checkbox",value:r<=0};case">":return{type:"checkbox",value:r>0};case">=":return{type:"checkbox",value:r>=0}}}if("text"===n.type&&"text"===a.type){const[r,o]=yield*(0,M.LD)([(0,M.PX)(n.value,t),(0,M.PX)(a.value,t)]);switch(e.op){case"<":return{type:"checkbox",value:r<o};case"<=":return{type:"checkbox",value:r<=o};case">":return{type:"checkbox",value:r>o};case">=":return{type:"checkbox",value:r>=o}}}if("number"===n.type&&"number"===a.type||"checkbox"===n.type&&"checkbox"===a.type)switch(e.op){case"<":return{type:"checkbox",value:n.value<a.value};case"<=":return{type:"checkbox",value:n.value<=a.value};case">":return{type:"checkbox",value:n.value>a.value};case">=":return{type:"checkbox",value:n.value>=a.value}}throw new E.WV({type:E.FY.CannotRelativelyCompareTypes,lhs:e.lhs,rhs:e.rhs,lhsType:n.type,rhsType:a.type})}case E.bG.Additive:{let[n,a]=yield*(0,M.LD)([N(e.lhs,t),N(e.rhs,t)]);if("undefined"===n.type&&"undefined"===a.type)return{type:"number",value:0};switch("undefined"===n.type&&"number"===a.type?n={type:"number",value:0}:"undefined"===a.type&&"number"===n.type&&(a={type:"number",value:0}),e.op){case"+":return"number"===n.type&&"number"===a.type?{type:"number",value:n.value+a.value}:{type:"text",value:(0,m.Zx)((0,M.j4)(n).concat((0,M.j4)(a)))};case"-":if(O(e.lhs,n,e.op),O(e.rhs,a,e.op),"number"===n.type&&"number"===a.type)return{type:"number",value:n.value-a.value}}return{type:"undefined"}}case E.bG.Multiplicative:{const[n,a]=yield*(0,M.LD)([N(e.lhs,t),N(e.rhs,t)]);switch(O(e.lhs,n,e.op),O(e.rhs,a,e.op),e.op){case"*":if("number"===n.type&&"number"===a.type)return{type:"number",value:n.value*a.value};break;case"/":if("number"===n.type&&"number"===a.type)return{type:"number",value:n.value/a.value};break;case"%":if("number"===n.type&&"number"===a.type)return{type:"number",value:n.value%a.value}}return{type:"undefined"}}case E.bG.Exponentiation:{const[n,a]=yield*(0,M.LD)([N(e.lhs,t),N(e.rhs,t)]);switch(O(e.lhs,n,e.op),O(e.rhs,a,e.op),e.op){case"^":if("number"===n.type&&"number"===a.type)return{type:"number",value:n.value**a.value}}return{type:"undefined"}}case E.bG.Unary:{const n=yield*N(e.expression,t);switch(e.op){case"-":if("number"!==n.type)throw new E.WV({type:E.FY.UnaryMinusOnNonNumber,node:e.expression,expressionType:n.type});return{type:"number",value:-n.value};case"!":case"not":return{type:"checkbox",value:!(0,M.vh)(n)}}throw new Error("unexpected unary operator")}case E.bG.Call:{const n=yield*N(e.expression,t);if("function"!==n.type)throw new E.WV({type:E.FY.CannotCallNonFunction,node:e,calleeType:n.type});const a=n.function,o=(0,M.P2)(a),i=void 0!==n.boundTarget?[n.boundTarget,...e.arguments]:e.arguments;if(i.length<o)throw new E.WV({type:E.FY.FunctionCallTooFewArguments,node:e,libraryFunction:a,numArguments:i.length});const s=yield*(0,M.LD)(i.map(((n,r)=>function*(e,t,n,a,r){const o=(0,M.J3)(a,n);if(void 0===o)throw new E.WV({type:E.FY.FunctionCallUnexpectedArgument,node:e,argument:t,libraryFunction:a,parameterIndex:n});if(!Array.isArray(o.type)&&"expression"===o.type.type)return t;const i=yield*N(t,r);if(!(0,M.mB)(i,o.type)){if(Array.isArray(o.type)?o.type.some((e=>"checkbox"===e.type)):"checkbox"===o.type.type)return{type:"checkbox",value:(0,M.vh)(i)};if(Array.isArray(o.type)?o.type.some((e=>"text"===e.type)):"text"===(0,M.B8)(o.type).type)return"array"===i.type&&(Array.isArray(o.type)?o.type.some((e=>"array"===e.type)):"array"===o.type.type)?{type:"array",values:i.values.map((e=>({type:"text",value:(0,M.j4)(e)})))}:{type:"text",value:(0,M.j4)(i)};throw new E.WV({type:E.FY.FunctionCallArgumentWrongType,node:e,argument:t,libraryFunction:a,parameterIndex:n,argumentType:i.type})}return i}(e,n,r,a,t))));try{return yield*a.eval(s,t)}catch(r){throw new E.WV({type:E.FY.LibraryFunctionExecutionError,node:e,libraryFunction:a,error:r})}}case E.bG.UnifiedFunctionProperty:if(e.name in k.Vr)return{type:"function",function:k.Vr[e.name],boundTarget:e.expression};throw new E.WV({type:E.FY.UnifiedFunctionPropertyNotFound,node:e});case E.bG.MemberBlockProperty:{const n=yield*N(e.expression,t);if("undefined"===n.type)return{type:"undefined"};if("block"!==n.type)throw new E.WV({type:E.FY.AccessingPropertyOnNonBlock,node:e,expressionValue:n});const a=(yield{recordPointers:[n.value]}).getRecordModel(n.value);if(void 0===a)throw new E.WV({type:E.FY.MissingDataDependencyBlock,node:e,blockPointer:n.value});if(void 0===e.propertyToken.collection)return(0,M.SQ)(a,e.propertyToken.property);const r={table:y.v,id:a.getParentId(),spaceId:a.getSpaceId()},o=(0,M.SR)(e.propertyToken.property);if(!(0,l.qo)(e.propertyToken.collection,r))throw new E.WV({type:E.FY.MemberPropertyMismatchCollection,node:e,blockCollection:r});const i=(yield{recordPointers:[r]}).getRecordModel(r),s=null==i?void 0:i.getNormalizedSchema(),u=null==s?void 0:s[o];if(void 0===u||void 0===s)throw new E.WV({type:E.FY.MissingPropertyOnSchemaForMemberProperty,node:e});return yield*P(a,o,s,u,t)}case E.bG.RecoveryNode:throw new E.WV({type:E.FY.UnexpectedRecoveryNode,recovery:e});default:(0,h.t1)(e)}}function C(e,t,n){try{const n=N(e,t);let a=n.next();for(;!a.done;){const e=t.handleDataRequest(a.value);a=n.next(e)}return{value:a.value}}catch(a){if(a instanceof E.WV){const e=a.info;return n&&(0,M.w7)(e)?{error:{...e,node:(0,T.tE)(e.node,n)}}:{error:e}}return{error:{type:E.FY.UnexpectedError,error:(0,u.tg)(a)}}}}async function R(e,t,n){try{const n=N(e,t);let a=n.next();for(;!a.done;){const e=t.handleDataRequest(a.value);a=n.next((0,p.tI)(e)?await e:e)}return{value:a.value}}catch(a){if(a instanceof E.WV){const e=a.info;return n&&(0,M.w7)(e)?{error:{...e,node:(0,T.tE)(e.node,n)}}:{error:e}}return{error:{type:E.FY.UnexpectedError,error:(0,u.tg)(a)}}}}function*P(e,t,n,a,u){const p=`${e.id}:${t}`;if(u.visitedProperties.has(p))throw new E.WV({type:E.FY.CycleDetected});const l=new Set(u.visitedProperties);l.add(p);const f={...u,visitedProperties:l,depth:u.depth+1};if("rollup"===a.type){if(a.aggregation&&"show_unique"!==a.aggregation){var k;const r=yield*(0,g.g)(t,n),{relation_property:s}=a;if(null==r||!r.targetCollectionPointer||!s)return{type:"undefined"};const u=(0,o.rq)(null===(k=e.getProperties())||void 0===k?void 0:k[s]);if(!u)return{type:"undefined"};const{getRecordModel:p}=yield{recordPointers:[r.targetCollectionPointer,e.pointer,...u],collectionBlockProperties:[{blockPointers:[e.pointer],collectionPointer:{table:y.v,id:e.getParentId(),spaceId:e.getSpaceId()},schema:n,property:t}]},l=(0,i.O0)({property:t,schema:n,block:e,getRecordModel:p,userTimeZone:f.userTimeZone,depth:f.depth,intl:f.intl,visitedProperties:f.visitedProperties,resultCache:{}});return void 0===l?{type:"undefined"}:function(e){if(void 0===e.value)return{type:"undefined"};switch(e.type){case"text":return{type:"text",value:(0,m.TP)(e.value)};case"number":return{type:"number",value:e.value};case"date":return{type:"date",value:e.value}}}(l)}{var O;const i=yield*(0,g.g)(t,n),{relation_property:u,target_property:p}=a;if(void 0===i||void 0===u||void 0===p)return{type:"undefined"};const{relationPropertySchema:l,targetCollectionSchema:d}=i,c=(0,o.rq)(null===(O=e.getProperties())||void 0===O?void 0:O[u]),y=yield*(0,g.u)(c,l),m=yield*(0,M.LD)(y.flatMap((e=>{if(void 0===e)return[];const t=d[p];if(void 0===t)return[];const n={kind:b.yp.ThisRow,value:{type:"block",value:e.pointer}},a={...f,values:[n]};return[P(e,p,d,t,a)]}))),h=(0,M.Yw)({type:"array",values:m});if("show_unique"===a.aggregation){const{getRecordModel:t}=yield{recordPointers:[e.pointer,...c]};return{type:"array",values:r().uniqBy(h.values,(e=>(0,s.QT)({result:e,getRecordModel:t,userTimeZone:f.userTimeZone,intl:f.intl})))}}return{type:"array",values:h.values}}}if("formula"===a.type){const{getRecordModel:r}=yield{collectionBlockProperties:[{blockPointers:[e.pointer],collectionPointer:{table:y.v,id:e.getParentId(),spaceId:e.getSpaceId()},schema:n,property:t}]};if(void 0!==a.version){var C;const t=null===(C=a.formula2)||void 0===C?void 0:C.code;if(!t)return{type:"undefined"};const[n,r]=(0,T.dJ)(t),[o,i]=(0,w.K)(n);if(i.length>0)return{type:"undefined"};const s=(0,x.K)(o);if(d.x.isFail(s))return{type:"undefined"};const u={kind:b.yp.ThisRow,value:{type:"block",value:e.pointer}},p={...f,values:[u]};return yield*N(s.value,p)}{const a=(0,v.AH)({schema:n,property:t,block:e,getRecordModel:r,userTimeZone:f.userTimeZone,intl:f.intl,depth:0,resultCache:{},visitedProperties:new Set});switch(typeof a){case"string":return{type:"text",value:(0,m.TP)(a)};case"number":return{type:"number",value:a};case"boolean":return{type:"checkbox",value:a};case"object":return{type:"date",value:a};case"undefined":default:return{type:"undefined"}}}}else if(b.WG.includes(a.type))return(0,M.SQ)(e,a.type);const R=(0,o.wS)(e,t);if("status"===a.type){const e=(0,o.ZG)(R,a);return void 0===e?{type:"undefined"}:{type:"text",value:(0,m.TP)(e)}}if("checkbox"===a.type&&void 0===R)return{type:"checkbox",value:!1};if(("person"===a.type||"relation"===a.type||"multi_select"===a.type)&&void 0===R)return{type:"array",values:[]};if(void 0===R)return{type:"undefined"};switch(a.type){case"title":case"text":return{type:"text",value:R};case"url":case"email":case"phone_number":return{type:"text",value:(0,m.TP)((0,o.zB)(R))};case"select":{const e=(0,o.Sj)(R,a.options??[]);return void 0===e?{type:"undefined"}:{type:"text",value:(0,m.TP)(e)}}case"multi_select":return{type:"array",values:(0,o.uP)(R,a.options??[]).map((e=>({type:"text",value:(0,m.TP)(e)})))};case"checkbox":return{type:"checkbox",value:(0,o.Ml)(R)};case"date":{const e=(0,o.Gl)(R);return void 0===e?{type:"undefined"}:{type:"date",value:e}}case"person":return{type:"array",values:(0,o.DW)({textValue:R,propertySchema:a}).map((e=>({type:"person",value:e})))};case"relation":return{type:"array",values:(yield*(0,g.u)((0,o.rq)(R),a)).map((e=>({type:"block",value:{table:c.iU,id:e.id,spaceId:e.getSpaceId()}})))};case"number":case"auto_increment_id":{const e=(0,o.VY)(R);return"number"==typeof e?{type:"number",value:e}:{type:"undefined"}}case"file":return{type:"array",values:(0,o.g)(R).map((e=>{let{url:t}=e;return{type:"text",value:(0,m.TP)(t)}}))};case"created_time":case"last_edited_time":case"created_by":case"last_edited_by":case"last_visited_time":case"button":case"location":case"verification":return{type:"undefined"};default:(0,h.t1)(a)}}},51849:(e,t,n)=>{n.d(t,{Eh:()=>i,aU:()=>s,dJ:()=>u,tE:()=>p});n(57658);var a=n(70203),r=n(97880),o=n(78106);function i(e,t){if(0===t)return 0;let n=0,a=0;for(let o=0;o<e.length;o++){const i=e[o];switch(i.type){case"code":if(n+i.length>=t)return a+(t-n);n+=i.length,a+=i.length;break;case"token":if(n+1>=t)return a+i.length;n+=1,a+=i.length;break;default:(0,r.t1)(i)}}return a}function s(e,t,n){let a=0,r=0;for(let o=0;o<e.length;o++){const i=e[o];switch(i.type){case"code":if(r+i.length>=t)return a+(t-r);a+=i.length,r+=i.length;break;case"token":if(r+i.length>=t)return a+("right"===n?1:0);a+=1,r+=i.length}}return r}function u(e){let t="";const n=[];return e.forEach((e=>{const r=(0,a.hD)(e),i=(0,o._u)(r);if(void 0!==i)return t+=i,void n.push({type:"token",length:i.length});const s=(0,a.Wi)(e);t+=s,n.push({type:"code",length:s.length})})),[t,n]}function p(e,t){return{...e,startOffset:s(t,e.startOffset,"left"),endOffset:s(t,e.endOffset,"left")}}},32620:(e,t,n)=>{n.d(t,{GV:()=>R,yx:()=>P,Vr:()=>D,N7:()=>S,rq:()=>L});n(21703),n(52262),n(24506),n(57658);var a=n(17126),r=n(5366),o=n(40506),i=n(53877),s=n(84795),u=n(64340),p=n(42875),l=n(76725),d=n(4615),c=n(70203),y=n(97880),f=n(63143),m=n(23790),h=n(84116),v=n(33063),x=n(47218),b=n(78106);function g(e){if(!e)throw new Error("Assertion failed in formulaLibraryFunctions")}const T=(0,r.defineMessages)({e:{id:"database.formula2.constant.e.description",defaultMessage:"Returns the base of the natural logarithm."},pi:{id:"database.formula2.constant.pi.description",defaultMessage:"Returns the ratio of a circle's circumference to its diameter."},if:{id:"database.formula2.operator.if.description",defaultMessage:"Returns the first value if the condition is true; otherwise, returns the second value."},ifs:{id:"database.formula2.operator.ifs.description",defaultMessage:"Returns the value that corresponds to the first true condition. This can be used as an alternative to multiple nested if() statements."},add:{id:"database.formula2.operator.add.description",defaultMessage:"Returns the sum of two numbers."},at:{id:"database.formula2.operator.at.description",defaultMessage:"Returns the value at the specified index in a list."},every:{id:"database.formula2.operator.every.description",defaultMessage:"Returns true if every item in the list satsfies the given condition, and false otherwise."},filter:{id:"database.formula2.operator.filter.description",defaultMessage:"Returns the values in the list for which the condition is true."},find:{id:"database.formula2.operator.find.description",defaultMessage:"Returns the first element in the list for which the condition returns true."},first:{id:"database.formula2.operator.first.description",defaultMessage:"Returns the first element in the list."},flat:{id:"database.formula2.operator.flat.description",defaultMessage:"Flattens a list of lists into a single list."},includes:{id:"database.formula2.operator.includes.description",defaultMessage:"Returns true if the list contains the specified value, and false otherwise."},last:{id:"database.formula2.operator.last.description",defaultMessage:"Returns the last element in the list."},map:{id:"database.formula2.operator.map.description",defaultMessage:"Returns the list populated with the results of calling the expression on every item in the input list."},reverse:{id:"database.formula2.operator.reverse.description",defaultMessage:"Returns the reversed list."},slice:{id:"database.formula2.operator.slice.description",defaultMessage:"Returns the subset of the list from the provided start index (inclusive) to the end index (optional and exclusive)."},findIndex:{id:"database.formula2.operator.findIndex.description",defaultMessage:"Returns the index of the first item in the list for which the condition is true."},unique:{id:"database.formula2.operator.unique.description",defaultMessage:"Returns the list of unique values in the input list."},toPlainText:{id:"database.formula2.operator.toPlainText.description",defaultMessage:"Returns the plain text representation of the input text."},toText:{id:"database.formula2.operator.toText.description",defaultMessage:"Returns the text representation of the input value."},sort:{id:"database.formula2.operator.sort.description",defaultMessage:"Returns the input list in sorted order."},some:{id:"database.formula2.operator.some.description",defaultMessage:"Returns true if any item in the list satisfies the given condition, and false otherwise."},let:{id:"database.formula2.operator.let.description",defaultMessage:"Assigns a value to a variable and evaluates the expression using that variable."},lets:{id:"database.formula2.operator.lets.description",defaultMessage:"Assigns values to multiple variables and evaluates the expression using those variables."},sum:{id:"database.formula2.operator.sum.description",defaultMessage:"Returns the sum of its arguments."},subtract:{id:"database.formula2.operator.subtract.description",defaultMessage:"Returns the difference of two numbers."},multiply:{id:"database.formula2.operator.multiply.description",defaultMessage:"Returns the product of two numbers."},divide:{id:"database.formula2.operator.divide.description",defaultMessage:"Returns the quotient of two numbers."},pow:{id:"database.formula2.operator.pow.description",defaultMessage:"Returns the result of a base number raised to an exponent power."},mod:{id:"database.formula2.operator.mod.description",defaultMessage:"Returns the first number modulo the second number."},equal:{id:"database.formula2.operator.equal.description",defaultMessage:"Returns true if both values are equal and false otherwise."},unequal:{id:"database.formula2.operator.unequal.description",defaultMessage:"Returns false if both values are equal and true otherwise."},concat:{id:"database.formula2.function.concat.description",defaultMessage:"Returns the concatenation of multiple lists."},join:{id:"database.formula2.function.join.description",defaultMessage:"Returns the values of the list with the joiner placed between each of the values."},substring:{id:"database.formula2.function.slice.description",defaultMessage:"Returns the substring of the text from the start index (inclusive) to the end index (optional and exclusive)."},length:{id:"database.formula2.function.length.description",defaultMessage:"Returns the length of the text or list value."},format:{id:"database.formula2.function.format.description",defaultMessage:"Returns the value formatted as text."},style:{id:"database.formula2.function.style.description",defaultMessage:'Adds formatting styles to a given input. Accepted styles include: "b" (bold), "u" (underline), "i" (italics), "c" (code), and "s" (strikethrough).'},unstyle:{id:"database.formula2.function.unstyle.description",defaultMessage:"Removes formatting styles from a given input. If no styles are specified, all styles are removed."},link:{id:"database.formula2.function.link.description",defaultMessage:"Creates a hyperlink from the label text and the URL."},toNumber:{id:"database.formula2.function.toNumber.description",defaultMessage:"Parses a number from text."},contains:{id:"database.formula2.function.contains.description",defaultMessage:"Returns true if the search string is present in the value."},replace:{id:"database.formula2.function.replace.description",defaultMessage:"Replaces the first match of the regular expression with the replacement value."},replaceAll:{id:"database.formula2.function.replaceAll.description",defaultMessage:"Replaces all matches of the regular expression with the replacement value."},test:{id:"database.formula2.function.test.description",defaultMessage:"Returns true if the value matches the regular expression and false otherwise."},empty:{id:"database.formula2.function.empty.description",defaultMessage:"Returns true if the value is empty. 0, “”, and [] are considered empty."},abs:{id:"database.formula2.function.abs.description",defaultMessage:"Returns the absolute value of the number."},cbrt:{id:"database.formula2.function.cbrt.description",defaultMessage:"Returns the cube root of the number."},ceil:{id:"database.formula2.function.ceil.description",defaultMessage:"Returns the smallest integer greater than or equal to the number."},exp:{id:"database.formula2.function.exp.description",defaultMessage:"Returns e^x, where x is the argument, and e is Euler's number (2.718…), the base of the natural logarithm."},floor:{id:"database.formula2.function.floor.description",defaultMessage:"Returns the largest integer less than or equal to the number."},ln:{id:"database.formula2.function.ln.description",defaultMessage:"Returns the natural logarithm of the number."},log10:{id:"database.formula2.function.log10.description",defaultMessage:"Returns the base 10 logarithm of the number."},log2:{id:"database.formula2.function.log2.description",defaultMessage:"Returns the base 2 logarithm of the number."},max:{id:"database.formula2.function.max.description",defaultMessage:"Returns the largest number of the arguments."},min:{id:"database.formula2.function.min.description",defaultMessage:"Returns the smallest number of the arguments."},round:{id:"database.formula2.function.round.description",defaultMessage:"Returns the value of a number rounded to the nearest integer."},sign:{id:"database.formula2.function.sign.description",defaultMessage:"Returns 1 if the number is positive, -1 if it is negative, and 0 if it is zero."},sqrt:{id:"database.formula2.function.sqrt.description",defaultMessage:"Returns the positive square root of the number."},start:{id:"database.formula2.function.start.description",defaultMessage:"Returns the start of the date range."},end:{id:"database.formula2.function.end.description",defaultMessage:"Returns the end of the date range."},now:{id:"database.formula2.function.now.description",defaultMessage:"Returns the current date and time."},timestamp:{id:"database.formula2.function.timestamp.description",defaultMessage:"Returns the current Unix timestamp, representing the number of milliseconds that have elapsed since January 1, 1970."},fromTimestamp:{id:"database.formula2.function.fromTimestamp.description",defaultMessage:"Returns the date from the given Unix timestamp. The timestamp represents the number of milliseconds that have elapsed since January 1, 1970."},dateAdd:{id:"database.formula2.function.dateAdd.description",defaultMessage:'Adds time to the date. The unit argument can be one of: "years", "quarters", "months", "weeks", "days", "hours", "minutes", "seconds", or "milliseconds" (default).'},dateSubtract:{id:"database.formula2.function.dateSubtract.description",defaultMessage:'Subtracts time from the date. The unit argument can be one of: "years", "quarters", "months", "weeks", "days", "hours", "minutes", "seconds", or "milliseconds" (default).'},dateBetween:{id:"database.formula2.function.dateBetween.description",defaultMessage:'Returns the difference between two dates. The unit argument can be one of: "years", "quarters", "months", "weeks", "days", "hours", "minutes", "seconds", or "milliseconds" (default).'},formatDate:{id:"database.formula2.function.formatDate.description",defaultMessage:'Formats the date using a custom format string. The format string can contain the following text to represent parts of the date: "yyyy" for year, "MM" for month, "dd" for day, "HH" for hour, "mm" for minute, "ss" for second, "SSS" for millisecond.'},date:{id:"database.formula2.function.date.description",defaultMessage:"Returns the day of the month from the date (1-31)."},day:{id:"database.formula2.function.day.description",defaultMessage:"Returns the day of the week of the date, between 1 (Monday) and 7 (Sunday)."},month:{id:"database.formula2.function.month.description",defaultMessage:"Returns the month of the date (1-12)."},year:{id:"database.formula2.function.year.description",defaultMessage:"Returns the year of the date."},hour:{id:"database.formula2.function.hour.description",defaultMessage:"Returns the hour of the date (0-23)."},minute:{id:"database.formula2.function.minute.description",defaultMessage:"Returns the minute of the date (0-59)."},second:{id:"database.formula2.function.second.description",defaultMessage:"Returns the second of the date (0-59)."},parseDate:{id:"database.formula2.function.parseDate.description",defaultMessage:"Returns the date parsed according to the ISO 8601 standard."},dateStart:{id:"database.formula2.function.dateStart.description",defaultMessage:"Returns the start of the date range."},dateEnd:{id:"database.formula2.function.dateEnd.description",defaultMessage:"Returns the end of the date range."},id:{id:"database.formula2.function.id.description",defaultMessage:"Returns the id of the current page."},name:{id:"database.formula2.function.name.description",defaultMessage:"Returns the name of a person."},email:{id:"database.formula2.function.email.description",defaultMessage:"Returns the email address of a person."},lower:{id:"database.formula2.function.lower.description",defaultMessage:"Converts the text to lowercase."},upper:{id:"database.formula2.function.upper.description",defaultMessage:"Converts the text to uppercase."}});function k(e,t,n){return{name:e,eval:function*(e,t){return{type:"number",value:n}},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:`${e}()`,output:n.toString()}]],syntax:[`${e}()`],description:t}}function E(e,t,n,a){const r=a.map((t=>({input:`${e}(${t})`,output:`${n(t)}`}))),o=a.map((t=>({input:`${t}.${e}()`,output:`${n(t)}`})));return{name:e,eval:function*(e,t){const[a]=e;return g("number"===a.type),{type:"number",value:n(a.value)}},parameters:{expected:[{name:"input",type:{type:"number"}}]},returnType:{type:"number"},iconType:{type:"number"},examples:[r,o],syntax:[`${e}(number)`,`number.${e}()`],description:t}}function M(e,t,n,a){return{name:e,eval:function*(e,t){const[a,r]=e;return g("number"===a.type&&"number"===r.type),{type:"number",value:n(a.value,r.value)}},parameters:{expected:[{name:"lhs",type:{type:"number"}},{name:"rhs",type:{type:"number"}}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:`${e}(5, 10)`,output:`${n(5,10)}`},{input:`5 ${a} 10`,output:`${n(5,10)}`}],[{input:`5.${e}(10)`,output:`${n(5,10)}`},{input:`5 ${a} 10`,output:`${n(5,10)}`}]],syntax:[`${e}(number, number)`,`number.${e}(number)`],description:t}}const w=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"];function*O(e,t){const n=yield*(0,b.PX)(e,t);if(!w.includes(n))throw new x.Mu({type:x.sj.DateInvalidDurationUnit,invalidUnit:n});return n}function N(e){return function*(t,n){const[a,r,o]=t;g("date"===a.type&&"number"===r.type&&"text"===o.type);const s=(0,i.NK)(a.value,n.userTimeZone).start,u=e(s,r.value,yield*O(o.value,n));return{type:"date",value:"date"===a.value.type||"daterange"===a.value.type?(0,i.hT)(u,n.userTimeZone):(0,i.CQ)(u,n.userTimeZone)}}}function C(e){return function*(t,n){const[a]=t;return g("date"===a.type),{type:"number",value:e((0,i.NK)((0,o.Ws)(a.value),n.userTimeZone,n.intl.locale).start)}}}const R="currentValue",P={expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{name:"expression",type:{type:"expression"},augmentScope:e=>{var t;return{[R]:"array"===(null===(t=e[0])||void 0===t?void 0:t.type)?e[0].of:{type:"unknown"}}}}]};function U(e,t,n){return(0,b.LD)(e.map((e=>(0,v.vW)(t,{...n,values:[{kind:h.yp.Binding,id:R,value:e},...n.values]}))))}const F={type:"undefined"},D={joinText:{name:"joinText",eval:function*(e){const[t,...n]=e;return g("text"===t.type),{type:"text",value:(0,c.Zx)((0,l.Z)(n.map((e=>(g("text"===e.type),e.value))),(()=>t.value)).flat())}},parameters:{expected:[{name:"joiner",type:{type:"text"}}],varargs:[{name:"arg",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'joinText(", ", "one", "two")',output:'"one, two"'}],[{input:'", ".joinText("one", "two")',output:'"one, two"'}]],syntax:["joinText(joiner, text, …)","joiner.joinText(text, …)"],description:T.join},substring:{name:"substring",eval:function*(e,t){const[n,a,r]=e;g("text"===n.type&&"number"===a.type);return{type:"text",value:[[(yield*(0,b.PX)(n.value,t)).slice(a.value,"number"===(null==r?void 0:r.type)?r.value:void 0)]]}},parameters:{expected:[{name:"target",type:{type:"text"}},{name:"startIndex",type:{type:"number"}},{name:"endIndex",optional:!0,type:{type:"number"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'substring("Notion", 0, 2)',output:'"No"'}],[{input:'"Notion".substring(0, 2)',output:'"No"'}]],syntax:["substring(text, startIndex, endIndex?)","text.substring(startIndex, endIndex?)"],description:T.substring},length:{name:"length",eval:function*(e,t){const[n]=e;return"array"===n.type?{type:"number",value:n.values.length}:(g("text"===n.type),{type:"number",value:n.value.reduce(((e,t)=>e+(0,c.J1)(t)),0)})},parameters:{expected:[{name:"input",type:[{type:"text"},{type:"array",of:{type:"unknown"}}]}]},returnType:{type:"number"},iconType:{type:"text"},examples:[[{input:'length("hi")',output:"2"},{input:"length([1])",output:"1"}],[{input:'"hi".length()',output:"2"},{input:"[1].length()",output:"1"}]],syntax:["length(value)","value.length()"],description:T.length},format:{name:"format",eval:function*(e,t){const[n]=e,a=(0,b.j4)(n);return{type:"text",value:(0,c.TP)(yield*(0,b.PX)(a,t))}},parameters:{expected:[{name:"input",type:{type:"unknown"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:"format(2)",output:'"2"'}],[{input:"2.format()",output:'"2"'}]],syntax:["format(value)","value.format()"],description:T.format},style:{name:"style",eval:function*(e){const[t,...n]=e;g("text"===t.type),n.forEach((e=>g("text"===e.type)));const a=n.length>0?(0,b.LF)(n.map((e=>(g("text"===e.type),e.value))).filter(y.$K)):[];return{type:"text",value:(0,c.ET)(t.value,a)}},parameters:{expected:[{name:"input",type:{type:"text"}}],varargs:[{name:"styles",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'style("Notion", "b", "u")',output:[["Notion",[["b"],["_"]]]]},{input:'style("Notion", "blue", "purple_background")',output:[['"'],["Notion",[["h","blue"],["h","purple_background"]]],['"']]}],[{input:'"Notion".style("b", "u")',output:[["Notion",[["b"],["_"]]]]},{input:'"Notion".style("blue", "purple_background)',output:[['"'],["Notion",[["h","blue"],["h","purple_background"]]],['"']]}]],syntax:["style(value, styles)","value.style(styles)"],description:T.style},unstyle:{name:"unstyle",eval:function*(e){const[t,...n]=e;g("text"===t.type);const a=n.length>0?(0,b.LF)(n.map((e=>(g("text"===e.type),e.value))).filter(y.$K)):void 0;return{type:"text",value:(0,c.P7)(t.value,a)}},parameters:{expected:[{name:"input",type:{type:"text"}}],varargs:[{name:"styles",optional:!0,type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:[['unstyle("'],["Text",[["i"],["b"]]],['")']],output:[["Text"]]},{input:[['unstyle("'],["Text",[["h","blue"],["b"],["i"]]],['", "b", "blue")']],output:[['"'],["Text",[["i"]]],['"']]}],[{input:[['"'],["Text",[["i"],["b"]]],['".unstyle()']],output:'"Text"'},{input:[['"'],["Text",[["h","blue"],["b"],["i"]]],['".unstyle("b", "blue")']],output:[['"'],["Text",[["i"]]],['"']]}]],syntax:["unstyle(value, styles?)","value.unstyle(styles?)"],description:T.unstyle},link:{name:"link",eval:function*(e){const[t,n]=e;return g("text"===t.type),g("text"===n.type),{type:"text",value:(0,c.C9)(t.value,(0,c.Jc)(n.value))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"url",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'link("Notion", "https://notion.so")',output:[['"'],["Notion",[(0,c.ed)("https://notion.so")]],['"']]}],[{input:'"Notion".link("https://notion.so")',output:[['"'],["Notion",[(0,c.ed)("https://notion.so")]],['"']]}]],syntax:["link(text, url)","text.link(url)"],description:T.link},contains:{name:"contains",eval:function*(e,t){const[n,a]=e;g("text"===n.type&&"text"===a.type);const r=yield*(0,b.PX)(n.value,t),o=yield*(0,b.PX)(a.value,t);return{type:"checkbox",value:r.includes(o)}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"search",type:{type:"text"}}]},returnType:{type:"checkbox"},iconType:{type:"text"},examples:[[{input:'contains("Notion", "ot")',output:"true"}],[{input:'"Notion".contains("ot")',output:"true"}]],syntax:["contains(value, search)","value.contains(search)"],description:T.contains},replace:{name:"replace",eval:function*(e,t){const[n,a,r]=e;g("text"===n.type&&"text"===a.type);const o=yield*(0,b.PX)(n.value,t),i=yield*(0,b.PX)(a.value,t);return{type:"text",value:(0,c.TP)(o.replace(new RegExp(i),"text"===(null==r?void 0:r.type)?yield*(0,b.PX)(r.value,t):""))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"pattern",type:{type:"text"}},{name:"replacement",optional:!0,type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'replace("Notion Notion", "N", "M")',output:'"Motion Notion"'}],[{input:'"Motion Notion".replace("N", "M")',output:'"Motion Notion"'}]],syntax:["replace(text, pattern, replacement?)","text.replace(pattern, replacement?)"],description:T.replace},replaceAll:{name:"replaceAll",eval:function*(e,t){const[n,a,r]=e;g("text"===n.type&&"text"===a.type);const o=yield*(0,b.PX)(n.value,t);return{type:"text",value:(0,c.TP)(o.replace(new RegExp(yield*(0,b.PX)(a.value,t),"g"),"text"===(null==r?void 0:r.type)?yield*(0,b.PX)(r.value,t):""))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"pattern",type:{type:"text"}},{name:"replacement",optional:!0,type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'replaceAll("Notion Notion", "N", "M")',output:'"Motion Motion"'},{input:'replaceAll("Notion123", "\\d", "")',output:'"Notion"'}],[{input:'"Notion Notion".replaceAll("N", "M")',output:'"Motion Motion"'},{input:'"Notion123".replaceAll("\\d", "")',output:'"Notion"'}]],syntax:["replaceAll(text, pattern, replacement)","text.replaceAll(pattern, replacement)"],description:T.replaceAll},test:{name:"test",eval:function*(e,t){const[n,a]=e;return g("text"===n.type&&"text"===a.type),{type:"checkbox",value:new RegExp(yield*(0,b.PX)(a.value,t)).test(yield*(0,b.PX)(n.value,t))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"pattern",type:{type:"text"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:'test("Notion", "Not")',output:"true"},{input:'test("Notion", "\\d")',output:"false"}],[{input:'"Notion.test("Not")',output:"true"},{input:'"Notion".test("\\d")',output:"false"}]],syntax:["test(text, pattern)","text.test(pattern)"],description:T.test},empty:{name:"empty",eval:function*(e,t){const[n]=e;return{type:"checkbox",value:"array"===n.type?0===n.values.length:!(0,b.vh)(n)}},parameters:{expected:[{name:"input",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"empty(0)",output:"true"},{input:"empty([])",output:"true"}],[{input:"0.empty()",output:"true"},{input:"[].empty()",output:"true"}]],syntax:["empty(value)","value.empty()"],description:T.empty},toNumber:{name:"toNumber",eval:function*(e,t){const[n]=e;switch(n.type){case"number":return n;case"checkbox":return{type:"number",value:n.value?1:0};case"text":{const e=yield*(0,b.PX)(n.value,t),a=parseFloat(e);return(0,f.hj)(a)?{type:"number",value:parseFloat(e)}:F}case"date":return{type:"number",value:(0,i.NK)(n.value,t.userTimeZone).start.valueOf()};default:return F}},parameters:{expected:[{name:"input",type:{type:"unknown"}}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:'toNumber("2")',output:"2"},{input:"toNumber(now())",output:(0,i.uO)((0,i.R_)((0,p.r)()),(0,p.r)()).toString()}],[{input:'"2".toNumber()',output:"2"},{input:"now().toNumber()",output:(0,i.uO)((0,i.R_)((0,p.r)()),(0,p.r)()).toString()}]],syntax:["toNumber(value)","value.toNumber()"],description:T.toNumber},e:k("e",T.e,Math.E),pi:k("pi",T.pi,Math.PI),abs:E("abs",T.abs,Math.abs,[10,-10]),ceil:E("ceil",T.ceil,Math.ceil,[.4,-.6]),floor:E("floor",T.floor,Math.floor,[.4,-.6]),round:E("round",T.round,Math.round,[.4,-.6]),sqrt:E("sqrt",T.sqrt,Math.sqrt,[4,7]),cbrt:E("cbrt",T.cbrt,Math.cbrt,[9,64]),exp:E("exp",T.exp,Math.exp,[1,-1]),ln:E("ln",T.ln,Math.log,[Math.E,10]),log10:E("log10",T.log10,Math.log10,[10,1e5]),log2:E("log2",T.log2,Math.log2,[4,1024]),sign:E("sign",T.sign,Math.sign,[-10,10]),add:M("add",T.add,((e,t)=>e+t),"+"),subtract:M("subtract",T.subtract,((e,t)=>e-t),"-"),multiply:M("multiply",T.multiply,((e,t)=>e*t),"*"),divide:M("divide",T.divide,((e,t)=>e/t),"/"),mod:M("mod",T.mod,((e,t)=>e%t),"%"),pow:M("pow",T.pow,((e,t)=>e**t),"^"),min:{name:"min",eval:function*(e,t){const n=e.flatMap((e=>"array"===e.type?e.values.map((e=>{if("number"===e.type)return e.value})).filter(y.$K):"number"===e.type?[e.value]:void 0)).filter(y.$K);return{type:"number",value:Math.min(...n)}},parameters:{varargs:[{name:"value",type:[{type:"number"},{type:"array",of:{type:"number"}}]}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:"min(1, 2, 3)",output:"1"},{input:"min([1, 2, 3]])",output:"1"}],[{input:"[1, 2, 3].min()",output:"1"}]],syntax:["min(list)","list.min()"],description:T.min},max:{name:"max",eval:function*(e,t){const n=e.flatMap((e=>"array"===e.type?e.values.map((e=>{if("number"===e.type)return e.value})).filter(y.$K):"number"===e.type?[e.value]:void 0)).filter(y.$K);return{type:"number",value:Math.max(...n)}},parameters:{varargs:[{name:"value",type:[{type:"number"},{type:"array",of:{type:"number"}}]}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:"max(1, 2, 3)",output:"3"},{input:"max([1, 2, 3]])",output:"3"}],[{input:"[1, 2, 3].max()",output:"3"}]],syntax:["max(list)","list.max()"],description:T.max},dateStart:{name:"dateStart",eval:function*(e,t){const[n]=e;return g("date"===n.type),{type:"date",value:(0,o.Ws)(n.value)}},parameters:{expected:[{name:"input",type:{type:"date"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:"dateStart(aDateRange)",output:"dateRangeStart"}],[{input:"aDateRange.dateStart()",output:"dateRangeStart"}]],syntax:["dateStart(dateRange)","dataRange.dateStart()"],description:T.dateStart},dateEnd:{name:"dateEnd",eval:function*(e,t){const[n]=e;return g("date"===n.type),{type:"date",value:(0,o.S$)(n.value)}},parameters:{expected:[{name:"input",type:{type:"date"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:"dateEnd(aDateRange)",output:"dateRangeEnd"}],[{input:"aDateRange.dateEnd()",output:"dateRangeEnd"}]],syntax:["dateEnd(dateRange)","dataRange.dateEnd()"],description:T.dateEnd},now:{name:"now",eval:function*(e,t){return{type:"date",value:(0,i.R_)(t.userTimeZone)}},parameters:{},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:"now()",output:[(0,c.YC)((0,c.pZ)((0,i.R_)((0,p.r)())))]}]],syntax:["now()"],description:T.now},timestamp:{name:"timestamp",eval:function*(e,t){const[n]=e;return g("date"===n.type),{type:"number",value:(0,i.uO)(n.value,t.userTimeZone)}},parameters:{expected:[{name:"input",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:"timestamp(now())",output:(0,i.uO)((0,i.R_)((0,p.r)()),(0,p.r)()).toString()}],[{input:"now().timestamp()",output:(0,i.uO)((0,i.R_)((0,p.r)()),(0,p.r)()).toString()}]],syntax:["timestamp(date)","date.timestamp()"],description:T.timestamp},fromTimestamp:{name:"fromTimestamp",eval:function*(e,t){const[n]=e;return g("number"===n.type),{type:"date",value:(0,i.CQ)(n.value,t.userTimeZone)}},parameters:{expected:[{name:"input",type:{type:"number"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:"fromTimestamp(1689024900000)",output:[(0,c.YC)((0,c.pZ)((0,i.CQ)(16890249e5,(0,p.r)())))]}],[{input:"1689024900000.fromTimestamp()",output:[(0,c.YC)((0,c.pZ)((0,i.CQ)(16890249e5,(0,p.r)())))]}]],syntax:["fromTimestamp(timestamp)","timestamp.fromTimestamp()"],description:T.fromTimestamp},parseDate:{name:"parseDate",eval:function*(e,t){const[n]=e;g("text"===n.type);const a=yield*(0,b.PX)(n.value,t),r=(0,s.fuzzyValidDateTimeFromISO)(a);return r?{type:"date",value:(0,s.luxonDateToNotionDateOrDateTime)(r)}:F},parameters:{expected:[{name:"dateString",type:{type:"text"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:'parseDate("2022-01-01")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2022-01-01"))))]},{input:'parseDate("2022-01-01T00:00:00.000Z")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2022-01-01T00:00:00.000Z"))))]}],[{input:'"2022-01-01".parseDate()',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2022-01-01"))))]},{input:'"2022-01-01T00:00:00.000Z".parseDate()',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.fromISO("2022-01-01T00:00:00.000Z"))))]}]],syntax:["parseDate(dateString)","dateString.parseDate()"],description:T.parseDate},dateAdd:{name:"dateAdd",eval:N(((e,t,n)=>e.plus({[n]:t}).valueOf())),parameters:{expected:[{name:"input",type:{type:"date"}},{name:"num",type:{type:"number"}},{name:"unit",type:{type:"text"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:'now().dateAdd(1, "days")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().plus({days:1}))))]},{input:'now().dateAdd(1, "months")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().plus({months:1}))))]},{input:'now().dateAdd(1, "years")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().plus({years:1}))))]}],[{input:'now().dateAdd(1, "days")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().plus({days:1}))))]},{input:'now().dateAdd(1, "months")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({months:1}))))]},{input:'now().dateAdd(1, "years")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().plus({years:1}))))]}]],syntax:["dateAdd(date, num, unit)","date.dateAdd(num, unit)"],description:T.dateAdd},dateSubtract:{name:"dateSubtract",eval:N(((e,t,n)=>e.minus({[n]:t}).valueOf())),parameters:{expected:[{name:"input",type:{type:"date"}},{name:"num",type:{type:"number"}},{name:"unit",type:{type:"text"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:'dateSubtract(now(), 1, "days")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({days:1}))))]},{input:'dateSubtract(now(), 1, "months")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({months:1}))))]},{input:'dateSubtract(now(), 1, "years")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({years:1}))))]}],[{input:'now().dateSubtract(1, "days")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({days:1}))))]},{input:'now().dateSubtract(1, "months")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({months:1}))))]},{input:'now().dateSubtract(1, "years")',output:[(0,c.YC)((0,c.pZ)((0,s.luxonDateToNotionDateOrDateTime)(a.ou.now().minus({years:1}))))]}]],syntax:["dateSubtract(date, num, unit)","date.dateSubtract(num, unit)"],description:T.dateSubtract},dateBetween:{name:"dateBetween",eval:function*(e,t){const[n,a,r]=e;g("date"===n.type&&"date"===a.type&&"text"===r.type);const o=(0,i.NK)(n.value,t.userTimeZone).start,s=(0,i.NK)(a.value,t.userTimeZone).start,u=yield*O(r.value,t);return{type:"number",value:Math.trunc(o.diff(s,u).get(u))}},parameters:{expected:[{name:"left",type:{type:"date"}},{name:"right",type:{type:"date"}},{name:"unit",type:{type:"text"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'dateBetween(parseDate("2021-01-01"), parseDate("2021-01-02"), "days")',output:"1"},{input:'dateBetween(parseDate("2021-01-01"), parseDate("2021-02-02"), "months")',output:"1"}],[{input:'parseDate("2021-01-01").dateBetween(parseDate("2021-01-02"), "days")',output:"1"},{input:'parseDate("2021-01-01").dateBetween(parseDate("2021-02-02"), "months")',output:"1"}]],syntax:["dateBetween(date, date, unit)","date.dateBetween(date, unit)"],description:T.dateBetween},formatDate:{name:"formatDate",eval:function*(e,t){const[n,a]=e;g("date"===n.type&&"text"===a.type);const r=(0,i.NK)((0,o.Ws)(n.value),t.userTimeZone,t.intl.locale).start;return{type:"text",value:(0,c.TP)((0,u.P)(r,yield*(0,b.PX)(a.value,t)))}},parameters:{expected:[{name:"date",type:{type:"date"}},{name:"format",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"date"},examples:[[{input:'formatDate(now(), "MMMM D, Y")',output:[['"'],[(0,u.P)(a.ou.now(),"MMMM D, Y")],['"']]},{input:'formatDate(now(), "MM/DD/YYYY")',output:[['"'],[(0,u.P)(a.ou.now(),"MM/DD/YYYY")],['"']]}],[{input:'now().formatDate("MMMM D, Y")',output:[['"'],[(0,u.P)(a.ou.now(),"MMMM D, Y")],['"']]},{input:'now().formatDate("MM/DD/YYYY")',output:[['"'],[(0,u.P)(a.ou.now(),"MM/DD/YYYY")],['"']]}]],syntax:["formatDate(date, format)","date.formatDate(format)"],description:T.formatDate},minute:{name:"minute",eval:C((e=>e.minute)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'minute(parseDate("2023-07-10T17:35Z"))',output:"35"}],[{input:'parseDate("2023-07-10T17:35Z").minute()',output:"35"}]],syntax:["minute(date)","date.minute()"],description:T.minute},hour:{name:"hour",eval:C((e=>e.hour)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'hour(parseDate("2023-07-10T17:35Z"))',output:"17"}],[{input:'parseDate("2023-07-10T17:35Z").hour()',output:"17"}]],syntax:["hour(date)","date.hour()"],description:T.hour},day:{name:"day",eval:C((e=>e.weekday)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'day(parseDate("2023-07-10T17:35Z"))',output:"1"}],[{input:'parseDate("2023-07-10T17:35Z").day()',output:"1"}]],syntax:["day(date)","date.day()"],description:T.day},date:{name:"date",eval:C((e=>e.day)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'date(parseDate("2023-07-10T17:35Z"))',output:"10"}],[{input:'parseDate("2023-07-10T17:35Z").date()',output:"10"}]],syntax:["date(date)","date.date()"],description:T.date},month:{name:"month",eval:C((e=>e.month)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'month(parseDate("2023-07-10T17:35Z"))',output:"7"}],[{input:'parseDate("2023-07-10T17:35Z").month()',output:"7"}]],syntax:["month(date)","date.month()"],description:T.month},year:{name:"year",eval:C((e=>e.year)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:"year(now())",output:(new Date).getFullYear().toString()}],[{input:"now().year()",output:(new Date).getFullYear().toString()}]],syntax:["year(date)","date.year()"],description:T.year},if:{name:"if",eval:function*(e,t){const[n,a,r]=e;return g("checkbox"===n.type),n.value?yield*(0,v.vW)(a,t):yield*(0,v.vW)(r,t)},parameters:{expected:[{name:"condition",type:{type:"checkbox"}},{name:"ifTrue",type:{type:"expression"}},{name:"ifFalse",type:{type:"expression"}}]},returnType:e=>{let[t,n,a]=e;return void 0!==n&&void 0!==a&&(0,m.Jy)(n,a)?n:{type:"unknown"}},iconType:{type:"checkbox"},examples:[[{input:"if(true, 1, 2)",output:"1"},{input:"if(false, 1, 2)",output:"2"}],[{input:"true.if(1, 2)",output:"1"},{input:"false.if(1, 2)",output:"2"}]],syntax:["if(condition, ifTrue, ifFalse)","condition.if(ifTrue, ifFalse)"],description:T.if},ifs:{name:"ifs",parameters:{expected:[{name:"condition",type:{type:"checkbox"}},{name:"ifTrue",type:{type:"expression"}}],varargs:[{name:"rest",type:{type:"expression"}}]},returnType:e=>{if(e.length<2)return{type:"unknown"};const t=e[1];let n=2;for(;n<e.length-1;n+=2)if(!(0,m.Jy)(e[n+1],t))return{type:"unknown"};if(n===e.length-1){const a=e[n];if(!(0,m.Jy)(a,t))return{type:"unknown"}}return t},eval:function*(e,t){const n=e[0];if(g("checkbox"===n.type),n.value)return yield*(0,v.vW)(e[1],t);for(let a=2;a<e.length-1;a+=2){const n=e[a];if((0,b.vh)(yield*(0,v.vW)(n,t)))return yield*(0,v.vW)(e[a+1],t)}return e.length%2==1?yield*(0,v.vW)(e[e.length-1],t):F},iconType:{type:"checkbox"},examples:[[{input:"ifs(true, 1, true, 2, 3)",output:"1"},{input:"ifs(false, 1, false, 2, 3)",output:"3"}],[{input:"true.ifs(1, true, 2, 3)",output:"1"},{input:"false.ifs(1, false, 2, 3)",output:"3"}]],syntax:["ifs(condition1, ifTrue1, condition2, ifTrue2, ..., else)","condition1.ifs(ifTrue1, condition2, ifTrue2, ..., else)"],description:T.ifs},sum:{name:"sum",eval:function*(e,t){return{type:"number",value:e.reduce(((e,t)=>e+("number"===t.type?t.value:"array"===t.type?t.values.reduce(((e,t)=>e+("number"===t.type?t.value:0)),0):0)),0)}},parameters:{varargs:[{name:"value",type:[{type:"number"},{type:"array",of:{type:"number"}}]}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:"sum(1, 2, 3)",output:"6"},{input:"sum([1, 2, 3], 4, 5)",output:"15"}],[{input:"[1, 2, 3].sum()",output:"6"},{input:"[1, 2, 3].sum(4, 5)",output:"15"}]],syntax:["sum(list)","list.sum()"],description:T.sum},at:{name:"at",eval:function*(e,t){const[n,a]=e;return g("array"===n.type&&"number"===a.type),void 0!==n.values[a.value]?n.values[a.value]:F},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{name:"index",type:{type:"number"}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"at([1, 2, 3], 1)",output:"2"}],[{input:"[1, 2, 3].at(1)",output:"2"}]],syntax:["at(list, index)","list.at(index)"],description:T.at},concat:{name:"concat",eval:function*(e){return{type:"array",values:e.flatMap((e=>(g("array"===e.type),e.values.filter((e=>"undefined"!==e.type)))))}},parameters:{varargs:[{name:"arg",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{const t=null==e?void 0:e[0];if(void 0===t||"array"===t.type)return{type:"array",of:{type:"unknown"}};for(let n=1;n<e.length;n++)if(void 0!==e[n]&&!(0,m.Jy)(e[n],t))return{type:"array",of:{type:"unknown"}};return t},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"concat([1, 2], [3, 4])",output:"[1, 2, 3, 4]"},{input:'concat(["a", "b"], ["c", "d"])',output:'["a", "b", "c", "d"]'}],[{input:"[1, 2].concat([3, 4])",output:"[1, 2, 3, 4]"},{input:'["a", "b"].concat(["c", "d"])',output:'["a", "b", "c", "d"]'}]],syntax:["concat(list1, list2, ...)","list1.concat(list2, ...)"],description:T.concat},every:{name:"every",eval:function*(e,t){const[n,a]=e;g("array"===n.type);return{type:"checkbox",value:(yield*U(n.values,a,t)).every((e=>(0,b.vh)(e)))}},parameters:P,returnType:{type:"checkbox"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"every([1, 2, 3], currentValue > 0)",output:"true"},{input:"every([1, 2, 3], currentValue == 1)",output:"false"}],[{input:"[1, 2, 3].every(currentValue > 0)",output:"true"},{input:"[1, 2, 3].every(currentValue == 1)",output:"false"}]],syntax:["every(list, condition)","list.every(condition)"],description:T.every},filter:{name:"filter",eval:function*(e,t){const[n,a]=e;g("array"===n.type);const r=yield*U(n.values,a,t);return{type:"array",values:n.values.filter(((e,t)=>(0,b.vh)(r[t])))}},parameters:P,returnType:e=>{let[t,n]=e;return"array"===(null==t?void 0:t.type)?t:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"filter([1, 2, 3], currentValue > 1)",output:"[2, 3]"},{input:'filter(["a", "b", "c"], currentValue == "a")',output:'["a"]'}],[{input:"[1, 2, 3].filter(currentValue > 1)",output:"[2, 3]"},{input:'["a", "b", "c"].filter(currentValue == "a")',output:'["a"]'}]],syntax:["filter(list, condition)","list.filter(condition)"],description:T.filter},find:{name:"find",eval:function*(e,t){const[n,a]=e;g("array"===n.type);const r=yield*U(n.values,a,t);return n.values.find(((e,t)=>(0,b.vh)(r[t])))??{type:"undefined"}},parameters:P,returnType:e=>{let[t,n]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"text"},examples:[[{input:'find(["a", "b", "c"], currentValue == "b")',output:'"b"'},{input:"find([1, 2, 3], currentValue > 100)",output:""}],[{input:'["a", "b", "c"].find(currentValue == "b")',output:'"b"'},{input:"[1, 2, 3].find(currentValue > 100)",output:""}]],syntax:["find(list, condition)","list.find(condition)"],description:T.find},findIndex:{name:"findIndex",eval:function*(e,t){const[n,a]=e;g("array"===n.type);return{type:"number",value:(yield*U(n.values,a,t)).findIndex((e=>(0,b.vh)(e)))}},parameters:P,returnType:e=>{let[t,n]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"text"},examples:[[{input:'findIndex(["a", "b", "c"], currentValue == "b")',output:"1"},{input:"findIndex([1, 2, 3], currentValue > 100)",output:"-1"}],[{input:'["a", "b", "c"].findIndex(currentValue == "b")',output:"1"},{input:"[1, 2, 3].findIndex(currentValue > 100)",output:"-1"}]],syntax:["findIndex(list, condition)","list.findIndex(condition)"],description:T.findIndex},first:{name:"first",eval:function*(e,t){const[n]=e;return g("array"===n.type),n.values.length>0?n.values[0]:F},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"first([1, 2, 3])",output:"1"},{input:"first([])",output:""}],[{input:"[1, 2, 3].first()",output:"1"},{input:"[].first()",output:""}]],syntax:["first(list)","list.first()"],description:T.first},flat:{name:"flat",eval:function*(e,t){const[n]=e;g("array"===n.type);const a=[];for(const r of n.values)"array"===r.type?a.push(...r.values):a.push(r);return{type:"array",values:a}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e,n={type:"unknown"};return"array"===(null==t?void 0:t.type)&&(n="array"===t.of.type?t.of.of:t.of),{type:"array",of:n}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"flat([1, 2, 3])",output:"[1, 2, 3]"},{input:"flat([[1, 2], [3, 4]])",output:"[1, 2, 3, 4]"}],[{input:"[1, 2, 3].flat()",output:"[1, 2, 3]"},{input:"[[1, 2], [3, 4]].flat()",output:"[1, 2, 3, 4]"}]],syntax:["flat(list)","list.flat()"],description:T.flat},join:{name:"join",eval:function*(e,t){const[n,a]=e;g("array"===n.type&&"text"===a.type);const r=yield*(0,b.LD)(n.values.map((e=>(g("text"===e.type),(0,b.PX)(e.value,t)))));return{type:"text",value:(0,c.Zx)((0,l.Z)(r.map((e=>(0,c.TP)(e))),(()=>a.value)).flat())}},parameters:{expected:[{name:"input",type:{type:"array",of:{type:"text"}}},{name:"joiner",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:'join(["a", "b", "c"], ", ")',output:'"a, b, c"'}],[{input:'["a", "b", "c"].join(", ")',output:'"a, b, c"'}]],syntax:["join(list, joiner)","list.join(joiner)"],description:T.join},includes:{name:"includes",eval:function*(e,t){const[n,a]=e;g("array"===n.type);for(const r of n.values){if(yield*(0,b.Jr)(r,a,t))return{type:"checkbox",value:!0}}return{type:"checkbox",value:!1}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{name:"needle",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:'includes(["a", "b", "c"], "b")',output:"true"},{input:'includes(["a", "b", "c"], "d")',output:"false"}],[{input:'["a", "b", "c"].includes("b")',output:"true"},{input:'["a", "b", "c"].includes("d")',output:"false"}]],syntax:["includes(list, search)","list.includes(search)"],description:T.includes},last:{name:"last",eval:function*(e,t){const[n]=e;return g("array"===n.type),n.values.length>0?n.values[n.values.length-1]:F},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"last([1, 2, 3])",output:"3"}],[{input:"[1, 2, 3].last()",output:"3"}]],syntax:["last(list)","list.last()"],description:T.last},map:{name:"map",eval:function*(e,t){const[n,a]=e;return g("array"===n.type),{type:"array",values:yield*U(n.values,a,t)}},parameters:P,returnType:e=>{let[t,n]=e;return{type:"array",of:n??{type:"unknown"}}},iconType:{type:"array",of:{type:"text"}},examples:[[{input:"map([1, 2, 3], currentValue + 1)",output:"[2, 3, 4]"}],[{input:"[1, 2, 3].map(currentValue + 1)",output:"[2, 3, 4]"}]],syntax:["map(list, expression)","list.map(expression)"],description:T.map},reverse:{name:"reverse",eval:function*(e,t){const[n]=e;g("array"===n.type);return{type:"array",values:[...n.values].reverse()}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"reverse([1, 2, 3])",output:"[3, 2, 1]"}],[{input:"[1, 2, 3].reverse()",output:"[3, 2, 1]"}]],syntax:["reverse(list)","list.reverse()"],description:T.reverse},slice:{name:"slice",eval:function*(e,t){const[n,a,r]=e;return g("array"===n.type&&"number"===a.type),{type:"array",values:n.values.slice(a.value,"number"===(null==r?void 0:r.type)?r.value:void 0)}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{name:"startIndex",type:{type:"number"}},{name:"endIndex",optional:!0,type:{type:"number"}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"slice([1, 2, 3], 1, 2)",output:"[2]"},{input:"slice([1, 2, 3], 1)",output:"[2, 3]"}],[{input:"[1, 2, 3].slice(1, 2)",output:"[2]"},{input:"[1, 2, 3].slice(1)",output:"[2, 3]"}]],syntax:["slice(list, startIndex, endIndex?)","list.slice(startIndex, endIndex?)"],description:T.slice},some:{name:"some",eval:function*(e,t){const[n,a]=e;g("array"===n.type);return{type:"checkbox",value:(yield*U(n.values,a,t)).some((e=>(0,b.vh)(e)))}},parameters:P,returnType:{type:"checkbox"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"some([1, 2, 3], currentValue == 2)",output:"true"},{input:"some([1, 2, 3], currentValue > 10)",output:"false"}],[{input:"[1, 2, 3].some(currentValue == 2)",output:"true"},{input:"[1, 2, 3].some(currentValue > 10)",output:"false"}]],syntax:["some(list, expression)","list.some(expression)"],description:T.some},sort:{name:"sort",eval:function*(e,t){const[n]=e;g("array"===n.type);const a=n.values.filter((e=>"undefined"!==e.type));return{type:"array",values:yield*(0,b.Ex)(a,t)}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"sort([3, 1, 2])",output:"[1, 2, 3]"}],[{input:"[3, 1, 2].sort()",output:"[1, 2, 3]"}]],syntax:["sort(list)","list.sort()"],description:T.sort},unique:{name:"unique",eval:function*(e,t){const[n]=e;g("array"===n.type);const a=[];for(const r of n.values){(yield*(0,b.LD)(a.map((e=>(0,b.Jr)(e,r,t))))).some((e=>e))||a.push(r)}return{type:"array",values:a}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"unique([1, 1, 2])",output:"[1, 2]"}],[{input:"[1, 1, 2].unique()",output:"[1, 2]"}]],syntax:["unique(list)","list.unique()"],description:T.unique},_toPlainText:{name:"_toPlainText",eval:function*(e,t){const[n]=e;return g("text"===n.type),{type:"text",value:(0,c.TP)(yield*(0,b.PX)(n.value,t))}},parameters:{expected:[{name:"input",type:{type:"text"}}]},returnType:()=>({type:"text"}),iconType:{type:"text"},examples:[[{input:"_toPlainText(2)",output:'"2"'}],[{input:"2._toPlainText()",output:'"2"'}]],syntax:["_toPlainText(value)","value._toPlainText()"],description:T.toPlainText},_toText:{name:"_toText",eval:function*(e,t){const[n]=e;return{type:"text",value:(0,b.j4)(n)}},parameters:{expected:[{name:"input",type:{type:"unknown"}}]},returnType:()=>({type:"text"}),iconType:{type:"text"},examples:[[{input:"_toText(2)",output:'"2"'}],[{input:"2._toText()",output:'"2"'}]],syntax:["_toText(value)","value._toText()"],description:T.toText},let:{name:"let",eval:function*(e,t){const[n,a,r]=e;if(n.kind!==x.bG.Identifier)throw new x.Mu({type:x.sj.LetBindingNameNotIdentifier,node:n});return yield*(0,v.vW)(r,{...t,values:[{kind:h.yp.Binding,id:n.text,value:yield*(0,v.vW)(a,t)},...t.values]})},parameters:{expected:[{name:"identifier",type:{type:"expression"}},{name:"value",type:{type:"expression"}},{name:"expression",type:{type:"expression"}}]},returnType:e=>{let[t,n,a]=e;return a??{type:"unknown"}},iconType:{type:"text"},examples:[[{input:"let(a, 2, a + 2)",output:"4"},{input:'let(a, "hello", a + " world")',output:'"hello world"'}],[{input:"a.let(2, a + 2)",output:"4"},{input:'a.let("hello", a + " world")',output:'"hello world"'}]],syntax:["let(variable, value, expression)","variable.let(value, expression)"],description:T.let},lets:{name:"lets",eval:function*(e,t){const n=e;if(n.length<3||n.length%2!=1)throw new x.Mu({type:x.sj.NotEnoughArguments});const a={...t};for(let o=0;o<n.length-1;o+=2){const e=n[o],t=n[o+1];if(e.kind!==x.bG.Identifier)throw new x.Mu({type:x.sj.LetBindingNameNotIdentifier,node:e});a.values=[{kind:h.yp.Binding,id:e.text,value:yield*(0,v.vW)(t,a)},...a.values]}const r=n[n.length-1];return yield*(0,v.vW)(r,a)},parameters:{varargs:[{name:"args",type:{type:"expression"}}]},returnType:e=>e[e.length-1]??{type:"unknown"},iconType:{type:"text"},examples:[[{input:"lets(a, 1, b, 2, a + b)",output:"3"},{input:'lets(a, "hello", b, "world", a + " " + b)',output:'"hello world"'}],[{input:"a.lets(1, b, 2, a + b)",output:"3"},{input:'a.lets("hello", b, "world", a + " " + b)',output:'"hello world"'}]],syntax:["lets(variable1, value1, variable2, value2, ..., expression)","variable1.lets(value1, variable2, value2, ..., expression)"],description:T.lets},id:{name:"id",eval:function*(e,t){var n;const a=null===(n=t.values.find((e=>e.kind===h.yp.ThisRow)))||void 0===n?void 0:n.value;if("block"!==(null==a?void 0:a.type))throw new x.Mu({type:x.sj.TryingToGetIdWithoutThisRow});return{type:"text",value:(0,c.TP)((0,d.cj)(a.value.id))}},returnType:()=>({type:"text"}),iconType:{type:"text"},examples:[[]],syntax:["id()"],description:T.id},equal:{name:"equal",eval:function*(e,t){const[n,a]=e;return{type:"checkbox",value:yield*(0,b.Jr)(n,a,t)}},parameters:{expected:[{name:"lhs",type:{type:"unknown"}},{name:"rhs",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"equal(1, 1)",output:"true"}],[{input:"1.equal(2)",output:"false"}]],syntax:["equal(value, value)","value.equal(value)"],description:T.equal},unequal:{name:"unequal",eval:function*(e,t){const[n,a]=e;return{type:"checkbox",value:!(yield*(0,b.Jr)(n,a,t))}},parameters:{expected:[{name:"lhs",type:{type:"unknown"}},{name:"rhs",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"unequal(1, 2)",output:"true"}],[{input:"1.unequal(2)",output:"true"}]],syntax:["unequal(value, value)","value.unequal(value)"],description:T.unequal},email:{name:"email",eval:function*(e,t){const[n]=e;g("person"===n.type);const a=(yield{recordPointers:[n.value]}).getRecordModel(n.value);if(!a)throw new x.Mu({type:x.sj.UserNotFound});return{type:"text",value:(0,c.TP)(a.getEmail())}},parameters:{expected:[{name:"person",type:{type:"person"}}]},returnType:{type:"text"},iconType:{type:"person"},examples:[[{input:'email(prop("Created By")',output:"doug@notion.com"}],[{input:'prop("Created By").email()',output:"grace@notion.com"}]],syntax:["email(person)","person.email()"],description:T.email},name:{name:"name",eval:function*(e,t){const[n]=e;g("person"===n.type);const a=(yield{recordPointers:[n.value]}).getRecordModel(n.value);if(!a)throw new x.Mu({type:x.sj.UserNotFound});return{type:"text",value:(0,c.TP)(a.getDisplayName(t.intl))}},parameters:{expected:[{name:"person",type:{type:"person"}}]},returnType:{type:"text"},iconType:{type:"person"},examples:[[{input:'name(prop("Created By")',output:"Doug Engelbart"}],[{input:'prop("Created By").name()',output:"Grace Hopper"}]],syntax:["name(person)","person.name()"],description:T.name},lower:{name:"lower",eval:function*(e){const[t]=e;g("text"===t.type);return{type:"text",value:t.value.map((e=>{const t=(0,c.hD)(e),n=(0,c.Wi)(e);return(0,c.V3)(n.toLowerCase(),t)}))}},parameters:{expected:[{name:"text",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'lower("NOTION")',output:'"notion"'}],[{input:'"NOTION".lower()',output:'"notion"'}]],syntax:["lower(text)","text.lower()"],description:T.lower},upper:{name:"upper",eval:function*(e){const[t]=e;g("text"===t.type);return{type:"text",value:t.value.map((e=>{const t=(0,c.hD)(e),n=(0,c.Wi)(e);return(0,c.V3)(n.toUpperCase(),t)}))}},parameters:{expected:[{name:"text",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'upper("notion")',output:'"NOTION"'}],[{input:'"notion".upper()',output:'"NOTION"'}]],syntax:["upper(text)","text.upper()"],description:T.upper}},S=["block","array","person"],L=["let","lets"]},73152:(e,t,n)=>{n.d(t,{XR:()=>l,s:()=>d,Z8:()=>y,Nh:()=>f,mK:()=>h});n(92087),n(21703);var a=n(77090),r=n(96486),o=n.n(r),i=n(6287),s=n(84116),u=n(47218),p=n(78106);const l=o().memoize((()=>function(){const e=(0,a.V3)({name:"AdditionOperator",pattern:a.hW.NA}),t=(0,a.V3)({name:"UnaryOperator",pattern:a.hW.NA}),n=(0,a.V3)({name:"Plus",pattern:/\+/,categories:e}),r=(0,a.V3)({name:"Minus",pattern:/-/,categories:[e,t]}),o=(0,a.V3)({name:"ExclamationPoint",pattern:/!/,categories:t}),u=(0,a.V3)({name:"MultiplicationOperator",pattern:a.hW.NA}),l=(0,a.V3)({name:"Multi",pattern:/\*/,categories:u}),d=(0,a.V3)({name:"Div",pattern:/\//,categories:u}),c=(0,a.V3)({name:"Modulo",pattern:/%/,categories:u}),y=(0,a.V3)({name:"Caret",pattern:/\^/}),f=(0,a.V3)({name:"BooleanLiteral",pattern:a.hW.NA}),m=(0,a.V3)({name:"True",pattern:/true/i,categories:f}),h=(0,a.V3)({name:"False",pattern:/false/i,categories:f}),v=(0,a.V3)({name:"And",pattern:/and|&&/i}),x=(0,a.V3)({name:"Or",pattern:/or|\|\|/i}),b=(0,a.V3)({name:"Not",pattern:/not/i,categories:t}),g=(0,a.V3)({name:"RelationalOperator",pattern:a.hW.NA}),T=(0,a.V3)({name:"LessThan",pattern:/<=?/,categories:g}),k=(0,a.V3)({name:"GreaterThan",pattern:/>=?/,categories:g}),E=(0,a.V3)({name:"EqualityOperator",pattern:a.hW.NA}),M=(0,a.V3)({name:"Equal",pattern:/==/,categories:E}),w=(0,a.V3)({name:"NotEqual",pattern:/!=/,categories:E}),O=(0,a.V3)({name:"LParen",pattern:/\(/}),N=(0,a.V3)({name:"RParen",pattern:/\)/}),C=(0,a.V3)({name:"LBracket",pattern:/\[/}),R=(0,a.V3)({name:"RBracket",pattern:/\]/}),P=(0,a.V3)({name:"Comma",pattern:/,/}),U=(0,a.V3)({name:"Dot",pattern:/\./}),F=(0,a.V3)({name:"QuestionMark",pattern:/\?/}),D=(0,a.V3)({name:"Colon",pattern:/:/}),S=(0,a.V3)({name:"StringLiteral",pattern:/"(?:[^\\"]|\\.)*"/,start_chars_hint:['"']}),L=(0,a.V3)({name:"UnclosedStringLiteral",pattern:/"(?:[^\\"]|\\.)*/,start_chars_hint:['"']}),A=(0,a.V3)({name:"NumberLiteral",pattern:/(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?/}),I=(0,a.V3)({name:"Comment",pattern:/\/\*(?:[^*]|\*(?:[^\/]))*\*\//,group:a.hW.SKIPPED,start_chars_hint:["/*"]}),B=(0,a.V3)({name:"UnclosedComment",pattern:/\/\*(?:[^*]|\*(?:[^\/]))*/,group:a.hW.SKIPPED,start_chars_hint:["/*"]}),V=(0,a.V3)({name:"InputToken",pattern:{exec:(e,t)=>{if(!e.startsWith(s.Eb,t))return null;const n=e.substring(t),a=s.kA.exec(n);if(null!==a){const e=[a[0]],t=(0,p.i0)(a[1]);let n;if(void 0!==a[2])n={type:s.Oy.BlockProperty,property:t,collection:{table:i.v,id:a[3],spaceId:a[4]}};else{if(!s.WG.includes(t))return null;n={type:s.Oy.BlockProperty,property:t,collection:void 0}}return e.payload=n,e}const r=s.QQ.exec(n);if(null!==r){const e=[r[0]],t={type:s.Oy.Block,blockId:r[1],spaceId:void 0!==r[2]?r[2].substring(1):void 0};return e.payload=t,e}const o=s.eO.exec(n);if(null!==o){const e=[o[0]],t={type:s.Oy.Person,userId:o[1]};return e.payload=t,e}const u=s.DF.exec(n);if(null!==u){const e=[u[0]],t={type:s.Oy.Checkbox,checked:"true"===u[1]};return e.payload=t,e}const l=s.Uq.exec(n);if(null!==l){const e=[l[0]],t=(0,p.wf)(l[1]),n={type:s.Oy.ContextValue,valueId:t};return e.payload=n,e}const d=s.Xm.exec(n);if(null!==d){const e=[d[0]],t={type:s.Oy.Date,date:(0,p.DF)(d[1])};return e.payload=t,e}return null}},line_breaks:!1,start_chars_hint:[s.Eb]}),Y=(0,a.V3)({name:"IdentifierName",pattern:(q=/[\p{Letter}_][\p{Number}\p{Letter}_]*/u,(e,t)=>{const n=new RegExp(q.source,`${q.flags}y`);return n.lastIndex=t,n.exec(e)}),line_breaks:!1});var q;return{WhiteSpace:(0,a.V3)({name:"WhiteSpace",pattern:/\s+/,group:a.hW.SKIPPED}),NumberLiteral:A,StringLiteral:S,UnclosedStringLiteral:L,Comment:I,UnclosedComment:B,InputToken:V,True:m,False:h,And:v,Or:x,Not:b,IdentifierName:Y,Equal:M,NotEqual:w,Plus:n,Minus:r,ExclamationPoint:o,Multi:l,Div:d,Modulo:c,Caret:y,LParen:O,RParen:N,LBracket:C,RBracket:R,AdditionOperator:e,MultiplicationOperator:u,LessThan:T,GreaterThan:k,QuestionMark:F,Colon:D,Comma:P,Dot:U,UnaryOperator:t,EqualityOperator:E,RelationalOperator:g,BooleanLiteral:f}}()));const d=o().memoize((e=>new a.hW(function(e){return Object.values(e)}(e))));class c extends a.wd{constructor(e){super(Object.values(e),{recoveryEnabled:!0,nodeLocationTracking:"onlyOffset"}),this.formulaTokens=void 0,this.expression=this.RULE("expression",(()=>{this.SUBRULE(this.conditionalExpression)})),this.primaryExpression=this.RULE("primaryExpression",(()=>{this.OR([{ALT:()=>this.SUBRULE(this.parenthesisExpression)},{ALT:()=>this.SUBRULE(this.arrayExpression)},{ALT:()=>this.CONSUME(this.formulaTokens.NumberLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.StringLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.UnclosedStringLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.BooleanLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.IdentifierName)},{ALT:()=>this.CONSUME(this.formulaTokens.InputToken)}])})),this.conditionalExpression=this.RULE("conditionalExpression",(()=>{this.SUBRULE(this.logicalOrExpression,{LABEL:"condition"}),this.OPTION((()=>{this.CONSUME(this.formulaTokens.QuestionMark),this.SUBRULE2(this.logicalOrExpression,{LABEL:"expIfTrue"}),this.CONSUME(this.formulaTokens.Colon),this.SUBRULE3(this.logicalOrExpression,{LABEL:"expIfFalse"})}))})),this.logicalOrExpression=this.RULE("logicalOrExpression",(()=>{this.SUBRULE(this.logicalAndExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.Or),this.SUBRULE2(this.logicalAndExpression,{LABEL:"rhs"})}))})),this.logicalAndExpression=this.RULE("logicalAndExpression",(()=>{this.SUBRULE(this.equalityExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.And),this.SUBRULE2(this.equalityExpression,{LABEL:"rhs"})}))})),this.equalityExpression=this.RULE("equalityExpression",(()=>{this.SUBRULE(this.relationalExpression,{LABEL:"lhs"}),this.OPTION((()=>{this.CONSUME(this.formulaTokens.EqualityOperator),this.SUBRULE2(this.relationalExpression,{LABEL:"rhs"})}))})),this.relationalExpression=this.RULE("relationalExpression",(()=>{this.SUBRULE(this.additionExpression,{LABEL:"lhs"}),this.OPTION((()=>{this.CONSUME(this.formulaTokens.RelationalOperator),this.SUBRULE2(this.additionExpression,{LABEL:"rhs"})}))})),this.additionExpression=this.RULE("additionExpression",(()=>{this.SUBRULE(this.multiplicationExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.AdditionOperator),this.SUBRULE2(this.multiplicationExpression,{LABEL:"rhs"})}))})),this.multiplicationExpression=this.RULE("multiplicationExpression",(()=>{this.SUBRULE(this.exponentiationExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.MultiplicationOperator),this.SUBRULE2(this.exponentiationExpression,{LABEL:"rhs"})}))})),this.exponentiationExpression=this.RULE("exponentiationExpression",(()=>{this.SUBRULE(this.unaryExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.Caret),this.SUBRULE2(this.unaryExpression,{LABEL:"rhs"})}))})),this.unaryExpression=this.RULE("unaryExpression",(()=>{this.OPTION((()=>{this.CONSUME(this.formulaTokens.UnaryOperator)})),this.SUBRULE(this.primaryExpression),this.MANY((()=>{this.SUBRULE2(this.memberCallSubExpression)}))})),this.memberCallSubExpression=this.RULE("memberCallSubExpression",(()=>{this.OR([{ALT:()=>this.SUBRULE(this.dotMemberExpression)},{ALT:()=>this.SUBRULE(this.callArguments)}])})),this.dotMemberExpression=this.RULE("dotMemberExpression",(()=>{this.CONSUME(this.formulaTokens.Dot),this.OR([{ALT:()=>this.CONSUME(this.formulaTokens.IdentifierName)},{GATE:()=>{var e;const t=this.LA(1);return t.tokenType===this.formulaTokens.InputToken&&(null===(e=t.payload)||void 0===e?void 0:e.type)===s.Oy.BlockProperty},ALT:()=>this.CONSUME(this.formulaTokens.InputToken)}])})),this.callArguments=this.RULE("callArguments",(()=>{this.CONSUME(this.formulaTokens.LParen),this.OPTION((()=>{this.SUBRULE(this.expression),this.MANY((()=>{this.CONSUME(this.formulaTokens.Comma),this.SUBRULE2(this.expression)}))})),this.CONSUME(this.formulaTokens.RParen)})),this.parenthesisExpression=this.RULE("parenthesisExpression",(()=>{this.CONSUME(this.formulaTokens.LParen),this.SUBRULE(this.expression),this.CONSUME(this.formulaTokens.RParen)})),this.arrayExpression=this.RULE("arrayExpression",(()=>{this.CONSUME(this.formulaTokens.LBracket),this.OPTION((()=>{this.SUBRULE(this.expression),this.MANY((()=>{this.CONSUME(this.formulaTokens.Comma),this.SUBRULE2(this.expression)}))})),this.CONSUME(this.formulaTokens.RBracket)})),this.formulaTokens=e,this.performSelfAnalysis()}}const y=o().memoize((e=>new c(e)));function f(e){const t=/unexpected character: ->(.+)<- at offset/.exec(e.message);if(null!==t)return{type:u.$E.InvalidCharacter,character:t[1],offset:e.offset};if("unclosed string literal"===e.message)return{type:u.$E.UnclosedStringLiteral,offset:e.offset};if("unclosed comment"===e.message)return{type:u.$E.UnclosedComment,offset:e.offset};throw new Error(`Unhandled chevrotain recognition error: ${e.message}`)}const m={RParen:")",RBracket:"]",Colon:":"};function h(e){const t=e.token.tokenType===a.sd?"eof":e.token.startOffset;switch(e.name){case"MismatchedTokenException":{const n=/Expecting token of type --> (.+) <-- but found/.exec(e.message);if(null!==n){const e=n[1],a=m[e];if(void 0!==a)return{type:u.$E.TokenExpected,token:a,offset:t}}break}case"NoViableAltException":{const n=e.context.ruleStack[e.context.ruleStack.length-1];switch(n){case"primaryExpression":return{type:u.$E.ExpressionExpected,offset:t};case"dotMemberExpression":return{type:u.$E.PropertyTokenOrFunctionExpected,offset:t}}throw new Error(`Unhandled unviable alt: ${n}`)}case"NotAllInputParsedException":return{type:u.$E.EndOfInputExpected,offset:t}}return{type:u.$E.UnexpectedError,error:new Error(`Unhandled chevrotain recognition error: ${e.name}`),offset:t}}},83158:(e,t,n)=>{n.d(t,{K:()=>s});n(57658);var a=n(84116),r=n(51849),o=n(73152),i=n(47218);function s(e,t){const n=(0,o.XR)(),s=(0,o.s)(n).tokenize(e),u=[...s.errors],p=[];for(const a of u)p.push((0,o.Nh)(a));for(const a of s.tokens.filter((e=>e.tokenType===n.UnclosedStringLiteral||e.tokenType===n.UnclosedComment)))p.push({type:a.tokenType===n.UnclosedStringLiteral?i.$E.UnclosedStringLiteral:i.$E.UnclosedComment,offset:a.startOffset});for(const o of s.tokens.filter((e=>e.tokenType===n.StringLiteral)))a.zF.test(o.image)&&p.push({type:i.$E.StringLiteralContainsToken,offset:t?(0,r.aU)(t,o.startOffset,"left"):o.startOffset});const l=(0,o.Z8)(n);l.input=s.tokens;const d=l.expression();for(const a of l.errors)p.push((0,o.mK)(a));return[d,p]}}}]);