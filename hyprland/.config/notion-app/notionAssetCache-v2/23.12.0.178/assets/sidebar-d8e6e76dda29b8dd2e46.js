"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4541],{39193:(e,t,o)=>{o.r(t),o.d(t,{default:()=>g});var n=o(10434),r=o.n(n),i=o(67294),s=o(480),a=o(53397),l=o(5366),d=o(88295),u=o(23830),c=o(93405),m=o(95030);function p(e,t){window.__c={n:"NewPageInMenu"};const{title:o}=e,n=(0,i.useCallback)((e=>i.createElement(c.Z,r()({},e,{ref:t,title:i.createElement(l.FormattedMessage,o),svg:a.Z.pageEmpty,shortcuts:[]}))),[t,o]),p=(0,s.O7)(),[g,h]=(0,i.useState)(""),b=(0,i.useCallback)(((t,o)=>{const{blocksToTransform:n,onAccept:s,...a}=e;return i.createElement(u.Z,r()({},a,{targets:n,isAddTo:!0,isCreateIn:!0,isTurnIntoPage:!0,parentBlockId:void 0,onAccept:async e=>{s&&s(),o.close(),await d.Hk(p,{createInValue:e,blocksToTransform:n})},onCancel:o.close,autocompleteQuery:g,onAutocompleteQueryChange:h,onMouseEnter:t.onMouseEnter,desktopWidth:400,captureSelection:!0,restoreSelection:!0}))}),[p,g,h,e]);return i.createElement(m.Z,r()({},e,{disableDefaultClick:!0,renderOrigin:n,renderExtension:b}))}const g=i.forwardRef(p)},9019:(e,t,o)=>{o.d(t,{Z:()=>u});var n=o(23174),r=o.n(n),i=(o(67294),o(83355)),s=o(80503),a=o(53953),l=o(44532);class d extends i.Z{renderComponent(){const{device:e}=this.environment;return e.isMobile?r()(l.ZP,{popupType:l.ZP.PopupType.SlideUp,open:this.props.open,render:this.props.renderContent,preventSlideUpTransition:this.props.disableAnimation,onDismiss:this.props.onDismiss,origin:this.props.origin}):r()(a.Z,{open:this.props.open,preventHideChildrenWhileOpening:!0,style:{alignItems:"flex-start"},innerStyle:this.getModalStyle(),onDismiss:this.props.onDismiss,render:this.props.renderContent,origin:this.props.origin,disableAnimation:this.props.disableAnimation})}getModalStyle(){const{modalStyle:e}=this.props;return{top:2*s.R6(this.environment.device.isElectronMac),borderRadius:6,overflow:"hidden",boxShadow:this.theme.largeBoxShadow,background:this.theme.contentBackground,...e}}}d.displayName="ModalPrompt";const u=d},70467:(e,t,o)=>{o.d(t,{l:()=>l});var n=o(67294),r=o(480),i=o(81954),s=o(54642),a=o(79315);function l(){const e=(0,r.O7)(),t=(0,i.VK)((()=>{var e;return null===(e=a.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),[o,l]=(0,n.useState)();return(0,n.useEffect)((()=>{!async function(){if(!t)return;const o=await s.getAIUsageEligibility(e,{spaceId:t});"failed"!==o.type&&l(o.data)}()}),[e,t]),o}},8454:(e,t,o)=>{o.r(t),o.d(t,{SidebarFooter:()=>Oe,SidebarSwitcherMultiAccountPopup:()=>Y.ZP,SidebarTeamBrowserContent:()=>J});var n=o(23174),r=o.n(n),i=o(96486),s=o.n(i),a=o(67294),l=o(480),d=o(81954),u=o(24405),c=o(5366),m=o(50906),p=o(57688),g=o(3386),h=o(53397),b=o(64921),f=o(14694);function S(e){let{onClick:t,label:o}=e;window.__c={n:"SidebarFooterButton"};const n=(0,u.yK)((e=>({button:{boxShadow:`0 -1px 0 ${e.regularDividerColor}`},sidebarItem:{color:e.mediumTextColor,height:45},plusIconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},plusIcon:{fill:e.mediumIconColor,width:16,height:16}})),[]);return r()(b.Z,{onClick:t,style:n.button},void 0,r()(f.Z,{style:n.sidebarItem,left:r()("div",{style:n.plusIconContainer},void 0,h.Z.plus(n.plusIcon))},void 0,o))}var v=o(23537),C=o(92350),y=o(79315),w=o(82990),k=o(98104),M=o(73063),T=o(1743),Z=o(74194),x=o(48378),B=o(29538),_=o(45094),F=o(38755),I=o(61436),R=o(24042),E=o(24666);function O(e){let{isExpanded:t,searchQuery:o,onBackClicked:n,onSearchQueryChanged:i,onClearButtonClicked:s}=e;window.__c={n:"SidebarTeamBrowserHeader"};const m=(0,l.O7)(),[{isFullScreen:p}]=(0,d.AF)(I.Z),[{isShowingTabBar:g}]=(0,d.AF)(R.Z),{isElectronMac:b}=m.device,f=(0,u.yK)((e=>({headerRow:{display:"flex",justifyContent:"flex-start",alignItems:"center",height:45},headerRowTitle:{flex:1,fontWeight:w.Z.fontWeight.semibold,fontSize:14,color:e.regularTextColor,alignItems:"center",...w.Z.textOverflowStyle,paddingRight:7},backIconContainer:{marginLeft:14,marginRight:8},backIcon:{transform:"rotate(90deg)",fill:e.lightIconColor,marginBottom:-1},headerRowUnexpandButton:{justifySelf:"flex-end",marginRight:12},searchContainer:{width:"100%",paddingLeft:15,paddingRight:15}})),[]),S=(0,_.GD)({isElectronMac:b,isExpanded:t,isFullScreenDesktop:p,isShowingTabBar:g});return a.createElement(a.Fragment,null,r()(x.t,{isExpanded:t}),r()("div",{style:f.headerRow},void 0,r()("div",{style:f.backIconContainer},void 0,r()(M.Z,{icon:h.Z.arrowDownSmall,iconStyle:f.backIcon,onClick:n})),r()("div",{style:f.headerRowTitle},void 0,r()(c.FormattedMessage,{defaultMessage:"All teamspaces",id:"sidebarTeamBrowserHeader.title"})),S&&r()("div",{style:f.headerRowUnexpandButton},void 0,r()(B.V,{}))),r()("div",{style:f.searchContainer},void 0,r()(P,{onChange:i,searchQuery:o,onClearButtonClicked:s})))}function P(e){let{onChange:t,searchQuery:o,onClearButtonClicked:n}=e;window.__c={n:"SidebarTeamBrowserSearchInput"};const i=(0,d.VK)((()=>y.default.state.currentSpaceStore),[]),s=(0,l.O7)(),m=(0,c.useIntl)(),[p,g]=(0,a.useState)(!0),b=(0,d.VK)((()=>i&&(0,F.rn)(s,i)),[i,s]),f=(0,u.yK)((e=>({input:{boxShadow:e.inputBoxShadow,borderRadius:3,fontSize:14},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),S=(0,a.useCallback)((e=>t(e.target.value)),[t]),v=(0,a.useCallback)((()=>g(!1)),[]),C=(0,a.useCallback)((()=>{E.default.isEditingStore.state&&k.o9(),g(!0)}),[]),w=b?m.formatMessage({defaultMessage:"Search teamspaces...",id:"sidebarTeamBrowserHeader.searchFilter.placeholder"},{workspaceName:b}):m.formatMessage({defaultMessage:"Search teamspaces...",id:"sidebarTeamBrowserHeader.searchFilter.placeholderWithoutSpaceName"});return r()(T.Z,{capture:p,allowEsc:!0},void 0,r()(Z.Z,{placeholder:w,focusInitial:!0,showClearButton:!0,style:f.input,value:o,onChange:S,left:h.Z.search(f.searchIcon),onBlur:v,onFocus:C,onClearButtonClick:n}))}var q=o(10434),K=o.n(q),V=o(58573),U=o(66673),A=o(69246),W=o(42402),j=o(5846),L=o(12334),G=o(50659);function N(e){let{moreCount:t,onClick:o,textStyle:n,useIndentedPadding:i}=e;window.__c={n:"NMoreSidebarItem"};const{isMobile:s}=(0,l.Fy)(),a=(0,u.yK)((e=>({button:(0,G.G$)({isMobile:s}),sidebarItem:{marginBottom:s?16:void 0,...i&&{paddingLeft:s?10:20},color:e.lightTextColor,...n},centeredText:{display:"flex",alignItems:"center",fontSize:s?16:12}})),[s,n,i]);return r()(b.Z,{style:a.button,mobileFeedback:s,onClick:o},void 0,r()(f.Z,{style:a.sidebarItem,disableMobileBorder:!0},void 0,r()("div",{style:a.centeredText},void 0,r()(c.FormattedMessage,{defaultMessage:"{moreCount} more",id:"nmoreSidebarItem.nMoreButtonTextLabel",values:{moreCount:t}}))))}var D=o(56252),z=o(70704),Q=o(45589);function H(e){let{joinedTeams:t,unjoinedTeams:o,sidebarState:n,searchQuery:i,onClearSearchQueryClicked:s}=e;window.__c={n:"TeamBrowserOutliner"};const m=(0,d.VK)((()=>y.default.state.currentSpaceStore),[]),g=(0,d.VK)((()=>y.default.state.currentSpaceViewStore),[]),S=(0,l.O7)(),[C,k]=(0,a.useState)(t.length>6),M=$(),T=$(),Z=$(),x=(0,d.qz)(void 0,Q.Z),B=i.trim(),_=(0,U.Kt)(B,200,((e,t)=>e===t)),F=(0,d.VK)((()=>{if(""!==_)return(0,V.ZP)(_,[...t,...o],(e=>e.getName()??""))}),[t,_,o]),I=(0,d.VK)((()=>(0,v.Xq)({environment:S,spaceStore:m})),[m,S]),R=(0,a.useCallback)((()=>{k(!1)}),[]),E=(0,a.useCallback)((()=>{k(!1)}),[]),O=(0,u.yK)((e=>({scroller:{height:"100%"},noUnjoinedTeamsContainer:{marginLeft:15,...w.Z.textOverflowStyle,fontSize:w.Z.fontSize.UIRegular.desktop},noFilterResultsContainer:{display:"flex",flexDirection:"column",padding:15,height:"100%",alignItems:"center",justifyContent:"center"},noFilterResultsTitle:{color:e.mediumTextColor,fontSize:w.Z.fontSize.UIRegular.desktop},noFilterResultsDescription:{color:e.mediumTextColor,fontSize:w.Z.fontSize.UIRegular.desktop,fontWeight:w.Z.fontWeight.regular},noFilterResultsIcon:{width:30,height:30,marginBottom:10},sidebarItemButtonStyle:(0,G.G$)({isMobile:!1}),plusIcon:{fill:e.mediumIconColor,width:14,height:14},nMoreText:{fontWeight:w.Z.fontWeight.semibold}})),[]);if(!m||!g)return null;if(""!==_&&""!==B&&0===(null==F?void 0:F.length))return r()("div",{style:O.noFilterResultsContainer},void 0,h.Z.searchInPage(O.noFilterResultsIcon),r()("div",{style:O.noFilterResultsTitle},void 0,r()(c.FormattedMessage,{id:"teamBrowserOutliner.noFilterResults.title",defaultMessage:"No results"})),r()("div",{style:O.noFilterResultsDescription},void 0,r()(c.FormattedMessage,{id:"teamBrowserOutliner.noFilterResults.description",defaultMessage:"Try again or <linkbutton>clear search</linkbutton>",values:{linkbutton:e=>r()(W.Z,{onClick:s},void 0,e)}})));const P=""!==_&&""!==B,q={shouldPersistToggleState:!1,spaceStore:m,spaceViewStore:g,showAddButton:!1},z=e=>{let{teams:t,teamOutlinerType:o}=e;const i=t.length,s="teamBrowserJoinedTeams"===o&&C&&i>6,l=s?t.length-5:0,d=e=>r()(D.O,{initialToggleState:"hidden",teamStore:e,sidebarState:n,isLastTeam:!1,shouldPersistToggleState:!1,teamOutlinerType:o,onTeamJoinComplete:R},e.id);return s?a.createElement(a.Fragment,null,t.slice(0,5).map(d),l>0&&r()(N,{moreCount:l,onClick:E,textStyle:O.nMoreText})):t.map(d)};return r()(j.k,{scrollerStore:x,scrollerStyle:O.scroller},void 0,P?a.createElement(L.Z,K()({},q,{type:A.mu,outlinerToggleButtonStore:Z,sectionLabel:r()(c.FormattedMessage,{defaultMessage:"Search results",id:"teamBrowserOutliner.searchResultsLabel"}),renderSidebar:()=>z({teams:F??[],teamOutlinerType:A.mu})})):a.createElement(a.Fragment,null,a.createElement(L.Z,K()({},q,{type:A.PT,outlinerToggleButtonStore:M,labelTooltip:r()(c.FormattedMessage,{defaultMessage:"Teamspaces you have joined",id:"teamBrowserOutliner.joinedTeamsSection.tooltip"}),sectionLabel:r()(c.FormattedMessage,{defaultMessage:"Your teamspaces",id:"teamBrowserOutliner.joinedTeamsLabel"}),renderSidebar:()=>z({teams:t,teamOutlinerType:A.PT})})),a.createElement(L.Z,K()({},q,{type:A.cz,outlinerToggleButtonStore:T,labelTooltip:r()(c.FormattedMessage,{defaultMessage:"Teamspaces you can join",id:"teamBrowserOutliner.unjoinedTeamsSection.tooltip"}),sectionLabel:r()(c.FormattedMessage,{defaultMessage:"More teamspaces",id:"teamBrowserOutliner.unjoinedTeamsLabel"}),renderSidebar:()=>0===o.length?I?r()(b.Z,{onClick:()=>p.lo("browse_teams"),style:O.sidebarItemButtonStyle},void 0,r()(f.Z,{left:h.Z.plusThick(O.plusIcon)},void 0,r()(c.FormattedMessage,{defaultMessage:"New teamspace",id:"teamBrowserOutliner.createTeamspaceButton"}))):r()("div",{style:O.noUnjoinedTeamsContainer},void 0,r()(c.FormattedMessage,{id:"teamBrowserOutliner.noUnjoinedTeams",defaultMessage:"No teamspaces to join"})):z({teams:o,teamOutlinerType:A.cz})}))))}function $(){return(0,d.qz)(void 0,z.Z)}function J(e){let{isExpanded:t,onBackClicked:o,sidebarState:n}=e;window.__c={n:"SidebarTeamBrowserContent"};const i=(0,l.O7)(),h=(0,d.VK)((()=>y.default.state.currentSpaceStore),[]),b=(0,d.VK)((()=>y.default.state.currentSpaceViewStore),[]),[f,w]=(0,a.useState)(""),k=(0,C.E7)(),M=(0,C.ZW)(),T=(0,d.VK)((()=>{return h?(e=M,t=h,s().sortBy(e,(e=>-1*(0,v.xf)({teamStore:e,spaceStore:t}).length))):[];var e,t}),[h,M]),Z=(0,d.VK)((()=>(0,v.Xq)({environment:i,spaceStore:h})),[h,i]),x=(0,a.useCallback)((()=>p.lo(0===f.length?"team_browser":"team_browser_search")),[f.length]),B=(0,a.useCallback)((e=>w(e)),[]),_=(0,a.useCallback)((()=>{m.Bdq(i,{from:"empty_results_reset_link"}),w("")}),[i]),F=(0,a.useCallback)((()=>{m.Bdq(i,{from:"search_input"}),w("")}),[i]),I=(0,a.useCallback)((()=>{o({numOfJoinedTeams:k.length,numOfUnJoinedTeams:T.length})}),[o,k,T]),R=(0,u.yK)((()=>({container:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},headerContainer:{flexShrink:0,paddingBottom:8},outlinerContainer:{overflow:"hidden",flexGrow:1},footerContainer:{flexShrink:0}})),[]);return h&&b?r()("div",{style:R.container},void 0,r()(g.Z,{capture:!0,onEsc:I}),r()("div",{style:R.headerContainer},void 0,r()(O,{isExpanded:t,searchQuery:f,onBackClicked:I,onSearchQueryChanged:B,onClearButtonClicked:F})),r()("div",{style:R.outlinerContainer},void 0,r()(H,{joinedTeams:k,unjoinedTeams:T,sidebarState:n,searchQuery:f,onClearSearchQueryClicked:_})),Z&&r()("div",{style:R.footerContainer},void 0,r()(S,{onClick:x,label:r()(c.FormattedMessage,{defaultMessage:"New teamspace",id:"sidebarTeamBrowser.newTeam.button"})}))):null}var Y=o(76453),X=o(59054),ee=o(3791),te=o(54642),oe=o(6467),ne=o(98692),re=o(89728),ie=o(64369),se=o(64964),ae=o(85834),le=o(42922),de=o(9019),ue=o(63296);const ce=function(e){window.__c={n:"GuestMembershipRequest"};const t=(0,l.O7)(),{store:o,origin:n}=e,[i,s]=(0,a.useState)(!1),[d,p]=(0,a.useState)(""),g=(0,c.useIntl)(),h=(0,u.yK)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:350},container:{padding:20},title:{fontWeight:w.Z.fontWeight.medium,marginBottom:10},input:{width:"100%",padding:"8px 12px",marginTop:10,marginBottom:10},button:{width:"100%",marginTop:10}})),[]),b=()=>{const{currentUser:e}=t;e&&e.id&&(m.cir(t,{invite_flow_id:void 0,user_count:1,new_user_count:1,is_bot:!1,space_role:"read_and_write",invite_message_length:d.length,invite_space_role_selection:ae.uq.request_workspace_member,from:"sidebar_guest_request"}),te.requestAccess(t,{type:"actor-to-space",forActorId:e.id,spaceId:o.id,message:d,attributes:{origin_id:o.id,origin_type:"sidebar_guest_request",origin_table:"space",add_permissions_on_approval:!1}}).catch((()=>{se.oV({label:r()(c.FormattedMessage,{id:"guestMembershipRequestModal.confirmationToast.errorMessage",defaultMessage:"Failed to send membership request."})})})).finally((()=>{se.oV({label:r()(c.FormattedMessage,{id:"guestMembershipRequestModal.confirmationToast.successMessage",defaultMessage:"Sent membership request."})})})),p(""),s(!1))};return r()(de.Z,{modalStyle:h.modalStyle,open:i,origin:r()("div",{onClick:()=>{m.g9P(t),s(!0)}},void 0,n),onDismiss:()=>s(!1),renderContent:()=>r()("div",{style:h.container},void 0,r()("div",{style:h.title},void 0,r()(c.FormattedMessage,{id:"GuestMembershipRequestModal.title",defaultMessage:"Request membership to workspace"})),r()(T.Z,{capture:!0,allowEsc:!0},void 0,r()(Z.Z,{style:h.input,textarea:!0,value:d,placeholder:g.formatMessage({id:"GuestMembershipRequestModal.message.placeholder",defaultMessage:"Reason (optional)"}),onChange:e=>{p(e.target.value)}}),r()(le.Z,{isLarge:!0,style:h.button,onClick:b},void 0,r()(c.FormattedMessage,{id:"GuestMembershipRequestModal.sendRequest.button",defaultMessage:"Send request"})),r()(ue.Z,{isLarge:!0,style:h.button,onClick:()=>{p(""),s(!1)}},void 0,r()(c.FormattedMessage,{id:"GuestMembershipRequestModal.cancel.button",defaultMessage:"Cancel"}))))})};const me=function(e){window.__c={n:"GuestMembershipRequestPrompt"};const t=(0,l.O7)(),{style:o}=e;return(0,a.useEffect)((()=>{m.PHO(t)}),[]),r()(re.Z,{icon:h.Z.team,style:o},void 0,r()(c.FormattedMessage,{defaultMessage:"Request to be a member",id:"sidebar.guestMember.requestMembershipPrompt"}))};var pe=o(83355),ge=o(90850),he=o(92083),be=o(77137),fe=o(8848),Se=o(62385);class ve extends pe.Z{renderComponent(){const{title:e,children:t,handleClick:o,handleCloseClick:n,showCloseButton:i,style:s,blueEmphasis:a,disableClick:l,onMouseEnter:d,onMouseLeave:u,animationClassName:c}=this.props;return r()(b.Z,{className:c,style:{position:"relative",padding:10,margin:12,fontSize:12,background:a?fe.ZP.blue:this.theme.sidebarItemSelectedBackground,borderRadius:6,...s},onClick:o,hovered:!1,ignoreLocalHoverState:!0,pressedStyle:a?{background:fe.ZP.blue}:{},disabled:l,onMouseEnter:d,onMouseLeave:u},void 0,e&&r()("div",{style:{marginRight:16}},void 0,r()("div",{style:{fontWeight:w.Z.fontWeight.medium,flexGrow:1,color:a?fe.ZP.white:this.theme.regularTextColor}},void 0,e)),t,i&&r()(Se.Z,{style:{position:"absolute",top:7,right:8},onClick:n},void 0,h.Z.closeThick({width:10,opacity:"75%",...a?{fill:fe.ZP.white}:{}})))}}ve.displayName="SidebarNotification";const Ce=ve;class ye extends pe.Z{constructor(){super(...arguments),this.handleClick=()=>{he.Z.setState({open:!0,openedFrom:"sidebar",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}),m.OFH(this.environment)},this.handleCloseClick=()=>{ge.$r(this.environment.currentUser.id),this.enqueueForceUpdate()}}renderComponent(){const e=ge.Zk(this.environment.currentUser.id);if(e)return r()(be.Z,{request:e,performRequest:async e=>{const t=await te.getPromoCode(this.environment,{code:e});if("success"===t.type&&t.data.promo)return t.data.promo},render:(e,t)=>{if(t)return r()(Ce,{title:t.description,showCloseButton:!0,handleClick:this.handleClick,handleCloseClick:this.handleCloseClick})}})}}ye.displayName="SidebarPromoCode";const we=ye;var ke=o(9953),Me=o(21325),Te=o(12359),Ze=o(21115);class xe extends pe.Z{constructor(){super(...arguments),this.getText=()=>({title:r()(c.FormattedMessage,{defaultMessage:"You're eligible for a free Education plan for individuals.",id:"sidebarStudentPlanPrompt.eligible.messagePlus"}),prompt:r()(c.FormattedMessage,{defaultMessage:"Get the Education Plan",id:"sidebarStudentPlanPrompt.eligible.getFreePromptPlus"})}),this.handleClick=()=>{he.Z.setState({open:!0,openedFrom:"sidebar",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}),m.vVs(this.environment);const e=y.default.state.currentSpaceStore;e&&Me.r7({environment:this.environment,spaceStore:e})},this.handleCloseClick=()=>{const{currentUserSettingsStore:e}=y.default.state;e&&Te.createAndCommit({userAction:"SidebarStudentPlanPrompt.handleCloseClick",environment:this.environment,perform:t=>{ke.sW({store:e.getSettingsStore(),data:{hide_student:!0},transaction:t}),m.a5A(this.environment)}})}}renderComponent(){if((0,Ze.uo)(this.environment))return r()(be.Z,{request:{},performRequest:e=>te.isEmailEducation(this.environment,e),render:(e,t,o)=>{if(o&&t&&"failed"!==t.type&&t.data.isEligible){const{title:e,prompt:t}=this.getText();return r()(Ce,{title:e,showCloseButton:!0,handleClick:this.handleClick,handleCloseClick:this.handleCloseClick},void 0,r()("div",{style:{display:"flex",marginTop:4}},void 0,r()("div",{style:{textDecoration:"underline"}},void 0,t)))}}})}}xe.displayName="SidebarStudentPlanPrompt";const Be=xe;var _e=o(26234),Fe=o(4708),Ie=o(6617),Re=o(78291),Ee=o(99757);function Oe(e){let{}=e;window.__c={n:"SidebarFooter"};const t=(0,l.O7)(),{canEditSpace:o,currentUserRootStore:n,currentUserSettingsStore:i,currentSpaceStore:s}=(0,d.VK)((()=>{var e;return{canEditSpace:(null===(e=y.default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit())??!1,currentUserRootStore:y.default.state.currentUserRootStore,currentUserSettingsStore:y.default.state.currentUserSettingsStore,currentSpaceStore:y.default.state.currentSpaceStore}}),[]),m=(0,d.VK)((()=>null==i?void 0:i.getSettings()),[i]),p=(0,d.Kw)(Ee.n),{subscriptionType:g,hasAddOn:b,visibleMembersCount:f}=(0,d.VK)((()=>{const e=Re.default.state.data;return{subscriptionType:null==e?void 0:e.type,hasAddOn:(0,ee.E3)(null==e?void 0:e.addOns),visibleMembersCount:e&&Ze.su(e)}}),[]),S=(0,Ie.Q)(),v=(0,a.useCallback)((()=>{oe.xN(t)}),[t]),[{value:C,status:w}]=(0,X.r5)((async()=>{if(!s||o)return!1;if(te.setSeenGuestMembershipRequests(t,{spaceId:s.id}),!(0,Fe.Ye)(t))return!1;const e=await te.isEligibleForGuestMembershipRequest(t,{spaceId:s.id});return"failed"!==e.type&&(te.setSeenGuestMembershipRequests(t,{spaceId:s.id}),e.data.isEligible)}),[o,s,t]),k=(0,u.yK)((e=>{const t={display:"block",flexGrow:0,flexShrink:0,flexBasis:"auto",marginTop:"auto"};return{footer:t,canViewOnlyFooter:{...t,padding:14,boxShadow:`0 -1px 0 ${e.regularDividerColor}`},createWorkspaceButton:{marginTop:8,marginLeft:-8}}}),[]);if(!n)return a.createElement(a.Fragment,null);if(!o){if(S)return null;let e=null;return"pending"!==w&&(e=C&&s?r()(ce,{store:s,origin:r()(me,{style:k.createWorkspaceButton})}):r()(re.Z,{icon:h.Z.team,onClick:v,style:k.createWorkspaceButton},void 0,r()(c.FormattedMessage,{defaultMessage:"Create a workspace",id:"sidebar.guestMember.createWorkspacePrompt"}))),r()("div",{style:k.canViewOnlyFooter},void 0,r()(ie.Z,{isSmall:!0,isMultiline:!0},void 0,r()(c.FormattedMessage,{defaultMessage:"You are currently a guest. To see all the workspace pages, ask an admin to upgrade you to a member.",id:"sidebar.guestMember.message"})),e)}if(p)return a.createElement(a.Fragment,null);const M=!(null!=m&&m.hide_student||1!==f||"unsubscribed_admin"!==g&&"unsubscribed_member"!==g),T="unsubscribed_admin"===g||"unsubscribed_member"===g;return r()("div",{style:k.footer},void 0,T&&r()(ne.Z,{source:"sidebar"}),!b&&r()(_e.Z,{source:"sidebar"}),M&&r()(Be,{}),T&&r()(we,{}))}}}]);