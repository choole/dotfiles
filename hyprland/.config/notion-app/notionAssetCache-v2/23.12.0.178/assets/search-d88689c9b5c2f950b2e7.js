"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6464],{97680:(e,t,s)=>{s.d(t,{Z:()=>S});var r=s(10434),i=s.n(r),n=s(23174),o=s.n(n),l=s(67294),a=s(83355),d=s(66897),c=s(97880),u=s(33929),h=s(87279),p=s(98742),m=s(52275),g=s(58032),v=s(70301),f=s(45653);class y extends a.Z{renderComponent(){const{actor:e,userTitle:t,useEmailAsTooltip:s,tooltip:r,tooltipPlacement:n}=this.props,a=u.default.getIntl(),h=e.asActor&&e.isUser()?e.email:void 0,y=s&&h?h:r,S=this.environment.device.isMobile?24:20;let b;return(0,d.YU)(e)?b=o()(v.Z,{botValue:null==e?void 0:e.asActor,size:S}):(0,d.$S)(e)?b=o()(f.Z,{userValue:null==e?void 0:e.asActor,size:S}):(0,d.Iq)(e)?b=o()(f.Z,{userValue:void 0,size:S}):(0,c.t1)(e),o()(g.Z,{placement:n??g.Z.Placement.Bottom,alignment:g.Z.Alignment.Start,textWrap:!0,render:s=>l.createElement(m.Z,i()({},(0,p.Z)(s,this.props),{icon:b,title:t??(0,d.$4)(a,e),className:"notranslate"})),disableTooltip:!y,renderTooltip:()=>y})}}y.displayName="UserMenuItem",y.contextTypes={...h.mw,...a.w};const S=y},22715:(e,t,s)=>{s.d(t,{Z:()=>o});s(23174);var r=s(67294),i=s(480),n=s(24405);s(58047);function o(){window.__c={n:"WebComponentNotSupportedInMobileNativeWarning"};(0,i.O7)(),(0,n.yK)((e=>({container:{margin:"8px 16px",background:e.accentColors.yellow[100],borderRadius:8,height:"fit-content"}})),[]);return r.createElement(r.Fragment,null)}},96525:(e,t,s)=>{s.d(t,{Z:()=>m});var r=s(10434),i=s.n(r),n=s(96486),o=s.n(n),l=s(67294),a=s(83355),d=s(39500),c=s(25464),u=s(61766),h=s(44532);class p extends a.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:u.Z},this.renderPopup=()=>this.props.render({close:this.handleClose}),this.handleButtonClick=e=>{const{buttonPopupStore:t}=this.stores;this.props.stopClickPropagation&&(null==e||e.stopPropagation()),e&&d.uG(e)||(this.props.onClick&&this.props.onClick(e),this.props.disablePopup||t.setState({...t.state,open:!0}))},this.handleClose=()=>{this.props.onClose&&this.props.onClose(),this.props.persistOnClose||this.stores.buttonPopupStore.reset()}}willUnmount(){this.stores.buttonPopupStore.setState({open:!1})}renderComponent(){const{buttonPopupStore:e}=this.stores,t={...this.props,onClick:this.props.disabled?o().identity:this.handleButtonClick};return l.createElement(h.ZP,i()({},this.props,{forceInitialInbound:Boolean(this.props.forceInitialInbound),render:this.renderPopup,open:e.state.open,onDismiss:this.handleClose,origin:this.props.renderOrigin(t),originGap:this.props.originGap,borderRadius:this.props.borderRadius,popupWrapStyle:this.props.popupWrapStyle}))}}p.displayName="ButtonPopupMenuItem",p.Alignment=c.v,p.Placement=c.u,p.PopupType=h.kQ;const m=p},56940:(e,t,s)=>{s.d(t,{Z:()=>h});var r=s(83355),i=s(1302),n=s(24677),o=s(98104),l=s(80935),a=s(63334),d=s(27724),c=s(24666);class u extends r.Z{constructor(){super(...arguments),this.storeTypes={store:a.Z},this.restoreSelection=()=>{const{savedHref:e,savedSelectionStoreState:t,savedTextSelectionStoreState:s}=this.stores.store.state;window.location.href===e&&(this.props.ignoreBlockSelection&&t&&d.default.setState({...d.default.state,...t}),s&&"editing"===s.mode&&c.default.setState({...c.default.state,...s})),this.clearSelection()}}willMount(){this.props.focusOffscreenInput&&(this.input=document.createElement("input"),this.input.style.position="fixed",this.input.style.top="-9999px",this.input.style.left="-9999px",document.body.appendChild(this.input)),this.props.capture&&(this.saveSelection(),this.props.focusOffscreenInput&&i.default.afterNextFlush((()=>{this.input.focus()})))}willUpdate(e){this.props.capture?e.capture||(e.restoreSelection?this.restoreSelection():this.clearSelection()):e.capture&&(this.saveSelection(),this.props.focusOffscreenInput&&i.default.afterNextFlush((()=>{this.input.focus()})))}willUnmount(){this.props.capture&&(this.props.restoreSelection?this.restoreSelection():this.clearSelection()),this.props.focusOffscreenInput&&document.body.removeChild(this.input)}renderComponent(){return this.props.render(this.restoreSelection)}saveSelection(){this.stores.store.setState({...this.stores.store.state,savedHref:window.location.href,savedSelectionStoreState:d.default.cloneState(),savedTextSelectionStoreState:c.default.cloneState(),savedTextSelectionRect:l.getSelectionRect()}),this.props.ignoreBlockSelection?n.ZH(this.environment):o.ZH(this.environment)}clearSelection(){this.stores.store.setState({...this.stores.store.state,savedHref:void 0,savedSelectionStoreState:void 0,savedTextSelectionStoreState:void 0,savedTextSelectionRect:void 0});const e=this.input;i.default.afterNextFlush((()=>{e&&document.activeElement===e&&e.blur()}))}}u.displayName="IgnoreSelectionArea";const h=u},9019:(e,t,s)=>{s.d(t,{Z:()=>c});var r=s(23174),i=s.n(r),n=(s(67294),s(83355)),o=s(80503),l=s(53953),a=s(44532);class d extends n.Z{renderComponent(){const{device:e}=this.environment;return e.isMobile?i()(a.ZP,{popupType:a.ZP.PopupType.SlideUp,open:this.props.open,render:this.props.renderContent,preventSlideUpTransition:this.props.disableAnimation,onDismiss:this.props.onDismiss,origin:this.props.origin}):i()(l.Z,{open:this.props.open,preventHideChildrenWhileOpening:!0,style:{alignItems:"flex-start"},innerStyle:this.getModalStyle(),onDismiss:this.props.onDismiss,render:this.props.renderContent,origin:this.props.origin,disableAnimation:this.props.disableAnimation})}getModalStyle(){const{modalStyle:e}=this.props;return{top:2*o.R6(this.environment.device.isElectronMac),borderRadius:6,overflow:"hidden",boxShadow:this.theme.largeBoxShadow,background:this.theme.contentBackground,...e}}}d.displayName="ModalPrompt";const c=d},58047:(e,t,s)=>{s.d(t,{N:()=>u});var r=s(23174),i=s.n(r),n=(s(67294),s(24405)),o=s(53397),l=s(82990),a=s(42922),d=s(89728),c=s(64369);function u(e){let{title:t,description:s,onDismiss:r,icon:u,primaryAction:h,secondaryAction:p}=e;window.__c={n:"Prompt"};const m=(0,n.yK)((e=>({container:{position:"relative",width:"100%",padding:16},multiIconsRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:12},singleIconRow:{position:"absolute",top:10,right:16},dismissButton:{marginTop:-7,marginRight:-7},title:{fontWeight:l.Z.fontWeight.medium,fontSize:l.Z.fontSize.UIRegular.desktop,lineHeight:1.2,color:e.darkTextColor,marginBottom:8},description:{fontWeight:l.Z.fontWeight.regular,fontSize:l.Z.fontSize.UISmall.desktop,color:e.lightTextColor},primaryActionButton:{width:"100%",margin:"12px auto 0"},secondaryActionButton:{width:"100%",margin:"8px auto 0",justifyContent:"center",fontWeight:l.Z.fontWeight.regular,fontSize:l.Z.fontSize.UISmall.desktop,color:e.lightTextColor},secondaryActionIcon:{width:12,height:12,marginRight:4},icon:{width:14,height:14,color:e.regularIconColor}})),[]);return i()("div",{style:m.container},void 0,u?i()("div",{style:m.multiIconsRow},void 0,i()("div",{},void 0,u),i()(d.Z,{isSmall:!0,style:m.dismissButton,onClick:r},void 0,o.Z.closeSmall(m.icon))):i()("div",{style:m.singleIconRow},void 0,i()(d.Z,{isSmall:!0,style:m.dismissButton,onClick:r},void 0,o.Z.closeSmall(m.icon))),i()(c.Z,{style:m.title,isMultiline:!0},void 0,t),i()(c.Z,{style:m.description,isMultiline:!0,isSmall:!0},void 0,s),h?i()(a.Z,{isLarge:!0,style:m.primaryActionButton,onClick:e=>h.onClick(e)},void 0,h.text):null,p?i()(d.Z,{style:m.secondaryActionButton,onClick:e=>p.onClick(e)},void 0,p.icon?p.icon(m.secondaryActionIcon):null,p.text):null)}},93481:(e,t,s)=>{s.d(t,{Z:()=>x});var r=s(23174),i=s.n(r),n=s(67294),o=s(83355),l=s(53397),a=s(97880),d=s(5366),c=s(80084),u=s(41558),h=s(33338),p=s(42922),m=s(52275),g=s(3386),v=s(89728),f=s(44532),y=s(72495),S=s(83264),b=s(255),C=s(75689),M=s(91642),T=s(98707);class P extends o.Z{constructor(){super(...arguments),this.storeTypes={store:u.Z},this.renderActiveButtonOrigin=()=>{const{value:e,dateFormat:t,disabled:s,focused:r,intl:n}=this.props,o=this.styles,a=this.getThemeColors(),d={...o.menuItem,...a.activeMenuItem},u=c._Q(e,n,t),h=i()(b.Z,{onClick:this.handleClear,disabled:s});return i()(m.Z,{focused:r,disabled:s,icon:l.Z.calendar(o.iconActiveDesktop),title:u,right:h,isTokenTitle:!0,alignIconTop:!0,onClick:this.handleOriginActivate,desktopTitleStyle:o.menuItemTitleDesktop,desktopIconStyle:o.iconActiveDesktopWrapper,style:d})},this.renderInactiveButtonOrigin=()=>{const{title:e,icon:t,disabled:s,focused:r,mode:n}=this.props,o=this.styles,l=this.getThemeColors(),a={...o.menuItem,...l.buttonMenuItem,...n===T.Z.Mode.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return i()(m.Z,{focused:r,disabled:s,icon:t(o.icon),title:e,onClick:this.handleOriginActivate,style:a})},this.renderPillButtonOrigin=()=>{const{value:e,title:t}=this.props;return i()(h.Z,{on:Boolean(e.starting||e.ending),icon:l.Z.calendar({width:16,marginRight:6,fill:"currentColor"}),title:i()("span",{},void 0,t),onClick:this.handleOriginActivate})},this.renderPopupContents=()=>{const{title:e,showButtons:t}=this.props,{store:s}=this.stores;return n.createElement(n.Fragment,null,i()(S.Z,{title:e,value:this.getCurrentValue(),onUpdate:this.updateTemporary,store:s,onDismiss:this.handleMenuClose}),t&&i()("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"}},void 0,i()(v.Z,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:this.handleMenuClose},void 0,i()(d.FormattedMessage,{defaultMessage:"Cancel",id:"searchDateFilter.cancelButton.label"})),i()(p.Z,{onClick:()=>this.props.onChange(this.stores.store.state.temporaryDateRange)},void 0,i()(d.FormattedMessage,{defaultMessage:"Accept",id:"searchDateFilter.acceptButton.label"}))))},this.renderFooter=()=>{const{store:e}=this.stores;return i()(y.Z,{topBorder:!0,style:{padding:6,justifyContent:"space-between",display:"flex"}},void 0,i()(v.Z,{onClick:()=>{e.setState({...e.state,temporaryDateRange:{starting:void 0,ending:void 0}}),this.props.onChange({})}},void 0,i()(d.FormattedMessage,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})),i()(p.Z,{onClick:this.handleMenuClose},void 0,i()(d.FormattedMessage,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})))},this.handleOriginActivate=()=>{const{disabled:e}=this.props,{store:t}=this.stores;e||t.setState({...t.state,isOpen:!0,focus:"starting"})},this.handleMenuClose=e=>{const{onChange:t,onMenuDismiss:s}=this.props,{store:r}=this.stores,{temporaryDateRange:i}=r.state;c.zD(e)||(this.props.showButtons||t(i),r.setState({...r.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),s&&s())},this.handleClear=()=>{const{onChange:e}=this.props;e({starting:void 0,ending:void 0})},this.handleMenuListKey=e=>{e.preventDefault&&e.preventDefault()},this.updateTemporary=e=>{const{store:t}=this.stores;if(!e.error)return t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},icon:{height:14,width:14,fill:"currentColor"},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:12,paddingBottom:8},menuItemTitleDesktop:{width:"100%"},sectionMenuItem:{display:"flex"},summary:{display:"inline-flex"}}}didMount(){this.updateTemporary({value:this.props.value})}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t}=this.props,{store:s}=this.stores,r=this.styles,n=e===T.z.Section,o=n?t:void 0,l=(()=>e===T.Z.Mode.Section?this.renderActiveButtonOrigin():e===T.Z.Mode.Button?this.renderInactiveButtonOrigin():e===T.Z.Mode.Pill?this.renderPillButtonOrigin():void(0,a.t1)(e))();return i()(M.Z,{title:o,marginAfter:n},void 0,i()(g.Z,{capture:s.state.isOpen,onUp:this.handleMenuListKey,onDown:this.handleMenuListKey,onEnter:this.handleMenuListKey},void 0,i()(f.ZP,{popupType:this.getPopupType(),open:s.state.isOpen,origin:l,render:this.renderPopupContents,onDismiss:this.handleMenuClose,placementToOrigin:f.ZP.Placement.Bottom,alignmentToOrigin:f.ZP.Alignment.Start,keepFocus:!0,style:r.popup})))}renderMobile(e){const{store:t}=this.stores,s=e===T.z.Section?this.renderMobileFilterSummary():this.renderMobileButtonOrigin();return i()(f.ZP,{popupType:f.ZP.PopupType.SlideUp,open:t.state.isOpen,origin:s,render:this.renderPopupContents,onDismiss:this.handleMenuClose,preventScaleTransition:!0})}renderMobileButtonOrigin(){const{icon:e,title:t,disabled:s}=this.props,r=this.styles;return i()(m.Z,{disabled:s,focused:!1,icon:e(r.icon),title:t,onClick:this.handleOriginActivate})}renderMobileFilterSummary(){const{title:e,value:t,dateFormat:s,disabled:r,intl:n}=this.props,o=this.styles,a=i()("div",{style:o.summary},void 0,l.Z.calendar(o.iconActiveMobile),c._Q(t,n,s));return i()(C.Z,{disabled:r,onClick:this.handleOriginActivate,onClickClear:this.handleClear,label:e,title:a})}getCurrentValue(){const{value:e}=this.props,{store:t}=this.stores,{temporaryDateRange:s}=t.state;return{...e,...s}}getPopupType(){const{device:e}=this.environment;return e.isMobile?f.ZP.PopupType.SlideUp:f.ZP.PopupType.Popup}getThemeColors(){return{buttonMenuItem:{color:this.theme.mediumTextColor},activeMenuItem:{color:this.theme.regularTextColor}}}}P.displayName="SearchDateFilter";const x=(0,d.injectIntl)(P)},83890:(e,t,s)=>{s.d(t,{Z:()=>M});var r=s(10434),i=s.n(r),n=s(23174),o=s.n(n),l=s(67294),a=s(83355),d=s(66897),c=s(53397),u=s(19889),h=s(7928),p=s(5366),m=s(31299),g=s(68216),v=s(92864),f=s(93044),y=s(255),S=s(97680),b=s(98707);class C extends a.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:s,onRemove:r,onClick:i}=t;const n=this.styles,l=this.getUserValue(e),a=o()(y.Z,{disabled:s,onClick:r});return o()(S.Z,{disabled:s,focused:!1,actor:(0,d.m3)(l),right:a,style:n.menuItem,desktopTitleStyle:n.menuItemTitle,onClick:i},e)},this.renderItemForSummary=e=>(0,h.Nz)(this.props.intl,this.getUserValue(e)),this.renderToken=(e,t)=>{const{userIds:s}=this.props,r=1===s.length,i=this.getUserValue(e);if(i)return o()(v.ZP,{format:this.environment.device.isMobile?f.lP.Large:f.lP.Small,showRemoveButton:!0,isSingle:r,onClickRemove:t.onRemove,actor:(0,d.m3)(i),shouldShrink:!0,style:{background:"transparent"}},e)},this.renderResultMenuItem=(e,t)=>{const s=this.getUserValue(e);return l.createElement(S.Z,i()({},t,{key:e,actor:(0,d.m3)(s)}))},this.performRequest=async e=>{let{query:t,current:s}=e;const r=new Set(s);return(await m.Yu({environment:this.environment,query:t,membersOnly:!1})).filter((e=>!r.has(e.id))).slice(0,20).map((e=>e.id))},this.getUserValue=e=>this.createUserStore(e).getValue(),this.createUserStore=e=>{const{parentStore:t}=this.props;return g.U6.createChildStore(t,{table:u.KJ,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:2,fill:"currentColor"}}}renderComponent(){const{mode:e,title:t,userIds:s,onChange:r,disabled:i,focused:n,onMenuDismiss:l,intl:a}=this.props;return o()(b.Z,{mode:e,title:t,icon:c.Z.person,iconStyles:this.styles.recordIcon,items:s,onChange:r,disabled:i,focused:n,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:o()(p.FormattedMessage,{defaultMessage:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:t,tokenInputPlaceholder:a.formatMessage({defaultMessage:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,onMenuDismiss:l,hasItemsSelected:(null==s?void 0:s.length)>0})}}C.displayName="SearchPersonFilter";const M=(0,p.injectIntl)(C)},62766:(e,t,s)=>{s.r(t),s.d(t,{SearchStaticContext:()=>Or,SearchStoresContext:()=>Dr,default:()=>Er});var r=s(23174),i=s.n(r),n=(s(57658),s(96486)),o=s.n(n),l=s(67294),a=s(83355),d=s(18466),c=s(49085),u=s(15145),h=s(12174),p=s(4615),m=s(97880);var g=s(70203),v=s(63143),f=s(50906),y=s(5978),S=s(87531),b=s(74647),C=s(95477),M=s(73744),T=s(69988),P=s(98165),x=s(65598),I=s(80084),k=s(21115),R=s(23537),Z=s(79315),F=s(24042),w=s(10161),B=s(32470),O=s(55320),D=s(2342),A=s(30857),E=s(87956),L=s(29026),q=s(9019),N=s(10434),_=s.n(N),V=s(480),W=s(81954),z=s(24405),H=s(29477),U=s(43250),K=s(87279),$=s(59054),G=s(21202),j=s(92338),Q=s(68120),J=s(29987),X=s(88632),Y=s(68216);function ee(e){let{dependencies:t,debugColumnStore:s,localDebounce:r=25,serverDebounce:i=275,searchResultStore:n,localSearchCache:a,permanentFilterOverride:d,enabled:c}=e;const u=(0,V.O7)(),h=(0,W.VK)((()=>function(e){const{isOnline:t,debugColumnStore:s}=e,r=s.state.searchExperimentOverrides;function i(e){return(null==r?void 0:r[e])??w.default.getGroup(e,{disableExposureLogging:!0})}return{shouldSearchLocal:"on"!==i("search-no-local-blending")&&t,forcedClusterPattern:s.state.forcedClusterPattern,searchExperimentOverrides:s.state.searchExperimentOverrides,forcedBlockIds:s.state.forcedBlockIds}}({isOnline:t.isOnline,debugColumnStore:s})),[t.isOnline,s]),p=(0,l.useMemo)((()=>o().debounce(te,i)),[i]);(0,$.r5)((()=>c?async function(e){const{query:t,openAsPage:s,store:r,fetchServerResultsFn:i}=e;if(s&&o().isEqual(t,r.state.selectedQueryResultQuery))return;const n="quick_find_scroll"!==L.ZP.state.source;r.update((e=>({...e,localResults:n?void 0:e.localResults})));const l=function(e){const{shouldSearchLocal:t,parentStore:s,environment:r,query:i,debug:n,limit:l,hasPublicAccessPermission:a,isOnline:d,localSearchCache:c,store:u,permanentFilterOverride:h}=e;let p;const m={...i,filters:{...i.filters,...h}};if(t){var g;return p=I.b9(function(e){const{parentStore:t,requestInput:s,isOnline:r,environment:i,hasPublicAccessPermission:n,localSearchCache:o}=e,{query:l}=s;if(!o)return;if(!l.text.trim())return;if(n)return;const a=J.default.mark("rum.local_quick_search_query"),d=void 0,c=I.Y_({query:s,localCachedPages:o,parentStore:t,environment:i,isOnline:r,shouldLimitLocalResultsWhenOnline:!0,applyScoreThresholdWhenOnline:!0,maxLocalResultsOverride:d});return J.default.measure(a,{environment:i}),c}({parentStore:s,environment:r,requestInput:{query:m,debug:n,limit:l},hasPublicAccessPermission:a,isOnline:d,localSearchCache:c})),A.default.update((e=>({...e,numLocalRequests:e.numLocalRequests+1}))),o().isEmpty(null===(g=p)||void 0===g?void 0:g.results)&&(0,D.Xx)(u.state)&&u.state.serverResultsLoading?u.update((e=>({...e,clearLocalResultsOnServerResponse:!0}))):u.update((e=>({...e,clearLocalResultsOnServerResponse:!1,localResults:p}))),p}}(e),a=[];"on"===w.default.getGroup("search-exclude-local-in-server")&&a.push(...(null==l?void 0:l.results.map((e=>e.id)))??[]);await i({...e,excludedBlockIds:a})}({...t,...h,store:n,fetchServerResultsFn:p,environment:u,localSearchCache:a,permanentFilterOverride:d}):Promise.resolve()),[t,h,n,p,u,a,d,c],{debounce:r})}async function te(e){let{parentStore:t,environment:s,query:r,debug:i,isOnline:n,publicAccessPermissionAncestorBlockId:l,currentSpaceStore:a,searchSessionId:d,searchExperimentOverrides:c,forcedClusterPattern:u,recentPagesForBoosting:h,store:p,forcedBlockIds:g,limit:y,permanentFilterOverride:S,excludedBlockIds:b}=e;const C={query:{...r,filters:{...r.filters,...S}},debug:i,limit:y};p.update((e=>({...e,serverResultsLoading:!0}))),A.default.update((e=>({...e,numServerRequests:e.numServerRequests+1})));const M=p.state.serverResults,T=L.ZP.state.source,P=await async function(e){const{parentStore:t,requestInput:s,isOnline:r,environment:i,publicAccessPermissionAncestorBlockId:n,searchSessionId:o,searchSessionFlowNumber:l,source:a,spaceId:d,searchExperimentOverrides:c,forcedClusterPattern:u,recentPagesForBoosting:h,forcedBlockIds:p,excludedBlockIds:g}=e,{query:f}=s;if(!f.text.trim()&&!I.FN(f.filters))return;if(!r)return{error:j.Ix.Offline};const y=J.default.mark("rum.server_quick_search_query"),S=await I.MS({environment:i,input:s,spaceId:d,publicAccessPermissionAncestorBlockId:n,searchSessionId:o,searchSessionFlowNumber:l,source:a,searchExperimentOverrides:c,forcedClusterPattern:u,recentPagesForBoosting:"on"===(null==c?void 0:c["search-debug-only-no-recent-boosting"])?[]:h,forcedBlockIds:p,excludedBlockIds:g});if(!S)return;if("failed"===S.type)return S.offline?{error:j.Ix.Offline}:{error:j.Ix.RequestFailed};const b=S.data.trackEventProperties,C=(0,Q.Qr)(b)?{}:(0,v.m8)((0,m.Yd)(b).map((e=>[`server-${e}`,b[e]]))),M=S.data.results.map(((e,s)=>({...e,serverEventProperties:C,originalPosition:s,store:Y.G.createChildStore(t,{table:G.iU,id:e.id})})));return J.default.measure(y,{environment:i}),{value:{results:M,total:S.data.total,debugInfo:S.data.debug,serverEventProperties:C,clusterInfo:S.data.clusterInfo}}}({parentStore:t,environment:s,requestInput:C,spaceId:null==a?void 0:a.id,searchSessionId:d,searchSessionFlowNumber:A.default.state.numServerRequests,publicAccessPermissionAncestorBlockId:l,isOnline:n,source:T,searchExperimentOverrides:c,forcedClusterPattern:u,recentPagesForBoosting:h,forcedBlockIds:g,excludedBlockIds:b}),x={query:{...L.ZP.state.query,filters:{...L.ZP.state.query.filters,...S}},limit:L.ZP.state.limit,debug:B.ZP.getDebugLevel()};if(!o().isEqual(C,x))return;const k=I.b9(P),R="quick_find_scroll"===T?I.Nu({existingResults:M,newPageResults:k}):k;if(P&&!P.error){var Z,F,w;const e=P.value.results;p.update((t=>({...t,serverError:null==P?void 0:P.error,serverResultsLoading:!1,serverResults:R,serverResultsAllLoaded:e.length<y,serverEventProperties:P.value.serverEventProperties,localResults:t.clearLocalResultsOnServerResponse?void 0:t.localResults,clearLocalResultsOnServerResponse:!1})));const t=new Map;null==R||R.results.flatMap((e=>e.badges)).forEach((e=>{void 0!==e&&(void 0===t[e.type]&&(t[e.type]=0),t[e.type]+=1)}));const{sections:r}=I.IV({intentBasedGrouping:O.default.state.searchMenuStoreExperimentState.enablesGrouping,localResults:null===(Z=p.state.localResults)||void 0===Z?void 0:Z.results,serverResults:null==R?void 0:R.results}),i={};for(const[s,n]of Object.entries(r))i[s]=n.map((e=>e.id));f.ZfC(s,{numLocalResults:(null===(F=p.state.localResults)||void 0===F?void 0:F.results.length)||0,numServerResults:(null==R?void 0:R.results.length)||0,localResultsIds:(null===(w=p.state.localResults)||void 0===w?void 0:w.results.map((e=>e.id)))||[],...P.value.serverEventProperties,badgeCounts:t,idsBySection:i})}else p.update((e=>({...e,serverError:null==P?void 0:P.error,serverResultsLoading:!1,serverResults:void 0,serverEventProperties:void 0,localResults:e.clearLocalResultsOnServerResponse?void 0:e.localResults,clearLocalResultsOnServerResponse:!1})))}const se={taskDB:{ancestors:["e02ed201-e893-4279-8bac-6b872dabf955"]},projectsDB:{ancestors:["37cedb80-b4aa-4674-b0b3-1e8c67f0be86"]},docsDB:{ancestors:["e6dce471-f27c-43fb-b28e-40d293f86f8c"]},searchTeam:{ancestors:["a02dd678-839d-4a63-9b74-a37f11df723f"]}},re=!1;function ie(){const e=(0,V.O7)(),t=(0,V.Fy)(),{searchResultStore:s,secondarySearchResultStore:r,searchCreatedByMeResultStore:i,searchTaskDBResultStore:n,searchProjectsResultStore:o,searchDocsResultStore:a,searchSearchTeamResultStore:d}=(0,l.useContext)(Or),{parentStore:c}=(0,l.useContext)(Dr),u=function(e){const t=(0,V.O7)();return(0,W.VK)((()=>{const{hasPublicAccessPermission:s,publicAccessPermissionAncestorBlockId:r}=I.bC(t);return{isOnline:Boolean(X.Z.state.online),limit:L.ZP.state.limit,parentStore:e,hasPublicAccessPermission:s,publicAccessPermissionAncestorBlockId:r,currentSpaceStore:Z.default.state.currentSpaceStore,debug:B.ZP.getDebugLevel(),openAsPage:O.default.state.openAsPage,recentPagesForBoosting:L.ZP.state.recentPagesForBoosting,searchSessionId:O.default.state.sessionId,currentSpaceViewStore:Z.default.state.currentSpaceViewStore,query:L.ZP.state.query}}),[t,e])}(c),h=(0,W.VK)((()=>Boolean((0,B.gq)({device:t})&&B.BJ.state.visible)),[t]),[{value:p}]=(0,$.r5)((()=>u.hasPublicAccessPermission?Promise.resolve(void 0):u.currentSpaceStore?I.hb({environment:e,currentSpaceStore:u.currentSpaceStore,currentSpaceViewStore:u.currentSpaceViewStore,excludeCurrentPage:!0}):Promise.resolve(void 0)),[e,u.currentSpaceStore,u.currentSpaceViewStore,u.hasPublicAccessPermission]);ee({dependencies:u,searchResultStore:s,localSearchCache:p,debugColumnStore:B.v_,enabled:!0}),ee({dependencies:u,searchResultStore:r,localSearchCache:p,debugColumnStore:B.BJ,enabled:h});const m=(0,W.VK)((()=>{var e;const t=null===(e=Z.default.state.currentUserRootStore)||void 0===e?void 0:e.id;return{createdBy:t?[t]:[]}}),[]);ee({dependencies:u,searchResultStore:i,localSearchCache:p,debugColumnStore:B.v_,permanentFilterOverride:m,enabled:re}),ee({dependencies:u,searchResultStore:n,localSearchCache:p,debugColumnStore:B.v_,permanentFilterOverride:se.taskDB,enabled:re}),ee({dependencies:u,searchResultStore:o,localSearchCache:p,debugColumnStore:B.v_,permanentFilterOverride:se.projectsDB,enabled:re}),ee({dependencies:u,searchResultStore:a,localSearchCache:p,debugColumnStore:B.v_,permanentFilterOverride:se.docsDB,enabled:re}),ee({dependencies:u,searchResultStore:d,localSearchCache:p,debugColumnStore:B.v_,permanentFilterOverride:se.searchTeam,enabled:re})}var ne=s(5162),oe=s(69454),le=s(36488),ae=s(56940),de=s(78140),ce=s(40721),ue=s(37770),he=s(22715),pe=s(53397),me=s(53772),ge=s(82990),ve=s(5366),fe=s(61766),ye=s(23063),Se=s(64921),be=s(52275),Ce=s(31945),Me=s(12508),Te=s(89728),Pe=s(72495),xe=s(93481),Ie=s(84619),ke=s(31299),Re=s(33929),Ze=s(15447),Fe=s(31278),we=s(11470),Be=s(76798),Oe=s(255),De=s(85567),Ae=s(98707);const Ee=(0,ve.defineMessages)({searchPages:{defaultMessage:"Search pages",id:"searchPageFilter.searchTokenFilter.tokenInput.placeholder"},selectAPage:{defaultMessage:"Select a page",id:"searchPageFilter.searchTokenFilter.resultSection.title"}});class Le extends a.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:s,onRemove:r,onClick:n}=t;const o=this.styles,l=this.createBlockStore(e),a=i()(Oe.Z,{disabled:s,onClick:r});return i()(we.Z,{disabled:s,focused:!1,store:l,right:a,style:o.menuItem,desktopTitleStyle:o.menuItemTitle,onClick:n})},this.renderItemForSummary=e=>i()(Be.Z,{store:this.createBlockStore(e),shouldWrap:!0,maxLength:50}),this.renderToken=(e,t)=>{const{blockIds:s}=this.props,r=this.tokenStyles,n=1===s.length,o=this.createBlockStore(e),l=i()("div",{style:r.token},void 0,i()(Fe.Z,{disabled:!0,icon:o.getIcon(),isEmptyPage:!1,size:20,style:r.icon}),i()(Be.Z,{store:o}));return i()(De.Z,{format:this.environment.device.isMobile?Ie.l.Large:Ie.l.Small,value:l,showRemoveButton:!0,onClickRemove:t.onRemove,isSingle:n,shouldShrink:!0,backgroundColor:"transparent",shouldWrap:!1},e)},this.renderResultMenuItem=(e,t)=>{const s=this.createBlockStore(e);return l.createElement(we.Z,_()({},t,{key:e,store:s}))},this.performRequest=async e=>{let{query:t,current:s}=e;const{currentSpaceStore:r}=Z.default.state;if(!r)return[];const i=t?(await ke.nJ({environment:this.environment,query:t,limit:20,spaceId:r.id,requireEditPermissions:!1,excludeTemplates:!1,source:"ancestor_filter_page_search",boostRecentlyViewedPages:!0})).results:Ze.X4.state.map((e=>e.pageId)),n=new Set(s);return i.filter((e=>!n.has(e)))},this.createBlockStore=e=>{const{parentStore:t}=this.props;return Y.G.createChildStore(t,{table:G.iU,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{fill:"currentColor"}},this.tokenStyles={token:{display:"flex",alignItems:"center"},icon:{marginRight:4}}}renderComponent(){const{mode:e,title:t,blockIds:s,onChange:r,disabled:n,focused:o,onMenuDismiss:l}=this.props;return i()(Ae.Z,{mode:e,hasItemsSelected:(null==s?void 0:s.length)>0,title:t,icon:pe.Z.searchInPage,iconStyles:this.styles.recordIcon,items:s,onChange:r,focused:o,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:i()(ve.FormattedMessage,{defaultMessage:"Add another page",id:"searchPageFilter.searchTokenFilter.addAPage.button"}),labelText:{title:t,tokenInputPlaceholder:Re.default.formatMessage(Ee.searchPages),componentDebugName:"SearchPageFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,disabled:n,onMenuDismiss:l})}}Le.displayName="SearchPageFilter";const qe=Le;var Ne=s(83890),_e=s(29369),Ve=s(93044),We=s(30676);class ze extends a.Z{constructor(){super(...arguments),this.renderFilterListItem=(e,t)=>{let{disabled:s,onRemove:r,onClick:n}=t;const o=this.styles,l=this.createTeamStore(e),a=i()(Oe.Z,{disabled:s,onClick:r});return i()(We.F,{disabled:s,focused:!1,teamStore:l,right:a,style:o.menuItem,desktopTitleStyle:o.menuItemTitle,onClick:n},e)},this.renderItemForSummary=e=>this.createTeamStore(e).getName(),this.renderAvatarFactory=e=>{const t=e.getIcon();return e=>i()(Fe.Z,{disabled:!0,icon:t,isEmptyPage:!1,size:e})},this.renderToken=(e,t)=>{const{teamIds:s}=this.props,r=1===(null==s?void 0:s.length),n=this.createTeamStore(e);if(!n)return;const o=n.getName();return i()(Ve.ZP,{format:this.environment.device.isMobile?Ve.lP.Large:Ve.lP.Small,showRemoveButton:!0,isSingle:r,onClickRemove:t.onRemove,renderAvatar:this.renderAvatarFactory(n),title:o,style:{background:"transparent"}},e)},this.renderResultMenuItem=(e,t)=>{const s=this.createTeamStore(e);return l.createElement(We.F,_()({},t,{key:e,teamStore:s}))},this.performRequest=async e=>{var t;let{query:s,current:r}=e;const i=new Set(r),n=Z.default.state.currentSpaceViewStore,o=Z.default.state.currentSpaceStore,l=null===(t=Z.default.state.currentUserStore)||void 0===t?void 0:t.id;if(!n||!o||!l)return[];const a=await(0,R.qX)({environment:this.environment,spaceStore:o,currentUserId:l});return(await ke.zf({query:s,spaceViewStore:n,teamStores:a})).filter((e=>!i.has(e.id))).slice(0,20).map((e=>e.id))},this.createTeamStore=e=>{const{parentStore:t}=this.props;return Y.zX.createChildStore(t,{table:_e.e0,id:e})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:6,fill:"currentColor"}}}renderComponent(){const{mode:e,title:t,teamIds:s,onChange:r,disabled:n,focused:o,onMenuDismiss:l,intl:a}=this.props;return i()(Ae.Z,{mode:e,title:t,icon:pe.Z.openTeamSearch,iconStyles:this.styles.recordIcon,items:s||[],onChange:r,disabled:n,focused:o,renderFilter:this.renderFilterListItem,renderToken:this.renderToken,renderItemForSummary:this.renderItemForSummary,addItemLabel:i()(ve.FormattedMessage,{defaultMessage:"Add a teamspace",id:"search.filterMenu.addATeamButton.label"}),labelText:{title:t,tokenInputPlaceholder:a.formatMessage({defaultMessage:"Search teamspaces",id:"search.filterMenu.searchTeams.placeholder"}),componentDebugName:"SearchTeamFilter"},performRequest:this.performRequest,renderResultMenuItem:this.renderResultMenuItem,onMenuDismiss:l,hasItemsSelected:Boolean(s&&(null==s?void 0:s.length)>0)})}}ze.displayName="SearchTeamFilter";const He=(0,ve.injectIntl)(ze);var Ue=s(33338),Ke=s(86825),$e=s(75689),Ge=s(91642);class je extends a.Z{constructor(){super(...arguments),this.handleToggle=()=>{const{value:e,onChange:t}=this.props;t(!e)},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},icon:{height:14,width:14,fill:"currentColor"},pillIcon:{height:16,width:16,fill:"currentColor",marginRight:6},sectionMenuItem:{display:"flex"}}}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){return i()(Ge.Z,{marginAfter:!1,style:this.styles.sectionMenuItem},void 0,this.renderSwitcherMenuItem(e))}renderMobile(e){const{title:t,value:s,disabled:r}=this.props;return e===Ae.z.Button?this.renderSwitcherMenuItem(e):i()($e.Z,{disabled:r,onClick:this.handleToggle,label:t,isToggle:!0,isToggleActive:s})}renderSwitcherMenuItem(e){const{title:t,icon:s,value:r,style:n,...o}=this.props,a=this.styles,d=this.getThemeColors(),c={...a.menuItem,...d.menuItem,...n};return e===Ae.z.Pill?i()(Ue.Z,{on:r,hideChevron:!0,title:i()("span",{},void 0,t),onClick:this.handleToggle,icon:s(a.pillIcon)}):l.createElement(Ke.Z,_()({title:t,icon:s(a.icon),on:r,onClick:this.handleToggle,style:c},o))}getThemeColors(){return{menuItem:{color:this.theme.mediumTextColor}}}}je.displayName="SearchToggleFilter",je.Mode=Ae.z;const Qe=je;var Je=s(8848),Xe=s(32163);function Ye(e){window.__c={n:"SearchExperimentFilterPopupButton"};const t=(0,V.Fy)();return i()(Ce.ZP,{popupType:t.isMobile?Ce.Z4.SlideUp:Ce.Z4.Popup,renderOrigin:t=>l.createElement(tt,_()({events:t},e)),render:t=>l.createElement(et,_()({parent:t},e))})}function et(e){let{parent:t,experiment:s,searchExperimentOverrides:r,onChange:n}=e;window.__c={n:"SearchExperimentFilterMenu"};const o=(0,V.Fy)(),a=(0,z.yK)((()=>({menuOptionStyle:{color:Je.ZP.mediumTextColor}})),[]);let d;d=o.isMobile?{menuType:K.og.Modal,title:s.experimentId,right:i()(ve.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:t.close}:{menuType:K.og.Popup,width:250};const c=s.groups.map((e=>({key:e,action:r=>{n({experimentId:s.experimentId,group:e}),t.close()},render:(t,s)=>l.createElement(be.Z,_()({},t,{title:e,style:a.menuOptionStyle}))})));return l.createElement(de.Z,d,i()(Xe.Z,{type:Xe.i.Vertical,initialFocus:void 0,sections:[{key:s.experimentId,render:e=>l.createElement(Pe.Z,e),items:c}]}))}function tt(e){let{experiment:t,events:s,searchExperimentOverrides:r}=e;window.__c={n:"SearchExperimentFilterMenuButton"};const n=(0,z.yK)((e=>({experimentGroupButtonChevronStyle:{width:10,fill:e.lightIconColor},experimentGroupButtonStyle:{overflowX:"hidden",justifyContent:"left",overflow:"hidden",marginLeft:6,color:e.mediumTextColor},rowContainer:{display:"flex",overflow:"hidden",flexDirection:"row"},groupCell:{overflow:"hidden",marginRight:4}})),[]);return l.createElement(Te.Z,_()({},s,{isSmall:!0,key:t.experimentId,style:n.experimentGroupButtonStyle}),i()("div",{style:n.rowContainer},void 0,i()("div",{style:n.groupCell},void 0,r[t.experimentId]||t.group),i()("div",{},void 0,pe.Z.chevronDown(n.experimentGroupButtonChevronStyle))))}const st=e=>({fontSize:14,lineHeight:1.2,color:e.mediumTextColor,marginRight:4,display:"flex",alignItems:"center",whiteSpace:"nowrap"}),rt=function(e){window.__c={n:"SearchExperimentFilter"};const{experiment:t}=e,{leftOverrides:s,rightOverrides:r,experimentDiffers:n,experimentAgreesButNondefault:o}=(0,W.VK)((()=>{const e=B.v_.state.searchExperimentOverrides,s=B.BJ.state.searchExperimentOverrides,r=(e[t.experimentId]??t.group)!==(s[t.experimentId]??t.group);return{leftOverrides:e,rightOverrides:s,experimentDiffers:r,experimentAgreesButNondefault:!r&&void 0!==s[t.experimentId]&&e[t.experimentId]!==t.group}}),[t]),a=(0,z.yK)((e=>({rowContainer:{backgroundColor:n?e.equationErrorPlaceholderBackground:o?e.accentColors.yellow[100]:void 0},titleCell:{...st(e),maxWidth:180,textOverflow:"ellipsis",overflow:"hidden"}})),[o,n]),d=(0,l.useCallback)((e=>{const{experimentId:t,group:s,store:r}=e;r.setState({...r.state,searchExperimentOverrides:{...r.state.searchExperimentOverrides,[t]:s}})}),[]);return l.createElement(l.Fragment,null,i()("div",{style:{...a.titleCell,...a.rowContainer}},void 0,t.experimentId.replace("search-","")),i()("div",{style:a.rowContainer},void 0,i()(Ye,{experiment:t,searchExperimentOverrides:s,onChange:e=>{d({...e,store:B.v_})}})),i()("div",{style:a.rowContainer},void 0,i()(Ye,{experiment:t,searchExperimentOverrides:r,onChange:e=>{d({...e,store:B.BJ})}})))};var it=s(53877),nt=s(42875);let ot=function(e){return e[e.Button=0]="Button",e[e.MenuItem=1]="MenuItem",e}({});class lt extends a.Z{constructor(){super(...arguments),this.handleFilterClick=e=>{const{onMenuDismiss:t}=this.props;this.applyFilter(e),this.openSidebar(),t&&t()},this.applyFilter=e=>{L.ZP.updateFilters(e)},this.openSidebar=()=>{L.ZP.isDebugSidebarOpen()||L.ZP.setState({...L.ZP.state,isDebugSidebarOpen:!0})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},buttonFilter:{padding:"4px 8px",display:"flex",alignItems:"center",overflow:"hidden"},buttonText:{...ge.Z.textOverflowStyle},icon:{display:"inline-block",height:14,width:14,fill:"currentColor"},buttonIcon:{marginRight:6}}}renderComponent(){const{mode:e}=this.props;return e===ot.Button?this.renderAsButton():e===ot.MenuItem?this.renderAsMenuItem():void(0,m.t1)(e)}renderAsButton(){const{icon:e,title:t,filter:s}=this.props,r=this.styles,n=this.getThemeColors();return i()(Se.Z,{style:{...r.buttonFilter,...n.buttonFilter},onClick:()=>this.handleFilterClick(s)},void 0,e&&e({...r.icon,...r.buttonIcon}),i()("span",{style:r.buttonText},void 0,t))}renderAsMenuItem(){const{icon:e,title:t,filter:s,focused:r}=this.props,n=this.styles,o=this.getThemeColors(),l={...n.menuItem,...o.menuItem};return i()(be.Z,{icon:e&&e(n.icon),focused:r,title:t,onClick:()=>this.handleFilterClick(s),style:l})}getThemeColors(){const{device:e}=this.environment;return{menuItem:{color:e.isDesktop?this.theme.mediumTextColor:void 0,...this.props.isLastInSection&&{boxShadow:void 0}},buttonFilter:{color:this.theme.mediumTextColor}}}}lt.displayName="SearchFilterPreset",lt.Mode=ot;class at extends a.Z{renderComponent(){const e=at.getCurrentPageFilter();if(e)return l.createElement(lt,_()({icon:pe.Z.searchInPage,title:i()(ve.FormattedMessage,{id:"search.filterMenu.quickFilters.inCurrentPage",defaultMessage:"In current page"}),filter:e},this.props))}static isActive(e){const t=at.getCurrentPageFilter();if(!t)return!1;if(!t.ancestors)return!1;const s=t.ancestors[0];return-1!==e.ancestors.indexOf(s)}}at.displayName="InCurrentPagePreset",at.getCurrentPageFilter=()=>{const{mainEditorCurrentBlockStore:e}=Z.default.state;if(e&&e.id)return{ancestors:[e.id]}};class dt extends a.Z{renderComponent(){const e=dt.getCurrentUserFilter(this.environment);if(e)return l.createElement(lt,_()({icon:pe.Z.person,title:i()(ve.FormattedMessage,{id:"search.filterMenu.quickFilters.createdByMe",defaultMessage:"Created by me"}),filter:e},this.props))}static isActive(e,t){const s=dt.getCurrentUserFilter(e);if(!s)return!1;if(!s.createdBy)return!1;const r=s.createdBy[0];return-1!==t.createdBy.indexOf(r)}}dt.displayName="CreatedByMePreset",dt.getCurrentUserFilter=e=>{const{id:t}=e.currentUser;if(t)return{createdBy:[t]}};class ct extends a.Z{renderComponent(){const e=ct.getPastWeekFilter();if(e)return l.createElement(lt,_()({icon:pe.Z.calendar,title:i()(ve.FormattedMessage,{id:"search.filterMenu.quickFilters.editedLastWeek",defaultMessage:"Edited last week"}),filter:e},this.props))}static isActive(e){const{lastEditedTime:t}=ct.getPastWeekFilter();return o().isEqual(t,e.lastEditedTime)}}ct.displayName="EditedLastWeekPreset",ct.getPastWeekFilter=()=>({lastEditedTime:{starting:it.Oo((0,nt.r)()),ending:it.Lg((0,nt.r)())}});var ut=s(1743),ht=s(74194);function pt(e){window.__c={n:"SearchStringOverrideControls"};const{leftValue:t,rightValue:s,setLeftValue:r,setRightValue:n,placeholder:o,label:a}=e,{titleCell:d,rightTitleCell:c,leftTitleCell:u}=(0,z.yK)((e=>{const r=st(e);return{titleCell:r,rightTitleCell:{...r,color:s?r.color:e.lightTextColor,width:"95%"},leftTitleCell:{...r,color:t?r.color:e.lightTextColor,width:"95%"}}}),[t,s]),[h,p]=(0,l.useState)(s),[m,g]=(0,l.useState)(t);(0,l.useEffect)((()=>{void 0===s&&p(void 0),void 0===t&&g(void 0)}),[s,t]);const v=(0,l.useCallback)((()=>{n(h)}),[n,h]),f=(0,l.useCallback)((()=>{r(m)}),[r,m]),y=(0,l.useCallback)((e=>{p(e.target.value)}),[]),S=(0,l.useCallback)((e=>{g(e.target.value)}),[]);return l.createElement(l.Fragment,null,i()("div",{style:d},void 0,a),i()(ut.Z,{capture:!0,allowMenuList:!1},void 0,i()(ht.Z,{style:u,onBlur:f,value:m,onChange:S,placeholder:o}),i()(ht.Z,{style:c,onBlur:v,value:h,onChange:y,placeholder:o})))}let mt=function(e){return e.Button="Button",e.Section="Section",e}({});class gt extends a.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:fe.Z},this.renderAddFilterOrigin=e=>{const t=this.styles;return l.createElement(Te.Z,_()({},e,{style:t.addFilterButtonMobile,icon:pe.Z.filterCircled,isBlue:!0}),i()(ve.FormattedMessage,{defaultMessage:"Add filter",id:"search.addFilter.button.label"}))},this.renderAddFilterMenu=()=>i()(de.Z,{menuType:K.og.ActionSheet},void 0,this.renderSuggestedFilters(),i()(Ge.Z,{title:this.renderMoreFiltersTitle()},void 0,this.renderCreatedByFilter(Ae.Z.Mode.Button),this.renderCreatedTimeFilter(Ae.Z.Mode.Button),this.renderLastEditedTimeFilter(Ae.Z.Mode.Button),this.renderAncestorFilter(Ae.Z.Mode.Button),this.renderInTeamFilter(Ae.Z.Mode.Button))),this.searchExperimentsToToggle=this.createComputedStore((()=>Object.entries(h.g6).map((e=>{let[t,s]=e;return{experimentId:t,experimentVersion:1,group:w.default.getGroup(t),groups:["control",...s]}})))),this.closeAddFilterMenu=()=>{const{buttonPopupStore:e}=this.stores;e.setState({...e.state,open:!1})},this.callTitleFilterUpdateFns=e=>{L.ZP.updateFilters({navigableBlockContentOnly:e})},this.closeSidebar=()=>L.ZP.setState({...L.ZP.state,isDebugSidebarOpen:!1}),this.styles={sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 250px",minHeight:400},sidebarHidden:{display:"none"},addFilterButtonMobile:{fontSize:this.props.isMobile?ge.Z.fontSize.UISmall.mobile:ge.Z.fontSize.UISmall.desktop,fontWeight:ge.Z.fontWeight.medium,marginRight:-8}}}renderComponent(){return this.props.isMobile?this.props.mode===mt.Button?this.renderAddButtonMobile():this.props.mode===mt.Section?this.renderActiveFiltersMobile():void(0,m.t1)(this.props.mode):this.renderSidebar()}renderActiveFiltersMobile(){const{state:e}=L.ZP,t=I.De(e.query.filters);return i()(Pe.Z,{disableMobilePadding:!0,disableMobileBorders:!0},void 0,this.renderTitlesOnlyFilter(Ae.z.Section),this.renderDeletedOnlyFilter(Ae.z.Section),this.renderActiveFilters(t,Ae.Z.Mode.Section))}renderAddButtonMobile(){const{buttonPopupStore:e}=this.stores;return i()(Ce.ZP,{popupType:Ce.Z4.SlideUp,buttonPopupStore:e,renderOrigin:this.renderAddFilterOrigin,render:this.renderAddFilterMenu})}renderActiveFilters(e,t){return i()(l.Fragment,{},void 0,e.createdBy&&this.renderCreatedByFilter(t),e.createdTime&&this.renderCreatedTimeFilter(t),e.lastEditedTime&&this.renderLastEditedTimeFilter(t),e.ancestors&&this.renderAncestorFilter(t),e.inTeams&&this.renderInTeamFilter(t))}renderSuggestedFilters(){const{filters:e}=L.ZP.state.query,t=dt.isActive(this.environment,e),s=ct.isActive(e),r=at.isActive(e);if(!(t&&s&&r))return i()(Ge.Z,{title:i()(ve.FormattedMessage,{id:"search.filterMenu.quickFiltersSection.title",defaultMessage:"Quick filters"}),marginAfter:!0},void 0,!t&&i()(dt,{mode:ot.MenuItem,focused:!1,onMenuDismiss:this.closeAddFilterMenu}),!s&&i()(ct,{mode:ot.MenuItem,focused:!1,onMenuDismiss:this.closeAddFilterMenu}),!r&&i()(at,{mode:ot.MenuItem,focused:!1,onMenuDismiss:this.closeAddFilterMenu,isLastInSection:!0}))}renderSidebar(){const e=this.styles,t=this.getThemeColors(),s={...e.sidebar,...t.sidebar,...!L.ZP.isDebugSidebarOpen()&&e.sidebarHidden};return i()("aside",{style:s},void 0,i()(Se.Z,{onClick:this.closeSidebar,style:{display:"flex",alignItems:"center",justifyContent:"center",background:void 0,borderRadius:6,width:16,height:16,position:"absolute",top:10,right:10}},void 0,pe.Z.closeSmall({width:14,fill:this.theme.mediumTextColor})),this.renderDevToolsSection())}renderForcedClusterPatternInput(){return null}renderShowDebugInfoToggle(){return i()(Qe,{mode:Ae.z.Button,focused:!1,title:"Show debug info",icon:pe.Z.bot,value:B.ZP.state.showDebugInfo,onChange:e=>{B.ZP.setState({...B.ZP.state,showDebugInfo:Boolean(e)})}})}renderShowDebugSearchToggle(){return i()(Qe,{mode:Ae.z.Button,focused:!1,title:"Profile query",icon:pe.Z.bot,value:"everything"===B.ZP.state.debug,onChange:e=>{B.ZP.setState({...B.ZP.state,debug:e?"everything":void 0})}})}renderDevToolsSection(){if((0,me.x)(C.default))return i()(Ge.Z,{title:"Dev Tools"},void 0,i()(ye.Z,{isVisible:!0,animationStyle:{height:"100%"},render:()=>i()("div",{style:{overflow:"scroll"}},void 0,this.renderShowDebugInfoToggle(),this.renderShowDebugSearchToggle(),this.renderForcedClusterPatternInput(),i()(Ge.Z,{style:{marginTop:16},title:"Quick Switch"},void 0,i()(ft,{title:"No local at all",searchExperimentOverrides:{"search-no-local-blending":"on","search-debug-only-no-recent-boosting":"on"}}),i()(ft,{title:"No local results",searchExperimentOverrides:{"search-no-local-blending":"on"}}),i()(ft,{title:"No local boosting",searchExperimentOverrides:{"search-debug-only-no-recent-boosting":"on"}}),i()(ft,{title:"Vector only",searchExperimentOverrides:{"search-vectors":"log-norm"}})),i()(Ge.Z,{style:{marginTop:16},title:"Dev Experiments",right:i()(Te.Z,{onClick:()=>{B.v_.reset(),B.BJ.reset()},style:{paddingLeft:0,paddingRight:0,height:"unset"}},void 0,pe.Z.sync({width:12}))},void 0,i()("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr 1fr",minWidth:"100%",maxWidth:"100%",paddingLeft:14}},void 0,i()("div",{}),i()("div",{}),i()(vt,{columnStore:B.BJ}),this.searchExperimentsToToggle.state.map((e=>i()(rt,{experiment:e},e.experimentId))),i()(pt,{leftValue:B.v_.state.forcedClusterPattern,rightValue:B.BJ.state.forcedClusterPattern,setLeftValue:B.v_.updateForcedClusterPattern,setRightValue:B.BJ.updateForcedClusterPattern,placeholder:"cluster-pattern",label:"forced cluster pattern"}),i()(pt,{leftValue:B.v_.state.forcedBlockIds,rightValue:B.BJ.state.forcedBlockIds,setLeftValue:B.v_.updateForcedBlockIds,setRightValue:B.BJ.updateForcedBlockIds,placeholder:"block ids",label:"forced block ids"}))))}))}renderTitlesOnlyFilter(e){const{filters:t}=L.ZP.state.query;return i()(Qe,{mode:e,focused:!1,title:i()(ve.FormattedMessage,{id:"search.filterMenu.onlyMatchTitlesToggle.label",defaultMessage:"Title only"}),icon:pe.Z.typesTitle,value:t.navigableBlockContentOnly||!1,onChange:this.callTitleFilterUpdateFns})}renderDeletedOnlyFilter(e){const{filters:t}=L.ZP.state.query;return i()(Qe,{mode:e,focused:!1,title:i()(ve.FormattedMessage,{id:"search.filterMenu.deletedOnlyToggle.label",defaultMessage:"Deleted only"}),icon:pe.Z.trash,value:t.isDeletedOnly||!1,onChange:this.createUpdateFunction("isDeletedOnly")})}renderMoreFiltersTitle(){return i()(ve.FormattedMessage,{id:"search.filterMenu.moreFiltersSection.title",defaultMessage:"More filters"})}renderAncestorFilter(e){const{filters:t}=L.ZP.state.query;return i()(Dr.Consumer,{},void 0,(s=>{let{parentStore:r}=s;return i()(qe,{mode:e,focused:!1,title:i()(ve.FormattedMessage,{id:"search.filterMenu.moreFilters.inPage",defaultMessage:"In"}),parentStore:r,blockIds:t.ancestors,onMenuDismiss:this.closeAddFilterMenu,onChange:this.createUpdateFunction("ancestors")})}))}renderCreatedByFilter(e){const{filters:t}=L.ZP.state.query;return i()(Dr.Consumer,{},void 0,(s=>{let{parentStore:r}=s;return i()(Ne.Z,{mode:e,focused:!1,title:i()(ve.FormattedMessage,{id:"search.filterMenu.moreFilters.createdBy",defaultMessage:"Created by"}),parentStore:r,userIds:t.createdBy,onMenuDismiss:this.closeAddFilterMenu,onChange:this.createUpdateFunction("createdBy")})}))}renderCreatedTimeFilter(e){const{filters:t}=L.ZP.state.query;return i()(xe.Z,{mode:e,focused:!1,title:i()(ve.FormattedMessage,{id:"search.filterMenu.moreFilters.created",defaultMessage:"Created"}),icon:pe.Z.calendar,value:t.createdTime,onMenuDismiss:this.closeAddFilterMenu,onChange:this.createUpdateFunction("createdTime")})}renderLastEditedTimeFilter(e){const{filters:t}=L.ZP.state.query;return i()(xe.Z,{mode:e,focused:!1,title:i()(ve.FormattedMessage,{id:"search.filterMenu.moreFilters.lastEdited",defaultMessage:"Last edited"}),icon:pe.Z.calendar,value:t.lastEditedTime,onMenuDismiss:this.closeAddFilterMenu,onChange:this.createUpdateFunction("lastEditedTime")})}renderInTeamFilter(e){if(!(0,R.bq)())return;const{filters:t}=L.ZP.state.query;return i()(Dr.Consumer,{},void 0,(s=>{let{parentStore:r}=s;return i()(He,{mode:e,focused:!1,title:i()(ve.FormattedMessage,{id:"search.filterMenu.moreFilters.inTeams",defaultMessage:"Teamspace"}),parentStore:r,teamIds:t.inTeams,onMenuDismiss:this.closeAddFilterMenu,onChange:this.createUpdateFunction("inTeams")})}))}createUpdateFunction(e){return t=>L.ZP.updateFilters({[e]:t})}getThemeColors(){return{sidebar:{backgroundColor:this.theme.sidebarSecondaryBackground,borderLeft:`1px solid ${this.theme.regularDividerColor}`}}}}function vt(e){let{columnStore:t}=e;window.__c={n:"ExperimentColumnShowHeader"};const s=(0,W.VK)((()=>t.state.visible),[t]);return i()(be.Z,{icon:i()(Me.Z,{checked:s,size:14,onClick:()=>t.update((e=>({...e,visible:!e.visible})))}),focused:!1,title:"Show",onClick:()=>t.update((e=>({...e,visible:!e.visible})))})}function ft(e){let{title:t,searchExperimentOverrides:s}=e;return i()(be.Z,{focused:!1,title:t,onClick:()=>{B.BJ.update((e=>({...e,visible:!1}))),B.v_.update((e=>({...e,searchExperimentOverrides:s})))}})}gt.displayName="SearchFilterMenu";const yt=gt;var St=s(28992),bt=s(25464),Ct=s(20223);const Mt=function(e){window.__c={n:"SearchSortMenu"};const t=l.useRef(),s=(0,V.Fy)(),{isMobile:r}=s,{activeOption:n,items:o}=l.useMemo((()=>function(e){const{currentSortBy:t,setSortBy:s,sortOptions:r,selectButton:i}=e;let n=r[0];const o=r.map((e=>{const r=t.field,o=`${r}.${"relevance"===r?"":t.direction}`,a=e.key===o;return a&&(n=e),{key:e.key,action:()=>{s(e.sort),i&&i.current&&i.current.closeMenu()},render:t=>l.createElement(be.Z,_()({},t,{title:e.formattedName,right:a&&pe.Z.thinCheck({fill:Je.ZP.regularIconColor,width:14,height:14})}))}}));return{activeOption:n,items:o}}({...e,selectButton:t})),[e,t]),a=(0,z.yK)((e=>({selectedTitle:{color:e.mediumTextColor},label:{marginRight:2,fontSize:r?ge.Z.fontSize.UISmall.mobile:ge.Z.fontSize.UISmall.desktop,transform:"translateY(0.5px)"},innerButton:{color:e.mediumTextColor,fontWeight:ge.Z.fontWeight.semibold,fontSize:r?ge.Z.fontSize.UISmall.mobile:ge.Z.fontSize.UISmall.desktop,height:20,padding:"2px 4px",marginRight:1,transform:"translateY(0.5px)"},menu:{minWidth:200}})),[r]),d=r?i()(ve.FormattedMessage,{id:"search.sort.sortMenuTitle",defaultMessage:"Sort By"}):void 0;return l.createElement(Ct.Z,{ref:e=>{e&&(t.current=e)},alignmentToOrigin:bt.v.Start,selectedTitle:i()("div",{style:a.selectedTitle},void 0,n.formattedName),label:void 0,renderMenuSections:()=>[{key:"searchSortOrder",render:e=>l.createElement(Ge.Z,_()({},e,{title:d,desktopStyle:a.menu,disableDesktopPadding:!1})),items:o}],labelStyle:a.label,innerButtonStyle:a.innerButton})};class Tt extends a.Z{constructor(){super(...arguments),this.styles={menuItemMobile:{paddingBottom:0},titleWrapper:{flex:void 0,marginTop:-3,marginBottom:-1},showSidebarButton:()=>{const{device:e}=this.environment;return{padding:"0 4px",fontSize:e.isMobile?ge.Z.fontSize.UISmall.mobile:ge.Z.fontSize.UISmall.desktop,fontWeight:ge.Z.fontWeight.medium,borderRadius:3,height:20,lineHeight:"20px"}}}}renderComponent(){const{device:e}=this.environment,t=this.styles,s={...e.isMobile&&t.menuItemMobile},r=this.shouldAllowFilters()&&this.renderAddFilterButton();return i()(St.Z,{title:this.renderSortMenu(),right:r,textWrapperStyle:t.titleWrapper,style:s})}renderSortMenu(){return i()(Mt,{currentSortBy:L.ZP.state.query.sort,setSortBy:e=>{L.ZP.setState({...L.ZP.state,query:{...L.ZP.state.query,sort:e}})},sortOptions:Pt})}renderAddFilterButton(){const{device:e}=this.environment;if(e.isMobile)return i()(yt,{isMobile:!0,mode:mt.Button})}shouldAllowFilters(){const{isPublicPageSearch:e}=this.props;return!e}}Tt.displayName="SearchHeader";const Pt=[{key:"relevance.",formattedName:i()(ve.FormattedMessage,{id:"search.sort.sortOrder.bestMatches",defaultMessage:"Best matches"}),sort:{field:"relevance"}},{key:"lastEdited.desc",formattedName:i()(ve.FormattedMessage,{id:"search.sort.sortOrder.lastEdited.newestFirst",defaultMessage:"Last edited: Newest first"}),sort:{field:"lastEdited",direction:"desc"}},{key:"lastEdited.asc",formattedName:i()(ve.FormattedMessage,{id:"search.sort.sortOrder.lastEdited.oldestFirst",defaultMessage:"Last edited: Oldest first"}),sort:{field:"lastEdited",direction:"asc"}},{key:"created.desc",formattedName:i()(ve.FormattedMessage,{id:"search.sort.sortOrder.created.newestFirst",defaultMessage:"Created: Newest first"}),sort:{field:"created",direction:"desc"}},{key:"created.asc",formattedName:i()(ve.FormattedMessage,{id:"search.sort.sortOrder.created.oldestFirst",defaultMessage:"Created: Oldest first"}),sort:{field:"created",direction:"asc"}}],xt=Tt;var It=s(38755);class kt extends c.default{getInitialState(){return{open:!1}}}const Rt=new kt;var Zt=s(68785),Ft=s(33411);class wt extends a.Z{constructor(){super(...arguments),this.typingTimer=void 0,this.renderLeft=()=>{const{showSpinner:e,selectedResult:t}=this.props,{device:s}=this.environment,r=this.styles,n={...this.getThemeColors().searchIcon,...r.searchIcon},o=null==t?void 0:t.getIcon(),l=Boolean(L.ZP.state.query.text.trim())&&!s.isMobile;return i()(Ft.Z,{show:e,showDelay:500,showHold:200,render:e=>(e=>i()("div",{style:r.headerIcon},void 0,e?i()(Zt.Z,{style:n}):l?i()(Fe.Z,{disabled:!0,icon:o,isEmptyPage:Boolean(o),size:20}):pe.Z.search(n)))(e)})},this.handleQueryChange=e=>{this.handleTyping();const t=String(e.target.value);this.props.onQueryChange(t)},this.handleClearButtonClick=()=>{L.ZP.resetQuery({resetFilters:!0}),L.ZP.update((e=>({...e,isSidePeekPanelOpen:!1,source:"quick_find"})))},this.handleFocus=()=>{const{onFocusChange:e}=this.props;e(!0)},this.handleBlur=()=>{const{onFocusChange:e}=this.props;e(!1)},this.styles={inputDesktop:{fontSize:18,height:wt.DESKTOP_INPUT_HEIGHT,paddingLeft:12,paddingRight:16,alignItems:"center",flexGrow:0,flexShrink:0,zIndex:1},inputMobile:{fontSize:16,border:"none",boxShadow:"none",borderRadius:7,lineHeight:"1.2",padding:"6px 8px"},searchIcon:{width:16,height:16},headerIcon:{height:24,width:24,display:"flex",alignItems:"center",justifyContent:"center"},input:{minWidth:0,...ge.Z.textOverflowStyle},suggestedText:{whiteSpace:"pre",color:this.theme.mediumTextColor},clearButton:{marginLeft:8}}}willUnmount(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=void 0)}renderComponent(){const{device:e}=this.environment,{isOpen:t,selectedResult:s}=this.props,r=this.styles,n=this.getThemeColors(),o=g.Jc(null==s?void 0:s.getTitleValue()),l=L.ZP.state.query.text,a=void 0!==s&&(null==o?void 0:o.slice(0,l.length).toLocaleLowerCase())===l.toLocaleLowerCase()&&l&&l.length<20&&!e.isMobile,d=!a&&void 0!==s&&l&&l.length<20&&!e.isMobile;let c="";a?c=`${null==o?void 0:o.substring(l.length)} — ${wt.messages.open.defaultMessage}`:d&&(c=o?` — ${wt.messages.open.defaultMessage} ${o}`:` — ${wt.messages.open.defaultMessage}`);const u=""!==c&&i()("div",{},void 0,i()("span",{},void 0,l),i()("span",{style:{background:this.theme.tint.regular}},void 0,c)),h=e.isMobile?ht.Z.Format.ExtraLarge:ht.Z.Format.Transparent,p=e.isMobile?{...r.inputMobile,...n.inputMobile}:{...r.inputDesktop,...n.inputDesktop};return i()(ht.Z,{format:h,placeholder:this.getPlaceholderText(),left:this.renderLeft(),value:l,suggestedText:u,suggestedTextStyle:r.suggestedText,focus:e.isMobile?void 0:t&&!Rt.state.open,focusInitial:!(0,ne.Y)("supportsNativeHome")&&e.isMobile,focusAfterAnimation:!0,showClearButton:!0,selectAll:!0,onChange:this.handleQueryChange,onClearButtonClick:this.handleClearButtonClick,onFocus:this.handleFocus,onBlur:this.handleBlur,style:p,inputStyle:r.input})}updateIfIsFirstKeyStroke(){void 0===A.default.state.firstKeyStrokeTimeMs&&A.default.update((e=>({...e,firstKeyStrokeTimeMs:Date.now()})))}handleTyping(){this.updateIfIsFirstKeyStroke();const{onTypingChange:e}=this.props;this.typingTimer&&window.clearTimeout(this.typingTimer),e(!0),this.typingTimer=window.setTimeout((()=>e(!1)),wt.TYPING_DEBOUNCE_MS)}getPlaceholderText(){const{currentSpaceStore:e,mainEditorCurrentBlockStore:t}=Z.default.state,s=e&&(0,It.rn)(this.environment,e);if(s)return this.props.intl.formatMessage({id:"searchInputMenuItem.placeholder.namedSpace",defaultMessage:"Search {spaceName}…"},{spaceName:s});if(t){const e=g.Jc(t.getTitleValue()).slice(0,wt.MAX_PLACEHOLDER_TITLE_LENGTH);return this.props.intl.formatMessage({id:"searchInputMenuItem.placeholder.namedPage",defaultMessage:"Search in {pageTitle}…"},{pageTitle:e})}return this.props.intl.formatMessage({id:"searchInputMenuItem.placeholder.unnamedPage",defaultMessage:"Search in page…"})}getThemeColors(){return{inputDesktop:{boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`},inputMobile:{background:this.theme.inputBackground},searchIcon:{fill:this.theme.mediumIconColor}}}}wt.displayName="SearchInputMenuItem",wt.messages=(0,ve.defineMessages)({open:{id:"search.inputMenu.suggestedText.open",defaultMessage:"Open"}}),wt.TYPING_DEBOUNCE_MS=300,wt.DESKTOP_INPUT_HEIGHT=48,wt.MAX_PLACEHOLDER_TITLE_LENGTH=100;const Bt=(0,ve.injectIntl)(wt);var Ot=s(28020),Dt=s(99417),At=s(69327),Et=s(43145),Lt=s(94184),qt=s.n(Lt),Nt=s(64369);function _t(e,t){window.__c={n:"SearchActionMenuItem"};const{inline:s,title:r,icon:i,focused:n,isBeforeFocused:o,className:a}=e,d=(0,z.yK)((e=>({hoveredStyle:{background:e.buttonHoveredBackground}})),[]),c=(0,z.yK)((e=>({style:{minHeight:36,paddingTop:8,paddingBottom:8,...!s&&!o&&!n&&{boxShadow:`0 1px 0 ${e.lightDividerColor}`}},textWrapper:{marginLeft:10,alignItems:void 0,flex:void 0,width:"100%",display:"block",textOverflow:"ellipsis",...s&&{alignItems:"baseline"}},icon:{display:"block",flexShrink:0,height:18,width:18,color:e.mediumTextColor},enterIcon:{height:14,width:14,fill:e.mediumIconColor},iconContainer:{marginTop:1}})),[n,s,o]),u={title:r,icon:Vt(i,c.icon,c.iconContainer),style:c.style,textWrapperStyle:c.textWrapper,right:Wt(n,c.enterIcon),className:qt()("notranslate",a),buttonStyle:{paddingLeft:2},hoveredStyle:d.hoveredStyle};return l.createElement(be.Z,_()({ref:t},e,u,{disableTransition:!0,ignoreLocalHoverState:!0}))}function Vt(e,t,s){return i()(Nt.Z,{style:s},void 0,e(t))}function Wt(e,t){const s={...t,opacity:e?1:0};return i()("div",{style:{display:"flex"}},void 0,pe.Z.enter(s))}const zt=l.forwardRef(_t);var Ht=s(75024),Ut=s(63296);class Kt extends a.Z{constructor(){super(...arguments),this.openSidebar=()=>L.ZP.setState({...L.ZP.state,isDebugSidebarOpen:!0}),this.styles={footer:()=>{const{device:e}=this.environment;return{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:e.isMobile?ge.Z.fontSize.UIRegular.mobile:ge.Z.fontSize.UIRegular.desktop}},footerWrapper:{flexShrink:0},footerText:{color:this.theme.lightTextColor,fontSize:Ht.yv(this.environment,"UISmall"),...ge.Z.textOverflowStyle},footerDebugButton:{...$t(this.theme),marginRight:6}}}renderComponent(){const e=this.styles;return i()("footer",{style:e.footerWrapper},void 0,i()(Pe.Z,{topBorder:!0,style:e.footer(),disableDesktopPadding:!0},void 0,l.createElement(St.Z,_()({},this.props,{style:e.footerText})),(0,me.x)(C.default)&&!L.ZP.state.isDebugSidebarOpen&&i()(Ut.Z,{onClick:this.openSidebar,style:e.footerDebugButton},void 0,"Open Debug Sidebar")))}}Kt.displayName="SearchFooterContainer";const $t=e=>({fontSize:12,color:e.lightTextColor,marginLeft:6,paddingRight:4,paddingLeft:4,height:24}),Gt=Kt;var jt=s(62134);function Qt(){window.__c={n:"SearchFooterNavigationHints"};const e=(0,V.O7)(),t=(0,ve.useIntl)(),s=(0,z.yK)((t=>({upDownIcon:{marginRight:4,marginBottom:-2,display:"inline",width:12,height:12,fill:t.mediumIconColor},enterIcon:{marginRight:4,marginBottom:-2,display:"inline",width:11,height:11,fill:t.mediumIconColor},commandGlyph:{fontSize:.75*Ht.yv(e,"UIRegular"),paddingRight:1,color:t.lightTextColor},footerText:{fontSize:Ht.yv(e,"UISmall"),color:t.lightTextColor,...ge.Z.textOverflowStyle},inlineHint:{display:"inline",marginRight:16}})),[e]),r={...Ht.mK,...s.footerText},{command:n}=jt.fg(e);return i()("ul",{style:r},void 0,i()("li",{style:s.inlineHint},void 0,pe.Z.arrowsUpDown(s.upDownIcon),t.formatMessage({id:"searchFooter.helpText.selectHint",defaultMessage:"Select"})),i()("li",{style:s.inlineHint},void 0,pe.Z.enter(s.enterIcon),t.formatMessage({id:"searchFooter.helpText.openHint",defaultMessage:"Open"})),i()("li",{style:s.inlineHint},void 0,i()("span",{style:s.commandGlyph},void 0,n),pe.Z.enter(s.enterIcon),e.device.isElectron?t.formatMessage({id:"searchFooter.helpText.openNewWindow",defaultMessage:"Open in a new window"}):t.formatMessage({id:"searchFooter.helpText.openNewTab",defaultMessage:"Open in a new tab"})))}var Jt=s(45168),Xt=s(43132),Yt=s(19387),es=s(84210),ts=s(98742),ss=s(8323),rs=s(16402),is=s(77907),ns=s(24039),os=s(90403),ls=s(64133),as=(s(73063),s(53953)),ds=s(86176),cs=s(58032),us=s(73299),hs=s(40793),ps=s(99208),ms=s(96525);function gs(e){window.__c={n:"SearchBreadcrumbFilterPopup"};const{parent:t,store:s,onClick:r}=e,n=(0,V.O7)(),{device:o}=n;let a;a=o.isMobile?{menuType:K.og.Modal,title:i()(ve.FormattedMessage,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:i()(ce.DoneMenuText,{}),onClickRight:t.close}:{menuType:K.og.Popup,width:240};const d=(0,l.useCallback)((()=>{null==r||r({store:s,action:"include"})}),[r,s]),c=(0,l.useCallback)((()=>{null==r||r({store:s,action:"exclude"})}),[r,s]),u=s instanceof Y.zX?"teamspace":"parent page",h={key:"results",render:e=>l.createElement(Pe.Z,e),items:[{key:"include-filter",render:e=>l.createElement(be.Z,_()({},e,{title:`Add ${u} to filter`})),action:d},{key:"exclude-filter",render:e=>l.createElement(be.Z,_()({},e,{title:`Exclude ${u} from results`})),action:c}]};return l.createElement(de.Z,a,i()(Xe.Z,{type:Xe.i.Vertical,onAccept:t.close,initialFocus:void 0,sections:[h]}))}class vs extends a.Z{constructor(){super(...arguments),this.getFilterPopupRenderer=e=>t=>i()(gs,{parent:t,store:e,onClick:this.props.onClick}),this.getBreadcrumbCommonProps=e=>({maxWidth:this.props.ancestorMaxWidth,popupRenderer:this.getFilterPopupRenderer(e),iconSize:this.props.iconSize,titleStyle:this.getTitleStyle(),iconStyle:vs.iconStyle,highlighter:this.props.highlighter})}renderComponent(){const{store:e}=this.props,t=e.getTitleStore();if(t&&t.isReady())return i()("div",{style:this.getStyle(),className:"notranslate"},void 0,this.renderAncestors())}renderAncestors(){const{store:e,maxAncestorCount:t}=this.props,s=P.uJ(e),r=e.isNavigableBlock()?s.slice(1):[...s];if(r.reverse(),s.reverse(),r.length>t){const[e,i,n]=[r[0],r.slice(1,r.length-t+1),r.slice(r.length-t+1)];if((0,R.bq)()){const t=n.length;return[this.renderButtonForStore({store:e,showDivider:!this.props.isMobile}),this.renderBlocksAsPopup(this.props.isMobile?s:i),...n.map(((e,s)=>{const r=!this.props.hideCurrentPage||s!==t-1;return e instanceof Y.zX?l.createElement(ps.Z,_()({store:e,showDivider:r},this.getBreadcrumbCommonProps(e))):l.createElement(hs.Z,_()({store:e,showDivider:r},this.getBreadcrumbCommonProps(e)))}))]}{const e=r.filter((e=>e instanceof Y.G)),s=r.filter((e=>e instanceof Y.G)),i=e.length;return[l.createElement(hs.Z,_()({key:e[0].id,store:e[0],showDivider:!this.props.isMobile},this.getBreadcrumbCommonProps(e[0]))),this.renderBlocksAsPopup(this.props.isMobile?s:e.slice(1,e.length-t+1)),...e.slice(e.length-t+1).map(((e,t)=>l.createElement(hs.Z,_()({key:e.id,store:e,showDivider:!this.props.hideCurrentPage||t!==i-1},this.getBreadcrumbCommonProps(e)))))]}}{const e=r.length;return r.map(((t,s)=>this.renderButtonForStore({store:t,showDivider:!this.props.hideCurrentPage||s!==e-1})))}}renderButtonForStore(e){const{store:t,showDivider:s}=e;return t instanceof Y.zX?l.createElement(ps.Z,_()({store:t,showDivider:s},this.getBreadcrumbCommonProps(t))):l.createElement(hs.Z,_()({store:t,showDivider:s},this.getBreadcrumbCommonProps(t)))}getMenuListSections(e){const t=this.props.isMobile?Ce.Z4.SlideUp:Ce.Z4.Popup;return[{key:"results",render:e=>l.createElement(Pe.Z,e),items:e.map(((e,s)=>({key:e.id,render:r=>l.createElement(ms.Z,_()({},r,{stopClickPropagation:!0,popupType:t,renderOrigin:t=>l.createElement(we.Z,_()({},t,{isSubpage:0!==s,store:e,hidePath:!0,focused:!1})),render:t=>i()(gs,{parent:t,store:e,onClick:this.props.onClick})})),action:()=>{}})))}]}renderBlocksAsPopup(e){return i()(Ce.ZP,{popupType:this.props.isMobile?Ce.Z4.SlideUp:Ce.Z4.Popup,renderOrigin:e=>{var t;return this.props.isMobile?l.createElement(Se.Z,_()({style:{...vs.dividerWrapStyle},mobileFeedback:!0},e),i()(us.f,{}),i()("div",{style:fs},void 0,"..."),i()(us.f,{})):i()("div",{style:vs.dividerWrapStyle},void 0,l.createElement(Te.Z,_()({isSmall:!0},e,{style:{paddingLeft:2,paddingRight:2,fontSize:null===(t=this.props.style)||void 0===t?void 0:t.fontSize}}),"..."),i()(us.f,{}))},render:t=>{let s;return s=this.props.isMobile?{menuType:K.og.Modal,title:i()(ve.FormattedMessage,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:i()(ce.DoneMenuText,{}),onClickRight:t.close}:{menuType:K.og.Popup,width:240},l.createElement(de.Z,s,i()(Xe.Z,{type:Xe.i.Vertical,initialFocus:void 0,sections:this.getMenuListSections(e)}))}},"pages-popup")}getStyle(){return{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:this.props.isMobile?ge.Z.fontSize.UIRegular.mobile:ge.Z.fontSize.UIRegular.desktop,color:this.theme.text.tertiary,filter:"grayscale(70%)",...this.props.style}}getTitleStyle(){return{lineHeight:1.2,fontSize:this.props.isMobile?ge.Z.fontSize.UISmall.mobile:ge.Z.fontSize.UISmall.desktop,color:this.theme.text.tertiary}}}vs.displayName="SearchPathBreadcrumb",vs.iconStyle={marginRight:3},vs.dividerWrapStyle={display:"flex",alignItems:"center",flexShrink:0};const fs={marginLeft:3,marginRight:3};(0,ve.defineMessages)({openInSidePeekButtonLabel:{id:"search.result.openInSidePeek.button.label",defaultMessage:"Open search result in side peek"},copySearchResultLinkButtonLabel:{id:"search.result.copyLink.button.label",defaultMessage:"Copy link to search result"}});class ys extends a.Z{constructor(){super(...arguments),this.storeTypes={explanationModalOpen:c.default.createClass(!1)},this.renderTooltip=()=>i()(ns.Z,{store:this.props.store}),this.handleSearchPathBreadcrumbClick=e=>{let{store:t,action:s}=e;"block"===t.table?"include"===s?L.ZP.updateFilters({ancestors:o().uniq(L.ZP.state.query.filters.ancestors.concat(t.id))}):L.ZP.updateFilters({dev_excludedPages:o().uniq((L.ZP.state.query.filters.dev_excludedPages||[]).concat(t.id))}):"team"===t.table&&("include"===s?L.ZP.updateFilters({inTeams:o().uniq((L.ZP.state.query.filters.inTeams||[]).concat(t.id))}):L.ZP.updateFilters({dev_excludedTeams:o().uniq((L.ZP.state.query.filters.dev_excludedTeams||[]).concat(t.id))}))},this.renderVerifiedBadge=()=>i()(os.Z,{style:this.styles.badge,content:i()("div",{style:this.styles.badgeContent},void 0,pe.Z.typesVerification(this.styles.verifiedBadgeIcon),i()("div",{style:this.styles.badgeCaption},void 0,i()(ve.FormattedMessage,{id:"search.result.verified.badge.text",defaultMessage:"Verified"})))}),this.renderPopularThisWeekBadge=()=>i()(os.Z,{style:this.styles.badge,content:i()("div",{style:this.styles.badgeCaption},void 0,i()(ve.FormattedMessage,{id:"search.result.popularThisWeek.badge.text",defaultMessage:"Popular this week"}))}),this.renderMostViewedBadge=()=>i()(os.Z,{style:this.styles.badge,content:i()("div",{style:this.styles.badgeCaption},void 0,i()(ve.FormattedMessage,{id:"search.result.mostViewed.badge.text",defaultMessage:"Most viewed"}))}),this.renderIsTemplateBadge=()=>i()(os.Z,{content:i()("div",{style:this.styles.grayedOutBadgeCaption},void 0,i()(ve.FormattedMessage,{id:"search.result.template.badge.text",defaultMessage:"Template"}))}),this.getPageVisitSource=()=>"recent_pages"===this.props.type?u.tY.SearchRecents:u.tY.SearchQuery,this.handleOpenInSidePeek=()=>{const{store:e,queryId:t,result:s}=this.props,r=this.getPageVisitSource();s?y.navigateToSearchResult({searchResult:s,openInSidePeek:!0,environment:this.environment,pageVisitSource:r,queryId:t,openInNew:void 0}):y.navigateToPage({store:e,queryId:t,environment:this.environment,pageVisitSource:r,openInSidePeek:!0,peekMode:"s"})},this.handleCopy=()=>{const{store:e,queryId:t}=this.props,s=(0,es.ZP)({store:e,pageVisitSource:this.getPageVisitSource(),queryId:t});Xt.RD({environment:this.environment,stringValue:s,copiedMessage:Xt.tq.copiedLinkToClipboard})},this.styles={title:{fontWeight:ge.Z.fontWeight.medium,lineHeight:"20px"},titleContent:{display:"flex",...this.props.inline?{}:{width:0,flexGrow:1}},menuItem:{minHeight:36,paddingTop:this.environment.device.isMobile?12:8,paddingBottom:this.environment.device.isMobile?12:8},textWrapper:{marginLeft:4,alignItems:"center",width:"100%"},inlineTextWrapper:{alignItems:"center"},highlight:{fontWeight:ge.Z.fontWeight.medium},vectorHighlight:{fontWeight:ge.Z.fontWeight.medium,whiteSpace:"pre-wrap"},rightContentWrapper:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},rightIcon:{height:16,width:16},rightIconButtonIcon:{height:12,width:12},rightIconButtonWrapper:{height:18,width:18,marginRight:6},uniqueIDBadgeWrapper:{display:"flex",gap:8,marginRight:8,alignItems:"center"},caption:{marginTop:1},debugArea:{fontFamily:"monospace"},timestamp:{fontSize:ge.Z.fontSize.UISmall.desktop,fontWeight:ge.Z.fontWeight.regular},tooltip:{maxWidth:300},tooltipTitle:{fontWeight:ge.Z.fontWeight.medium,fontSize:ge.Z.fontSize.UISmall.desktop},tooltipText:{fontWeight:ge.Z.fontWeight.medium,fontSize:ge.Z.fontSize.UISmall.desktop,marginLeft:0,paddingRight:20},tooltipValue:{fontSize:ge.Z.fontSize.UISmall.desktop,fontWeight:ge.Z.fontWeight.regular},tooltipMenuItem:{minHeight:20},badge:{background:"light"===this.theme.mode?this.theme.accentColors.blue[30]:this.theme.accentColors.blue[200]},badgeContent:{display:"flex",alignItems:"center",width:"100%"},badgeCaption:{marginLeft:2,color:this.theme.blueColor},grayedOutBadgeCaption:{marginLeft:1},vectorBadge:{background:this.theme.invoiceGreen,color:this.theme.contentBackground},verifiedBadgeIcon:{width:10,height:10,fill:this.theme.blueColor},right:{display:"flex"},collectionTextMatchingProperty:{lineHeight:2}},this.debugHitCustomRenderer=e=>{let{data:t,keyPath:s}=e;if(2===s.length&&"_explanation"===s[0])return{element:l.createElement(l.Fragment,null,i()("button",{onClick:e=>{this.stores.explanationModalOpen.setState(!0),e.stopPropagation()}},void 0,"show simplified explanation")),expanded:!1};const r=t._ltrlog;if(r)return function(e){const t=Object.keys(e[0])[0],s=e[0][t].map(((e,t)=>{const s=t%2==0?Ms:Cs;return i()("tr",{},e.name,i()("td",{style:s},void 0,`${t}`),i()("td",{style:s},void 0,`${e.name}`),i()("td",{style:s},void 0,`${e.value}`))}));return{element:l.createElement(l.Fragment,null,i()("div",{},void 0,i()("b",{},void 0,`Featureset: ${t}`)),i()("div",{style:Ts},void 0,i()("table",{style:Ps},void 0,s))),expanded:!1}}(r);if(!["_score","matched_queries"].every((e=>t[e])))return null;const{_score:n,matched_queries:o}=t;return{element:l.createElement(l.Fragment,null,`score ${n}, ${(o??[]).length} matched query clauses`),expanded:!1}}}renderComponent(){const{focused:e,isLastInSection:t,isBeforeFocused:s,inline:r,className:n}=this.props,o=this.styles,a=this.getThemeColors(),d={...o.menuItem,...!r&&!t&&!s&&!e&&a.menuItemBorder},c={...o.caption,...a.caption},u={...o.timestamp,...a.timestamp},h={...o.textWrapper,...this.props.inline&&o.inlineTextWrapper},p={title:this.renderTitle(),icon:this.renderIcon(),caption:this.renderCaption(),body:this.renderPreview(),right:this.renderRight(),rightStyle:e?void 0:u,dontShrinkRight:!0,captionStyle:c,style:d,spacerStyle:this.hasPath()?void 0:xs,textWrapperStyle:h,className:qt()("notranslate",n),buttonStyle:{paddingLeft:2},hoveredStyle:{background:this.theme.tint.regular}};return(0,ss.Mk)()?i()(cs.Z,{delayThreshold:50,placement:cs.Z.Placement.Right,originGap:18,renderTooltip:this.renderTooltip,style:o.tooltip,render:e=>l.createElement(be.Z,_()({},this.props,p,{disableTransition:!0},(0,ts.Z)(this.props,e)))}):l.createElement(be.Z,_()({},this.props,p,{disableTransition:!0,ignoreLocalHoverState:!0}))}renderTitle(){var e;const{store:t,result:s,placeholder:r,index:n}=this.props,o=this.styles,l=this.getThemeColors(),a=void 0===s,d={...o.title,...!a&&!this.props.focused&&l.nonHighlightedTextColor},c=[];if(s&&s.highlight)if(c.push(...(0,T.fe)(s.highlight.pathText)),this.usesFullPageIndexingHighlight())c.push(...(0,T.fe)(s.highlight.title));else{Y.G.createChildStore(this.props.store,{table:G.iU,id:s.id,spaceId:s.spaceId}).isNavigableBlock()&&c.push(...(0,T.fe)(s.highlight.text))}const u=this.props.focused?void 0:this.getWordHighlighter({words:c}),h=null===(e=(0,P.VP)(t))||void 0===e?void 0:e.isArchived(),p=(0,Jt.e)(s);const m=O.default.getState().searchMenuStoreExperimentState.enablesBadges&&(0,ss.Mk)()?function(){function e(e){var t;return void 0!==(null==s||null===(t=s.badges)||void 0===t?void 0:t.find((t=>t.type===e)))}return e("is_template")?"is_template":e("verified")?"verified":e("popular_this_week")?"popular_this_week":e("most_viewed")?"most_viewed":void 0}():void 0,g={is_template:this.renderIsTemplateBadge,verified:this.renderVerifiedBadge,popular_this_week:this.renderPopularThisWeekBadge,most_viewed:this.renderMostViewedBadge};return i()("div",{style:{display:"flex",justifyContent:"space-between",...d}},void 0,i()("div",{style:o.titleContent},void 0,B.ZP.state.showDebugInfo&&void 0!==n&&`${n+1}. `,p&&this.renderUniqueIdHighlight(s),i()(Be.Z,{style:d,store:t,placeholder:r,highlighter:u}),!1,h&&i()(os.Z,{content:i()("div",{style:this.styles.grayedOutBadgeCaption},void 0,i()(ve.FormattedMessage,{id:"search.result.archived.badge.text",defaultMessage:"Archived"}))}),m&&g[m]()),B.ZP.state.showDebugInfo&&this.renderDebugIcons())}renderUniqueIdHighlight(e){var t;const{focused:s}=this.props,r=null==e||null===(t=e.highlight)||void 0===t?void 0:t.uniqueId;if(!r)return;const n="dark"===this.environment.ThemeStore.state.mode,o=this.styles,l=this.getWordHighlighter({words:[r]}),a=s?n?Je.FN.dark.translucentGray[300]:Je.se.light.darkgray.alpha(.09):n?Je.FN.dark.translucentGray[200]:Je.se.light.darkgray.alpha(.06);return i()("div",{style:o.uniqueIDBadgeWrapper},void 0,i()("div",{},void 0,i()(ls.Z,{text:r,highlighter:l})),i()("div",{style:{borderRight:`1.5px solid ${a}`,height:14,borderRadius:1}}))}renderRight(){return i()("div",{style:this.styles.right},void 0,this.rightContent())}rightContent(){const{lastViewed:e,focused:t}=this.props;if(this.environment.device.isMobile)return;if(e&&!t)return(0,rs.IS)(e,{useCompactFormat:!0});const s=this.styles,r=this.getThemeColors(),i={...s.rightIcon,...r.enterIcon,opacity:t?1:0};s.rightIconButtonIcon;return pe.Z.enter(i)}renderDebugIcons(){var e;const{result:t,index:s,originalPosition:r}=this.props,n=null===(e=(null==t?void 0:t.sources)??[])||void 0===e?void 0:e.flatMap((e=>e===j.vp.Local?["💻"]:e===j.vp.ElasticSearch?["🌐"]:e===j.vp.Postgres?["🐘"]:e===j.vp.VectorDBBlock||e===j.vp.VectorDBCollection?["🔭"]:e===j.vp.ElasticsearchRandom?["🎲"]:e===j.vp.ElasticsearchUniqueID?["🆔"]:e===j.vp.ElasticsearchForcedRecentRecall?["⏰"]:void(0,m.t1)(e))).reverse(),o=[...void 0===s||void 0===r?[" "]:s>r?["⬇️"]:s<r?["⬆️"]:[],...n].join("").trim();return o&&i()("span",{},void 0,o)}renderIcon(){const{store:e}=this.props;return i()(Fe.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:20,largeIcon:!1})}renderCaption(){const{store:e,inline:t,result:s,debugLocal:r,debugHits:n}=this.props,{device:o}=this.environment,a=this.getWordHighlighter({words:(0,T.fe)(s&&s.highlight&&s.highlight.pathText),removeDuplicate:!0}),d=t||o.isMobile?0:2,c=(n??[]).find((e=>"elasticsearch"===e.type&&void 0!==e._explanation)),u="elasticsearch"===(null==c?void 0:c.type)?null==c?void 0:c._explanation:void 0;return l.createElement(l.Fragment,null,i()(ds.Z,{store:e,extraLength:d,showFullPathInTooltip:!0,highlighter:a,enableHoverAncestor:!0,tooltipStyle:this.getThemeColors().captionTooltip,tooltipDividerStyle:this.getThemeColors().captionTooltipDivider}),l.createElement("div",{ref:this.props.debugAreaRef},r&&i()("div",{style:this.styles.debugArea},void 0,i()(is.LazyAdminReactJson,{data:{debugLocal:r},defaultCollapsed:!0,customCollapsedRenderers:[bs],showCopyButton:!1,showModalButton:!1})),n&&i()("div",{style:this.styles.debugArea},void 0,i()(is.LazyAdminReactJson,{data:{debugHits:n},defaultCollapsed:!0,customCollapsedRenderers:[this.debugHitCustomRenderer],showCopyButton:"small",showModalButton:!0})),n&&(null==s?void 0:s.rankingSignals)&&i()("div",{style:this.styles.debugArea},void 0,i()(is.LazyAdminReactJson,{data:{rankingSignals:s.rankingSignals},defaultCollapsed:!0,showCopyButton:"small",showModalButton:!1})),u&&i()(as.Z,{open:this.stores.explanationModalOpen.state,innerStyle:{maxHeight:"90vh",maxWidth:"90vw",height:"90vh",width:"90vw",overflow:"scroll",padding:10},onDismiss:()=>{this.stores.explanationModalOpen.setState(!1)},render:()=>i()("pre",{},void 0,function(e){var t;let{explanation:s,simple:r=!1,filterZeros:i=!1}=e;return function e(t,s){if(!t)return[];const{value:n,description:o,details:l}=t;if(0===n&&i)return[];const a=(0===n?"0":n.toFixed(4)).padStart(8);function d(e){return`${"  ".repeat(s+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0))}${e}`}const c=`[${a}] ${o}`;if(o.startsWith("match on required clause"))return[d(`[${a}] match on required clause ${null==l?void 0:l[1].description}`)];if(["max of:","sum of:","min of:"].includes(o)&&1===(null==l?void 0:l.length))return e(l[0],s);if(o.startsWith("tf")||o.startsWith("idf")){var u;const e=o.split(",")[0],t=null===(u=o.split(" computed as ")[1])||void 0===u?void 0:u.replace(" from:","");return[d(`[${a}] ${e}: [${(l??[]).map((e=>`${e.description.split(",")[0]}=${e.value}`)).join(" ")}] --\x3e ${t}`)]}if(o.startsWith("ConstantScore(_id:"))return[d(`[${a}] ids query`)];const h=r&&0!==s&&(o.startsWith("weight")||o.startsWith("Function"));return[d(c.replace(", result of:","").replace(" from:","").replace(" [PerFieldSimilarity]","").replace(/:$/,"").trim()),...(h?[]:l??[]).flatMap((t=>e(t,s+1)))]}(null==s||null===(t=s.details)||void 0===t?void 0:t[0],0)}({explanation:u}).join("\n"))})))}renderPreview(){var e,t;const{result:s}=this.props;if(!s)return;if(!s.highlight)return;if(Y.G.createChildStore(this.props.store,{table:G.iU,id:s.id,spaceId:s.spaceId}).isNavigableBlock()&&!this.usesFullPageIndexingHighlight())return;let r,n;if(s.highlight.text)r=s.highlight.text;else if(s.highlight.collectionText){var o;r=s.highlight.collectionText,n=null==s||null===(o=s.matchedCollectionProperties)||void 0===o?void 0:o.collectionText}if(!r)return;const a=(0,T.ZP)(r);if(this.usesFullPageIndexingHighlight()){const e=e=>e.filter(T.il).map((e=>e[0].toLowerCase())),t=t=>void 0===t?[]:e((0,T.ZP)(t)),r=[...new Set([...t(s.highlight.title),...t(s.highlight.pathText)])],i=e=>r.some((t=>t.includes(e)));if(e(a).every((e=>i(e))))return}const d=this.styles,c=null!==(e=s.sources)&&void 0!==e&&e.includes(j.vp.VectorDBBlock)||null!==(t=s.sources)&&void 0!==t&&t.includes(j.vp.VectorDBCollection)?d.vectorHighlight:d.highlight,u=this.getThemeColors();return l.createElement(l.Fragment,null,void 0!==n&&i()(Yt.Z,{propertySchema:n,showIcon:!0,style:this.styles.collectionTextMatchingProperty}),i()(ls.Z,{text:r,highlighter:{tokenize:e=>(0,T.Vu)(a),style:{...c,...u.highlightedText}}}))}usesFullPageIndexingHighlight(){const{result:e}=this.props;return e&&!e.sources.includes(j.vp.Local)}getWordHighlighter(e){const{words:t,removeDuplicate:s}=e;if(0===t.length)return;const r={...this.styles.highlight,...this.getThemeColors().highlightedText},i=s?new Set:void 0;return{tokenize:e=>(0,T.XT)({text:e,patterns:t,uniqueTokenHighlighterContext:i}),style:r}}hasPath(){const{hidePath:e,store:t}=this.props;return!e&&(0,ds.L)(t)}getThemeColors(){return{nonHighlightedTextColor:{color:this.theme.text.secondary},menuItemBorder:{boxShadow:`0 1px 0 ${this.theme.lightDividerColor}`},highlightedText:{color:this.theme.text.primary},enterIcon:{fill:this.theme.icon.secondary},bookmarkedIcon:{fill:this.theme.topbarFavorite},caption:{color:this.theme.text.secondary},captionTooltip:{color:this.theme.text.contrast},captionTooltipDivider:{color:this.theme.text.contrast},timestamp:{color:this.theme.text.tertiary},tooltipTitle:{color:this.theme.text.secondary},tooltipText:{color:this.theme.text.primary},tooltipValue:{color:this.theme.text.tertiary}}}}ys.displayName="SearchResultMenuItem",ys.contextTypes={...K.mw,...a.w};const Ss=ys,bs=e=>{let{data:t}=e;const s=t;if(!s)return null;const{localSource:r,score:i,frecencyScore:n,personalizationBoost:o}=s;let a=r;return a||(a=new Set("unknown")),{element:l.createElement(l.Fragment,null,`from ${[...a].join(",")} [s ${i} | f ${n} | b ${o}]`),expanded:!1}},Cs={paddingLeft:5,paddingRight:20,paddingTop:2,paddingBottom:2,border:"1px solid black",color:Je.FN.dark.green[900]},Ms={...Cs,color:Je.FN.dark.gray[30]},Ts={maxHeight:200,overflowY:"scroll"},Ps={border:"1px solid black"};const xs={visibility:"hidden"};class Is extends a.Z{constructor(){super(...arguments),this.storeTypes={isLoadingRecents:c.default.createClass(!1),endOfRecentsReached:c.default.createClass(!1)},this.renderComponent=()=>{if(!Ze.X4.state)return;const{device:e}=this.environment,t=this.defaultViewStyles,{currentSpaceStore:s}=Z.default.state;if(!s)return;const r=(0,Ot.np)(),n=Ze.X4.state.filter((e=>e.pageId!==(null==r?void 0:r.id))),o={};n.forEach((e=>{let{pageId:t,visitedAt:s}=e;return o[t]=s}));const a=new Map;n.map(((t,s)=>{const r=Ze._5(t.visitedAt),i="Today"!==r&&"Yesterday"!==r,n={key:`${t.store.id}:${s}`,action:e=>this.props.onSelect({action:e,sectionName:"recents",selectedResult:{store:t.store,id:t.store.id,score:-1,spaceId:t.store.getSpaceId(),sources:[j.vp.Local],featureGroups:[],originalPosition:s,serverEventProperties:void 0}}),render:s=>l.createElement(Ss,_()({},s,{inline:!e.isMobile,store:t.store,hidePath:!1,lastViewed:i?o[t.store.id]:void 0,buttonStyle:{paddingLeft:1},type:"recent_pages"}))};var d;a.has(r)?null===(d=a.get(r))||void 0===d||d.push(n):a.set(r,[n])}));const d=[];(0,Dt.lN)()&&d.push({key:"actions",items:[{key:"actionMenuItem.assistant",action:()=>{S.Ky({environment:this.environment})},render:e=>l.createElement(zt,_()({},e,{title:i()("div",{className:"notranslate",style:t.notionAiLabel},void 0,"Ask Notion AI"),icon:e=>pe.Z.sparkles({...e,...t.notionAiIcon})}))}],render:e=>i()(Pe.Z,{title:"Actions",desktopTitleStyle:t.sectionHeader,disableDesktopPadding:!0,style:t.section},void 0,e.children)});for(const[l,u]of a.entries()){const e=this.getMessageFromBucket(l),s={key:l,items:u,render:s=>i()(Pe.Z,{title:e,desktopTitleStyle:t.sectionHeader,disableDesktopPadding:!0,style:t.section},void 0,s.children)};d.push(s)}const c=!e.isMobile&&n.length>0;return l.createElement(l.Fragment,null,i()("div",{style:t.wrapper},void 0,i()(Xe.Z,{type:Xe.i.Vertical,initialFocus:0,disableKeyboardArrowWrap:!0,sections:d,unfocusOnScroll:!0}),i()(Et.Z,{onChange:this.handleScrollOffsetChange})),c&&i()(Gt,{title:i()(Qt,{})}))},this.handleScrollOffsetChange=e=>{this.getLastPageTimestamp()&&e<=200&&!this.stores.isLoadingRecents.state&&!this.stores.endOfRecentsReached.state&&this.loadMoreRecents()},this.loadMoreRecents=o().throttle((async()=>{const e=this.getLastPageTimestamp(),{currentSpaceStore:t}=Z.default.state,s=this.environment.currentUser.id,r=null==t?void 0:t.id;if(!s||!r||!e)return;this.stores.isLoadingRecents.setState(!0);const i=await Ze.Od(e,{environment:this.environment,userId:s,spaceId:r});this.stores.isLoadingRecents.setState(!1),i||this.stores.endOfRecentsReached.setState(!0)}),300),this.defaultViewStyles={wrapper:{width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto"},sectionHeader:{fontWeight:ge.Z.fontWeight.semibold,marginBottom:7,marginLeft:2},section:{marginBottom:18},notionAiLabel:{lineHeight:"20px",fontSize:15,textOverflow:"ellipsis",overflow:"hidden",display:"block",color:this.theme.aiPurpleColor,fontWeight:ge.Z.fontWeight.semibold},notionAiIcon:{fill:this.theme.aiPurpleColor}}}getLastPageTimestamp(){const{currentSpaceStore:e}=Z.default.state;if(!e)return;const t=At.Z.getWithoutSubscribing(e.id),s=t[t.length-1];return null==s?void 0:s.visitedAt}getMessageFromBucket(e){switch(e){case"Today":return i()(ve.FormattedMessage,{id:"search.recentPagesTimeBuckets.today.text",defaultMessage:"Today"});case"Yesterday":return i()(ve.FormattedMessage,{id:"search.recentPagesTimeBuckets.yesterday.text",defaultMessage:"Yesterday"});case"Past Week":return i()(ve.FormattedMessage,{id:"search.recentPagesTimeBuckets.pastWeek.text",defaultMessage:"Past Week"});case"Past 30 Days":return i()(ve.FormattedMessage,{id:"search.recentPagesTimeBuckets.past30Days.text",defaultMessage:"Past 30 Days"});case"Older":return i()(ve.FormattedMessage,{id:"search.recentPagesTimeBuckets.older.text",defaultMessage:"Older"})}(0,m.t1)(e)}}Is.displayName="SearchDefaultBody";const ks=Is;var Rs=s(15157),Zs=s(34859),Fs=s(79131),ws=s(18647),Bs=s(76725),Os=s(19889),Ds=s(7928);function As(e){window.__c={n:"SearchFilterBarTitle"};const{filterUIName:t}=e,{parentStore:s}=(0,l.useContext)(Dr),r=(0,W.VK)((()=>L.ZP.state.query.filters),[]),n=(0,z.yK)((e=>({title:{maxWidth:220,...ge.Z.textOverflowStyle}})),[]),a=(0,W.VK)((()=>{switch(t){case"personFilter":return function(e,t){const s=e.createdBy,r=Re.default.getIntl(),i=o().compact(s.map((e=>{const s=Y.U6.createChildStore(t,{table:Os.KJ,id:e});return(0,Ds.Nz)(r,s.getModel())})));return(0,Bs.Z)(i,Ns)}(r,s);case"teamsFilter":case"dev_notInTeamFilter":return function(e,t){const s=e.inTeams;if(!s)return[];const r=o().compact(s.map((e=>Y.zX.createChildStore(t,{table:_e.e0,id:e}).getName())));return(0,Bs.Z)(r,Ns)}(r,s);case"pageFilter":return _s(r,s);case"dateFilter":return function(e){const t=Re.default.getIntl(),s=Ls(e);if("createdTime"===s)return I._Q(e.createdTime,t);if("lastEditedTime"===s)return I._Q(e.lastEditedTime,t);return""}(r);case"pageFilter":case"dev_notInPageFilter":return _s(r,s);case"titleToggle":return[];default:(0,m.t1)(t)}}),[s,t,r]);return i()("div",{style:n.title},void 0,i()(ve.FormattedMessage,{defaultMessage:"{filterName}{colon} {filterOperator} {filterValues}",id:"search.filterBarFilter.title",values:{filterName:Es(t),filterOperator:0===a.length?void 0:qs(t,r),filterValues:a,colon:0===a.length?void 0:":"}}))}function Es(e){switch(e){case"personFilter":return i()(ve.FormattedMessage,{id:"search.filterMenu.moreFilters.person",defaultMessage:"Created by"});case"teamsFilter":return i()(ve.FormattedMessage,{id:"search.filterMenu.moreFilters.inTeams",defaultMessage:"Teamspace"});case"pageFilter":return i()(ve.FormattedMessage,{id:"search.filterMenu.moreFilters.inPage",defaultMessage:"In"});case"dateFilter":return i()(ve.FormattedMessage,{id:"search.filterMenu.moreFilters.date",defaultMessage:"Date"});case"titleToggle":return i()(ve.FormattedMessage,{id:"search.filterMenu.onlyMatchTitlesToggle.label",defaultMessage:"Title only"});case"dev_notInPageFilter":return i()(ve.FormattedMessage,{id:"[DO NOT TRANSLATE].search.filterMenu.notInPageFilter.label",defaultMessage:"[dev] Not in page"});case"dev_notInTeamFilter":return i()(ve.FormattedMessage,{id:"[DO NOT TRANSLATE].search.filterMenu.notInTeamFilter.label",defaultMessage:"[dev] Not in teamspace"})}(0,m.t1)(e)}function Ls(e){const t=I.VD.createdTime(e.createdTime),s=I.VD.lastEditedTime(e.lastEditedTime);return t?"createdTime":s?"lastEditedTime":void 0}function qs(e,t){switch(e){case"personFilter":case"teamsFilter":case"pageFilter":case"dev_notInPageFilter":case"dev_notInTeamFilter":case"dateFilter":case"titleToggle":return}(0,m.t1)(e)}const Ns=e=>", ";function _s(e,t){const s=e.ancestors,r=o().compact(s.map((e=>{const s=Y.G.createChildStore(t,{table:G.iU,id:e});return s.isDefined()?s.getModel().getRenderTitle({getRecordModel:s.getRecordModel,userTimeZone:(0,nt.r)(),intl:Re.default.getIntl()}):""})));return(0,Bs.Z)(r,Ns)}var Vs=s(41558),Ws=s(3386),zs=s(44532),Hs=s(14871),Us=s(83264);const Ks={today:i()(ve.FormattedMessage,{defaultMessage:"Today",id:"searchDateFilter.quickActions.today.label"}),pastWeek:i()(ve.FormattedMessage,{defaultMessage:"Last 7 days",id:"searchDateFilter.quickActions.last7Days.label"}),pastMonth:i()(ve.FormattedMessage,{defaultMessage:"Last 30 days",id:"searchDateFilter.quickActions.last30Days.label"})};function $s(e){let{date:t,onClick:s,onDismiss:r}=e;const n=(0,nt.r)(),o=it.Lg(n),l=o;let a;const d=Ks[t];"today"===t?a=o:"pastWeek"===t?a=it.Oo(n):"pastMonth"===t?a=it.dj(n):(0,m.t1)(t);return i()(be.Z,{focused:!1,icon:pe.Z.calendar({height:18,width:18}),title:d,onClick:e=>{s({value:{starting:{type:"date",start_date:a.start_date},ending:{type:"date",start_date:l.start_date}}}),r(e)}})}class Gs extends a.Z{constructor(){super(...arguments),this.storeTypes={store:Vs.Z},this.renderPillButtonOrigin=()=>{const{icon:e,title:t}=this.props,{store:s}=this.stores,r=this.styles,{dateFilterType:n}=s.state,o=L.ZP.state.query.filters[n].starting;return i()(Ue.Z,{on:Boolean(o),icon:e(r.pillIcon),title:i()("span",{},void 0,t),onClick:this.handleOriginActivate})},this.renderPopupContents=()=>{const{title:e}=this.props,{store:t}=this.stores;return l.createElement(l.Fragment,null,i()("div",{style:this.styles.dateFilterHeader},void 0,this.renderOperatorSelect(),i()(Se.Z,{style:this.styles.clearButton,onClick:this.handleClear},void 0,i()(ve.FormattedMessage,{defaultMessage:"Clear",id:"searchDateFilter.clearButton.label"}))),i()("div",{style:this.styles.quickDatesWrapper},void 0,i()($s,{date:"today",onClick:this.updateTemporary,onDismiss:this.handleMenuClose}),i()($s,{date:"pastWeek",onClick:this.updateTemporary,onDismiss:this.handleMenuClose}),i()($s,{date:"pastMonth",onClick:this.updateTemporary,onDismiss:this.handleMenuClose})),i()(Us.Z,{title:e,value:this.getCurrentValue(),onUpdate:this.updateTemporary,store:t,onDismiss:this.handleMenuClose,hideDateInputMenuItems:!0}))},this.handleOriginActivate=()=>{const{disabled:e}=this.props,{store:t}=this.stores;e||t.setState({...t.state,isOpen:!0,focus:"starting"})},this.handleMenuClose=e=>{const{onMenuDismiss:t}=this.props,{store:s}=this.stores,{temporaryDateRange:r,dateFilterType:i}=s.state;I.zD(e)||(this.updateFilter(i,r),s.setState({...s.state,isOpen:!1}),t&&t())},this.handleClear=()=>{const{store:e}=this.stores,{dateFilterType:t}=e.state;this.updateFilter(t,{starting:void 0,ending:void 0}),e.clearTemporaryDateRange()},this.handleMenuListKey=e=>{e.preventDefault&&e.preventDefault()},this.updateTemporary=e=>{const{store:t}=this.stores;if(e.error)return;t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}});const{dateFilterType:s,temporaryDateRange:r}=t.state,{starting:i,ending:n}=r;i&&n&&this.updateFilter(s,{starting:i,ending:n})},this.styles={menuItem:{minHeight:void 0,paddingTop:this.environment.device.isMobile?12:4,paddingBottom:this.environment.device.isMobile?12:4},sectionMenuItem:{display:"flex"},icon:{height:14,width:14,fill:"currentColor"},pillIcon:{height:16,width:16,fill:"currentColor",marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:12,paddingBottom:8},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"},quickDatesWrapper:{marginTop:12,boxShadow:`0 1px 0 ${this.theme.regularDividerColor}`,paddingBottom:15,marginBottom:15},clearButton:{color:this.theme.mediumTextColor,fill:this.theme.lightIconColor,fontWeight:500,fontSize:13,paddingLeft:2,paddingRight:2,paddingBottom:2,borderRadius:3,flexShrink:0},dateFilterHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:12,marginRight:12}}}didMount(){this.updateTemporary({value:this.props.value})}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{store:t}=this.stores,s=this.styles;return i()(Ge.Z,{style:s.sectionMenuItem},void 0,i()(Ws.Z,{capture:t.state.isOpen,onUp:this.handleMenuListKey,onDown:this.handleMenuListKey,onEnter:this.handleMenuListKey},void 0,i()(zs.ZP,{popupType:this.getPopupType(),open:t.state.isOpen,origin:this.renderPillButtonOrigin(),render:this.renderPopupContents,onDismiss:this.handleMenuClose,placementToOrigin:zs.ZP.Placement.Bottom,alignmentToOrigin:zs.ZP.Alignment.Start,keepFocus:!0,style:s.popup})))}updateFilter(e,t){L.ZP.updateFilters({[e]:t})}getHumanReadableDateFilterType(e){return{lastEditedTime:i()(ve.FormattedMessage,{id:"search.filterMenu.moreFilters.lastEdited",defaultMessage:"Last edited"}),createdTime:i()(ve.FormattedMessage,{id:"search.filterMenu.moreFilters.created",defaultMessage:"Created"})}[e]}updateFilterFromToggle(e){const{value:t}=this.props,{store:s}=this.stores,{dateFilterType:r}=s.state;this.updateFilter(e,t),e!==r&&(this.updateFilter(r,{starting:void 0,ending:void 0}),s.setState({...s.state,dateFilterType:e}))}renderOperatorSelect(){const{device:e}=this.environment,{store:t}=this.stores,{dateFilterType:s}=t.state,r={width:190,items:["createdTime","lastEditedTime"],selectedItem:s,getKey:e=>e,onSelect:e=>this.updateFilterFromToggle(e),renderItem:e=>l.createElement(be.Z,_()({title:this.getHumanReadableDateFilterType(e.value)},e)),renderOrigin:t=>l.createElement(Se.Z,_()({},t,{style:{paddingLeft:2,paddingRight:2,paddingBottom:2,borderRadius:3,flexShrink:0}}),i()("div",{style:{display:"flex",alignItems:"center",...!e.isMobile&&{color:this.theme.mediumTextColor,fill:this.theme.lightIconColor,fontWeight:500,fontSize:13}}},void 0,i()("span",{style:{marginRight:4}},void 0,this.getHumanReadableDateFilterType(s)),this.renderOperatorChevron()))};return l.createElement(Hs.Z,_()({},r,{mobileActionSheet:!0}))}renderOperatorChevron(){const{device:e}=this.environment;return pe.Z.chevronDown({width:10,height:10,...e.isMobile&&{marginTop:2}})}renderMobile(e){const{store:t}=this.stores,s=e===Ae.z.Section?this.renderMobileFilterSummary():this.renderMobileButtonOrigin();return i()(zs.ZP,{popupType:zs.ZP.PopupType.SlideUp,open:t.state.isOpen,origin:s,render:this.renderPopupContents,onDismiss:this.handleMenuClose,preventScaleTransition:!0})}renderMobileButtonOrigin(){const{icon:e,title:t,disabled:s}=this.props,r=this.styles;return i()(be.Z,{disabled:s,focused:!1,icon:e(r.icon),title:t,onClick:this.handleOriginActivate})}renderMobileFilterSummary(){const{title:e,value:t,dateFormat:s,disabled:r,intl:n}=this.props,o=this.styles,l=i()("div",{style:o.summary},void 0,pe.Z.calendar(o.iconActiveMobile),I._Q(t,n,s));return i()($e.Z,{disabled:r,onClick:this.handleOriginActivate,onClickClear:this.handleClear,label:e,title:l})}getCurrentValue(){const{store:e}=this.stores,{dateFilterType:t,temporaryDateRange:s}=e.state;return{...L.ZP.state.query.filters[t],...s}}getPopupType(){const{device:e}=this.environment;return e.isMobile?zs.ZP.PopupType.SlideUp:zs.ZP.PopupType.Popup}}Gs.displayName="SearchGenericDateFilter";const js=(0,ve.injectIntl)(Gs);function Qs(e){const t=L.ZP.state.query.sort,s=Pt.find((e=>o().isEqual(e.sort,t)))??Pt[0],r="relevance"===s.sort.field?i()(ve.FormattedMessage,{id:"search.sort.sortOrder.bestMatches.title",defaultMessage:"Sort"}):s.formattedName;return i()(Ue.Z,{disabled:!1,title:r,onClick:e.onClick,icon:pe.Z.arrowsUpDown({width:16,marginRight:6,fill:"currentColor"})})}function Js(){const e=L.ZP.state.query.sort,t=Pt.findIndex((t=>o().isEqual(t.sort,e))),s=[];for(const r of Pt)s.push({key:r.key,render:e=>l.createElement(be.Z,_()({},e,{title:r.formattedName})),action:()=>{L.ZP.setState({...L.ZP.state,query:{...L.ZP.state.query,sort:r.sort}})}});return i()(de.Z,{menuType:K.og.Popup},void 0,i()(Xe.Z,{type:Xe.i.Vertical,initialFocus:t<0?0:t,sections:[{key:"sortOptions",items:s,render:e=>l.createElement(Pe.Z,_()({},e,{disableDesktopPadding:!0}))}]}))}const Xs=function(){window.__c={n:"SearchSortButton"};const e=(0,z.yK)((()=>({popup:{paddingTop:12,paddingBottom:8}})),[]);return i()(Ce.ZP,{popupType:Ce.Z4.Popup,renderOrigin:Qs,render:Js,disabled:!1,placementToOrigin:zs.ZP.Placement.Bottom,alignmentToOrigin:zs.ZP.Alignment.Start,style:e.popup})},Ys="SearchFilterSettings";function er(e){window.__c={n:"SearchFilterBar"};const t=(0,W.qz)(void 0,fe.Z),{isMobile:s}=e,{parentStore:r}=(0,l.useContext)(Dr),n=(0,V.O7)(),o=(0,W.VK)((()=>n.currentUser.id),[n]),a=(0,W.VK)((()=>L.ZP),[]),d=(0,W.Kw)(a),c=d.query.filters,u=(0,W.VK)((()=>O.default.state.isPublicPageSearch),[]),h=(0,W.VK)((()=>(0,R.bq)()&&w.default.checkGate("enable_search_team_filter")&&!u),[u]),p=(0,W.VK)((()=>!u),[u]),m=!1,g=(0,z.yK)((e=>({scroller:{display:"flex",alignItems:"center",paddingTop:10,paddingRight:12,paddingBottom:10,paddingLeft:12},barContainer:{display:"flex",alignItems:"center"},scrollerContainer:{position:"relative",flexGrow:0,overflow:"hidden"},draggableList:{display:"flex",flexShrink:0,marginLeft:6},divider:{height:16,width:1,borderRadius:1,backgroundColor:e.stroke.deemphasized}})),[]),v=(0,l.useCallback)((e=>t=>a.updateFilters({[e]:t})),[a]),f=(0,l.useCallback)((()=>{t.setState({...t.state,open:!1})}),[t]),y=(0,l.useCallback)((()=>{if(p)return i()(Ne.Z,{mode:Ae.z.Pill,focused:!1,title:i()(As,{filterUIName:"personFilter"}),parentStore:r,userIds:c.createdBy,onMenuDismiss:f,onChange:v("createdBy")})}),[p,r,c.createdBy,f,v]),S=(0,l.useCallback)((()=>h&&i()(He,{mode:Ae.z.Pill,focused:!1,title:i()(As,{filterUIName:"teamsFilter"}),parentStore:r,teamIds:c.inTeams,onMenuDismiss:f,onChange:v("inTeams")})),[r,c.inTeams,f,v,h]),b=(0,l.useCallback)((()=>i()(qe,{mode:Ae.z.Pill,focused:!1,title:i()(As,{filterUIName:"pageFilter"}),parentStore:r,blockIds:c.ancestors,onMenuDismiss:f,onChange:v("ancestors")})),[r,c.ancestors,f,v]),C=(0,l.useCallback)((()=>null),[r,c.dev_excludedPages,f,v,m]),M=(0,l.useCallback)((()=>null),[r,c.dev_excludedTeams,f,v,m]),T=(0,l.useCallback)((()=>i()(js,{mode:Ae.z.Pill,focused:!1,title:i()(As,{filterUIName:"dateFilter"}),icon:pe.Z.calendar,value:c.lastEditedTime,onMenuDismiss:f})),[c.lastEditedTime,f]),P=(0,l.useCallback)((()=>!s&&i()(Qe,{mode:Ae.z.Pill,focused:!1,title:i()(As,{filterUIName:"titleToggle"}),icon:pe.Z.title,value:c.navigableBlockContentOnly||!1,onChange:v("navigableBlockContentOnly")})),[c.navigableBlockContentOnly,v,s]);(0,l.useEffect)((()=>{const e=Rs.Z.get({userId:o,key:Ys});e&&e.filterOrder&&a.updateFilterState(e)}),[o,a]);const x={titleToggle:P(),personFilter:y(),teamsFilter:S(),pageFilter:b(),dateFilter:T(),dev_notInPageFilter:C(),dev_notInTeamFilter:M()};const I=(0,l.useCallback)((()=>l.createElement(l.Fragment,null,i()(Xs,{}),i()("div",{style:g.divider}))),[g.divider]);return i()("div",{style:g.barContainer},void 0,i()("div",{style:g.scrollerContainer},void 0,i()(ws.Z,{type:Zs.Z.X,style:g.scroller,showLeftRightOverlay:!1},void 0,l.createElement(l.Fragment,null,I()),l.createElement(l.Fragment,null,i()(Fs.ZP,{direction:"horizontal",keys:d.filterState.filterOrder,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,renderKey:e=>x[e],style:g.draggableList,onDrop:e=>function(e){const t={...d.filterState,filterOrder:e};Rs.Z.set({userId:o,key:Ys,value:t}),a.updateFilterState(t)}(e)})))))}var tr=s(29798),sr=(s(1800),s(54642),s(47307),s(64964),s(31194),s(1310),s(16354)),rr=s(43765);s(92660);(0,ve.defineMessages)({additionalInformationPlaceholder:{id:"SearchBadResultsForm.additionalInformation.placeholder",defaultMessage:"Any additional comments or context (e.g. ...)"},urlPlaceholder:{id:"SearchBadResultsForm.url.placeholder",defaultMessage:"Link to page you were looking for"}});class ir extends a.Z{constructor(){super(...arguments),this.storeTypes={requestModalOpen:c.default.createClass(!1),responseModalOpen:c.default.createClass(!1)},this.styles={footer:()=>{const{device:e}=this.environment;return{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:e.isMobile?ge.Z.fontSize.UIRegular.mobile:ge.Z.fontSize.UIRegular.desktop}},footerText:{fontSize:Ht.yv(this.environment,"UISmall"),...ge.Z.textOverflowStyle},inlineHint:{display:"inline",marginRight:16},resultCountWrapper:{display:"flex",alignItems:"center",...ge.Z.textOverflowStyle},resultCount:{fontWeight:ge.Z.fontWeight.medium},resultText:{verticalAlign:"middle",marginRight:6},spinner:{display:"inline",width:12,height:12,verticalAlign:"middle"},keyboardShortcut:{marginRight:4,marginBottom:1,fontVariant:"all-small-caps",fontSize:1.1*Ht.yv(this.environment,"UISmall")},commandGlyph:{fontSize:.75*Ht.yv(this.environment,"UIRegular")},footerDebugButton:$t(this.theme),debugModalStyle:{maxHeight:"90vh",maxWidth:"90vw",height:"90vh",width:"90vw",overflow:"scroll",padding:10},navigationHints:{marginLeft:15}}}renderComponent(){const{localResults:e,serverResults:t}=this.props.searchResultStore.state,{shouldShow:s}=this.props;if(!s)return;const r=this.styles,n=this.getThemeColors(),o={...r.resultCount,...n.resultCount},{count:a,isLowerBound:d}=this.props.searchResultStore.getResultCount(),c=i()("span",{style:r.resultText},void 0,d?this.props.intl.formatMessage({id:"SearchResultsFooter.helpText.resultCountApproximate",defaultMessage:"{resultCount, plural, other {<resultwrapper>{resultCount}+</resultwrapper> results}}"},{resultCount:a,resultwrapper:e=>i()("span",{style:o},void 0,e)}):this.props.intl.formatMessage({id:"SearchResultsFooter.helpText.resultCount",defaultMessage:"{resultCount, plural, one {<resultwrapper>{resultCount}</resultwrapper> result} other {<resultwrapper>{resultCount}</resultwrapper> results}}"},{resultCount:a,resultwrapper:e=>i()("span",{style:o},void 0,e)})),u=O.default.state.searchMenuStoreExperimentState.enablesGrouping,h=u?i()(Qt,{}):i()("div",{style:r.resultCountWrapper},void 0,u?void 0:i()("div",{},void 0,c,this.renderSpinner(this.props.showSpinner)),i()("div",{style:r.navigationHints},void 0,i()(Qt,{})));return i()(Gt,{title:h,right:l.createElement(l.Fragment,null,false,this.renderSearchDebugButtons())})}renderSpinner(e){const t=this.styles;return i()(Ft.Z,{show:e,showDelay:500,showHold:200,render:e=>e&&i()(Zt.Z,{style:t.spinner})})}renderSearchDebugButtons(){var e;if(!B.ZP.state.debug&&!B.ZP.state.showDebugInfo)return;const{rawRequests:t,rawResponses:s}=(null===(e=this.props.searchResultStore.state.serverResults)||void 0===e||null===(e=e.debugInfo)||void 0===e?void 0:e.response)||{};return l.createElement(l.Fragment,null,t&&l.createElement(l.Fragment,null,i()(as.Z,{open:this.stores.requestModalOpen.state,innerStyle:this.styles.debugModalStyle,onDismiss:()=>{this.stores.requestModalOpen.setState(!1)},render:()=>i()(is.LazyAdminReactJson,{showCopyButton:"large",defaultCollapsed:!1,data:t})}),i()(Ut.Z,{style:this.styles.footerDebugButton,onClick:()=>this.stores.requestModalOpen.setState(!0)},void 0,"Open Request")),s&&l.createElement(l.Fragment,null,i()(as.Z,{open:this.stores.responseModalOpen.state,innerStyle:this.styles.debugModalStyle,onDismiss:()=>{this.stores.responseModalOpen.setState(!1)},render:()=>i()(is.LazyAdminReactJson,{showCopyButton:"large",data:{rawResponses:s},defaultCollapsed:!1})}),i()(Ut.Z,{style:this.styles.footerDebugButton,onClick:()=>this.stores.responseModalOpen.setState(!0)},void 0,"Open Response")))}getThemeColors(){return{footerText:{color:this.theme.lightTextColor},resultCount:{color:this.theme.mediumTextColor},keyboardShortcut:{color:this.theme.mediumTextColor}}}}ir.displayName="SearchResultsFooter";const nr=(0,ve.injectIntl)(ir);var or=s(73935),lr=s(11689),ar=s(43339),dr=s(39634),cr=s(36507);class ur extends a.Z{constructor(){super(...arguments),this.handleSendMessageClick=()=>{dr.j({environment:this.environment,from:"quick_find"})},this.styles={menuItem:{marginTop:"auto",marginBottom:"auto"},caption:{marginTop:"auto"},reportProblemButton:{display:"inline"},searchDeletedButton:{display:"inline",lineHeight:"25px"}}}renderComponent(){return l.createElement(cr.Z,_()({},this.getErrorMessage(),{style:this.styles.menuItem,captionStyle:this.styles.caption,shouldWrapCaption:!0}))}renderNoResults(){return{title:ur.noResultsTitle,caption:this.renderNoResultsMessage()}}renderNoResultsMessage(){const e=L.ZP.state.query.filters,t=I.FN(e);if(!I.VD.isDeletedOnly(e.isDeletedOnly)){const e=this.styles,t=this.getThemeColors(),s={...e.searchDeletedButton,...t.searchDeletedButton};return i()(ve.FormattedMessage,{id:"searchErrorMenuItem.errorPrompt.searchDeleted",defaultMessage:"Some results may be in your deleted pages.{br}<searchdeleted>Search deleted pages</searchdeleted>",values:{searchdeleted:e=>i()(sr.Z,{onClick:this.props.handleSearchDeletedOnly,style:s},void 0,e),br:i()("br",{})}})}return i()(ve.FormattedMessage,t?{defaultMessage:"Try different search terms or filters",id:"searchErrorMenuItem.errorPrompt.searchTermsAndFilters"}:{defaultMessage:"Try different search terms",id:"searchErrorMenuItem.errorPrompt.searchTerms"})}renderOffline(){return{title:ur.noResultsTitle,caption:i()(ve.FormattedMessage,{defaultMessage:"Go online for more results.",id:"searchErrorMenuItem.errorPrompt.goOnline"})}}renderRequestFailed(){const e=this.styles,t=this.getThemeColors(),s={...e.reportProblemButton,...t.reportProblemButton};return{title:i()(ve.FormattedMessage,{id:"searchErrorMenuItem.error.genericErrorMessage",defaultMessage:"Something went wrong"}),caption:i()(ve.FormattedMessage,{id:"searchErrorMenuItem.errorPrompt.refreshOrReport",defaultMessage:"Try refreshing or <reportlink>report a problem</reportlink>.",values:{reportlink:e=>i()(sr.Z,{onClick:this.handleSendMessageClick,style:s},void 0,e)}})}}getErrorMessage(){const{error:e}=this.props;switch(e.type){case j.Ix.NoResults.type:return this.renderNoResults();case j.Ix.Offline.type:return this.renderOffline();case j.Ix.RequestFailed.type:return this.renderRequestFailed();default:(0,m.t1)(e)}}getThemeColors(){return{reportProblemButton:{color:this.theme.blueColor},searchDeletedButton:{color:this.theme.blueColor}}}}ur.displayName="SearchErrorMenuItem",ur.contextTypes={...K.mw,...a.w},ur.noResultsTitle=i()(ve.FormattedMessage,{defaultMessage:"No results",id:"searchErrorMenuItem.error.noResults"});const hr=ur;function pr(e,t){return i()(Pe.Z,{disableMobilePadding:!0,disableMobileBorders:!0,topBorder:!1,style:{marginTop:0,paddingTop:0}},void 0,i()(St.Z,{body:e,bodyStyle:t}))}const mr=(0,ve.injectIntl)((function(e){var t,s,r,n,a;window.__c={n:"SearchResultsMenuList"};const[d,c]=(0,l.useState)(!1),u=(0,V.Fy)().isMobile,h=(0,z.yK)((e=>({results:{flex:1,display:"flex",flexDirection:"column",overflow:"auto",height:"100%"},messageMenuItem:{...u&&{background:void 0,boxShadow:void 0}},debugMessageMenuItemTextStyle:{whiteSpace:"pre-wrap",fontFamily:"monospace",marginTop:0},actionMenuItemTitle:{fontWeight:ge.Z.fontWeight.medium,lineHeight:"20px",fontSize:15,color:e.mediumTextColor,textOverflow:"ellipsis",overflow:"hidden",display:"block"},menuListContainer:{display:"flex",flexDirection:"column",gap:12,marginTop:u?13:void 0,marginBottom:4}})),[u]),{searchResultStore:p,localResults:g,serverResults:v,resultListStore:f,searchExperimentOverrides:y,intl:b,showActions:C}=e,M=e.errorState,T=(0,W.VK)((()=>L.ZP.state.query.text),[]),P=C.length>0?{key:"actions",render:e=>l.createElement(Pe.Z,_()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:i()(ve.FormattedMessage,{id:"search.searchActions.actions.text",defaultMessage:"Actions"})})),items:o().compact(C.map((e=>function(e){const{type:t,title:s,icon:r,action:i}=e;return{key:`actionMenuItem.${t}`,action:i,render:e=>l.createElement(zt,_()({},e,{title:s,icon:r}))}}({...e,title:e.renderTitle(T,b,h.actionMenuItemTitle)}))))}:void 0,x=(0,W.VK)((()=>O.default.state.searchMenuStoreExperimentState.enablesGrouping),[]),k=(0,I.IV)({intentBasedGrouping:x,localResults:g,serverResults:v}),{allSearchResults:R}=k,Z=(0,l.useCallback)((t=>{const{results:s,sectionTitle:r,compact:n,rendersTimeSinceLastViewedMs:a}=t,{id:d,title:c}=function(e){if(!e)return{id:"defaultSearchResults",title:void 0};switch(e.type){case"unique-id":return{id:"uniqueIdSearchResults",title:i()(ve.FormattedMessage,{id:"search.searchResultBuckets.uniqueID.text",defaultMessage:"ID matches"})};case"jump-back-in":return{id:"jumpBackInSearchResults",title:i()(ve.FormattedMessage,{id:"search.searchResultBuckets.recent.text",defaultMessage:"Jump back in"})};case"server":return{id:"serverOnlySearchResults",title:i()(ve.FormattedMessage,{id:"search.searchResultBuckets.server.text",defaultMessage:"{count}{maybeLowerBoundSign} results",values:{count:e.values.count,maybeLowerBoundSign:e.values.isLowerBound?"+":""}})};case"non-unique-id":return{id:"nonUniqueIdSearchResults",title:i()(ve.FormattedMessage,{id:"search.searchResultBuckets.bestMatches.text",defaultMessage:"Best Matches"})}}(0,m.t1)(e)}(r);return s.length>0?{key:d,render:e=>l.createElement(Pe.Z,_()({},e,{shouldShowBottomDivider:!1,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,title:c})),items:o().compact(s.map(((t,s)=>{var r;return function(e){var t;const{selectedResult:s,index:r,sectionName:i,allSearchResults:n,props:o,compact:a,timeSinceLastViewedMs:d}=e,{store:c}=s,u=c.isNavigableBlock()?c:c.getNavigableBlockStore();if(!u)return;const h=l.createRef(),p=Boolean(B.ZP.getDebugLevel()),m=p&&s.sources.includes(j.vp.Local)?{score:s.score,frecencyScore:s.frecencyScore,localSource:s.localSource,personalizationBoost:s.personalizationBoost,id:s.id}:void 0,g=p&&(s.sources.includes(j.vp.ElasticSearch)||s.sources.includes(j.vp.VectorDBBlock)||s.sources.includes(j.vp.VectorDBCollection))?null===(t=o.debugInfo)||void 0===t||null===(t=t.response)||void 0===t?void 0:t.resultsDebugMap[c.id]:void 0,v=o.clusterInfo,f=Date.now();return{key:`${c.id}:${r}`,action:e=>{const{event:t}=e;function r(e){const s=or.findDOMNode(e.current);return Boolean(s&&"target"in t&&t.target&&(s===t.target||s.contains(t.target)))}h.current&&r(h)||o.handleSelectResult({action:e,selectedResult:s,sectionName:i,allSearchResults:n})},render:e=>{var t;return l.createElement(Ss,_()({},e,{index:r,originalPosition:s.originalPosition,isFirstInSection:0===r,store:u,hidePath:!1,result:s,className:U.ulv,debugLocal:m,debugHits:g,debugAreaRef:h,clusterInfo:v,inline:a&&!p,inlineCaptionMinWidthPercentage:20,lastViewed:d?f-d:void 0,queryId:null===(t=s.serverEventProperties)||void 0===t?void 0:t["server-queryId"],type:"query_results"}))}}}({selectedResult:t,index:s,sectionName:d,allSearchResults:R,props:e,compact:n,timeSinceLastViewedMs:a&&null!==(r=t.localSource)&&void 0!==r&&r.has("recentVisit")?t.timeSinceLastViewedMs:void 0})})))}:void 0}),[R,e]),F=(0,W.VK)((()=>Z({results:"intent-based-grouping"===k.type?k.sections.jumpBackInSearchResults:[],sectionTitle:{type:"jump-back-in"},compact:!0,rendersTimeSinceLastViewedMs:!0})),[Z,k.sections,k.type]),w=(0,W.VK)((()=>{const e="intent-based-grouping"===k.type?k.sections.serverOnlySearchResults:[],t=p.getResultCount();return Z({results:e,sectionTitle:{type:"server",values:{count:e.length,isLowerBound:t.isLowerBound}},compact:!1})}),[Z,k.sections,k.type,p]),D=(0,W.VK)((()=>Z({results:"uniqueIdSearchResults"in k.sections?k.sections.uniqueIdSearchResults:[],sectionTitle:{type:"unique-id"},compact:!1})),[Z,k.sections]),A=(0,W.VK)((()=>Z({results:"unique-id"===k.type?k.sections.nonUniqueIdSearchResults:"default"===k.type?k.sections.defaultSearchResults:[],sectionTitle:"unique-id"===k.type?{type:"non-unique-id"}:void 0,compact:!1})),[Z,k.sections,k.type]),E=[P,F,D,w,A].filter(m.$K),q=null===(t=e.debugInfo)||void 0===t||null===(t=t.response)||void 0===t?void 0:t.parsedQueries,N=null===(s=e.debugInfo)||void 0===s||null===(s=s.response)||void 0===s?void 0:s.detectedLanguages,H=null===(r=e.debugInfo)||void 0===r?void 0:r.traceLogs,K=null===(n=e.debugInfo)||void 0===n||null===(n=n.response)||void 0===n?void 0:n.debugUrls,$=(0,l.useCallback)(((t,s)=>{const{onMaybeLoadMoreResults:r}=e,i=t<=200;i&&!d&&r(),c(i),s.offsetFromTop&&L.ZP.update((e=>({...e,hasScrolled:!0})))}),[d,e]),G=A||w?(null==P||null===(a=P.items)||void 0===a?void 0:a.length)??0:0;return i()(Or.Consumer,{},void 0,(e=>{let{queryResultsSectionRef:t}=e;return l.createElement("section",{style:h.results,ref:t},!o().isEmpty(y)&&pr(l.createElement(l.Fragment,null,i()(is.LazyAdminReactJson,{data:{searchExperimentOverrides:y},showCopyButton:!1,showModalButton:!1,defaultCollapsed:!1})),h.debugMessageMenuItemTextStyle),q&&pr(i()(is.LazyAdminReactJson,{data:{parsedQueries:q},customCollapsedRenderers:[yr],showCopyButton:"small",showModalButton:!0,defaultCollapsed:!0}),h.debugMessageMenuItemTextStyle),N&&pr(i()(is.LazyAdminReactJson,{data:{detectedLanguages:N},customCollapsedRenderers:[fr]}),h.debugMessageMenuItemTextStyle),H&&pr(i()(is.LazyAdminReactJson,{data:{tracer:{traceLogs:H}},customCollapsedRenderers:[vr],defaultCollapsed:!0}),h.debugMessageMenuItemTextStyle),K&&pr(i()(is.LazyAdminReactJson,{data:{debugUrls:K},defaultCollapsed:!0,customCollapsedRenderers:[br],showCopyButton:"small",showModalButton:!0,maxLinkValueLength:40}),h.debugMessageMenuItemTextStyle),E&&i()("div",{className:"search-results-list"},void 0,i()(Xe.Z,{type:Xe.i.Vertical,initialFocus:G,store:f,disableKeyboardArrowWrap:!0,sections:E,style:h.menuListContainer})),function(e,t){if(e.isLoading)return;if(e.showMajorError)return i()(hr,{error:e.serverError,handleSearchDeletedOnly:()=>{const e=L.ZP.state.query.text;S.IB(),lr.Z.setState({...lr.Z.state,open:!0}),ar.Z.setState({...ar.Z.state,currentTab:"all_pages",filter:e,limit:ar.Z.startLimit})}});if(e.serverError&&e.serverError!==j.Ix.NoResults)return function(e,t){return i()(Pe.Z,{disableMobilePadding:!0,disableMobileBorders:!0},void 0,i()(rr.Z,{title:e,style:t}))}(e.serverError.message,t)}(M,h.messageMenuItem)||i()(Et.Z,{onChange:$}))}))}));function gr(e){const t=e.replaceAll(/\(MatchNoDocsQuery\("Matching no documents because no terms present"\)\)\^[0-9\.]/g,"").replaceAll(/MatchNoDocsQuery\("Matching no documents because no terms present"\)/g,"").replaceAll(/ConstantScore\(([^)]+):([^)]+)\)/g,"<i>$1</i>:<b>$2</b>").replace(/function score \(\((.*)\), functions:.*\)/,"$1").replaceAll("( ","(").replaceAll(" )",")").replaceAll("|","| <br/>").replaceAll(/([^( ]+):"([^"]+)"/g,'<i>$1</i>:<b>"$2"</b>').replaceAll(/([^( ]+):([^) ]+)/g,"<i>$1</i>:<b>$2</b>");return i()("span",{dangerouslySetInnerHTML:{__html:t}})}const vr=e=>{let{data:t,keyPath:s}=e;if("traceLogs"===(null==s?void 0:s[0])&&o().isPlainObject(t)&&o().isArray(t.log)&&t.log.length>0){const{log:e,startTimeMs:s}=t;return{element:l.createElement(l.Fragment,null,i()("div",{},void 0,i()("b",{},void 0,`Trace started at ${s}`)),e.map(((e,t)=>i()("div",{},t,i()("span",{style:Sr},void 0,`[${e.timestamp-s}ms][${e.callerFileName.split(".")[0]}]`),i()("span",{},void 0,`${e.msg}`))))),expanded:!1}}return null},fr=e=>{let{data:t,keyPath:s}=e;return"detectedLanguages"===s.join(".")&&o().isPlainObject(t)?{element:l.createElement(l.Fragment,null,Object.entries(t).filter((e=>{let[t,s]=e;return Boolean(s)})).map((e=>{let[t]=e;return t})).join(", ")||"None"),expanded:!1}:null},yr=e=>{var t,s;let{data:r,keyPath:i}=e;const n=r,o=Object.values(n).find((e=>void 0!==e));if(!o)return null;if(!["type","description","time_in_nanos"].every((e=>o[e])))return null;if(1===i.length)return{element:gr(o.description),expanded:!1};let l=o.description??"";return null!==(t=l)&&void 0!==t&&t.includes("permissions.teamIds")&&(l="PermissionsQuery"),null!==(s=l)&&void 0!==s&&s.includes("(_id:[")&&(l="BoostRecentPageIds"),{element:gr(l),expanded:!1}},Sr={color:"blue"},br=e=>{let{data:t}=e;const s=t;if(!s)return null;const r=Object.values(s).find((e=>{let{clusterName:t}=e;return void 0!==t}));if(r){const{clusterName:e}=r;return{element:l.createElement(l.Fragment,null,e),expanded:!1}}return{element:l.createElement(l.Fragment,null,"unknown"),expanded:!1}};const Cr=function(e){window.__c={n:"SearchResultsBody"};const{searchResultStore:t,sxsMode:s,searchDebugColumnStore:r}=e,n=(0,V.O7)(),o=(0,V.Fy)(),a=(0,z.yK)((e=>({container:{display:"flex",flexDirection:"column",width:s?"50%":"100%",flex:1,overflow:"hidden"},askAiLabel:{color:e.aiPurpleColor,fontWeight:ge.Z.fontWeight.semibold},askAiQuery:{fontWeight:ge.Z.fontWeight.regular},askAiIcon:{fill:e.aiPurpleColor}})),[s]),d=(0,W.qz)(void 0,tr.Z),c=(0,W.VK)((()=>d.state.focus.indexGlobal),[d]),{handleSelectResult:u,globalFocusedIndex:h}=(0,l.useContext)(Or),{localResults:p,serverResults:m,clusterInfo:g,debugInfo:v,serverResultsLoading:f,searchExperimentOverrides:y,hasPublicAccessPermission:b,errorState:C,serverResultsAllLoaded:M}=(0,W.VK)((()=>{var e,s;const{hasPublicAccessPermission:i}=I.bC(n);return{localResults:t.state.localResults,serverResults:t.state.serverResults,serverResultsLoading:t.state.serverResultsLoading,clusterInfo:null===(e=t.state.serverResults)||void 0===e?void 0:e.clusterInfo,debugInfo:null===(s=t.state.serverResults)||void 0===s?void 0:s.debugInfo,searchExperimentOverrides:r.state.searchExperimentOverrides,hasPublicAccessPermission:i,errorState:t.state.errorState,serverResultsAllLoaded:t.state.serverResultsAllLoaded}}),[t,r,n]),T=!1===C.isLoading&&C.showMajorError,P=Boolean(p||m),x=(0,l.useCallback)((()=>{!f&&!M&&void 0!==m&&L.ZP.update((e=>({...e,limit:e.limit+L.Xv,isScrolled:!0,source:"quick_find_scroll"})))}),[f,M,m]),k=(0,W.VK)((()=>I.oO({localResults:null==p?void 0:p.results,serverResults:null==m?void 0:m.results})),[p,m]),R=(0,W.VK)((()=>[{type:"assistant",renderTitle:(e,t,s)=>function(e,t){return i()("div",{className:"notranslate",style:t},void 0,e)}(l.createElement(l.Fragment,null,i()("span",{},void 0,"Ask Notion AI "),i()("span",{style:a.askAiQuery},void 0,e)),{...s,...a.askAiLabel}),icon:e=>pe.Z.sparkles({...e,...a.askAiIcon}),action:()=>{S.Ky({environment:n})},shouldShow:()=>!!(0,Dt.lN)()||!!(0,Dt.jp)(n.device)&&(L.ZP.state.query.text.split(" ").length-1>=2&&L.ZP.state.query.text.length>6)}].filter((e=>e.shouldShow(n)))),[n,a],{useDeepEqual:!0});(0,W.VK)((()=>{const e=t.state.insertedActionResultsCount,s=R.length;e!==s&&t.update((e=>({...e,insertedActionResultsCount:s})))}),[R,t]);const Z=(0,l.useCallback)((()=>d.update((e=>e.focus.isInitialized&&0===e.focus.section&&0===e.focus.indexLocal&&0===e.focus.indexGlobal?e:{...e,focus:R.length>0?{section:1,indexLocal:0,indexGlobal:R.length}:{section:0,indexLocal:0,indexGlobal:0}}))),[d,R]);return(0,l.useEffect)((()=>{Z()}),[k,Z]),(0,l.useEffect)((()=>{h.setState(c)}),[h,c]),i()("div",{style:a.container},void 0,i()(mr,{errorState:C,handleSelectResult:u,onMaybeLoadMoreResults:x,resultListStore:d,searchResultStore:t,localResults:null==p?void 0:p.results,serverResults:null==m?void 0:m.results,debugInfo:v,clusterInfo:g,publicAccessPermission:b,searchExperimentOverrides:y,showActions:R}),i()(nr,{searchResultStore:t,showSpinner:f,shouldShow:!T&&P&&!o.isMobile}))};function Mr(){window.__c={n:"SearchNavigationalView"};const{searchFilterMenuRef:e,handleRecentPageSelect:t,searchResultStore:s,secondarySearchResultStore:r}=(0,l.useContext)(Or),n=(0,V.Fy)(),{errorState:o,shouldShowSxSView:a,hasQuery:d}=(0,W.VK)((()=>({shouldShowSxSView:Boolean((0,B.gq)({device:n})&&B.BJ.state.visible),errorState:s.state.errorState,hasQuery:Boolean(L.ZP.state.query.text.trim())||I.VA(L.ZP.state.query.filters)})),[s,n]),c=(0,z.yK)((()=>({container:{display:"flex",flexDirection:"column",width:a?"50%":"100%"},sxsContainer:{display:"flex",flexDirection:"row",height:"100%",overflow:"hidden",maxWidth:"100%"}})),[a]),u=!1===o.isLoading&&o.showMajorError,h={searchResultStore:s,searchDebugColumnStore:B.v_,sxsMode:a};return l.createElement(l.Fragment,null,!n.isMobile&&i()(er,{isMobile:n.isMobile}),d?l.createElement(l.Fragment,null,!u&&n.isMobile&&l.createElement(yt,{isMobile:!0,mode:mt.Section,ref:e}),i()("div",{style:c.sxsContainer},void 0,l.createElement(Cr,h),a&&l.createElement(Cr,_()({},h,{searchResultStore:r,searchDebugColumnStore:B.BJ})))):i()(ks,{onSelect:t}))}var Tr=s(37034);function Pr(e){window.__c={n:"SearchSidePeekPanel"};const{selectedResult:t}=e,s=(0,z.yK)((e=>({sidePeekPanel:{flex:"0 0 300px",paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",minHeight:400,backgroundColor:e.sidebarSecondaryBackground,borderLeft:`1px solid ${e.regularDividerColor}`},sidePeekPanelHidden:{display:"none"},emoji:{width:20},sidePeekContentContainer:{margin:16},title:{fontSize:22,fontWeight:ge.Z.fontWeight.bold,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},titleContainer:{display:"flex",height:73,flexDirection:"column",justifyContent:"space-between"}})),[]),r=(0,W.VK)((()=>({...s.sidePeekPanel,...!L.ZP.isSidePeekPanelOpen()&&s.sidePeekPanelHidden})),[s.sidePeekPanel,s.sidePeekPanelHidden]),n=(0,V.O7)(),o=(0,ve.useIntl)(),l=(0,W.VK)((()=>{const e=(0,Tr.V)(t,o,n);if(e)return i()("div",{style:s.title},void 0,e)}),[s.title,o,n,t]),a=(0,W.VK)((()=>i()(Fe.Z,{disabled:!0,icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),size:36,largeIcon:!0})),[t]);return i()("aside",{style:r},void 0,i()("div",{style:s.sidePeekContentContainer},void 0,i()("div",{style:s.titleContainer},void 0,a,l)))}const xr="80vh";function Ir(e){window.__c={n:"SearchContentPane"};const t=(0,V.Fy)();return ie(),i()(ae.Z,{capture:!0,ignoreBlockSelection:!0,focusOffscreenInput:!1,restoreSelection:!t.isMobile,render:()=>i()(le.Z,{capture:!0,allowMenuList:!0,render:t=>l.createElement(kr,_()({},e,{ignoreAreaEvents:t}))})})}function kr(e){window.__c={n:"SearchContentPaneInner"};const{ignoreAreaEvents:t,renderAsPage:s,onClose:r}=e,{handleQueryChange:n,searchFilterMenuRef:a,modalBodyMenuRef:d,searchResultStore:c,globalFocusedIndex:u}=(0,l.useContext)(Or),h=(0,z.yK)((e=>({body:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},topbar:{height:void 0,marginTop:10,marginLeft:16,marginBottom:10,marginRight:16},topbarRightButtonWrapper:{flex:void 0,paddingLeft:16},topbarButton:{fontWeight:void 0,padding:0,color:e.mediumTextColor},scroller:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",maxHeight:s?"100vh":xr},clearButton:{color:e.lightTextColor},sxsContainer:{display:"flex",flexDirection:"row",height:"100%",overflow:"hidden",maxWidth:"100%"}})),[s]),[p,m]=(0,l.useState)(!1),[g,v]=(0,l.useState)(!1),f=(0,V.O7)(),y=(0,V.Fy)(),{isSearchMenuOpen:S,shouldShowSidePeekPanel:b,shouldShowDebugSidebar:C,hasPublicAccessPermission:M,hasQuery:T,shouldShowSpinner:P}=(0,W.VK)((()=>{const e=Boolean(X.Z.state.online),{hasPublicAccessPermission:t}=I.bC(f);return{isSearchMenuOpen:O.default.state.open,shouldShowSpinner:e&&Boolean(L.ZP.state.query.text)&&c.state.serverResultsLoading&&!p,shouldShowSidePeekPanel:wr(y),shouldShowDebugSidebar:Br({device:y,isPublicAccessPermissionForPage:t}),hasPublicAccessPermission:t,hasQuery:Boolean(L.ZP.state.query.text.trim())||I.VA(L.ZP.state.query.filters)}}),[p,c,y,f]),x=(0,l.useMemo)((()=>o().debounce((()=>{const{activeElement:e}=document;e instanceof HTMLInputElement&&e.blur()}),500,{leading:!0})),[]),k=(0,l.useCallback)((()=>{g&&x()}),[x,g]),R=(0,l.useCallback)((e=>{v(e),e||y.isMobileNative&&oe.Z.updateKeyboardPhase(f,oe.i.willHide,0)}),[y.isMobileNative,f]),Z=(0,W.VK)((()=>I.pG(c,u)),[c,u]),F=(0,l.useMemo)((()=>i()(Bt,{isOpen:Boolean(s||S),onTypingChange:m,onFocusChange:R,showSpinner:P,onQueryChange:n,selectedResult:Z})),[s,S,R,P,n,Z]),w=(0,l.useMemo)((()=>{if(y.isMobile){return{menuType:K.og.Modal,left:F,shouldRenderLeftDirectly:!0,width:s?"100vw":void 0,...Zr({isPhone:y.isPhone,renderAsPage:s,style:h.topbarRightButtonWrapper,onClick:r}),header:T&&i()(xt,{isPublicPageSearch:M}),disableHeaderShadow:!0,topbarStyle:h.topbar,leftRightButtonStyle:h.topbarButton,onScroll:Fr(y)?k:void 0,bodyScrollerClassName:U.GZn,...t}}const e={menuType:K.og.Popup,maxHeight:s?"100vh":xr,minHeight:50,disableScroller:!0,scrollerStyle:h.scroller,...t};return s&&y.isDesktop&&(e.maxWidth="100%"),e}),[y,h,t,F,s,r,T,M,k]);return l.createElement(de.Z,_()({},w,{className:U.Oau,ref:d}),i()(Rr,{enableLazyLoading:s},void 0,i()("div",{style:h.body},void 0,i()(he.Z,{}),!y.isMobile&&F,i()(Mr,{})),b&&void 0!==Z&&i()(Pr,{selectedResult:Z}),C&&l.createElement(yt,{ref:a})))}function Rr(e){window.__c={n:"SearchMenuContentsWrapper"};const{enableLazyLoading:t,children:s}=e,r=(0,V.O7)();return t?i()(ue.Z,{fetch:async()=>{var e;await H.Vs(0),await Z.default.waitUntil((()=>void 0!==Z.default.state.currentSpaceStore)),null===(e=r.mobileNative)||void 0===e||e.markTransitionReady({type:"search"})},loading:()=>i()(l.Fragment,{}),render:()=>s}):i()(l.Fragment,{},void 0,s)}function Zr(e){let{isPhone:t,style:s,renderAsPage:r,onClick:n}=e;return t&&(0,ne.Y)("supportsNativeHome")||r?{rightOuterStyle:{display:"none"}}:{right:i()(ce.CancelMenuText,{}),onClickRight:n,rightOuterStyle:s}}function Fr(e){return!!e.isMobile&&(!e.isIOS||e.isMobileNative)}function wr(e){if(!e.isMobile)return L.ZP.isSidePeekPanelOpen()}function Br(e){let{device:t,isPublicAccessPermissionForPage:s}=e;if(!s&&!t.isMobile)return L.ZP.isDebugSidebarOpen()}const Or=l.createContext(null),Dr=l.createContext(null);class Ar extends a.Z{constructor(){super(...arguments),this.inactiveTimer=void 0,this.spaceId=void 0,this.isOpen=!1,this.shouldClearServerResultsOnQueryChange=!1,this.queryResultsSectionRef=l.createRef(),this.searchFilterMenuRef=l.createRef(),this.modalBodyMenuRef=l.createRef(),this.searchResultStore=new D.ZP,this.secondarySearchResultStore=new D.ZP,this.searchCreatedByMeResultStore=new D.ZP,this.searchTaskDBResultStore=new D.ZP,this.searchProjectsResultStore=new D.ZP,this.searchDocsResultStore=new D.ZP,this.searchSearchTeamResultStore=new D.ZP,this.globalFocusedIndex=c.default.createValue(0),this.getStaticContext=o().memoize((()=>({queryResultsSectionRef:this.queryResultsSectionRef,searchFilterMenuRef:this.searchFilterMenuRef,modalBodyMenuRef:this.modalBodyMenuRef,handleSelectResult:this.handleQueryResultSelect,handleRecentPageSelect:this.handleRecentPageSelect,handleQueryChange:this.handleQueryChange,searchResultStore:this.searchResultStore,secondarySearchResultStore:this.secondarySearchResultStore,searchCreatedByMeResultStore:this.searchCreatedByMeResultStore,searchTaskDBResultStore:this.searchTaskDBResultStore,searchProjectsResultStore:this.searchProjectsResultStore,searchDocsResultStore:this.searchDocsResultStore,searchSearchTeamResultStore:this.searchSearchTeamResultStore,globalFocusedIndex:this.globalFocusedIndex}))),this.getStoresContext=o().memoize((e=>({parentStore:e}))),this.renderContent=()=>i()(Or.Provider,{value:this.getStaticContext()},void 0,i()(Dr.Provider,{value:this.getStoresContext(this.props.parentStore)},void 0,i()(Ir,{renderAsPage:this.props.renderAsPage,onClose:this.handleComponentClose}))),this.handleRecentPageSelect=e=>{this.handleSelectResult({...e,context:"recent_pages"})},this.handleQueryResultSelect=e=>{this.handleSelectResult({...e,context:"query_results"})},this.handleComponentOpenClose=()=>{this.isOpen!==O.default.state.open&&(this.isOpen=O.default.state.open,O.default.state.open&&(clearTimeout(this.inactiveTimer),L.ZP.update((e=>({...e,hasScrolled:!1})))))},this.handleComponentClose=()=>{const{device:e}=this.environment,{selectedQueryResult:t,numKeystrokes:s,numServerRequests:r,numLocalRequests:i,hadMetaClick:n}=A.default.state,{serverEventProperties:o}=this.searchResultStore.state,{query:l,hasScrolled:a}=L.ZP.state;if(s>0&&(r>0||i>0)&&!t&&!n&&(O.default.state.openAsPage||O.default.state.open)){const e=Date.now(),t=O.default.state.openedTimeMs,i=O.default.state.sessionId,n=A.default.state.firstKeyStrokeTimeMs;f.EH8(this.environment,{...o,timeToAbandonMs:e-t,timeFromFirstKeyStrokeToAbandonMs:n?e-n:void 0,numKeystrokes:s,numResultsAboveFold:this.getNumResultsAboveFold(),searchSessionId:i,searchSessionFlowNumber:r,hasScrolled:a,numLocalResults:this.getNumLocalResults(),numTotalLocalResults:this.getNumTotalLocalResults(),numVisibleMembers:(0,k.qX)()})}S.IB(),""===l.text.trim()&&L.ZP.reset();const d=w.default.getEligibleGroup({experimentId:"search-shorten-inactive-timer",defaultGroup:"control"});let c=120*v.C0;"control"!==d&&h.g6["search-shorten-inactive-timer"].includes(d)&&(c=parseInt(d,10)*v.C0),this.inactiveTimer&&clearTimeout(this.inactiveTimer),c>0?this.inactiveTimer=window.setTimeout(this.resetState,c):this.resetState(),!this.props.renderAsPage&&e.isMobile&&b.close(),A.default.reset()},this.handlePotentialWebSearchAbandon=e=>{this.props.renderAsPage&&this.handleComponentClose()},this.handleSelectResult=e=>{let{action:t,sectionName:s,context:r,selectedResult:i,allSearchResults:n}=e;const{serverEventProperties:o,store:l}=i,{numKeystrokes:a,hadMetaClick:d}=A.default.state;if(!O.default.state.open&&!O.default.state.openAsPage)return;const{event:c}=t,h=M.DJ(c);"query_results"===r&&(A.default.update((e=>({...e,selectedQueryResult:!0}))),this.searchResultStore.update((e=>({...e,selectedQueryResultQuery:L.ZP.state.query}))));const p=Date.now(),{openedTimeMs:g,sessionId:v}=O.default.state,{firstKeyStrokeTimeMs:S}=A.default.state,{numServerRequests:b}=A.default.state,{query:C}=L.ZP.state,T=(0,k.qX)();f.nLf(this.environment,{...o,context:r,queryStringLength:C.text.trim().length,hasFilters:I.FN(C.filters),activeFilters:C.filters,selectedItemIndex:t.index,selectedItemLocalIndex:{sectionName:s,index:t.indexLocal.indexLocal},numKeystrokes:a,isMetaClick:Boolean(h),isSidebarOpen:L.ZP.isDebugSidebarOpen(),timeToSelectMs:p-g,timeFromFirstKeyStrokeToSelectMs:S?p-S:p-g,sources:null==i?void 0:i.sources,localSources:[...(null==i?void 0:i.localSource)??[]],indexInRecentPages:null==i?void 0:i.indexInRecentPages,timeSinceLastViewedMs:null==i?void 0:i.timeSinceLastViewedMs,hadMetaClick:d,numResultsAboveFold:this.getNumResultsAboveFold(),selectedSearchResultMetadata:this.getSearchResultMetadata(i),selectedSearchResultContent:void 0,allSearchResultMetadata:null==n?void 0:n.slice(0,Ar.MAX_RESULT_TO_TRACK).map((e=>this.getSearchResultMetadata(e))),totalSearchResultCount:null==n?void 0:n.length,searchSessionId:v,searchSessionFlowNumber:b,originalPosition:null==i?void 0:i.originalPosition,numLocalResults:this.getNumLocalResults(),numTotalLocalResults:this.getNumTotalLocalResults(),numVisibleMembers:T});const P=(null==o?void 0:o["server-queryId"])??function(e){let{searchSessionId:t,searchSessionFlowNumber:s}=e;if((0,m.$K)(t)&&(0,m.$K)(s))return`1:${t}:${s}`}({searchSessionId:v,searchSessionFlowNumber:b});let x;"recent_pages"===r?x=u.tY.SearchRecents:"query_results"===r?x=u.tY.SearchQuery:(0,m.t1)(r);y.navigateToSearchResult({searchResult:i,environment:this.environment,pageVisitSource:x,queryId:P,openInNew:h,openInSidePeek:!1}),E.Z.setState({queryId:P,pageId:l.id,timeEntered:new Date}),h?A.default.update((e=>({...e,hadMetaClick:!0}))):this.handleComponentClose()},this.handleQueryChange=e=>{this.shouldClearServerResultsOnQueryChange&&(this.searchResultStore.update((e=>({...e,serverResults:void 0}))),this.secondarySearchResultStore.update((e=>({...e,serverResults:void 0})))),""!==e?(A.default.update((e=>({...e,numKeystrokes:e.numKeystrokes+1}))),L.ZP.updateQueryText(e)):L.ZP.resetQuery({resetFilters:!1})},this.getNumResultsAboveFold=()=>I.MQ({environment:this.environment,searchResultsSection:this.queryResultsSectionRef.current,modalBodyMenu:this.modalBodyMenuRef.current,searchFilterMenu:this.searchFilterMenuRef.current}),this.getNumLocalResults=()=>{var e;return(null===(e=this.searchResultStore.state.localResults)||void 0===e?void 0:e.results.length)??0},this.getNumTotalLocalResults=()=>{var e;return(null===(e=this.searchResultStore.state.localResults)||void 0===e?void 0:e.total)??0},this.getSearchResultMetadata=e=>{const{store:t,highlight:s,sources:r,localSource:i}=e;return d.Z.withListenerIgnored((()=>{var n,o,l;return{blockId:t.id,blockType:t.getType(),lowestNavigableAncestorId:null===(n=t.getNavigableBlockStore())||void 0===n?void 0:n.id,depth:P.qA(t).length,matchesText:Boolean(null==s?void 0:s.text),matchesPathText:Boolean((null==s?void 0:s.pathText)||(null==s?void 0:s.title)),matchesTitle:Boolean(null==s?void 0:s.title),isNavigable:t.isNavigableBlock(),lastEditedTime:t.getLastEditedTime(),isTeamArchived:null===(o=(0,P.VP)(t))||void 0===o?void 0:o.isArchived(),sources:r,localSource:[...i??[]],badges:(null===(l=e.badges)||void 0===l?void 0:l.map((e=>e.type)))??[]}}))},this.getPathText=e=>{const t=[];return P.uJ(e).forEach((e=>{if(x.NZ(e)){var s;const r=(0,g.Q)(null===(s=e.getNavigableBlockStore())||void 0===s?void 0:s.getTitleValue());r&&t.push(r)}else if((0,R.bq)()&&x.Y(e)){const s=e.getName();s&&t.push(s)}})),t},this.handleSpaceChange=()=>{const e=Z.default.state.currentSpaceStore&&Z.default.state.currentSpaceStore.id;this.spaceId!==e&&(this.spaceId=e,this.resetState())},this.resetState=()=>{L.ZP.reset(),O.default.reset(),this.searchResultStore.reset(),this.secondarySearchResultStore.reset(),A.default.reset()}}willMount(){var e;this.spaceId=null===(e=Z.default.state.currentSpaceStore)||void 0===e?void 0:e.id,this.shouldClearServerResultsOnQueryChange="on"===w.default.getGroup("search-clear-results-on-query-change"),(0,B.lO)()}willMountOrUpdate(e){if(e.renderAsPage&&!O.default.state.sessionId){const e=(0,p.ZP)();O.default.update((t=>({...t,open:!1,openAsPage:!0,openedTimeMs:Date.now(),sessionId:e}))),f.wFN(this.environment,{from:"nativeTab-search-direct-link",searchSessionId:e})}}didMount(){this.props.renderAsPage||O.default.addListener(this.handleComponentOpenClose),Z.default.addListener(this.handleSpaceChange),y.potentialWebSearchAbandonEventEmitter.addListener(this.handlePotentialWebSearchAbandon)}willUnmount(){this.resetState(),this.props.renderAsPage||O.default.removeListener(this.handleComponentOpenClose),y.potentialWebSearchAbandonEventEmitter.removeListener(this.handlePotentialWebSearchAbandon),Z.default.removeListener(this.handleSpaceChange),this.inactiveTimer&&(clearTimeout(this.inactiveTimer),this.inactiveTimer=void 0)}renderComponent(){if(F.Z.state.isGlobalSearchHost)return null;if(this.props.renderAsPage)return this.renderContent();const{device:e,mobileNative:t}=this.environment,s=Boolean(O.default.state.open);return i()(q.Z,{open:s,onDismiss:this.handleComponentClose,modalStyle:this.getModalStyle(),disableAnimation:!e.isMobile||(null==t?void 0:t.supportsNativeHomeOnPhone())||!1,renderContent:this.renderContent})}getPublicAccessPermissionForPage(){return I.bC(this.environment)}getSearchResultContent(e,t){return d.Z.withListenerIgnored((()=>{var s;return{title:(0,g.Q)(null===(s=e.getNavigableBlockStore())||void 0===s?void 0:s.getTitleValue()),pathText:this.getPathText(e),highlight:{text:(0,T.fe)(null==t?void 0:t.text),pathText:(0,T.fe)(null==t?void 0:t.pathText)}}}))}getModalStyle(){const{renderAsPage:e}=this.props,t=(0,B.gq)({device:this.environment.device}),s=Br({device:this.environment.device,isPublicAccessPermissionForPage:this.getPublicAccessPermissionForPage().hasPublicAccessPermission}),r=wr(this.environment.device);return{width:"75%",minHeight:50,maxHeight:e?"100vh":"80vh",transform:"translate3d(0,0,0)",background:this.theme.popoverBackground,maxWidth:function(){if(t)return"90vw";let e=660;return s&&(e+=250),r&&(e+=300),e}(),borderRadius:12}}}Ar.displayName="Search",Ar.MAX_RESULT_TO_TRACK=50;const Er=Ar},63334:(e,t,s)=>{s.d(t,{Z:()=>n});var r=s(49085);class i extends r.default{getInitialState(){return{}}}const n=i}}]);