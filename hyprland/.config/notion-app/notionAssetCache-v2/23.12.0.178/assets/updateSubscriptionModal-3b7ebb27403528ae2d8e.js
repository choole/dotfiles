"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3301],{92660:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(23174),o=i.n(n),r=(i(67294),i(83355)),a=i(53953),l=i(44532);class d extends r.Z{renderComponent(){const{render:e}=this.props,{device:t}=this.environment,i=this.props.modalStore.state;return t.isMobile?o()(l.ZP,{ariaLabel:this.props.ariaLabel,open:i.open,popupType:l.ZP.PopupType.SlideUp,origin:this.props.origin,onDismiss:this.props.onDismiss,render:e,style:this.props.style}):o()(a.Z,{ariaLabel:this.props.ariaLabel,open:i.open,preventHideChildrenWhileOpening:!0,render:e,onDismiss:this.props.onDismiss,style:this.props.style,innerStyle:this.props.innerStyle})}}d.displayName="DefaultPopupOrModal"},1063:(e,t,i)=>{i.d(t,{X:()=>c});var n=i(23174),o=i.n(n),r=(i(67294),i(480)),a=i(24405),l=i(5366),d=i(50906),s=i(8323),u=i(42402);function c(e){window.__c={n:"StartupCouponInlineTextLink"};const t=(0,r.O7)(),i=(0,a.yK)((()=>({couponLink:{fontSize:12}})),[]);return o()(u.Z,{href:"https://notionup.typeform.com/to/qYXezfBW",external:!0,style:i.couponLink,onClick:()=>{const i=(0,s.zt)();d.sS1(t,{tier:e.tier,currentTier:i})}},void 0,o()("div",{},void 0,o()(l.FormattedMessage,{id:"startupCouponInlineLink.text",defaultMessage:"Are you a startup?"})))}},78952:(e,t,i)=>{i.d(t,{n:()=>d});var n=i(23174),o=i.n(n),r=(i(67294),i(24405)),a=i(94919),l=i(68785);function d(e){window.__c={n:"LineItem"};const{lineItemData:t,nameStyle:i,priceStyle:n,showZeroPrice:d}=e,s=(0,r.yK)((e=>({container:{marginTop:24},itemContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",lineHeight:1,minHeight:18},name:{fontSize:12,color:e.mediumTextColor,...i||void 0},price:{fontSize:12,color:"promotion"===t.type?"#53A83F":e.regularTextColor,...n||void 0},caption:{fontSize:12,color:e.mediumTextColor},captionContainer:{display:"flex",flexDirection:"column"}})),[t,i,n]);let u="-";return t.price&&(t.price.amount>0||d)&&(u=o()(a.W,{cost:t.price.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})),o()("div",{style:s.itemContainer},void 0,o()("div",{style:s.captionContainer},void 0,o()("span",{style:s.name},void 0,t.name),t.subtitle&&o()("span",{style:s.caption},void 0,t.subtitle)),"calculating"===t.type?o()(l.Z,{}):o()("span",{style:s.price},void 0,u))}},67773:(e,t,i)=>{i.d(t,{G:()=>d});var n=i(23174),o=i.n(n),r=(i(67294),i(94919)),a=i(5366),l=i(69653);function d(e){window.__c={n:"OrderSummaryAccountBalanceItem"};const t=(0,l.hr)(),{accountBalance:i}=e;return 0===i.amount?null:o()("div",{style:t.itemContainer},void 0,o()("div",{style:t.captionContainer},void 0,o()("span",{style:t.name},void 0,o()(a.FormattedMessage,{id:"subscriptionHelpers.lineItems.balance",defaultMessage:"Balance"}))),o()("span",{style:t.credit},void 0,o()(r.W,{cost:i.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})))}},43761:(e,t,i)=>{i.d(t,{T:()=>d});var n=i(23174),o=i.n(n),r=(i(67294),i(94919)),a=i(5366),l=i(69653);function d(e){window.__c={n:"OrderSummaryDiscountItem"};const t=(0,l.hr)(),{discount:i,promo:n}=e;return o()("div",{style:t.itemContainer},void 0,o()("div",{style:t.captionContainer},void 0,o()("span",{style:t.name},void 0,o()(a.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo",defaultMessage:"Coupon"}))),n.duration_in_months?o()("span",{style:t.caption},void 0,o()(a.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo.subtitle",defaultMessage:"Valid for {durationInMonths} months",values:{durationInMonths:n.duration_in_months}})):void 0,o()("span",{style:t.credit},void 0,o()(r.W,{cost:i.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})))}},24862:(e,t,i)=>{i.d(t,{r:()=>d});var n=i(23174),o=i.n(n),r=(i(67294),i(94919)),a=i(5366),l=i(69653);function d(e){window.__c={n:"OrderSummarySubtotalItem"};const t=(0,l.hr)(),{subtotal:i}=e;return o()("div",{style:t.itemContainer},void 0,o()("div",{style:t.captionContainer},void 0,o()("span",{style:t.name},void 0,o()(a.FormattedMessage,{id:"subscriptionHelpers.lineItems.subTotal",defaultMessage:"Subtotal"}))),o()("span",{style:t.price},void 0,o()(r.W,{cost:i.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})))}},26156:(e,t,i)=>{i.d(t,{u:()=>s});var n=i(23174),o=i.n(n),r=(i(67294),i(94919)),a=i(5366),l=i(69653),d=i(68785);function s(e){window.__c={n:"OrderSummaryTaxItem"};const t=(0,l.hr)(),{tax:i,calculatingTax:n}=e;return o()("div",{style:t.itemContainer},void 0,o()("div",{style:t.captionContainer},void 0,o()("span",{style:t.name},void 0,o()(a.FormattedMessage,{id:"subscriptionHelpers.lineItems.taxIfApplicable.title",defaultMessage:"Tax if applicable"}))),o()("span",{style:t.price},void 0,n?o()(d.Z,{}):0===i.amount?"—":o()(r.W,{cost:i.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})))}},1172:(e,t,i)=>{i.r(t),i.d(t,{default:()=>We});var n=i(23174),o=i.n(n),r=i(67294),a=i(480),l=i(81954),d=i(24405),s=i(53397),u=i(97880),c=i(82990),p=i(5366),m=i(17153),g=i(21115),y=i(34859),f=i(73428),v=i(11066),b=i(61519),h=i(18647),S=i(92660),M=i(65734),x=i(10161);function w(e){window.__c={n:"FeatureGateSwitch"};const{featureGateId:t,whenEnabled:i,whenDisabled:n,disableExposureLogging:o}=e;return function(e){const{featureGateId:t,disableExposureLogging:i}=e;return(0,l.VK)((()=>x.default.checkGate(t,i)),[t,i])}({featureGateId:t,disableExposureLogging:o})?i:n}var T=i(19234);function C(){return(0,d.yK)((e=>({container:{width:350,display:"flex",marginBottom:72},paymentDetailsContainer:{width:175},paymentDetailsLineItem:{display:"flex",fontSize:14,color:e.regularTextColor,fontWeight:c.Z.fontWeight.regular,marginBottom:8,alignItems:"center"},billedToContainer:{width:175},title:{fontSize:12,color:e.lightTextColor,fontWeight:c.Z.fontWeight.medium,marginBottom:4},text:{fontSize:14,color:e.regularTextColor,fontWeight:c.Z.fontWeight.regular,marginBottom:8},iconStyle:{width:30,height:20,marginRight:5}})),[])}function I(){return o()(p.FormattedMessage,{id:"subscriptionUpdateModal.billedTo",defaultMessage:"Billed to"})}function F(){return o()(p.FormattedMessage,{id:"subscriptionUpdateModal.paymentDetails",defaultMessage:"Payment details"})}function A(e){window.__c={n:"BillingAddress"};const{address:t}=e,i=(0,p.useIntl)(),n=C(),r=i.formatList([t.addressLine1,t.addressLine2].filter(Boolean),{type:"conjunction",style:"narrow"}),a=i.formatList([t.state,t.country,t.zipCode].filter(Boolean),{type:"conjunction",style:"narrow"}),l=[t.name,t.businessName,r,a].filter(Boolean);return o()("div",{style:n.text},void 0,l.map(((e,t)=>o()("div",{},t,e))))}function O(e){window.__c={n:"PaymentDetails"};const{stripeData:t}=e,i=C();if("charge_automatically"!==t.billing||!t.brand||!t.last4)return null;let n=null;switch(t.brand.toLowerCase()){case"visa":n=s.Z.visa(i.iconStyle);break;case"mastercard":n=s.Z.mastercard(i.iconStyle);break;case"amex":n=s.Z.amex(i.iconStyle)}return o()("div",{style:i.paymentDetailsLineItem},void 0,n,`•••• ${t.last4}`)}function _(e){window.__c={n:"PaymentDetailsAndBillingAddress"};const{data:t}=e,i=C(),n=(0,g.XX)(t);return n?o()("div",{style:i.container},void 0,o()("div",{style:i.paymentDetailsContainer},void 0,o()("div",{style:i.title},void 0,o()(F,{})),o()("div",{},void 0,o()(O,{stripeData:n}))),T.A(n.address)?o()("div",{style:i.billedToContainer},void 0,o()("div",{style:i.title},void 0,o()(I,{})),o()("div",{},void 0,o()(A,{address:n.address}))):null):null}i(21703);var P=i(50906),Z=i(24684),B=i(95477);function D(e){const t=(0,Z.MZ)(B.default,e.intl,e.quantity,e.additionalAmount,e.alwaysShowCents);return{free:{year:t.price.year.free.formattedAmount,yearAmount:t.price.year.free.amount,month:t.price.month.free.formattedAmount,monthAmount:t.price.month.free.amount},team_free:{year:t.price.year.free.formattedAmount,yearAmount:t.price.year.free.amount,month:t.price.month.free.formattedAmount,monthAmount:t.price.month.free.amount},personal_free:{year:t.price.year.free.formattedAmount,yearAmount:t.price.year.free.amount,month:t.price.month.free.formattedAmount,monthAmount:t.price.month.free.amount},student:{year:t.price.year.education.formattedAmount,yearAmount:t.price.year.education.amount,month:t.price.month.education.formattedAmount,monthAmount:t.price.month.education.amount},personal:{year:t.price.year.pro.formattedAmount,yearAmount:t.price.year.pro.amount,month:t.price.month.pro.formattedAmount,monthAmount:t.price.month.pro.amount},plus:{year:t.price.year.team.formattedAmount,yearAmount:t.price.year.team.amount,month:t.price.month.team.formattedAmount,monthAmount:t.price.month.team.amount},team:{year:t.price.year.team.formattedAmount,yearAmount:t.price.year.team.amount,month:t.price.month.team.formattedAmount,monthAmount:t.price.month.team.amount},business:{year:t.price.year.business.formattedAmount,yearAmount:t.price.year.business.amount,month:t.price.month.business.formattedAmount,monthAmount:t.price.month.business.amount},enterprise:{year:t.price.year.enterprise.formattedAmount,yearAmount:t.price.year.enterprise.amount,month:t.price.month.enterprise.formattedAmount,monthAmount:t.price.month.enterprise.amount}}[e.subscriptionTier]}var k=i(18168);function U(){return(0,d.yK)((e=>({discountText:{color:e.invoiceGreen,fontSize:14},icon:{width:16,height:16},mainTextSelected:{fontWeight:c.Z.fontWeight.medium,color:e.regularTextColor,fontSize:14},mainTextUnselected:{color:e.mediumTextColor,fontSize:14},priceText:{fontSize:12,color:e.mediumTextColor,marginTop:2},row:{display:"flex",alignItems:"center",justifyContent:"center",gap:4,lineHeight:"14px"},sectionHeader:{display:"flex",alignItems:"center",marginBottom:11,fontSize:11,fontWeight:c.Z.fontWeight.semibold,color:e.mediumTextColor}})),[])}function W(e){window.__c={n:"Section"};const{header:t,children:i}=e,n=U();return o()("div",{},void 0,o()("div",{style:n.sectionHeader},void 0,t),i)}function E(e){window.__c={n:"BillingIntervalOption"};const{isSelected:t,billingInterval:i,subscriptionTier:n,intl:a,hideDetails:l}=e,d=U(),s=t?d.mainTextSelected:d.mainTextUnselected;let u;switch(i){case"month":u=o()(p.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.monthly",defaultMessage:"Monthly"});break;case"year":u=o()(p.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.yearly",defaultMessage:"Yearly"});break;default:throw new Error(`Unsupported billing interval: ${i}`)}const c=D({subscriptionTier:n,intl:a})[i];return r.createElement(r.Fragment,null,o()("div",{style:d.row},void 0,o()("div",{style:s},void 0,u),"year"===i?o()("div",{style:d.discountText},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.yearlyDiscount",defaultMessage:"{percent}% off",values:{percent:20}})):null),l?null:o()("div",{style:d.priceText},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.memberPrice",defaultMessage:"{memberPrice} / member / month",values:{memberPrice:c}})))}function z(e){window.__c={n:"SpaceSubscriptionOrderOptions"};const t=(0,p.useIntl)(),i=(0,a.O7)(),[n,d,s]=(0,l.VK)((()=>{const e=f.Z.state;return[e.subscriptionTier,e.temporaryBillingInterval,e.billingInterval]}),[]),u=(0,r.useMemo)((()=>[{key:"month",isDisabled:"month"===s,render:()=>o()(E,{isSelected:"month"===d,billingInterval:"month",subscriptionTier:n,intl:t,hideDetails:!0,isDisabled:"year"===s})},{key:"year",isDisabled:"year"===s,render:()=>o()(E,{isSelected:"year"===d,billingInterval:"year",subscriptionTier:n,intl:t,hideDetails:!0,isDisabled:"year"===s})}]),[s,d,n,t]);return r.createElement(r.Fragment,null,o()(W,{header:o()(p.FormattedMessage,{id:"spaceSubscriptionSettings.orderOptions.billingPeriodSection.header",defaultMessage:"Billing period"})},void 0,o()(k.Z,{items:u,value:d,onChange:e=>{P.b0I(i,{billingInterval:e}),f.Z.update((t=>({...t,temporaryBillingInterval:e})))}})))}var V=i(13991),H=i(94919),L=i(7057),K=i(32056),G=i(3791),R=i(47425),X=i(94191),j=i(62216),q=i(78291),Y=i(64921),N=i(32617),$=i(1063),Q=i(96796),J=i(78952),ee=i(42922);function te(){return o()(p.FormattedMessage,{id:"subscriptionUpdateModal.confirmationButton",defaultMessage:"Confirm changes"})}function ie(e){window.__c={n:"MidtermConfirmationButton"};const{disabled:t,onClickUpgrade:i}=e,n=(0,d.yK)((e=>({button:{width:"100%",height:40,marginTop:20}})),[]);return o()(ee.Z,{disabled:t,style:n.button,onClick:i},void 0,o()(te,{}))}function ne(e){window.__c={n:"SpaceSubscriptionUpdateOrderSummary"};const{data:t,promo:i,subscriptionTier:n,addOnFeature:r,onlyShowAddOn:d,temporaryBillingInterval:s,taxAmount:u,calculatingTax:c}=e,y=pe(),f=(0,a.O7)(),v=(0,N.mn)(),b=(0,l.VK)((()=>{var e;return(0,j.px)(f)&&!(0,G.de)(null===(e=q.default.state.data)||void 0===e?void 0:e.addOns)&&v}),[v,f])?"ai_fifty_percent":void 0,h=(0,l.VK)((()=>{const e=q.default.state.data;return("subscribed_admin"===(null==e?void 0:e.type)?e.customerData.stripe.currencyCode:void 0)??"USD"}),[]),{payAmount:S,lineItems:M}=g.uN({subscriptionTier:n,currencyCode:h,promo:i,data:t,addOnFeature:r,onlyShowAddOn:d,taxAmount:u,calculatingTax:c,billingInterval:s,coupon:b});return o()("div",{style:y.container},void 0,o()("label",{style:y.header},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.header",defaultMessage:"Order summary"})),o()(le,{data:t}),o()(de,{totalAmount:S}),o()(oe,{data:t,subscriptionTier:n,addOnFeature:r,onlyShowAddOn:d,temporaryBillingInterval:s,totalAmount:S,lineItems:M,coupon:b}),o()(ie,{disabled:!1,onClickUpgrade:async()=>m.Mg(f,b)}),o()(Q.EO,{addOnFeature:r,onlyShowAddOn:d}))}function oe(e){window.__c={n:"ExpandedBillingDetails"};const{data:t,subscriptionTier:i,addOnFeature:n,onlyShowAddOn:r,temporaryBillingInterval:a,totalAmount:d,lineItems:s,coupon:u}=e,{storeState:c}=(0,l.VK)((()=>({storeState:f.Z.state})),[]);if(!c.open||c.open&&!c.isExpandedView)return null;const p=!r,m=void 0!==n;return o()("div",{style:{marginTop:12}},void 0,o()("div",{style:{display:"flex",flexDirection:"column",gap:16}},void 0,p?o()(ce,{subscriptionTier:i,addOnFeature:n,data:t,isAddOnFeature:!1,temporaryBillingInterval:a,coupon:u}):null,m?o()(ce,{subscriptionTier:i,addOnFeature:n,data:t,isAddOnFeature:!0,temporaryBillingInterval:a,coupon:u}):null),g.Fu(i)&&o()($.X,{tier:i}),o()(ue,{style:{marginBottom:24,display:"flex",flexDirection:"column",gap:4,marginTop:16},lineItems:s}),o()(se,{totalAmount:d}))}function re(e){window.__c={n:"PendingChange"};const t=pe();return o()("div",{style:t.pendingChangesContainer},void 0,o()("div",{style:t.topSection},void 0,o()("div",{style:t.checkmarkSection},void 0,s.Z.calendar(t.calendar)),o()("label",{style:t.subTitle},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.pendingChange.header",defaultMessage:"Effective {periodEnd}",values:{periodEnd:(0,L.Yx)(e.periodEnd,"medium",V.SP)}}))),o()("div",{style:t.subTitleDescription},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.planWillChangeAtTheEnd.message",defaultMessage:"Billing period will change at the end of your billing period."})))}function ae(e){window.__c={n:"EffectiveToday"};const t=pe();return o()("div",{},void 0,o()("div",{style:t.topSection},void 0,o()("div",{style:t.checkmarkSection},void 0,s.Z.checkmark(t.checkmark)),o()("label",{style:t.subTitle},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.effectiveToday.header",defaultMessage:"Effective today"}))),o()("div",{style:t.subTitleDescription},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.planWillChangeToday.message",defaultMessage:"{planType, select, add_ons {Add-on} other {Plan}} will change today",values:{planType:e.view}})))}function le(e){window.__c={n:"ImmediateOrPendingChangeMessage"};const{storeState:t}=(0,l.VK)((()=>({storeState:f.Z.state})),[]);if(!t.open)return null;const{view:i,billingInterval:n,temporaryBillingInterval:r}=t;if((0,X.rO)(i,n,r))return o()(ae,{view:i});if((0,X.Z_)(i,n,r)){const t=(0,g.XX)(e.data);return t?o()(re,{periodEnd:t.periodEnd}):null}return null}function de(e){window.__c={n:"TotalPriceToggle"};const{totalAmount:t}=e,{storeState:i}=(0,l.VK)((()=>({storeState:f.Z.state})),[]),n=pe(),d=(0,a.O7)();if(!i.open)return null;const u=i.isExpandedView;if("billing_interval"===i.view&&i.billingInterval===i.temporaryBillingInterval)return o()("div",{style:n.totalPriceContainer},void 0,o()("div",{style:n.totalPriceHeader},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateOrderSummary.total",defaultMessage:"Total"})),o()("div",{style:n.totalPrice},void 0,"-"));const c="year"===i.billingInterval&&"month"===i.temporaryBillingInterval;return o()(Y.Z,{onClick:()=>u?m.OT(d):m.bX(d),style:n.totalPriceContainer},void 0,c?r.createElement(r.Fragment,null,o()("div",{style:n.estimatedFuturePriceHeader},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateOrderSummary.estimatedFuturePrice",defaultMessage:"Estimated future price"})),o()("div",{style:n.estimatedFuturePrice},void 0,o()(H.W,{cost:t,trailingZeroDisplay:"stripIfInteger"}),o()("div",{style:n.estimatedFuturePriceButton},void 0,u?s.Z.chevronUpRounded(n.estimatedFuturePriceIcon):s.Z.chevronDown(n.estimatedFuturePriceIcon)))):r.createElement(r.Fragment,null,o()("div",{style:n.totalPriceHeader},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateOrderSummary.estimatedPrice",defaultMessage:"Estimated price"})),o()("div",{style:n.totalPrice},void 0,o()(H.W,{cost:t,trailingZeroDisplay:"stripIfInteger"}),o()("div",{style:n.button},void 0,u?s.Z.chevronUpRounded(n.icon):s.Z.chevronDown(n.icon)))))}function se(e){const{totalAmount:t}=e;return o()(J.n,{lineItemData:{price:t,type:"standard",name:o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateOrderSummary.total",defaultMessage:"Total"})}})}function ue(e){const{style:t,lineItems:i}=e,n=i.map((e=>o()(J.n,{lineItemData:e},`${e.name}:${e.price}:${e.type}`)));return o()("div",{style:t},void 0,n)}function ce(e){window.__c={n:"SpaceSubscriptionGrossOrder"};const{data:t,subscriptionTier:i,addOnFeature:n,isAddOnFeature:r,temporaryBillingInterval:a,coupon:l}=e,s=(0,p.useIntl)(),c=function(e,t){if(t)return o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.ai.addOn",defaultMessage:"Notion AI"});if((0,R.QM)(e)||(0,R.iJ)(e))return;switch(e){case"personal":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.singlePlayerPlusPlan",defaultMessage:"Plus plan with a 1-member limit"});case"plus":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.plusPlan",defaultMessage:"Plus plan"});case"business":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.businessPlan",defaultMessage:"Business plan"});case"enterprise":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.enterprisePlan",defaultMessage:"Enterprise plan"});default:(0,u.t1)(e)}}(i,r),m=function(e,t,i,n,r,a,l){const d=g.su(t),s=g.GD(a);let c;if(n&&void 0!==r){let e=0;"ai_fifty_percent"===l&&(e-="month"===a?500:400),c=g.v3({addOnFeature:r,billingInterval:s,quantity:1,getMonthlyPrice:!0,intl:i,additionalAmount:e}).formattedTotal}else{if((0,R.QM)(e)||(0,R.iJ)(e))return null;c=D({subscriptionTier:e,intl:i})[s]}switch(s){case"year":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedYearly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed yearly",values:{br:o()("br",{}),price:c,numberOfMembers:d}});case"month":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedMonthly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed monthly",values:{br:o()("br",{}),price:c,numberOfMembers:d}});default:(0,u.t1)(s)}}(i,t,s,r,n,a,l),y=g.su(t),{planAmount:f}=g.ZT({memberCount:y,subscriptionTier:i,addOnFeature:n,isAddOnFeature:r,billingInterval:a??"year",coupon:l}),v=(0,d.yK)((e=>({container:{display:"flex",justifyContent:"space-between"},item:{},title:{fontSize:14,marginBottom:4,lineHeight:1},subtitle:{color:e.mediumTextColor,fontSize:12},price:{fontSize:14}})),[]);return o()("div",{style:v.container},void 0,o()("div",{style:v.item},void 0,o()("div",{style:v.title},void 0,c),o()("div",{style:v.subtitle},void 0,m)),o()("div",{style:v.price},void 0,(0,K.Dx)({amount:f,currency:"dollar",intl:s})))}function pe(){return(0,d.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16,width:250,padding:4},header:{fontSize:16,color:e.regularTextColor,fontWeight:c.Z.fontWeight.semibold,marginBottom:11},totalPriceContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",lineHeight:1,padding:4,borderRadius:4,margin:-4},totalPriceHeader:{fontSize:14,color:e.regularTextColor,fontWeight:c.Z.fontWeight.semibold},totalPrice:{fontSize:20,color:e.regularTextColor,fontWeight:c.Z.fontWeight.semibold,display:"flex",alignItems:"center"},estimatedFuturePriceHeader:{fontSize:14,color:e.regularTextColor},estimatedFuturePrice:{fontSize:14,color:e.regularTextColor,display:"flex",alignItems:"center"},estimatedFuturePriceIcon:{width:12,height:12},estimatedFuturePriceButton:{marginLeft:4},icon:{width:18,height:18},button:{marginLeft:6},subTitle:{fontSize:14,color:e.regularTextColor,fontWeight:c.Z.fontWeight.medium},subTitleDescription:{fontSize:14,color:e.mediumTextColor,fontWeight:c.Z.fontWeight.regular},couponLink:{fontSize:12},checkmark:{width:18,height:18,marginTop:2,color:e.blueColor},checkmarkSection:{paddingRight:6},calendar:{width:18,height:18,marginTop:2,color:e.regularTextColor},topSection:{display:"flex"},pendingChangesContainer:{width:260}})),[])}var me=i(69653),ge=i(30751),ye=i(68785),fe=i(67773),ve=i(43761),be=i(24862),he=i(26156);function Se(e){window.__c={n:"SpaceSubscriptionUpdateOrderSummaryUsingPrices"};const{data:t,subscriptionTier:i,addOnFeature:n,onlyShowAddOn:r,temporaryBillingInterval:d,calculatingTax:s,taxAmount:u,promo:c}=e,y=Ze(),f=(0,a.O7)(),v=(0,N.mn)(),b=(0,l.VK)((()=>{var e;return(0,j.px)(f)&&!(0,G.de)(null===(e=q.default.state.data)||void 0===e?void 0:e.addOns)&&v}),[v,f])?"ai_fifty_percent":void 0,h=me.Zr(c),S=me.Lp({subscriptionTier:e.subscriptionTier,onlyShowAddOn:e.onlyShowAddOn,addOnFeature:e.addOnFeature}),M=(0,l.VK)((()=>S.map((e=>ge.Z.getPrice(f,(t=>t.product===e&&t.billingInterval===d))))),[f,S,d]);if(M.some((e=>!e.isLoaded)))return o()(ye.Z,{});const x=M.map((e=>e.result)).filter(Boolean),w=x[0].unitAmount.currencyValue,T=g.su(t),C=me.cv({prices:x,quantity:T,coupon:b}),I=me.VT({calculatingTax:s,taxAmount:u,currencyValue:w}),F=me.rF({prices:x,quantity:T,promo:h}),A=me.Et(t,w),O=C.plus(I).minus(F).minus(A),_=O.amount<0?O.withMultipliedAmount(0):O;return o()("div",{style:y.container},void 0,o()("label",{style:y.header},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateModal.orderSummary.header",defaultMessage:"Order summary"})),o()(Me,{data:t}),o()(Te,{totalAmount:_}),o()(Ce,{prices:x,data:t,subscriptionTier:i,totalAmount:_,coupon:b,subtotal:C,tax:I,calculatingTax:s,discount:F,promo:h,accountBalance:A}),o()(ie,{disabled:!1,onClickUpgrade:async()=>m.Mg(f,b)}),o()(Q.EO,{addOnFeature:n,onlyShowAddOn:r}))}function Me(e){window.__c={n:"ImmediateOrPendingChangeMessage"};const{storeState:t}=(0,l.VK)((()=>({storeState:f.Z.state})),[]);if(!t.open)return null;const{view:i,billingInterval:n,temporaryBillingInterval:r}=t;if((0,X.rO)(i,n,r))return o()(xe,{view:i});if((0,X.Z_)(i,n,r)){const t=(0,g.XX)(e.data);return t?o()(we,{periodEnd:t.periodEnd}):null}return null}function xe(e){window.__c={n:"EffectiveToday"};const t=Ze();return o()("div",{},void 0,o()("div",{style:t.topSection},void 0,o()("div",{style:t.checkmarkSection},void 0,s.Z.checkmark(t.checkmark)),o()("label",{style:t.subTitle},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.effectiveToday.header",defaultMessage:"Effective today"}))),o()("div",{style:t.subTitleDescription},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.planWillChangeToday.message",defaultMessage:"{planType, select, add_ons {Add-on} other {Plan}} will change today",values:{planType:e.view}})))}function we(e){window.__c={n:"PendingChange"};const t=Ze();return o()("div",{style:t.pendingChangesContainer},void 0,o()("div",{style:t.topSection},void 0,o()("div",{style:t.checkmarkSection},void 0,s.Z.calendar(t.calendar)),o()("label",{style:t.subTitle},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.pendingChange.header",defaultMessage:"Effective {periodEnd}",values:{periodEnd:(0,L.Yx)(e.periodEnd,"medium",V.SP)}}))),o()("div",{style:t.subTitleDescription},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.planWillChangeAtTheEnd.message",defaultMessage:"Billing period will change at the end of your billing period."})))}function Te(e){window.__c={n:"TotalPriceToggle"};const{totalAmount:t}=e,i=Ze(),n=(0,a.O7)(),{storeState:d}=(0,l.VK)((()=>({storeState:f.Z.state})),[]);if(!d.open)return null;if("billing_interval"===d.view&&d.billingInterval===d.temporaryBillingInterval)return o()("div",{style:i.totalPriceContainer},void 0,o()("div",{style:i.totalPriceHeader},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateOrderSummary.total",defaultMessage:"Total"})),o()("div",{style:i.totalPrice},void 0,"-"));const u=d.isExpandedView,c="year"===d.billingInterval&&"month"===d.temporaryBillingInterval;return o()(Y.Z,{onClick:()=>u?m.OT(n):m.bX(n),style:i.totalPriceContainer},void 0,c?r.createElement(r.Fragment,null,o()("div",{style:i.estimatedFuturePriceHeader},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateOrderSummary.estimatedFuturePrice",defaultMessage:"Estimated future price"})),o()("div",{style:i.estimatedFuturePrice},void 0,o()(H.W,{cost:t.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"}),o()("div",{style:i.estimatedFuturePriceButton},void 0,u?s.Z.chevronUpRounded(i.estimatedFuturePriceIcon):s.Z.chevronDown(i.estimatedFuturePriceIcon)))):r.createElement(r.Fragment,null,o()("div",{style:i.totalPriceHeader},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateOrderSummary.estimatedPrice",defaultMessage:"Estimated price"})),o()("div",{style:i.totalPrice},void 0,o()(H.W,{cost:t.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"}),o()("div",{style:i.button},void 0,u?s.Z.chevronUpRounded(i.icon):s.Z.chevronDown(i.icon)))))}function Ce(e){window.__c={n:"ExpandedBillingDetails"};const{prices:t,data:i,subscriptionTier:n,totalAmount:r,subtotal:a,tax:d,calculatingTax:s,discount:u,promo:c,coupon:p,accountBalance:m}=e,y=Ze(),{storeState:v}=(0,l.VK)((()=>({storeState:f.Z.state})),[]);return v.open&&v.isExpandedView?o()("div",{style:y.container},void 0,o()(Ie,{prices:t,data:i,coupon:p}),g.Fu(n)&&o()($.X,{tier:n}),o()(_e,{subtotal:a,tax:d,calculatingTax:s,discount:u,promo:c,coupon:p,accountBalance:m}),o()(Pe,{totalAmount:r})):null}function Ie(e){const{data:t,prices:i,coupon:n}=e;return r.createElement(r.Fragment,null,i.map((e=>o()(Fe,{price:e,data:t,coupon:n},e.externalId))))}function Fe(e){window.__c={n:"SpaceSubscriptionGrossOrderItem"};const{price:t,data:i,coupon:n}=e,r=g.su(i),a=t.getCostPerBillingInterval({quantity:r,coupon:n}),l=(0,d.yK)((e=>({container:{display:"flex",justifyContent:"space-between"},item:{},title:{fontSize:14,marginBottom:4,lineHeight:1},subtitle:{color:e.mediumTextColor,fontSize:12},price:{fontSize:14}})),[]);return o()("div",{style:l.container},void 0,o()("div",{style:l.item},void 0,o()("div",{style:l.title},void 0,o()(Ae,{price:t})),o()("div",{style:l.subtitle},void 0,o()(Oe,{price:t,data:i,coupon:n}))),o()("div",{style:l.price},void 0,o()(H.W,{cost:a.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})))}function Ae(e){const{price:t}=e;switch(t.product){case"free":case"student":return null;case"ai":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateModal.orderSummary.ai.addOn",defaultMessage:"Notion AI"});case"personal":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateModal.orderSummary.singlePlayerPlusPlan",defaultMessage:"Plus plan with a 1-member limit"});case"plus":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateModal.orderSummary.plusPlan",defaultMessage:"Plus plan"});case"business":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateModal.orderSummary.businessPlan",defaultMessage:"Business plan"});case"enterprise":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateModal.orderSummary.enterprisePlan",defaultMessage:"Enterprise plan"});default:(0,u.t1)(t.product)}}function Oe(e){const{price:t,data:i,coupon:n}=e,r=g.su(i),a=g.GD(t.billingInterval),l=t.getMonthlyUnitCost(n),d=o()(H.W,{cost:l.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"});switch(a){case"year":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateModal.orderSummary.planSubtitle.billedYearly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed yearly",values:{br:o()("br",{}),price:d,numberOfMembers:r}});case"month":return o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateModal.orderSummary.planSubtitle.billedMonthly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed monthly",values:{br:o()("br",{}),price:d,numberOfMembers:r}});default:(0,u.t1)(a)}}function _e(e){const{subtotal:t,tax:i,calculatingTax:n,discount:r,promo:a,coupon:l,accountBalance:d,style:s}=e;return o()("div",{style:s},void 0,o()(be.r,{subtotal:t}),o()(he.u,{tax:i,calculatingTax:n}),a&&!l?o()(ve.T,{discount:r,promo:a}):void 0,o()(fe.G,{accountBalance:d}))}function Pe(e){const{totalAmount:t}=e,i=me.hr();return o()("div",{style:i.itemContainer},void 0,o()("div",{style:i.captionContainer},void 0,o()("span",{style:i.totalName},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateModal.orderSummary.totalForToday",defaultMessage:"Total for today"}))),o()("span",{style:i.totalPrice},void 0,o()(H.W,{cost:t.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})))}function Ze(){return(0,d.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16,width:250,padding:4},header:{fontSize:16,color:e.regularTextColor,fontWeight:c.Z.fontWeight.semibold,marginBottom:11},totalPriceContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",lineHeight:1,padding:4,borderRadius:4,margin:-4},totalPriceHeader:{fontSize:14,color:e.regularTextColor,fontWeight:c.Z.fontWeight.semibold},totalPrice:{fontSize:20,color:e.regularTextColor,fontWeight:c.Z.fontWeight.semibold,display:"flex",alignItems:"center"},estimatedFuturePriceHeader:{fontSize:14,color:e.regularTextColor},estimatedFuturePrice:{fontSize:14,color:e.regularTextColor,display:"flex",alignItems:"center"},estimatedFuturePriceIcon:{width:12,height:12},estimatedFuturePriceButton:{marginLeft:4},icon:{width:18,height:18},button:{marginLeft:6},subTitle:{fontSize:14,color:e.regularTextColor,fontWeight:c.Z.fontWeight.medium},subTitleDescription:{fontSize:14,color:e.mediumTextColor,fontWeight:c.Z.fontWeight.regular},couponLink:{fontSize:12},checkmark:{width:18,height:18,marginTop:2,color:e.blueColor},checkmarkSection:{paddingRight:6},calendar:{width:18,height:18,marginTop:2,color:e.regularTextColor},topSection:{display:"flex"},pendingChangesContainer:{width:260}})),[])}function Be(e){window.__c={n:"BaseSpaceSubscriptionUpdateModal"};const t=(0,d.yK)((e=>({modal:{fontSize:14,textAlign:"left",display:"flex"},cancelButton:{position:"absolute",top:24,right:24,background:e.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},closeIcon:{width:14,fill:e.mediumTextColor},hovered:{background:e.buttonPressedBackground}})),[]),i=(0,a.O7)();return o()("div",{style:t.modal},void 0,o()("div",{},void 0,o()(v.Z,{onClick:()=>{m.cM(i)},style:t.cancelButton,hoveredStyle:t.hovered},void 0,s.Z.closeSmall(t.closeIcon))),o()(De,{data:e.data}))}function De(e){window.__c={n:"SpaceSubscriptionUpdateModalContent"};const{data:t}=e,i=Ue(),{storeState:n}=(0,l.VK)((()=>({storeState:f.Z.state})),[]);if(!t||!n.open)return null;const a="billing_interval"===n.view?n.temporaryBillingInterval:n.billingInterval;if(!a)return null;const d="plans"===n.view?i.modalContentBody:i.shorterModalContentBody;return r.createElement(r.Fragment,null,o()("div",{},void 0,o()(h.Z,{type:y.Z.Y,showScrollToBottomIndicator:!0},void 0,o()(ke,{storeState:n}),o()("div",{style:d},void 0,o()(_,{data:t})))),o()("div",{style:i.sidebar},void 0,o()("div",{style:i.modalContentSidebar},void 0,o()(h.Z,{type:y.Z.Y},void 0,o()(w,{featureGateId:"price_objects-paid_to_paid_update",whenEnabled:o()(Se,{data:t,promo:void 0,subscriptionTier:n.temporarySubscriptionTier??n.subscriptionTier,onlyShowAddOn:"add_ons"===n.view,taxAmount:n.taxAmount,calculatingTax:n.calculatingTax,temporaryBillingInterval:a,addOnFeature:n.addOnFeature}),whenDisabled:o()(ne,{data:t,promo:void 0,subscriptionTier:n.temporarySubscriptionTier??n.subscriptionTier,onlyShowAddOn:"add_ons"===n.view,taxAmount:n.taxAmount,calculatingTax:n.calculatingTax,temporaryBillingInterval:a,addOnFeature:n.addOnFeature})})))))}function ke(e){window.__c={n:"ModalContent"};const{storeState:t}=e,i=Ue();let n=null;const a=t.view;switch(a){case"add_ons":n=r.createElement(r.Fragment,null,o()("div",{style:i.modalContentBody},void 0,o()(M.Q,{subscriptionTier:t.subscriptionTier,addOnFeature:t.addOnFeature,onlyShowAddOn:!0}),o()(b.Z,{size:0})));break;case"billing_interval":n=r.createElement(r.Fragment,null,o()("div",{style:i.billingIntervalBody},void 0,o()("div",{style:i.primaryTextStyle},void 0,o()(p.FormattedMessage,{id:"spaceSubscriptionUpdateModal.billingInterval.title",defaultMessage:"Change billing period"})),o()(z,{}),o()(b.Z,{size:0})));break;case"plans":if(!t.temporarySubscriptionTier)return null;n=o()("div",{style:i.modalContentBody},void 0,o()(M.Q,{subscriptionTier:t.temporarySubscriptionTier,onlyShowAddOn:!1}),o()(b.Z,{size:0}));break;case"default":n=o()("div",{style:i.modalContentBody},void 0,o()(M.Q,{subscriptionTier:t.subscriptionTier,onlyShowAddOn:!1}),o()(b.Z,{size:0}));break;default:(0,u.t1)(a)}return n}function Ue(){return(0,d.yK)((e=>({primaryTextStyle:{fontWeight:c.Z.fontWeight.bold,fontSize:20,lineHeight:1.1,marginTop:24},modal:{background:e.popoverBackground,borderRadius:12,width:750,maxHeight:760,display:"flex"},modalContent:{flex:1,maxWidth:"60%",backgroundColor:e.modalBackground,display:"flex",flexDirection:"column",position:"relative",borderRadius:"12px 0 0 12px"},modalContentBody:{padding:"36px 42px 0px 42px",display:"flex",flexDirection:"column",maxWidth:400},shorterModalContentBody:{padding:"24px 42px 0px 42px",display:"flex",flexDirection:"column",maxWidth:400},billingIntervalBody:{minWidth:360,padding:"24px 42px 0 42px",display:"flex",flexDirection:"column",rowGap:24},sidebar:{backgroundColor:e.sidebarSecondaryBackground},modalContentSidebar:{flex:1,borderLeft:`1px solid ${e.lightDividerColor}`,padding:20,display:"flex",flexDirection:"column"}})),[])}const We=function(e){window.__c={n:"SpaceSubscriptionUpdateModal"};const{data:t}=e,i=(0,d.yK)((()=>({innerStyle:{borderRadius:10}})),[]),n=(0,l.VK)((()=>f.Z.state),[]);return t&&n.open&&(0,g.GJ)(t)?o()(S.Z,{innerStyle:i.innerStyle,requireOnline:!0,modalStore:f.Z,onDismiss:()=>{},render:()=>o()(Be,{data:t})}):null}},69653:(e,t,i)=>{i.d(t,{Lp:()=>u,rF:()=>m,cv:()=>g,VT:()=>y,Et:()=>f,Zr:()=>v,hr:()=>b});var n=i(480),o=i(24405),r=i(59054),a=i(52692),l=i(81886),d=i(54642),s=i(21115);function u(e){const{subscriptionTier:t,onlyShowAddOn:i,addOnFeature:n}=e;return[c({subscriptionTier:t,onlyShowAddOn:i}),p({addOnFeature:n})].filter(Boolean)}function c(e){const{subscriptionTier:t,onlyShowAddOn:i}=e;if(!i)return(0,l.K)(t)}function p(e){const{addOnFeature:t}=e;return t}function m(e){const{prices:t,quantity:i,promo:n}=e;return t.map((e=>e.getDiscountPerBillingInterval({quantity:i,promo:n}))).reduce(((e,t)=>e.plus(t)))}function g(e){const{prices:t,quantity:i,coupon:n}=e;return t.map((e=>e.getCostPerBillingInterval({quantity:i,coupon:n}))).reduce(((e,t)=>e.plus(t)))}function y(e){const{taxAmount:t,calculatingTax:i,currencyValue:n}=e,o=t&&!i?t:0;return new a.n(n,o)}function f(e,t){const i=Math.min(0,s.Et(e));return new a.n(t,-i)}function v(e){const t=(0,n.O7)(),[i]=(0,r.r5)((async()=>{if(!e)return;const i=await d.getPromoCode(t,{code:e.code});return"failed"!==i.type?i.data.promo:void 0}),[t,e]);return"resolved"===i.status?i.value:void 0}function b(){return(0,o.yK)((e=>({caption:{fontSize:12,color:e.mediumTextColor},captionContainer:{display:"flex",flexDirection:"column"},container:{marginTop:24},itemContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",lineHeight:1,minHeight:18},name:{fontSize:12,color:e.mediumTextColor},price:{fontSize:12,color:e.regularTextColor},credit:{fontSize:12,color:"#53A83F"},totalName:{fontSize:16,color:e.regularTextColor},totalPrice:{fontSize:20,lineHeight:"20px"}})),[])}}}]);