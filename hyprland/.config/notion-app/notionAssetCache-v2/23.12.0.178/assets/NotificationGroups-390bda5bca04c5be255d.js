"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6329],{84517:(t,e,o)=>{o.r(e),o.d(e,{Avatars:()=>H,default:()=>O});var i=o(23174),n=o.n(i),r=o(96486),a=o.n(r),l=o(67294),s=o(81954),c=o(24405),d=o(49085),u=o(21202),g=o(77420),p=o(19889),f=o(63143),v=o(17652),y=o(77907),b=o(68216),h=o(480),m=o(53397),w=o(5366),x=o(82990),C=o(64921),S=o(31278),M=o(76798),R=o(93963),k=o(22649);const _=(0,w.defineMessages)({open:{defaultMessage:"Open",id:"toggleButton.open"},close:{defaultMessage:"Close",id:"toggleButton.close"}});function z(t){window.__c={n:"ToggleButton"};const e=(0,h.Fy)(),o=(0,w.useIntl)(),i=(0,c.yK)((()=>{const o=t.color||"inherit",i="chevron"===t.icon?`rotateZ(${t.open?-180:0}deg)`:`rotateZ(${t.open?180:90}deg)`,n="chevron"===t.icon,r=n&&e.isMobile;return{button:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:28,height:28,borderRadius:"100%",...t.style},arrow:{width:r?14:n?12:"0.6875em",height:r?14:n?12:"0.6875em",transition:"transform 200ms ease-out",transform:i,fill:o,opacity:t.fill?1:.5}}}),[e.isMobile,t.color,t.fill,t.icon,t.open,t.style]),r=(0,l.useMemo)((()=>{switch(t.icon){case"chevron":return m.Z.chevronDownRoundedThick(i.arrow);case"triangle":default:return m.Z.triangle(i.arrow)}}),[t.icon,i.arrow]);return n()(C.Z,{ariaLabel:t.open?o.formatMessage(_.close):o.formatMessage(_.open),"aria-describedby":t["aria-describedby"],"aria-expanded":t.open,"aria-controls":t.open?t["aria-controls"]:void 0,style:i.button,onClick:t.onClick,onMouseDown:t.onMouseDown,disabled:t.disabled,allowShiftClick:!0,hovered:!0},void 0,t.tapArea&&n()("div",{style:{position:"absolute",opacity:0,width:t.tapArea.size,height:t.tapArea.size,top:-(t.tapArea.size-28)/2,left:-(t.tapArea.size-28)/2}}),r)}const A=function(t){window.__c={n:"CardCommentGroupTitle"};const{titledRecordStore:e,getRecordModel:o,notifications:i,isNotificationGroupExpanded:r,toggleNotificationGroup:a}=t,d=(0,s.VK)((()=>e.getModel()),[e]),u=(0,s.VK)((()=>null==d?void 0:d.getRenderIcon({getRecordModel:o})),[d,o]),g=(0,s.VK)((()=>i.length),[i]),p=(0,s.VK)((()=>i.filter((t=>{let{notification:e}=t;return!e.read})).length),[i]),f=(0,c.yK)((t=>({container:{display:"flex",justifyContent:"space-between",paddingLeft:16,paddingRight:16},icon:{...k.e9,verticalAlign:"unset"},recordTitle:{fontSize:12,fontWeight:x.Z.fontWeight.semibold,display:"inline"},updateCount:{color:t.mediumTextColor,fontSize:12},statusDotContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:18,width:16,opacity:p>0?1:0},toggleContainer:{display:"flex",justifyContent:"center",alignItems:"center"},toggleChevron:{color:t.lightIconColor}})),[p]);return d?n()("div",{style:f.container},void 0,n()("div",{style:{display:"flex"}},void 0,n()("div",{style:f.statusDotContainer},void 0,n()(R.z,{})),n()("div",{},void 0,n()("div",{style:f.updateCount},void 0,`${g} updates in`),n()("div",{},void 0,u&&l.createElement(l.Fragment,null,n()(S.Z,{disabled:!0,icon:u,isEmptyPage:!1,size:12,style:f.icon}),n()("span",{},void 0," ")),n()(M.Z,{store:e,style:f.recordTitle})))),n()("div",{style:f.toggleContainer},void 0,n()(z,{fill:!0,isSidebar:!0,icon:"chevron",open:r,onClick:a,color:f.toggleChevron.color}))):null};var V=o(15145),Z=o(6287),G=o(90468),K=o(29369),I=o(97880),T=o(57688),L=o(62820),N=o(84076),E=o(17022);function B(t){window.__c={n:"CommentGroupTitle"};const{titledRecordStore:e,getRecordModel:o,activity:i,tabArgs:r}=t,a=(0,s.VK)((()=>e.getModel()),[e]),d=(0,h.O7)(),g=(0,s.VK)((()=>null==a?void 0:a.getRenderIcon({getRecordModel:o})),[a,o]),p=(0,c.yK)((t=>({container:k.lS,icon:{...k.e9,verticalAlign:"unset"},recordTitle:{fontSize:12,color:t.mediumTextColor,...(0,k.TL)(void 0!==g)}})),[g]),f=(0,l.useCallback)((()=>{const t=e.table;switch(t){case u.iU:case Z.v:case G.bx:(0,E.V3)({environment:d,activity:i,...r});break;case K.e0:(0,E.dG)({environment:d,activity:i,...r}),T.hI({environment:d,teamStore:e,shouldScroll:!0}),L.Z.setState({...L.Z.state,open:!1});break;default:(0,I.t1)(t)}}),[i,d,r,e]),v=(0,s.VK)((()=>{if(a&&a.table!==K.e0)return a.getRenderUrl({getRecordModel:o,pageVisitSource:V.tY.Notification})}),[a,o]);return a?n()(N.Z,{href:v,onClick:f,external:!1,innerStyle:p.container,inline:!0,ignoreLocalHoverState:!0},void 0,g&&l.createElement(l.Fragment,null,n()(S.Z,{disabled:!0,icon:g,isEmptyPage:!1,size:12,style:p.icon}),n()("span",{},void 0," ")),n()(M.Z,{store:e,style:p.recordTitle})):null}const D=l.memo(B);var F=o(90097),$=o(70301),j=o(45653),P=o(13658);class U extends d.default{getInitialState(){return!1}}function W(t){window.__c={n:"NotificationGroup"};const{notifications:e,rootStore:o,source:i,tab:r,groupingVariant:a}=t,d=(0,s.qz)(void 0,U),g=(0,s.VK)((()=>d.state),[d]),p=(0,l.useCallback)((()=>d.setState(!d.state)),[d]),f=(0,s.VK)((()=>e.every((t=>{let{notification:e}=t;return e.read}))),[e]),v=(0,c.yK)((t=>({toggle:{color:t.lightIconColor},notificationGroup:{borderBottom:`1px solid ${t.regularDividerColor}`,paddingTop:16,backgroundColor:f?t.sidebarBackground:""},notificationGroupButton:{cursor:g?"default":"inherit"},card:{margin:12,width:"calc(100% - 24px)",height:"calc(100% - 12px)",backgroundColor:t.modalBackground,borderRadius:16,borderWidth:1,borderStyle:"solid",borderColor:"rgba(227, 226, 224, 0.5)",boxShadow:"0px 2px 4px 0px rgba(0, 0, 0, 0.04), 0px 0px 6px 0px rgba(0, 0, 0, 0.02)"}})),[g,f]),h=e[0].notification.navigable_block_id;if(void 0===h)return null;const m=b.G.createChildStore(o,{table:u.iU,id:h}),w=e.map(((o,i)=>{let{notification:r,activity:l}=o;const s={source:"notifications_tab",tab:t.tab,notification:r};return n()(y.LazyActivity,{activity:l,rootStore:t.rootStore,isLast:i===e.length-1||!g,tabArgs:s,useRedesignedIA:!0,groupingArgs:{groupingVariant:a,isNotificationGroupExpanded:g}},l.id)}));switch(a){case"control":return null;case"cards":return n()("div",{},void 0,n()(A,{titledRecordStore:m,getRecordModel:o.getRecordModel,activity:e[0].activity,tabArgs:{source:i,tab:r,notification:e[0].notification},notifications:e,isNotificationGroupExpanded:g,toggleNotificationGroup:p}),n()("div",{style:{position:"relative"}},void 0,w[0],w.length>1&&!g&&l.createElement(l.Fragment,null,n()("div",{style:{zIndex:-1,position:"absolute",top:4,left:4,...v.card}}),n()("div",{style:{zIndex:-2,position:"absolute",top:8,left:8,...v.card}}))),g&&w.splice(1));case"flat":default:return n()(C.Z,{ignoreLocalHoverState:g,onClick:p,style:v.notificationGroupButton},void 0,n()("section",{role:"feed",style:v.notificationGroup},void 0,n()("div",{style:{display:"flex",paddingLeft:16,paddingRight:16}},void 0,n()(D,{titledRecordStore:m,getRecordModel:o.getRecordModel,activity:e[0].activity,tabArgs:{source:i,tab:r,notification:e[0].notification}})),n()(P.Z,{visible:2,items:w,open:d})))}}function q(t){window.__c={n:"NotificationGroups"};const{notifications:e,rootStore:o,source:i,tab:r}=t,a=(0,s.VK)((()=>(0,v.yG)()),[]),c=(0,f.vM)(e,(t=>{let{notification:e}=t;const o=e.navigable_block_id;return"commented"!==e.type||void 0===o?e.id:o})),d=Array.from(c).map((t=>{let[e,l]=t;if(1===l.length){const{notification:t,activity:e}=l[0],a={source:i,tab:r,notification:t};return n()(y.LazyActivity,{activity:e,rootStore:o,isLast:!1,tabArgs:a,useRedesignedIA:!0},e.id)}return n()(W,{notifications:l,rootStore:o,source:i,tab:r,groupingVariant:a},`group-${l[0].activity.id}`)}));return l.createElement(l.Fragment,null,d)}function H(t){window.__c={n:"Avatars"};const{notifications:e,rootStore:o}=t,i=(0,s.VK)((()=>{const t=e.map((t=>{let{activity:e}=t;return e.edits?(0,F.P6)({edits:e.edits,rootStore:o}):[]})).flat();return a().uniqBy(t,(t=>t.id))}),[e,o]).slice(0,3);return n()("div",{style:{margin:"8px",position:"relative",height:"30px",width:"30px"}},void 0,i.map(((t,e)=>{let o,r;1===i.length?(o=5,r=5):2===i.length?(o=5+4*(2*e-1),r=5-4*(2*e-1)):(o=5+8*(e-1),r=5-8*(e-1));const a=i.length-e;return n()("div",{style:{position:"absolute",left:o,top:r,zIndex:a}},t.id,t.table===p.KJ&&n()(j.Z,{size:20,userValue:t}),t.table===g.cZ&&n()($.Z,{size:20,botValue:t}))})))}q.displayName="NotificationGroups";const O=q},93963:(t,e,o)=>{o.d(e,{z:()=>l});var i=o(23174),n=o.n(i),r=(o(67294),o(24405)),a=o(5366);function l(t){let{color:e,size:o,style:i}=t;window.__c={n:"StatusDot"};const l=(0,a.useIntl)(),s=(0,r.yK)((t=>({dot:{height:o||8,width:o||8,background:e||t.blueColor,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...i}})),[o,e,i]);return n()("div",{role:"img","aria-label":l.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:s.dot})}}}]);