"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5921,7994],{16444:(e,t,i)=>{i.r(t),i.d(t,{TimeSeries:()=>B,useTimeSeriesPalette:()=>L});var o=i(23174),n=i.n(o),a=i(41788),l=i(29223),r=i(33592),s=i(50953),d=i(92667),c=i(68414),p=i(98649),u=i(89163),g=i(42816),m=i(93382),y=i(70186),f=i(37495),v=i(67294),h=(i(57658),i(17126)),b=i(59730),k=i(63143);function M(e){if(void 0===e)return h.ou.utc();const t={zone:"utc"};return"number"==typeof e?h.ou.fromMillis(e,t):h.ou.fromISO(e,t)}function w(e,t){const i=t?M(t):h.ou.utc(),o=M(e??function(e){const{days:t,endDate:i,startDate:o}=e;if(t<=0)throw new b.p8("Days must be greater than 0");const n=i?M(i):h.ou.utc();if(!n.isValid)throw new b.p8(`endDate ${i} is in an invalid format`);const a=o?M(o).toMillis():0,l=n.minus({days:t-1}).toMillis();return Math.max(l,a)}({days:7,endDate:t}));if(!o.isValid)throw new b.p8(`startDate ${e} is in an invalid format`);if(!i.isValid)throw new b.p8(`endDate ${t} is in an invalid format`);if(o>i)throw new b.p8(`startDate ${e} => ${o.toISO()} is after endDate ${t} => ${i.toISO()}`);return{startTimestamp:o.toMillis(),endTimestamp:i.toMillis()}}var S=i(8848),T=i(7057),x=i(53877),Z=i(51454),C=i(13991),O=i(24405);const P=7,D=0,_=25,A=16;const B=(0,y.Z)((function(e){window.__c={n:"TimeSeriesWithTooltip"};const{width:t,height:i,layers:o,showTooltip:y,hideTooltip:h,tooltipData:b,tooltipTop:S=0,tooltipLeft:B=0,curveType:L="curveLinear",renderTooltipSubLabel:E}=e,R=(0,O.Fg)(),F=(0,v.useMemo)((()=>{let t;try{t=function(e,t){const{startTimestamp:i,endTimestamp:o}=w(e,t),n=[];for(var a=i;a<=o;)n.push(M(a).toISODate()),a+=k.A0;return n}(e.startDate,e.endDate)}catch(a){return[]}const i=(0,k.vM)(e.data,(e=>e.ds)),n=Object.fromEntries(o.map((e=>[e.key,0])));return t.map((e=>{const t=i.get(e);return{ds:e,values:t?t[0].values:n}}))}),[o,e.data,e.endDate,e.startDate]),N=(0,v.useMemo)((()=>Math.max(...F.flatMap((e=>o.map((t=>{let{key:i}=t;return e.values[i]})))))),[F,o]),I=(0,v.useMemo)((()=>{const e=Math.max(0,Math.floor(Math.log10(N)));return A+10+8*e}),[N]),V=(0,v.useMemo)((()=>F.length<5?D+24:D),[F.length]),$={domain:[0,N],range:[i-_,P]},U=(0,d.Z)($),W=F.map((e=>new Date(e.ds).valueOf())),z={domain:[Math.min(...W),Math.max(...W)],range:[I,t-V]},K=(0,d.Z)(z),[Y,H]=function(e,t){const i=e.range[1]-e.range[0],o=t.range[0]-t.range[1],n=e.domain[0],a=e.domain[1],l=a-n,r=t.domain[1];return[(0,v.useMemo)((()=>{if(l<6*k.A0)return Array.from({length:1+l/k.A0},((e,t)=>n+t*k.A0));const e=Math.floor(i/312*9),t=Math.max(1,Math.floor(l/e)),o=Math.ceil(t/k.A0)*k.A0;return Array.from({length:e},((e,t)=>n+(2*t+1)*o)).filter((e=>e<a))}),[i,l,n,a]),(0,v.useMemo)((()=>{const e=Math.floor(o/142*6),t=Math.max(1,Math.floor(r/e)+1);return Array.from({length:e},((e,i)=>(i+1)*t)).filter((e=>e<=r))}),[o,r])]}(z,$),j=(0,v.useMemo)((()=>(0,f.Z)((e=>new Date(e.ds).getTime())).center),[]),G=(0,v.useCallback)((e=>{const{x:t}=(0,s.Z)(e)||{x:0},i=K.invert(t),n=j(F,i),a=F[n],l=K(new Date(a.ds));y({tooltipData:a,tooltipLeft:l,tooltipTop:U(a.values[o[0].key])})}),[F,y,K,U,j,o]);return n()("div",{},void 0,n()("svg",{width:t,height:i},void 0,o.map((e=>{let{key:t,stroke:i,fill:o}=e;return n()(c.Z,{data:F,x:e=>K(new Date(e.ds).valueOf()),y:e=>U(e.values[t]),yScale:U,stroke:i,fill:o,curve:r[L]},t)})),n()(p.Z,{width:t,height:i,fill:"transparent",onTouchStart:G,onTouchMove:G,onMouseMove:G,onMouseLeave:h}),b&&n()("g",{},void 0,n()(u.Z,{from:{x:I,y:S},to:{x:B,y:S},stroke:R.lightIconColor,strokeWidth:1,pointerEvents:"none",strokeDasharray:"5,2"}),n()(u.Z,{from:{x:B,y:S},to:{x:B,y:i-_},stroke:R.lightIconColor,strokeWidth:1,pointerEvents:"none",strokeDasharray:"5,2"}),n()("circle",{cx:B,cy:S,r:5,fill:o[0].stroke,pointerEvents:"none"})),n()(a.Z,{left:I,scale:U,stroke:R.mediumIconColor,tickStroke:R.lightIconColor,tickLength:10,hideZero:!0,tickValues:H,tickFormat:e=>`${e}`,tickLabelProps:()=>({dx:"-0.25em",dy:"0.25em",fontSize:12,fill:R.regularTextColor,textAnchor:"end"})}),n()(l.Z,{top:i-_,scale:K,stroke:R.mediumIconColor,tickStroke:R.lightIconColor,tickValues:Y,tickLength:10,tickFormat:e=>(0,T.Yx)(e.valueOf(),"month_day",C.SP,"UTC"),tickLabelProps:()=>({fontSize:12,fill:R.regularTextColor,textAnchor:"middle"})})),b&&n()("div",{},void 0,n()(g.Z,{top:S-5,left:B-4,style:{...m.j,background:"#36352F",padding:6,borderRadius:3,color:"white",fontSize:12,boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.04), 0px 0px 2px rgba(0, 0, 0, 0.06), 0px 0px 1px rgba(0, 0, 0, 0.04)",zIndex:Z.YO}},void 0,n()("div",{style:{display:"flex",flexDirection:"column",gap:7}},void 0,n()("div",{},void 0,`On ${(0,T.Yx)(x.OQ.isoToUnixMs(b.ds,"UTC")??Date.now(),"medium",C.SP,"UTC")}`),o.map((e=>{let{key:t,stroke:i,renderLabel:o}=e;return n()("div",{},t,n()("div",{style:{display:"flex",gap:5,alignItems:"center"}},void 0,n()("div",{style:{background:i,borderRadius:3,width:12,height:12}}),n()("div",{},void 0,o(b.values[t]))),E&&E())}))))))}));function L(){const e=(0,O.Fg)();return{blueLayer:{stroke:e.blueColor,fill:"dark"===e.mode?e.accentColors.blue[300]:e.accentColors.blue[50]},yellowLayer:{stroke:S.FN.light.yellow[300],fill:"dark"===e.mode?e.accentColors.yellow[300]:e.accentColors.yellow[50]}}}},27386:(e,t,i)=>{i.d(t,{k:()=>c,Z:()=>u});var o=i(23174),n=i.n(o),a=(i(67294),i(83355)),l=i(34859),r=i(91754),s=i(61519),d=i(18647);function c(e){return e?18:60}class p extends a.Z{static renderDivider(){return n()(s.Z,{size:37})}renderComponent(){const{device:e}=this.environment,{children:t,controlRow:i,bannerText:o,controlRowPaddingTopBottom:a=16}=this.props,s=()=>e.isMobile?18:36;return this.props.disableScroller?n()("div",{style:{paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile)}},void 0,n()("div",{style:{paddingTop:s(),paddingBottom:s()}},void 0,t),i&&n()("div",{style:{paddingTop:a,paddingBottom:a,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`}},void 0,i)):n()("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:this.theme.cardContentBackground}},void 0,o&&n()(r.Z,{type:r.$.Blue,isMobile:!1},void 0,o),n()(d.Z,{type:l.Z.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile),paddingTop:o?15:s(),paddingBottom:o?22:s()}},void 0,t),i&&n()("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:c(e.isMobile),paddingRight:c(e.isMobile),paddingTop:a,paddingBottom:a,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`}},void 0,i))}}p.displayName="SettingBox";const u=p},55422:(e,t,i)=>{i.d(t,{Z:()=>B});var o=i(10434),n=i.n(o),a=i(23174),l=i.n(a),r=(i(57658),i(67294)),s=i(480),d=i(81954),c=i(24405),p=i(53397),u=i(97880),g=i(5366),m=i(61045),y=i(1865),f=i(11368),v=i(87279),h=i(23570),b=i(52275),k=i(31945),M=i(78140),w=i(28992),S=i(32163),T=i(63296),x=i(89728),Z=i(72495),C=i(24006),O=i(58032),P=i(64369),D=i(91718),_=i(27386),A=i(23189);function B(e){window.__c={n:"SettingsItem"};const{title:t,caption:i,captionStyle:o,isMobile:n,upsellOptions:a,type:p,shouldHighlight:u}=e,g=(0,s.O7)(),{paddingLeftCSS:v,paddingRightCSS:b}=(0,d.VK)((()=>g.WindowSizeStore.state),[g]),[k,M]=(0,r.useState)(!1),w=(0,r.useCallback)((()=>M(!0)),[M]),S=(0,r.useCallback)((()=>M(!1)),[M]),T=(0,r.useContext)(f.Ue),x=(0,r.useRef)(null);(0,r.useEffect)((()=>{u&&x.current&&m.bx({element:x.current,scrollers:{verticalScroller:null==T?void 0:T.verticalScroller},vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[u,x,null==T?void 0:T.verticalScroller]);const Z=(0,r.useMemo)((()=>{if(n){if("dropdown"===p)return{display:"flex",flexDirection:"column"};if("toggleToButton"===e.type&&e.isOn||"custom"===e.type&&!0===e.useFlexboxStyle)return{}}return{display:"flex",alignItems:"center",justifyContent:"space-between"}}),[n,p,e]),C=(0,c.yK)((t=>({container:{...Z,paddingLeft:n?v:void 0,paddingRight:n?b:void 0,cursor:k&&!e.disabled?"pointer":e.disabled?"not-allowed":"default",...u?{backgroundColor:t.buttonHoveredBackground,marginLeft:-1*(0,_.k)(n),marginRight:-1*(0,_.k)(n),paddingLeft:(0,_.k)(n),paddingRight:(0,_.k)(n),marginTop:-1*(0,h.f)(n)/2,marginBottom:-1*(0,h.f)(n)/2,paddingTop:(0,h.f)(n)/2,paddingBottom:(0,h.f)(n)/2}:{}},description:{display:"flex",flexDirection:"column",marginRight:"10%"},captionStyle:{...o},title:{display:"flex",flexDirection:"row"}})),[n,v,b,u,k,o,e.disabled,Z]),B="toggle"===e.type||"toggleToButton"===e.type||"custom"===e.type&&!e.disableSettingsItemClick,E=r.createElement("div",{ref:x,style:C.container,onClick:()=>{if(!(e.disabled||"custom"===e.type&&e.disableSettingsItemClick))return a&&a.shouldUpsell?y.y(g,{from:a.analyticsName,for:a.subscriptionTier}):void("toggle"===e.type?e.onToggle():"toggleToButton"===e.type?e.onClick():"custom"===e.type&&e.customButton&&r.isValidElement(e.customButton)&&e.customButton.props.onClick&&"function"==typeof e.customButton.props.onClick&&e.customButton.props.onClick())},onMouseEnter:B?w:void 0,onMouseLeave:B?S:void 0},l()("div",{style:C.description},void 0,l()(A.Z,{smallMarginBottom:!0,disabled:e.disabled,isCritical:e.isCritical},void 0,l()("div",{style:C.title},void 0,t,e.badge),a&&a.shouldUpsell&&l()(D.Z,{subscriptionTier:a.subscriptionTier,analyticsName:a.analyticsName,onClick:()=>y.y(g,{from:a.analyticsName,for:a.subscriptionTier}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}})),l()(P.Z,{style:C.captionStyle,isSmall:!0,isMultiline:!0},void 0,i)),r.createElement(L,e));return e.tooltipLabel?l()(O.Z,{placement:O.Z.Placement.Bottom,alignment:O.Z.Alignment.Center,disableTooltip:e.disableTooltip,renderTooltip:()=>e.tooltipLabel,render:e=>r.createElement("div",e,E)}):E}function L(e){return"toggle"===e.type?l()(C.Z,{on:e.isOn,disabled:e.disabled}):"dropdown"===e.type?r.createElement(E,e):"custom"===e.type?r.createElement(r.Fragment,null,e.customButton):"toggleToButton"===e.type?e.isOn?l()("div",{style:{marginTop:12}},void 0,l()(T.Z,{isLarge:!0,onClick:e.onClick,style:e.buttonStyle,disabled:e.disabled},void 0,e.buttonLabel)):l()(C.Z,{on:!1,onClick:e.onClick,disabled:e.disabled}):void(0,u.t1)(e)}function E(e){var t;window.__c={n:"Dropdown"};const{isMobile:i,title:o,upsellOptions:a,currentOption:s,options:d,info:u,onSelectOption:m,menuStyle:y}=e,f=null===(t=d.find((e=>{let{key:t}=e;return t===s})))||void 0===t?void 0:t.label,h=(0,c.yK)((e=>({button:{marginTop:12,marginBottom:4,marginRight:i?"auto":void 0,paddingLeft:i?12:8,paddingRight:i?12:8,height:i?44:28,border:i?`1px solid ${e.outlineButtonBorder}`:void 0},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[i]),T=Boolean(a&&a.shouldUpsell)||e.disabled;return l()(k.ZP,{popupType:i?k.Z4.SlideUp:k.Z4.Popup,placementToOrigin:k.pO.Right,renderOrigin:e=>r.createElement(x.Z,n()({},e,{isLarge:!0,style:{...h.button,opacity:T?.4:1},disabled:T}),f,p.Z.chevronDown(h.icon)),render:e=>{let t;t=i?{menuType:v.og.Modal,title:o,right:l()(g.FormattedMessage,{defaultMessage:"Done",id:"settingItem.buttonPopup.done.label"}),onClickRight:e.close}:{menuType:v.og.Popup,width:250,...y};const a=[{key:"settings-item-section",render:e=>r.createElement(Z.Z,e),items:d.map((t=>{let{key:o,label:a,caption:s}=t;return{key:o,action:()=>{m(o),e.close()},render:e=>r.createElement(b.Z,n()({},e,{title:a,caption:s,shouldWrapCaption:!0,right:f===a?l()("div",{style:{width:i?16:14}},void 0,p.Z.check()):void 0}))}}))}];if(u){const e=u.map((e=>{let{key:t,label:i}=e;return{key:t,action:()=>{},render:e=>r.createElement(w.Z,n()({},e,{shouldWrapCaption:!0,caption:i}))}}));a.push({key:"info-item-section",render:e=>r.createElement(Z.Z,n()({},e,{topBorder:!0})),items:e})}return r.createElement(M.Z,t,l()(S.Z,{type:S.i.Vertical,sections:a,initialFocus:void 0}))}})}},64536:(e,t,i)=>{i.r(t),i.d(t,{pageAnalyticsMenu:()=>Z,TopbarPageAnalyticsOptOutMenuStore:()=>C,TopbarPageAnalyticsOptOutMenu:()=>O,PageAnalyticsPageOptOut:()=>P});var o=i(23174),n=i.n(o),a=i(67294),l=i(480),r=i(81954),s=i(49085),d=i(53397),c=i(5366),p=i(62967),u=i(74647),g=i(97627),m=i(70183),y=i(33665),f=i(79315),v=i(7011),h=i(73420),b=i(44532),k=i(72495),M=i(42402),w=i(55422),S=i(40673);const T=(0,c.defineMessages)({pageAnalyticsName:{id:"action.pageAnalytics.name",defaultMessage:"Page analytics"},viewAnalyticsName:{id:"action.viewAnalytics.name",defaultMessage:"View analytics"},privacySettingsName:{id:"action.privacySettings.name",defaultMessage:"Privacy settings"}}),x=e=>{const t=e.blocks[0];if(!t)return!1;return(0,S.W2)({canEditPage:t.canEdit(),device:e.environment.device})},Z=(0,p.MV)({key:"page analytics menu",displayName:T.pageAnalyticsName,analyticsName:T.pageAnalyticsName.defaultMessage,validators:[m.DF],svg:d.Z.analyticsSearch,subActions:e=>[{key:"view analytics",render:e=>a.createElement(k.Z,e),actions:[(0,p.PH)({key:"view analytics",displayName:T.viewAnalyticsName,analyticsName:T.viewAnalyticsName.defaultMessage,svg:d.Z.analyticsSearch,validators:[x],closeParentMenu:!0,action:()=>{u.handleSidebarButtonClick(e.environment,e.blocks[0],v.gY.Updates,"more_menu"),v.ZP.setState({...v.ZP.state,currentSubTab:v.uF.Analytics})}}),(0,p.PH)({key:"privacy settings",displayName:T.privacySettingsName,analyticsName:T.privacySettingsName.defaultMessage,svg:d.Z.settings,validators:[],closeParentMenu:!0,action:e=>{C.setState({isOpen:!0,rect:e.originRect})}})]}]}),C=s.default.createValue({isOpen:!1,rect:void 0}),O=()=>{window.__c={n:"TopbarPageAnalyticsOptOutMenu"};const e=(0,l.O7)(),t=(0,r.VK)((()=>C.state.isOpen),[]),i=(0,r.VK)((()=>C.state.rect),[]),o=(0,r.VK)((()=>f.default.state.mainEditorCurrentBlockStore),[]);return o?n()(b.ZP,{popupType:e.device.isMobile?b.ZP.PopupType.SlideUp:b.ZP.PopupType.Popup,alignmentToOrigin:b.ZP.Alignment.Center,open:t,render:()=>n()("div",{style:{minWidth:360,padding:16}},void 0,n()(h.sg,{gap:16},void 0,n()("div",{style:{fontSize:16,fontWeight:500}},void 0,n()(c.FormattedMessage,{id:"TopbarPageAnalyticsOptOutMenu.heading",defaultMessage:"Privacy settings"})),n()(P,{store:o}))),originRect:i,onDismiss:()=>C.setState({isOpen:!1,rect:void 0})}):null};function P(e){window.__c={n:"PageAnalyticsPageOptOut"};const t=(0,l.O7)(),i=(0,r.VK)((()=>{const e=f.default.state.currentSpaceViewStore;return null==e?void 0:e.getSettings()}),[]),o=(0,r.VK)((()=>{const t=null==i?void 0:i.page_analytics_opt_out_list;return null==t?void 0:t.includes(e.store.id)}),[i,e.store.id]);return n()(w.Z,{type:"dropdown",currentOption:o?"do_not_record":"record",options:[{key:"record",label:n()(c.FormattedMessage,{id:"page_analytics.opt_out.record",defaultMessage:"Record"})},{key:"do_not_record",label:n()(c.FormattedMessage,{id:"page_analytics.opt_out.do_not_record",defaultMessage:"Don't record"})}],onSelectOption:i=>{"do_not_record"===i?g.kY(t,e.store.id):g.pu(t,e.store.id)},isMobile:t.device.isMobile,title:n()(c.FormattedMessage,{id:"page_analytics.opt_out.title",defaultMessage:"My view history"}),caption:n()(c.FormattedMessage,{id:"page_analytics.opt_out.caption",defaultMessage:"Page editors can see my view history for this page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>n()(M.Z,{external:!0,href:(0,y.UY)("guides.pageAnalytics")},void 0,e)}}),captionStyle:{maxWidth:270}})}},67579:(e,t,i)=>{i.d(t,{f:()=>k});var o=i(10434),n=i.n(o),a=i(23174),l=i.n(a),r=i(67294),s=i(24405),d=i(53397),c=i(73123),p=i(33929),u=i(87279),g=i(33338),m=i(52275),y=i(78140),f=i(32163),v=i(44532),h=i(72495),b=i(91642);function k(e){window.__c={n:"DateFilter"};const t=(0,s.yK)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:i,hideAllTime:o}=e,[a,k]=(0,r.useState)(!1),M=c.Hz.filter((e=>!o||"all_time"!==e)).map((t=>{const i=()=>{e.onChangeFilter(t),k(!1)};return{key:t,action:()=>{},render:()=>l()(m.Z,{focused:!1,onClick:i,title:p.default.formatMessage(c.Rh[t])})}})),w=l()(g.Z,{on:Boolean(i),wrapStyle:t.pillStyle,icon:d.Z.calendar({width:16,marginRight:6,fill:"currentColor"}),title:p.default.formatMessage(c.Rh[i]),onClick:()=>{k(!0)}}),S=[{key:"filters",items:M,render:e=>r.createElement(h.Z,n()({},e,{title:null,loading:!1}))}],T=l()(y.Z,{menuType:u.og.Popup,header:null},void 0,l()(f.Z,{type:f.i.Vertical,initialFocus:0,sections:S}));return l()(b.Z,{marginAfter:!1},void 0,l()(v.ZP,{popupType:v.ZP.PopupType.Popup,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Start,open:a,render:()=>T,onDismiss:()=>k(!1),keepFocus:!0,origin:w,preventScaleTransition:!0,style:t.popup}))}},23570:(e,t,i)=>{function o(e){return e?32:18}i.d(t,{f:()=>o})},35314:(e,t,i)=>{i.d(t,{e:()=>l});var o=i(67294),n=i(81954),a=i(77794);function l(){const[e,t]=(0,o.useState)(0),[i]=(0,o.useState)((()=>new a.E)),l=(0,o.createRef)();return(0,o.useEffect)((()=>{l.current&&i.observe(l.current)}),[l,i]),(0,n.VK)((()=>{e!==i.rect.state.width&&t(i.rect.state.width)}),[e,i.rect]),[l,e]}}}]);