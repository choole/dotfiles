"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7994],{16444:(e,t,o)=>{o.r(t),o.d(t,{TimeSeries:()=>$,useTimeSeriesPalette:()=>F});var r=o(23174),a=o.n(r),n=o(41788),i=o(29223),l=o(33592),s=o(50953),d=o(92667),u=o(68414),c=o(98649),m=o(89163),h=o(42816),f=o(93382),p=o(70186),v=o(37495),g=o(67294),k=(o(57658),o(17126)),y=o(59730),x=o(63143);function M(e){if(void 0===e)return k.ou.utc();const t={zone:"utc"};return"number"==typeof e?k.ou.fromMillis(e,t):k.ou.fromISO(e,t)}function w(e,t){const o=t?M(t):k.ou.utc(),r=M(e??function(e){const{days:t,endDate:o,startDate:r}=e;if(t<=0)throw new y.p8("Days must be greater than 0");const a=o?M(o):k.ou.utc();if(!a.isValid)throw new y.p8(`endDate ${o} is in an invalid format`);const n=r?M(r).toMillis():0,i=a.minus({days:t-1}).toMillis();return Math.max(i,n)}({days:7,endDate:t}));if(!r.isValid)throw new y.p8(`startDate ${e} is in an invalid format`);if(!o.isValid)throw new y.p8(`endDate ${t} is in an invalid format`);if(r>o)throw new y.p8(`startDate ${e} => ${r.toISO()} is after endDate ${t} => ${o.toISO()}`);return{startTimestamp:r.toMillis(),endTimestamp:o.toMillis()}}var D=o(8848),b=o(7057),T=o(53877),C=o(51454),S=o(13991),Z=o(24405);const I=7,L=0,A=25,O=16;const $=(0,p.Z)((function(e){window.__c={n:"TimeSeriesWithTooltip"};const{width:t,height:o,layers:r,showTooltip:p,hideTooltip:k,tooltipData:y,tooltipTop:D=0,tooltipLeft:$=0,curveType:F="curveLinear",renderTooltipSubLabel:z}=e,P=(0,Z.Fg)(),V=(0,g.useMemo)((()=>{let t;try{t=function(e,t){const{startTimestamp:o,endTimestamp:r}=w(e,t),a=[];for(var n=o;n<=r;)a.push(M(n).toISODate()),n+=x.A0;return a}(e.startDate,e.endDate)}catch(n){return[]}const o=(0,x.vM)(e.data,(e=>e.ds)),a=Object.fromEntries(r.map((e=>[e.key,0])));return t.map((e=>{const t=o.get(e);return{ds:e,values:t?t[0].values:a}}))}),[r,e.data,e.endDate,e.startDate]),_=(0,g.useMemo)((()=>Math.max(...V.flatMap((e=>r.map((t=>{let{key:o}=t;return e.values[o]})))))),[V,r]),E=(0,g.useMemo)((()=>{const e=Math.max(0,Math.floor(Math.log10(_)));return O+10+8*e}),[_]),U=(0,g.useMemo)((()=>V.length<5?L+24:L),[V.length]),W={domain:[0,_],range:[o-A,I]},Y=(0,d.Z)(W),j=V.map((e=>new Date(e.ds).valueOf())),R={domain:[Math.min(...j),Math.max(...j)],range:[E,t-U]},N=(0,d.Z)(R),[Q,q]=function(e,t){const o=e.range[1]-e.range[0],r=t.range[0]-t.range[1],a=e.domain[0],n=e.domain[1],i=n-a,l=t.domain[1];return[(0,g.useMemo)((()=>{if(i<6*x.A0)return Array.from({length:1+i/x.A0},((e,t)=>a+t*x.A0));const e=Math.floor(o/312*9),t=Math.max(1,Math.floor(i/e)),r=Math.ceil(t/x.A0)*x.A0;return Array.from({length:e},((e,t)=>a+(2*t+1)*r)).filter((e=>e<n))}),[o,i,a,n]),(0,g.useMemo)((()=>{const e=Math.floor(r/142*6),t=Math.max(1,Math.floor(l/e)+1);return Array.from({length:e},((e,o)=>(o+1)*t)).filter((e=>e<=l))}),[r,l])]}(R,W),B=(0,g.useMemo)((()=>(0,v.Z)((e=>new Date(e.ds).getTime())).center),[]),G=(0,g.useCallback)((e=>{const{x:t}=(0,s.Z)(e)||{x:0},o=N.invert(t),a=B(V,o),n=V[a],i=N(new Date(n.ds));p({tooltipData:n,tooltipLeft:i,tooltipTop:Y(n.values[r[0].key])})}),[V,p,N,Y,B,r]);return a()("div",{},void 0,a()("svg",{width:t,height:o},void 0,r.map((e=>{let{key:t,stroke:o,fill:r}=e;return a()(u.Z,{data:V,x:e=>N(new Date(e.ds).valueOf()),y:e=>Y(e.values[t]),yScale:Y,stroke:o,fill:r,curve:l[F]},t)})),a()(c.Z,{width:t,height:o,fill:"transparent",onTouchStart:G,onTouchMove:G,onMouseMove:G,onMouseLeave:k}),y&&a()("g",{},void 0,a()(m.Z,{from:{x:E,y:D},to:{x:$,y:D},stroke:P.lightIconColor,strokeWidth:1,pointerEvents:"none",strokeDasharray:"5,2"}),a()(m.Z,{from:{x:$,y:D},to:{x:$,y:o-A},stroke:P.lightIconColor,strokeWidth:1,pointerEvents:"none",strokeDasharray:"5,2"}),a()("circle",{cx:$,cy:D,r:5,fill:r[0].stroke,pointerEvents:"none"})),a()(n.Z,{left:E,scale:Y,stroke:P.mediumIconColor,tickStroke:P.lightIconColor,tickLength:10,hideZero:!0,tickValues:q,tickFormat:e=>`${e}`,tickLabelProps:()=>({dx:"-0.25em",dy:"0.25em",fontSize:12,fill:P.regularTextColor,textAnchor:"end"})}),a()(i.Z,{top:o-A,scale:N,stroke:P.mediumIconColor,tickStroke:P.lightIconColor,tickValues:Q,tickLength:10,tickFormat:e=>(0,b.Yx)(e.valueOf(),"month_day",S.SP,"UTC"),tickLabelProps:()=>({fontSize:12,fill:P.regularTextColor,textAnchor:"middle"})})),y&&a()("div",{},void 0,a()(h.Z,{top:D-5,left:$-4,style:{...f.j,background:"#36352F",padding:6,borderRadius:3,color:"white",fontSize:12,boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.04), 0px 0px 2px rgba(0, 0, 0, 0.06), 0px 0px 1px rgba(0, 0, 0, 0.04)",zIndex:C.YO}},void 0,a()("div",{style:{display:"flex",flexDirection:"column",gap:7}},void 0,a()("div",{},void 0,`On ${(0,b.Yx)(T.OQ.isoToUnixMs(y.ds,"UTC")??Date.now(),"medium",S.SP,"UTC")}`),r.map((e=>{let{key:t,stroke:o,renderLabel:r}=e;return a()("div",{},t,a()("div",{style:{display:"flex",gap:5,alignItems:"center"}},void 0,a()("div",{style:{background:o,borderRadius:3,width:12,height:12}}),a()("div",{},void 0,r(y.values[t]))),z&&z())}))))))}));function F(){const e=(0,Z.Fg)();return{blueLayer:{stroke:e.blueColor,fill:"dark"===e.mode?e.accentColors.blue[300]:e.accentColors.blue[50]},yellowLayer:{stroke:D.FN.light.yellow[300],fill:"dark"===e.mode?e.accentColors.yellow[300]:e.accentColors.yellow[50]}}}}}]);