"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6942],{24011:(e,t,s)=>{s.r(t),s.d(t,{default:()=>we});var i=s(10434),o=s.n(i),r=s(23174),n=s.n(r),a=s(67294),l=s(83355),d=s(13991),g=s(15145),c=s(8848),u=s(42875),h=s(53397),m=s(98459),p=s(89101),v=s(82990),f=s(5366),y=s(50906),S=s(32603),M=s(58985),P=s(6467),k=s(31304),b=s(5978),w=s(74647),C=s(29974),A=s(28040),B=s(70782),Z=s(39634),E=s(28020),x=s(33929),I=s(28125),F=s(26374),R=s(66430),T=s(77907),q=s(79315),N=s(88632),W=s(80641),L=s(55899),_=s(33759),O=s(89403),U=s(84075),D=s(12768),H=s(49085);class j extends H.default{getInitialState(){return{isCreatingSpace:!1}}}const G=j;var V=s(88923),z=s(97238),J=s(8675),Y=s(42922),Q=s(61519),K=s(36488),X=s(16354),$=s(84076),ee=s(63296),te=s(89728),se=s(31278),ie=s(64369),oe=s(36360),re=s(34986),ne=s(42402),ae=s(98205),le=s(12337),de=s(54642),ge=s(33954),ce=s(87279),ue=s(61766),he=s(1743),me=s(74194),pe=s(78140),ve=s(53953),fe=s(44532),ye=s(77137);const Se=(0,f.defineMessages)({requestAccessMessagePlaceholder:{defaultMessage:"Message (optional)",id:"requestAccessForm.messageInput.placeholder"}});function Me(){return n()(f.FormattedMessage,{defaultMessage:"Cancel",id:"requestAccessForm.cancelButton.label"})}class Pe extends l.Z{constructor(){super(...arguments),this.storeTypes={requestAttempt:H.default.createClass(0),message:H.default.createClass(void 0),buttonPopupStore:ue.Z},this.renderPopup=()=>this.isPhone?n()(pe.Z,{menuType:ce.og.Modal,whiteBackground:!0,title:n()(f.FormattedMessage,{id:"requestAccessForm.title.label",defaultMessage:"Request access"}),left:Me(),onClickLeft:this.handleCloseClicked,right:n()(f.FormattedMessage,{id:"requestAccessForm.mobileSend.label",defaultMessage:"Send"}),onClickRight:this.handleSendRequestClicked},void 0,n()(he.Z,{capture:!0},void 0,n()("div",{style:{display:"flex",flexDirection:"column",justifyContent:"stretch",alignItems:"stretch",width:"100%",height:"100%"}},void 0,n()(ye.Z,{request:this.stores.requestAttempt.state,performRequest:this.submitRequest,render:this.renderRequest})))):n()(he.Z,{capture:!0},void 0,n()("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evently",alignItems:"stretch",padding:"20px 28px 24px",width:"340px"}},void 0,n()(ye.Z,{request:this.stores.requestAttempt.state,performRequest:this.submitRequest,render:this.renderRequest}),n()(ee.Z,{onClick:this.handleCloseClicked},void 0,Me()))),this.renderRequest=(e,t,s)=>{const i=Boolean(0===this.stores.requestAttempt.state||s&&t&&t.error);return a.createElement(a.Fragment,null,!this.isPhone&&n()("div",{style:{fontSize:16,fontWeight:v.Z.fontWeight.semibold,marginBottom:16}},void 0,n()(f.FormattedMessage,{defaultMessage:"Request access",id:"requestAccessForm.sendRequestButton.title"})),n()(me.Z,{format:this.isPhone?me.Z.Format.Transparent:void 0,textarea:!0,value:this.stores.message.state||"",onChange:this.handleMessageChanged,disabled:!i,placeholder:this.props.intl.formatMessage(Se.requestAccessMessagePlaceholder),style:{...this.isPhone?{...Pe.mobileTextAreaStyle,padding:"16px"}:{...Pe.marginBottomStyle,marginBottom:16,padding:"8px 12px",alignItems:"flex-start"}}}),!this.isPhone&&n()(Y.Z,{isLarge:!0,disabled:!i,onClick:this.handleSendRequestClicked,style:Pe.marginBottomStyle},void 0,n()(f.FormattedMessage,{defaultMessage:"Send request",id:"requestAccessForm.sendRequestButton.label"})),this.renderError(t))},this.submitRequest=async e=>{if(0===e)return;const t=await de.requestAccess(this.environment,{type:"current-actor-to-block",block:this.props.block,message:this.stores.message.state});return"success"!==t.type?{error:(0,ge.wf)(this.props.intl,t)}:(y.dUJ(this.environment),this.stores.buttonPopupStore.reset(),{value:!0})},this.handleSendRequestClicked=()=>{this.stores.requestAttempt.update((e=>e+1))},this.handleMessageChanged=e=>{this.stores.message.setState(e.target.value)},this.handleOpenClicked=()=>this.stores.buttonPopupStore.setState({open:!0}),this.handleCloseClicked=()=>this.stores.buttonPopupStore.setState({open:!1})}renderComponent(){const e=this.stores.requestAttempt.state>0;return a.createElement(a.Fragment,null,n()(Y.Z,{isLarge:!0,disabled:e,onClick:this.handleOpenClicked},void 0,n()(f.FormattedMessage,e?{id:"fullPageError.requestAccessButton.requested",defaultMessage:"Requested access"}:{id:"fullPageError.requestAccessButton.label",defaultMessage:"Request access"})),this.isPhone?n()(fe.ZP,{popupType:fe.ZP.PopupType.SlideUp,open:this.stores.buttonPopupStore.state.open,render:this.renderPopup}):n()(ve.Z,{open:this.stores.buttonPopupStore.state.open,onDismiss:this.handleCloseClicked,render:this.renderPopup}))}renderError(e){if(e&&e.error)return n()("div",{style:{color:c.ZP.redWithAlpha(1),textAlign:"center",width:"100%"}},void 0,e.error)}get isPhone(){return this.environment.device.isPhone}}Pe.displayName="RequestAccessForm",Pe.marginBottomStyle={marginBottom:10},Pe.mobileTextAreaStyle={...Pe.marginBottomStyle,width:"100%",height:"100%",padding:10,alignItems:"top",borderRadius:0};const ke=(0,f.injectIntl)(Pe);class be extends l.Z{constructor(){super(...arguments),this.didPerformAction=!1,this.storeTypes={store:G,sudoModeStore:J.Z,inviteTargetsStore:L.ZP},this.handleHelpButtonClick=()=>{Z.j({environment:this.environment,from:"page_error"})},this.handleSwitchAccountClick=()=>{const{loggedInUserIds:e,id:t}=this.environment.currentUser;if(2===e.length){const s=e.filter((e=>e!==t))[0],{mainEditorCurrentBlockStore:i}=q.default.state;i&&B.f({environment:this.environment,newCurrentUserId:s,store:i})}},this.handleGoBackClick=()=>{const{currentUserRootStore:e,currentUserSettingsStore:t}=q.default.state;e&&t&&C.L5({environment:this.environment,userRootStore:e,userSettingsStore:t,pageVisitSource:g.tY.BackForward})},this.handleCreateAccountClick=async()=>{const{currentUserRootStore:e,currentUserStore:t}=q.default.state;e&&t&&(this.stores.store.setState({...this.stores.store.state,isCreatingSpace:!0}),await P.xN(this.environment),this.stores.store.setState({...this.stores.store.state,isCreatingSpace:!1}))},this.handleReturnToOnboarding=()=>{const e=D.default.state;e.isOnboarding?F.n0(e)?P.I1(this.environment,{type:"new-user",disableRedirectUrl:!0}):F.y7(e)?P.I1(this.environment,{type:"create-or-join",disableRedirectUrl:!0}):(D.default.reset(),b.navigate({environment:this.environment,url:p._j.root})):(D.default.reset(),b.navigate({environment:this.environment,url:p._j.root}))},this.handleContentClassificationProceed=()=>{const{mainEditorCurrentBlockStore:e}=q.default.state;e&&(W.Z.bypassPage(e.id),y.ux6(this.environment))}}willMount(){V.default.state.open&&k.v(V.default.state.presenceStore,this.environment),k.v(q.default.state.presenceStore,this.environment),w.cancelSidebarInitialRenderLog()}didMount(){if(super.didMount(),S.setInitialRenderCompleted(),this.environment.device.isElectron||this.environment.mobileNative){var e;const t=null===(e=this.props.publicPageData)||void 0===e?void 0:e.requireInterstitial;if(t){const e=t+window.location.hash;b.navigateToExternalURL({environment:this.environment,url:e}),b.back(this.environment)}}}willMountOrUpdate(){var e;A.i({environment:this.environment,sudoModeStore:this.stores.sudoModeStore,pageBlockId:null===(e=q.default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id})}renderComponent(){const{publicPageData:e}=this.props;if(!this.didPerformAction){if(N.Z.state.online){if(e&&"onboarding"===this.props.route.name)return this.renderWorkspaceNoAccess({data:e,source:"onboarding",canJoinSpace:!1});if(null!=e&&e.spaceName){var t;const{currentUserRootStore:s,mainEditorCurrentBlockStore:i}=q.default.state;if(e.requireInterstitial)return this.renderIncorrectDomainInterstitialBlock({href:e.requireInterstitial+window.location.hash,urlToDisplay:e.requireInterstitial});if(null!=i&&null!==(t=i.getModel())&&void 0!==t&&t.isNonverifiedContentClassification())return this.renderContentClassificationBlock();if(this.isLoggedIn()){if(!s||!s.isReady())return;const t=s.getSpaceViewStores();if(!t.every((e=>e.isReady())))return;return t.find((t=>t.getSpaceId()===e.spaceId))&&"page"===this.props.route.name?this.renderWorkspacePrivatePageNoAccess(e):e.canJoinSpace?"space"===this.props.route.name?(this.performJoinWorkspaceRedirect(e),null):this.renderWorkspaceNoAccess({data:e,source:"workspace",canJoinSpace:!0}):this.renderWorkspaceNoAccess({data:e,source:"workspace",canJoinSpace:!1})}return e.requireLogin,this.renderLoggedOutWorkspace(e)}return this.render404()}return this.renderOffline()}}renderOffline(){return this.logPageError("offline"),y.DCH(this.environment,{type:"page_error"}),n()("div",{style:this.getStyle()},void 0,n()("div",{style:this.getGreetingStyle()},void 0,n()(f.FormattedMessage,{id:"fullPageError.offlineError.message",defaultMessage:"Oops, you seem to be offline. Please go online to view this page."}),this.renderLoggedInFooter()))}renderContentClassificationBlock(){const e=this.isLoggedIn();return this.logPageError("content_classification_block"),n()("div",{style:this.getStyle()},void 0,n()(le.Z,{type:le.Z.Type.Unsafe}),n()("div",{style:this.getGreetingStyle()},void 0,n()(f.FormattedMessage,{id:"fullPageError.unsafePageError.title",defaultMessage:"This page has been flagged as unsafe"})),n()(ie.Z,{isSmall:!1,isSecondaryColor:!0,isMultiline:!0,style:{textAlign:"center",marginBottom:18,maxWidth:440}},void 0,n()(f.FormattedMessage,{id:"fullPageError.unsafePageError.message",defaultMessage:"This page may contain spam, phishing, illegal, or inappropriate content. If you received this link from an unknown source, we suggest you to close this tab. <proceedanywaylink>Proceed anyway</proceedanywaylink>",values:{proceedanywaylink:e=>n()(ne.Z,{onClick:this.handleContentClassificationProceed},void 0,e)}})),e&&this.renderNavigateButton("blue"),!e&&this.renderLoggedOutFooter())}renderIncorrectDomainInterstitialBlock(e){let{href:t,urlToDisplay:s}=e;return this.logPageError("incorrect_domain_interstitial_block"),n()("div",{style:{position:"relative",height:"100%",width:"100%"}},void 0,n()("div",{style:{...this.getStyle(),height:"100%"}},void 0,n()("div",{style:{...this.getGreetingStyle(),maxWidth:"240px"}},void 0,n()(f.FormattedMessage,{id:"fullPageError.publicDomainInterstitial.title",defaultMessage:"Continue to external site by following the link below"})),n()(ie.Z,{isSmall:!1,isSecondaryColor:!0,isMultiline:!0,style:{textAlign:"center",marginBottom:18,maxWidth:440}},void 0,n()(X.Z,{href:t,external:!1,style:{textDecoration:"underline",color:c.ZP.blue,overflowWrap:"anywhere"}},void 0,s))),n()("div",{style:{position:"fixed",width:"100%",bottom:0}},void 0,this.renderMinimalInterstitialFooter()))}renderWorkspaceNoAccess(e){const{data:t,source:s,canJoinSpace:i}=e;return"onboarding"!==s?(this.logPageError("team_no_access"),this.renderRequestAccessLoggedInPrivatePage(t)):(this.logPageError("onboarding_error"),n()("div",{style:this.getStyle()},void 0,this.environment.device.isElectron&&n()(oe.Z,{title:x.default.getIntl().formatMessage({defaultMessage:"No access",id:"errorPage.workspaceNoAccess.title"})}),n()("div",{},void 0,this.getNotionIcon()),n()("div",{style:this.getGreetingStyle()},void 0,n()(f.FormattedMessage,i?{id:"fullPageError.notInWorkspace.message",defaultMessage:"You are not in this workspace.",values:{workspaceName:n()("span",{style:be.headerBoldStyle},void 0,t.spaceName)}}:{id:"fullPageError.accessNotAllowed.message",defaultMessage:"You do not have access to this page.",values:{workspaceName:n()("span",{style:be.headerBoldStyle},void 0,t.spaceName)}})),this.renderNavigateButton("blue",i?t:void 0),this.renderLoggedInFooter()))}renderWorkspacePrivatePageNoAccess(e){return this.logPageError("team_page_no_access"),this.renderRequestAccessLoggedInPrivatePage(e)}getPrivatePageTitle(){const e=this.stores.sudoModeStore.state.privatePageStore;if(!this.stores.sudoModeStore.shouldUserHaveAccessToPrivatePageBlock()||!e)return;const t=e.getModel();if(!t)return;const s=t.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,u.r)(),intl:x.default.getIntl()}),i=t.getRenderIcon({getRecordModel:e.getRecordModel});return a.createElement(a.Fragment,null,i&&n()(se.Z,{isEmptyPage:!0,disabled:!0,icon:i,size:24,style:{display:"inline-block",marginRight:4}}),s&&n()("span",{},void 0,s))}renderChangingPermissionsHeading(){var e;const t=this.getPrivatePageTitle(),s=null===(e=q.default.state.currentSpaceStore)||void 0===e?void 0:e.getName();return n()("div",{style:{background:this.theme.cardBackground,borderRadius:3,padding:18,margin:"24px auto 0",width:400}},void 0,n()("div",{style:{...this.getGreetingStyle(),fontWeight:v.Z.fontWeight.semibold,marginBottom:6}},void 0,n()(f.FormattedMessage,t?{id:"fullPageError.changePermissions.titleWithPageName",defaultMessage:"Change permissions for {pageTitle}",values:{pageTitle:t}}:{id:"fullPageError.changePermissions.title",defaultMessage:"Change permissions for this page"})),n()(ie.Z,{isMultiline:!0,style:{textAlign:"center"}},void 0,n()(f.FormattedMessage,s?{id:"fullPageError.workspaceOwner.changePermissions.descriptionWithSpaceName",defaultMessage:"As a workspace owner for <b>{spaceName}</b>, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n()("b",{},void 0,t)},spaceName:s}}:{id:"fullPageError.workspaceOwner.changePermissions.description",defaultMessage:"As an owner of this workspace, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n()("b",{},void 0,t)}}})))}renderRequestAccessLoggedInPrivatePageHeading(e){const t=this.getPrivatePageTitle(),s=e.canRequestAccess;return a.createElement(a.Fragment,null,n()("div",{},void 0,this.getNotionIcon()),n()("div",{style:{...this.getGreetingStyle(),fontWeight:v.Z.fontWeight.semibold,marginBottom:6}},void 0,n()(f.FormattedMessage,s?t?{id:"fullPageError.canRequestAccess.titleWithPageName",defaultMessage:"No access to {pageTitle}",values:{pageTitle:t}}:{id:"fullPageError.canRequestAccess.title",defaultMessage:"No access to this page"}:{id:"fullPageError.noAccess.title",defaultMessage:"Page not found"})),n()("div",{style:{...this.getGreetingStyle(),color:this.theme.mediumTextColor,fontWeight:v.Z.fontWeight.regular,lineHeight:1.4}},void 0,n()(f.FormattedMessage,s?{id:"fullPageError.canRequestAccess.message",defaultMessage:"You can access this page if someone approves your request."}:{id:"fullPageError.cannotRequestAccess.message",defaultMessage:"Either this page doesn't exist or you don't have permission to access it."})))}renderRequestAccessLoggedInPrivatePage(e){const t=this.stores.sudoModeStore.shouldUserHaveAccessToPrivatePageBlock&&this.stores.sudoModeStore.shouldUserHaveAccessToPrivatePageBlock()&&this.stores.sudoModeStore.state.changePermissionsEnabled;return n()("div",{style:this.getStyle()},void 0,t?this.renderChangingPermissionsHeading():a.createElement(a.Fragment,null,this.renderRequestAccessLoggedInPrivatePageHeading(e),this.renderRequestAccessActions()),this.stores.sudoModeStore.shouldUserHaveAccessToPrivatePageBlock()?this.renderPageBlockPermissionsMenu():null,this.renderLoggedInFooter())}renderLoggedOutWorkspace(e){var t,s,i;const{device:r,WindowSizeStore:l}=this.environment,d=r.isMobile||r.isMobileBrowser||l.state.width<852,g=Boolean(null===(t=O.Z.getState())||void 0===t?void 0:t.shouldShowInvitationVersion),c=null===(s=O.Z.getState())||void 0===s?void 0:s.inviteeEmail,u=null===(i=O.Z.getState())||void 0===i?void 0:i.inviterName;return this.logPageError("team_login"),n()(K.Z,{capture:!0,render:t=>n()(re.Z,{analyticsName:"team_login",hideNavItems:!0,hideNotificationBanner:!0,hideFooter:!0},void 0,a.createElement("div",o()({style:this.getFrontBaseStyle()},t),this.renderTitle({isElectron:this.environment.device.isElectron,publicPageData:e,showInvitationVersion:g,inviterName:u}),g?n()("div",{style:this.getSubtitleStyle()},void 0,this.renderSubtitle(c)):null,n()(ae.Z,{emailLabelType:"email",style:be.loginStyle,emailPasscodePlaceholderType:g?"paste_code":"enter_code",emailInputAutoFocus:!0,from:"pageError",loginStore:_.Z,showInvitationVersion:g,isSignup:g,showMobileLayout:d}),r.isMobile&&!r.isMobileNative&&!g&&n()(a.Fragment,{},void 0,n()("div",{style:{height:1,width:"100vw",background:this.theme.regularDividerColor,marginTop:36,marginBottom:36}}),n()(Y.Z,{style:{width:280},isLarge:!0,onClick:()=>{b.openInNativeApp({url:window.location.href,environment:this.environment})}},void 0,r.isIOS?h.Z.appleLogo(be.storeIconStyle):h.Z.googlePlay(be.storeIconStyle),n()(f.FormattedMessage,{id:"fullPageError.openInMobileAppButton.label",defaultMessage:"Open in mobile app"})),n()($.Z,{href:r.isIOS?p._j.appStore:p._j.playStore,external:!0,innerStyle:{marginTop:16}},void 0,n()(ie.Z,{isSmall:!0,style:{textDecoration:"underline",fontSize:14}},void 0,n()(f.FormattedMessage,{id:"fullPageError.downloadMobileAppButton.label",defaultMessage:"Get mobile app"})))),this.renderLoggedOutFooter()))})}render404(){const{device:e}=this.environment,t=this.isLoggedIn();return this.logPageError("404"),n()("div",{},void 0,this.renderTopbar(),n()("div",{style:{...this.getFrontBaseStyle(),marginTop:e.isMobile?0:"12vh",justifyContent:"start"}},void 0,n()(le.Z,{type:le.Z.Type.NotFound}),n()("div",{style:this.getGreetingStyle()},void 0,n()(f.FormattedMessage,{id:"fullPageError.contentDoesNotExist.title",defaultMessage:"This content does not exist"})),!t&&this.renderLoggedOutFooter(),t&&this.renderNavigateButton("blue"),this.renderDivider(),n()(ie.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,n()(f.FormattedMessage,{id:"fullPageError.contentDoesNotExist.message",defaultMessage:"Having trouble? <helplink>Message support</helplink>",values:{helplink:e=>n()(ne.Z,{onClick:this.handleHelpButtonClick},void 0,e)}}))))}renderWorkspaceOwnerPermissionsMenu(){return this.stores.sudoModeStore.shouldUserHaveAccessToPrivatePageBlock()&&this.stores.sudoModeStore.state.privatePageStore&&!this.stores.sudoModeStore.state.changePermissionsEnabled?n()("div",{style:{background:this.theme.cardBackground,borderRadius:3,padding:18,margin:24,width:400}},void 0,n()(ie.Z,{isMultiline:!0,style:{textAlign:"center"}},void 0,n()(f.FormattedMessage,{id:"fullPageError.workspaceOwner.canChangePermissionsMessage",defaultMessage:"As a <b>workspace owner</b>, you can change the permissions of this page to add yourself or others. Any changes will appear in the audit log.",values:{b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n()("b",{},void 0,t)}}})),n()(ee.Z,{style:{fontWeight:v.Z.fontWeight.medium,justifyContent:"center",margin:"18px auto 12px"},onClick:()=>this.stores.sudoModeStore.setState({...this.stores.sudoModeStore.state,changePermissionsEnabled:!0})},void 0,h.Z.settingsSecurity({width:16,height:16,marginRight:6}),n()(f.FormattedMessage,{id:"fullPageError.workspaceOwner.canChangePermissionsMessageButton",defaultMessage:"Change permissions"}))):null}renderPageBlockPermissionsMenu(){return this.stores.sudoModeStore.shouldUserHaveAccessToPrivatePageBlock()&&this.stores.sudoModeStore.state.privatePageStore&&this.stores.sudoModeStore.state.changePermissionsEnabled?n()("div",{style:{textAlign:"left",borderRadius:4,background:this.theme.modalBackground,position:"relative",boxShadow:this.theme.mediumBoxShadow,width:470,margin:"24px auto"}},void 0,n()(T.LazyShareMenuContainer,{store:this.stores.sudoModeStore.state.privatePageStore,sudoModeStore:this.stores.sudoModeStore,inviteTargetsStore:this.stores.inviteTargetsStore,location:"no_access_page",onClose:()=>z.ZP.reset()})):null}renderDivider(){return n()(Q.Z,{size:48,innerStyle:{maxWidth:280}})}renderRequestAccessActions(){const{publicPageData:e}=this.props;if(!e)return this.renderNavigateButton("blue");if(!e.canRequestAccess)return this.renderNavigateButton("blue");const{mainEditorCurrentBlockStore:t}=q.default.state;return t?n()("div",{style:{display:"flex",flexDirection:"row"}},void 0,n()("div",{style:{marginTop:8}},void 0,n()(ke,{block:{id:t.id,spaceId:(0,m.CG)(t.pointer.spaceId)}})),n()("div",{style:{width:10,height:10}}),this.renderNavigateButton("white")):this.renderNavigateButton("blue")}renderNavigateButton(e,t){const{currentUserRootStore:s}=q.default.state,{isCreatingSpace:i}=this.stores.store.state,r=this.theme,l=t=>"blue"===e?a.createElement(Y.Z,t):a.createElement(ee.Z,o()({backgroundColor:r.whiteButtonBackground},t,{style:{fontWeight:v.Z.fontWeight.medium,height:"auto",...t.style}}));return t?n()(l,{isLarge:!0,style:{marginTop:8},onClick:()=>this.performJoinWorkspaceRedirect(t)},void 0,n()(f.FormattedMessage,{id:"fullPageError.joinSpaceButton.label",defaultMessage:"Join the space"})):"onboarding"===this.props.route.name?n()(l,{isLarge:!0,onClick:this.handleReturnToOnboarding},void 0,n()(f.FormattedMessage,{defaultMessage:"Back to onboarding",id:"fullPageError.returnToOnboardingButton.label"})):s&&0===s.getSpaceViewPointers().length||i?n()(l,{isLarge:!0,onClick:this.handleCreateAccountClick,disabled:i},void 0,n()(f.FormattedMessage,{id:"fullPageError.createOrJoinWorkspaceButton.label",defaultMessage:"Create or join a workspace"})):n()(l,{isLarge:!0,style:{marginTop:8},onClick:this.handleGoBackClick},void 0,n()(f.FormattedMessage,{id:"fullPageError.backToMyContentButton.label",defaultMessage:"Back to my content"}))}renderLoggedInFooter(){const e=(0,E.B7)(this.environment);let t;return t=U.transactionQueue.hasTasks()?n()(ie.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4}},void 0,n()(f.FormattedMessage,{id:"fullPageError.sendMessageForHelp.message",defaultMessage:"<sendmessagelink>Message support</sendmessagelink> for help.",values:{sendmessagelink:e=>n()(ne.Z,{onClick:this.handleHelpButtonClick},void 0,e)}})):2===this.environment.currentUser.loggedInUserIds.length?n()(ie.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4}},void 0,n()(f.FormattedMessage,{id:"fullPageError.wrongAccountRequestAccessSwitchAccount.message",defaultMessage:"You may need to <switchlink>switch accounts</switchlink> or <loginlink>log in</loginlink> with a different email.",values:{loginlink:e=>I.k(this.environment)?n()(ne.Z,{onClick:this.handleGoBackClick},void 0,e):n()(ne.Z,{href:p._j.logout,onClick:()=>M.logout(this.environment)},void 0,e),switchlink:e=>n()(ne.Z,{onClick:this.handleSwitchAccountClick},void 0,e)}})):n()(ie.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4}},void 0,n()(f.FormattedMessage,{id:"fullPageError.wrongAccountRequestAccess.message",defaultMessage:"You might need to <loginlink>log in</loginlink> with a different email.",values:{loginlink:e=>I.k(this.environment)?n()(ne.Z,{onClick:this.handleGoBackClick},void 0,e):n()(ne.Z,{href:p._j.logout,onClick:()=>M.logout(this.environment)},void 0,e)}})),n()("div",{style:{textAlign:"center"}},void 0,this.stores.sudoModeStore.shouldUserHaveAccessToPrivatePageBlock()?this.renderWorkspaceOwnerPermissionsMenu():this.renderDivider(),n()(ie.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4}},void 0,n()(f.FormattedMessage,{id:"fullPageError.wrongLoggedInUserError.message",defaultMessage:"You're currently logged in as {currentlyLoggedInUser}",values:{currentlyLoggedInUser:n()("span",{style:{color:this.theme.regularTextColor}},void 0,null==e?void 0:e.getEmail())}})),t)}renderTitle(e){let{isElectron:t,publicPageData:s,showInvitationVersion:i,inviterName:o}=e;return a.createElement(a.Fragment,null,t&&n()(oe.Z,{title:x.default.getIntl().formatMessage({defaultMessage:"Log in",id:"errorPage.loggedOutWorkspace.title"})}),i?n()("div",{style:{fontSize:28,fontWeight:700,maxWidth:358,letterSpacing:.364,lineHeight:1.2,textAlign:"center",fontFamily:v.Z.getCompositeFontFamily(d.SP).sans}},void 0,n()("div",{},void 0,n()(f.FormattedMessage,o?{id:"signupPage.title.showInvitationVersion",defaultMessage:"Verify your email to accept {inviter_name}'s invite",values:{inviter_name:o}}:{id:"signupPage.title.showInvitationVersion.noInviterName",defaultMessage:"Verify your email to accept the invite"}))):a.createElement(a.Fragment,null,n()(le.Z,{type:le.Z.Type.NoAccess,publicPageData:s}),n()("div",{style:this.getGreetingStyle()},void 0,n()(f.FormattedMessage,{id:"fullPageError.loggedOut.message",defaultMessage:"Welcome to {workspaceName} on Notion.",values:{workspaceName:n()("span",{style:be.headerBoldStyle},void 0,s.spaceName)}}))))}renderSubtitle(e){return e?n()(f.FormattedMessage,{id:"signupPage.subtitle.invitationVersion",defaultMessage:"Please check {invitee_email} for your temporary login code.",values:{invitee_email:n()("b",{},void 0,e)}}):null}getSubtitleStyle(){return{fontSize:"18px",fontWeight:400,width:"100%",maxWidth:358,textAlign:"center",color:"#535353",lineHeight:"145.34%",opacity:.78,marginBottom:24}}renderMinimalInterstitialFooter(){return n()("div",{style:be.loggedOutFooterWrapStyle},void 0,n()(ie.Z,{isSmall:!0,isSecondaryColor:!0,isMultiline:!1,style:{textAlign:"center",marginBottom:18,maxWidth:440}},void 0,n()("div",{style:{display:"flex"}},void 0,n()(f.FormattedMessage,{id:"fullPageError.somethingWrong.label",defaultMessage:"Something wrong?"}),n()(X.Z,{onClick:this.handleHelpButtonClick,style:{textDecoration:"underline",paddingLeft:"4px"}},void 0,n()(f.FormattedMessage,{id:"fullPageError.reportAProblem.label",defaultMessage:"Report a problem"})))))}renderLoggedOutFooter(){return n()("div",{style:be.loggedOutFooterWrapStyle},void 0,n()(X.Z,{href:p.AR.product,external:!0},void 0,n()(te.Z,{isGray:!0},void 0,h.Z.notionLogo({width:16,height:16,marginRight:8}),n()(f.FormattedMessage,{id:"fullPageError.whatIsNotionButton.label",defaultMessage:"What is Notion?"}))),n()(te.Z,{onClick:this.handleHelpButtonClick,style:{marginLeft:4},isGray:!0},void 0,n()(f.FormattedMessage,{id:"fullPageError.sendMessageButton.label",defaultMessage:"Message support"})),n()(X.Z,{href:p._j.termsAndPrivacy,external:!0,style:{marginLeft:4}},void 0,n()(te.Z,{isGray:!0},void 0,n()(f.FormattedMessage,{id:"fullPageError.termsAndPrivacyButton.label",defaultMessage:"Terms"}))))}renderTopbar(){const{isMobile:e}=this.environment.device;return n()("div",{style:{display:"flex",alignItems:"center",maxWidth:1300,height:80,paddingLeft:20,paddingRight:20}},void 0,h.Z.notionLogoStroked({width:e?28:30,height:e?28:30,marginRight:10,flexShrink:0}),n()("div",{style:{fontWeight:v.Z.fontWeight.medium,fontSize:16}},void 0,"Notion"))}isLoggedIn(){return!!this.environment.currentUser.id}performJoinWorkspaceRedirect(e){this.didPerformAction=!0;const{currentUserRootStore:t,currentUserSettingsStore:s}=q.default.state;if(t&&s&&e.spaceId){const i=e.spaceId;C.j({environment:this.environment,userRootStore:t,spaceId:i,navigate:!0,analyticsFrom:"page_error",userSettingsStore:s})}}logPageError(e){y.AMz(this.environment,{type:e,did_prefetch_spaces:R._D})}getStyle(){const{device:e}=this.environment;return{width:"100vw",paddingLeft:e.isMobile?16:30,paddingRight:e.isMobile?16:30,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}getFrontBaseStyle(e){const{device:t}=this.environment;return{width:"100vw",paddingLeft:t.isMobile?16:30,paddingRight:t.isMobile?16:30,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",paddingTop:t.isTablet?"20vh":e?0:"12vh"}}getGreetingStyle(){const{device:e}=this.environment;return{fontSize:e.isMobile?18:20,marginBottom:10,textAlign:"center",color:this.theme.regularTextColor,fontWeight:500,maxWidth:350}}getNotionIcon(){return h.Z.notionLogoStroked({width:50,height:50,marginBottom:16})}}be.displayName="PageError",be.headerBoldStyle={fontWeight:v.Z.fontWeight.bold},be.loginStyle={maxWidth:280},be.storeIconStyle={width:14,height:14,marginRight:6,flexShrink:0},be.loggedOutFooterWrapStyle={display:"flex",justifyContent:"center",marginBottom:16,marginTop:16,flexWrap:"wrap"};const we=be}}]);